import{u as rs,a as ls,r as m,j as e,O as is,L as os,b as cs,X as ds,K as ms,S as Gt,B as xs,c as hs,V as Ve,F as _t,A as us,U as Dt,d as ps,e as Pt,Z as dt,R as $t,f as gs,C as fs,T as gt,g as bs,H as ys,h as Bt,i as ws,k as js,l as vs,m as Ns,P as mt,n as Ss,o as ks,p as Ts,q as Ye,s as Es,t as Cs,v as As,w as Ms,x as Is,y as Rs,z as Se,D as Ls}from"./vendor_react-CT_-0Q0D.js";import{G as _e,T as q,M as Os}from"./vendor_ai-CSRnzdR-.js";import"./vendor-DnC4bF5A.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const Gs=({activeCategory:t,onCategoryChange:n})=>{const s=rs(),a=ls(),[r,i]=m.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);m.useEffect(()=>{const h=window.document.documentElement;r?(h.classList.add("dark"),localStorage.setItem("theme","dark")):(h.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const c=()=>{i(!r)},d=typeof window<"u"&&window.history.length>1,o=typeof window<"u"&&a.pathname==="/"&&!d,x=["All","Game","MBTI"],p={All:"ì „ì²´",Game:"ê²Œì„",MBTI:"MBTI"};return e.jsx("header",{className:"sticky top-0 z-10",style:{background:"linear-gradient(90deg, #a8d8a8 0%, #a8d4e8 100%)"},children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"py-6 flex justify-between items-center",role:"banner",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}),e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-md",children:"Website Builder"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"í…Œë§ˆ ì „í™˜",children:r?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})]}),e.jsxs("nav",{"aria-label":"ì¹´í…Œê³ ë¦¬ ë„¤ë¹„ê²Œì´ì…˜",className:"flex items-center border-t border-white border-opacity-20",children:[e.jsx("button",{onClick:()=>s(o?"/":-1),"aria-label":o?"í™ˆìœ¼ë¡œ ì´ë™":"ë’¤ë¡œê°€ê¸°",title:o?"í™ˆìœ¼ë¡œ ì´ë™":"ë’¤ë¡œê°€ê¸°",className:"p-2 mx-2 rounded-xl text-white hover:bg-white hover:bg-opacity-20 transition-colors",children:o?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9.5L12 4l9 5.5V21a1 1 0 0 1-1 1h-6v-6H10v6H4a1 1 0 0 1-1-1V9.5z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex-1 flex",children:x.map(h=>e.jsx("button",{onClick:()=>n(h),"aria-current":t===h?"page":void 0,className:`px-4 py-3 text-sm font-medium transition-all duration-200 rounded-t-xl ${t===h?"bg-white bg-opacity-30 text-white border-b-4 border-white":"text-white text-opacity-80 hover:text-opacity-100"}`,children:p[h]},h))})]})]})})},_s=()=>e.jsx("footer",{className:"mt-20 rounded-t-3xl",style:{background:"linear-gradient(90deg, #a8d4e8 0%, #a8d8a8 100%)"},children:e.jsxs("div",{className:"container mx-auto px-4 py-10 text-center text-white",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Â© ",new Date().getFullYear()," Website Builder. All rights reserved."]}),e.jsx("p",{className:"text-xs mt-3 text-white text-opacity-90",children:"With âœ¨ Ghibli Charm âœ¨"})]})}),Ds=()=>{const[t,n]=m.useState("All"),[s,a]=m.useState(!1);return m.useEffect(()=>{const r=()=>{const i=window.location.pathname.includes("/gacha")||window.location.pathname.includes("/click_war")||window.location.pathname.includes("/snake_game")||window.location.pathname.includes("/last_night")||window.location.pathname.includes("/mordern")||window.location.pathname.includes("/word")||window.location.pathname.includes("/word2")||window.location.pathname.includes("/friend")||window.location.pathname.includes("/math")||window.location.pathname.includes("/AI_voca")||window.location.pathname.includes("/myCard")||window.location.pathname.includes("/DilemmaSimulator");a(i),i?document.body.style.overflow="hidden":document.body.style.overflow=""};return window.addEventListener("popstate",r),r(),()=>{window.removeEventListener("popstate",r),document.body.style.overflow=""}},[]),e.jsxs("div",{className:"flex flex-col min-h-screen transition-colors duration-300",style:{position:s?"fixed":"relative",width:"100%",height:s?"100vh":"auto",overflow:s?"hidden":"auto"},children:[!s&&e.jsx(Gs,{activeCategory:t,onCategoryChange:n}),e.jsx("main",{className:"flex-grow",style:{width:"100%"},children:e.jsx(is,{context:{activeCategory:t,setActiveCategory:n}})}),!s&&e.jsx(_s,{})]})},Ps=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),$s=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Bs=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),ft=({website:t,onDelete:n})=>{const s=r=>{r.preventDefault(),r.stopPropagation(),n(t.id)},a=r=>{r.preventDefault(),r.stopPropagation()};return e.jsxs("div",{className:"rounded-3xl shadow-lg overflow-hidden transform hover:-translate-y-3 transition-all duration-300 ease-in-out flex flex-col",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(245,230,211,0.9) 100%)",border:"2px solid #d4c5b9"},children:[e.jsx("img",{src:t.thumbnailUrl,alt:t.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#4a4a4a"},children:t.name}),e.jsx("p",{className:"flex-grow mb-6",style:{color:"#6b6b6b"},children:t.description}),e.jsxs("div",{className:"mt-auto flex justify-end gap-3",children:[e.jsx("button",{className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Visit site",style:{color:"#a8d8a8"},children:e.jsx(Bs,{})}),e.jsx("button",{onClick:a,className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Edit site",style:{color:"#a8d4e8"},children:e.jsx(Ps,{})}),e.jsx("button",{onClick:s,className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Delete site",style:{color:"#e8b4a8"},children:e.jsx($s,{})})]})]})]})},Us=({website:t,onDelete:n})=>t.path?e.jsx(os,{to:t.path,className:"block hover:scale-[1.01] transition-transform duration-150",children:e.jsx(ft,{website:t,onDelete:n})}):e.jsx(ft,{website:t,onDelete:n}),Fs=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Hs=({isOpen:t,onClose:n,onCreate:s})=>{const[a,r]=m.useState(""),[i,c]=m.useState(""),[d,o]=m.useState("Game");m.useEffect(()=>{t&&(r(""),c(""),o("Game"))},[t]);const x=p=>{p.preventDefault(),a.trim()&&i.trim()&&s({name:a,description:i,category:d})};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex justify-center items-center p-4",onClick:n,children:[e.jsxs("div",{className:"rounded-3xl shadow-2xl p-8 w-full max-w-md transform transition-all duration-300 ease-in-out",onClick:p=>p.stopPropagation(),style:{background:"linear-gradient(135deg, #fefaf0 0%, #f5e6d3 100%)",border:"3px solid #d4c5b9",animation:"fade-in-scale 0.3s forwards"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#4a4a4a"},children:"âœ¨ Create New Website"}),e.jsx("button",{onClick:n,className:"p-2 rounded-full transition-colors","aria-label":"Close modal",style:{color:"#a8d4e8"},children:e.jsx(Fs,{})})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"website-name",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Website Name"}),e.jsx("input",{type:"text",id:"website-name",value:a,onChange:p=>r(p.target.value),className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none focus:ring-4",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a",focusRingColor:"rgba(168, 216, 168, 0.3)"},placeholder:"e.g., My Awesome Project",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"website-description",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Description"}),e.jsx("textarea",{id:"website-description",value:i,onChange:p=>c(p.target.value),rows:3,className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none focus:ring-4",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a"},placeholder:"A brief description of what your website is about.",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"website-category",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Category"}),e.jsxs("select",{id:"website-category",value:d,onChange:p=>o(p.target.value),className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a"},children:[e.jsx("option",{value:"Game",children:"ê²Œì„"}),e.jsx("option",{value:"MBTI",children:"MBTI"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-2xl font-medium transition-all hover:shadow-md",style:{background:"#f5d5b8",color:"#4a4a4a",border:"2px solid #d4c5b9"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white font-bold rounded-2xl transition-all hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},disabled:!a.trim()||!i.trim(),children:"Create Site"})]})]})]}),e.jsx("style",{children:`
        @keyframes fade-in-scale {
          from {
            transform: scale(0.95);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]}):null},bt=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),qs=()=>{const{activeCategory:t,setActiveCategory:n}=cs(),[s,a]=m.useState([{id:1,name:"DilemmaSimulator",description:"A professional portfolio showcasing my projects and skills in software development.",thumbnailUrl:"https://picsum.photos/seed/portfolio/600/400",category:"MBTI",path:"/DilemmaSimulator"},{id:2,name:"card",description:"A fordddddscuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/myCard"},{id:3,name:"gacha",description:"A forum for gamerjjjjjjs to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/gacha"},{id:4,name:"last night",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/last_night"},{id:5,name:"mordern",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/mordern"},{id:6,name:"word",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/word"},{id:7,name:"word2",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/word2"},{id:8,name:"click war",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/click_war"},{id:9,name:"friend",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/friend"},{id:10,name:"math",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/math"},{id:11,name:"AI_voca",description:"A forum for gaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/AI_voca"},{id:12,name:"snake_game",description:"play snake game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/snake_game"},,{id:13,name:"trdder_coin",description:"play dlab game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"mbti",path:"/trdder_coin"},{id:13,name:"Dlab",description:"play dlab game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"mbti",path:"/Dlab"}]),[r,i]=m.useState(!1),c=m.useCallback(x=>{a(p=>[...p,{...x,id:Date.now(),thumbnailUrl:`https://picsum.photos/seed/${Date.now()}/600/400`,path:`/${x.name.toLowerCase().replace(/\s+/g,"-")}`}]),i(!1)},[]),d=m.useCallback(x=>{a(p=>p.filter(h=>h.id!==x))},[]),o=m.useMemo(()=>t==="All"?s:s.filter(x=>x.category===t),[s,t]);return e.jsxs("div",{className:"container mx-auto p-4 md:p-8 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold",style:{color:"#4a4a4a",textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"âœ¨ My Sites âœ¨"}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 font-bold py-3 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-200 text-white",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:[e.jsx(bt,{}),"New Site"]})]}),o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(x=>e.jsx(Us,{website:x,onDelete:d},x.id))}):e.jsx("div",{className:"text-center py-16 px-6 rounded-3xl shadow-lg",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(245,230,211,0.9) 100%)",border:"2px solid #d4c5b9"},children:s.length===0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4",style:{color:"#4a4a4a"},children:"No Websites Yet! ğŸŒ¸"}),e.jsx("p",{className:"mb-6",style:{color:"#6b6b6b"},children:'It looks a bit empty here. Click the "New Site" button to start your first project.'}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-2 text-white font-bold py-3 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-200",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:[e.jsx(bt,{}),"Create Your First Site"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",style:{color:"#4a4a4a"},children:"No Websites in this Category"}),e.jsxs("p",{style:{color:"#6b6b6b"},children:['There are no sites matching the category "',t,'".']})]})}),e.jsx(Hs,{isOpen:r,onClose:()=>i(!1),onCreate:c})]})},Ws={start:{title:"ì—„ë§ˆ í¸? ì•„ë¹  í¸?",description:"ë”œë ˆë§ˆë¡œ ì¸í•œ ê²°ê³¼ë¥¼ ì°¸í˜¹í•˜ê²Œ ë³´ì—¬ì¤„ ì˜ˆì •",isStart:!0,choices:[{text:"ì—„ë§ˆ í¸",nextScene:"momRouteStart",color:"red"},{text:"ì•„ë¹  í¸",nextScene:"dadRouteStart",color:"blue"}]},momRouteStart:{character:"ì•„ë¹ ",dialogue:"ê·¸ë˜? ë„ˆ ì—„ë§ˆ í¸ì´ì•¼? ê·¸ëŸ¼ ì•ìœ¼ë¡œ ê²Œì„ì€ ì—†ë‹¤.",choices:[{text:"ë§ë¡œ ì„¤ë“í•˜ê¸°",nextScene:"momRoute_persuade"},{text:"ëª°ë˜ ê²Œì„í•˜ê¸°",nextScene:"momRoute_sneak"}]},momRoute_persuade:{character:"ì•„ë¹ ",dialogue:"ì‹œë„ëŸ½ë‹¤. ë‹¹ë¶„ê°„ ë„ˆëŠ” ê³µë¶€ ë¨¼ì €ë‹¤.",description:"ì•„ë¹ ê°€ ê²Œì„ê¸° ì „ì›ì„ ë½‘ê³  ìˆ¨ê²¨ë²„ë¦°ë‹¤.",choices:[{text:"ê²Œì„ê¸° ì°¾ê¸°",nextScene:"momRoute_findGame"},{text:"ìˆœìˆœíˆ ë”°ë¥´ê¸°",nextScene:"momRoute_obey"}]},momRoute_sneak:{character:"ë‚˜",dialogue:"ì•„ë¹ ê°€ ì ë“¤ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ëª°ë˜ ê²Œì„ì„ í–ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒ ë‚  ì•„ì¹¨, ì•„ë¹ ì—ê²Œ ë“¤í‚¤ê³  ë§ì•˜ë‹¤.",description:"ì•„ë¹ ê°€ í™”ë¥¼ ë‚´ë©° íœ´ëŒ€í°ì„ ì••ìˆ˜í–ˆë‹¤.",choices:[{text:"ë¯¸ì•ˆí•˜ë‹¤ê³  ë§í•˜ê¸°",nextScene:"momRoute_apologize"},{text:"ë°˜í•­í•˜ê¸°",nextScene:"momRoute_rebel"}]},momRoute_findGame:{character:"ë‚˜",dialogue:"ì•„ë¹ ê°€ ê²Œì„ê¸°ë¥¼ ì–´ë””ì— ìˆ¨ê²¼ì„ê¹Œ?",description:"ë°©, ê±°ì‹¤, ì°¨ ì•ˆì„ ë’¤ì ¸ë³´ì•˜ì§€ë§Œ ì°¾ì„ ìˆ˜ ì—†ì—ˆë‹¤. ê²°êµ­ ì•„ë¹ ì—ê²Œ ê²Œì„ê¸°ë¥¼ ì°¾ìœ¼ë ¤ í•œ ê²ƒì„ ë“¤í‚¤ê³  íœ´ëŒ€í°ë„ ì••ìˆ˜ë‹¹í–ˆë‹¤.",choices:[{text:"ë¯¸ì•ˆí•˜ë‹¤ê³  ë§í•˜ê¸°",nextScene:"momRoute_apologize"},{text:"ë°˜í•­í•˜ê¸°",nextScene:"momRoute_rebel"}]},momRoute_obey:{isEnding:!0,endingTitle:"í˜„ëª…í•œ íƒ€í˜‘ ì—”ë”©",dialogue:"ë‚˜ëŠ” ì•„ë¹ ì˜ ë§ì„ ë”°ë¥´ê¸°ë¡œ í–ˆë‹¤. ê²Œì„ ì—†ëŠ” ì‚¶ì€ ì§€ë£¨í–ˆì§€ë§Œ, ë” í° ê°ˆë“±ì€ í”¼í•  ìˆ˜ ìˆì—ˆë‹¤.",description:"ì‹œê°„ì´ í˜ëŸ¬ ì•„ë¹ ì˜ í™”ê°€ ëˆ„ê·¸ëŸ¬ì¡Œê³ , ìš°ë¦¬ëŠ” ê²Œì„ ì‹œê°„ì„ ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ íƒ€í˜‘í–ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},momRoute_apologize:{isEnding:!0,endingTitle:"ê²Œì„ ìƒì‹¤ ì—”ë”©",dialogue:"ì˜ëª»í–ˆì–´ìš”... ë‹¤ì‹œëŠ” ì•ˆ ê·¸ëŸ´ê²Œìš”.",description:"ë‚˜ì˜ ì‚¬ê³¼ì— ì•„ë¹ ì˜ ë§ˆìŒë„ ì¡°ê¸ˆì€ ëˆ„ê·¸ëŸ¬ì¡Œë‹¤. íœ´ëŒ€í°ì€ ëŒë ¤ë°›ì•˜ì§€ë§Œ, ê²Œì„ê¸°ëŠ” ì˜ì˜ ëŒì•„ì˜¤ì§€ ì•Šì•˜ë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},momRoute_rebel:{isEnding:!0,endingTitle:"ì™„ì „í•œ í†µì œ ì—”ë”©",dialogue:"ì•„ë¹ ê°€ ë­”ë°ìš”! ì´ê±´ ë‚´ ê±°ë€ ë§ì´ì—ìš”!",description:"ë‚˜ì˜ ë°˜í•­ì— ì•„ë¹ ëŠ” ë”ìš± í™”ë¥¼ ëƒˆê³ , ì§‘ì•ˆì˜ ë¶„ìœ„ê¸°ëŠ” ìµœì•…ìœ¼ë¡œ ì¹˜ë‹¬ì•˜ë‹¤. ë‚˜ëŠ” ë°©ì— ê°‡í˜€ ì™¸ë¶€ì™€ì˜ ëª¨ë“  ì†Œí†µì´ ì°¨ë‹¨ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},dadRouteStart:{character:"ì—„ë§ˆ",dialogue:"ë„¤ê°€â€¦ ì•„ë¹  í¸ì„ ë“ ë‹¤ê³ ? ê·¸ë˜. ê·¸ëŸ¼ ê³µë¶€ë§Œ í•´.",choices:[{text:"ì‚¬ê³¼í•˜ê¸°",nextScene:"dadRoute_apologize"},{text:"ê·¸ëƒ¥ ë°©ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°",nextScene:"dadRoute_goRoom"}]},dadRoute_apologize:{character:"ë‚˜",dialogue:"ì—„ë§ˆ, ë¯¸ì•ˆí•´ìš”. ê·¸ëŸ° ëœ»ì´ ì•„ë‹ˆì—ˆëŠ”ë°...",description:"ì—„ë§ˆëŠ” ë‚´ ì‚¬ê³¼ë¥¼ ë°›ì•„ì£¼ì—ˆì§€ë§Œ, ì„œìš´í•œ ê°ì •ì€ ì‰½ê²Œ ê°€ì‹œì§€ ì•ŠëŠ” ë“¯ ë³´ì˜€ë‹¤. ì—„ë§ˆëŠ” í•œìˆ¨ì„ ì‰¬ë©° ë‚´ ì„±ì í‘œë¥¼ êº¼ë‚´ ë“¤ì—ˆë‹¤.",choices:[{text:"ëŒ€í™”ë¥¼ ì´ì–´ë‚˜ê°€ê¸°",nextScene:"dadRoute_talk"},{text:"ìë¦¬ë¥¼ í”¼í•˜ê¸°",nextScene:"dadRoute_goRoom"}]},dadRoute_goRoom:{character:"ì—„ë§ˆ",dialogue:"ì–´ë”œ ë„ë§ê°€? ì•‰ì•„ë´. ìˆ˜í•™ í•™ì› í•˜ë‚˜ ë” ë“±ë¡í•˜ì.",description:"ì—„ë§ˆê°€ ë‚´ ë°© ë¬¸ì„ ì—´ê³  ë“¤ì–´ì™€ ì”ì†Œë¦¬ë¥¼ ì‹œì‘í•œë‹¤.",choices:[{text:"ê±°ì ˆí•˜ê¸°",nextScene:"dadRoute_refuse"},{text:"ì–µì§€ë¡œ ë™ì˜í•˜ê¸°",nextScene:"dadRoute_agree"}]},dadRoute_talk:{isEnding:!0,endingTitle:"ê´€ê³„ íšŒë³µ ì—”ë”©",dialogue:"ì—„ë§ˆ, ì €ë„ ë…¸ë ¥í•˜ê³  ìˆì–´ìš”. ì¡°ê¸ˆë§Œ ë¯¿ê³  ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",description:"ë‚˜ì˜ ì§„ì‹¬ ì–´ë¦° ë§ì— ì—„ë§ˆëŠ” ì ì‹œ ìƒê°ì— ì ê²¼ë‹¤. ìš°ë¦¬ëŠ” ì˜¤ëœ ëŒ€í™” ëì— ì„œë¡œì˜ ì…ì¥ì„ ì´í•´í•˜ê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},dadRoute_refuse:{character:"ë‚˜",dialogue:"ì‹«ì–´ìš”. ì§€ê¸ˆë„ ì¶©ë¶„íˆ í˜ë“¤ì–´ìš”.",description:"ë‚˜ì˜ ê±°ì ˆì— ì—„ë§ˆëŠ” í¬ê²Œ ì‹¤ë§í•œ ëˆˆì¹˜ì˜€ë‹¤. ê·¸ë‚  ì´í›„, ì—„ë§ˆì˜ ì”ì†Œë¦¬ëŠ” ì „ë³´ë‹¤ í›¨ì”¬ ì‹¬í•´ì¡Œë‹¤.",choices:[{text:"ì•Œì•„ì„œ í• ê²Œë¼ê³  ë§í•˜ê¸°",nextScene:"dadRoute_byMyself"},{text:"í­ë°œí•´ì„œ ì†Œë¦¬ì¹˜ê¸°",nextScene:"dadRoute_explode"}]},dadRoute_agree:{character:"ë‚˜",dialogue:"ë„¤... ì•Œê² ì–´ìš”.",description:"í•™ì›ì´ í•˜ë‚˜ ë” ëŠ˜ì—ˆê³ , ì¹œêµ¬ë“¤ê³¼ ë§Œë‚  ì‹œê°„ì€ ì™„ì „íˆ ì‚¬ë¼ì¡Œë‹¤. ì—„ë§ˆì˜ ê¸°ëŒ€ì¹˜ëŠ” ì ì  ë” ë†’ì•„ì ¸ë§Œ ê°„ë‹¤.",choices:[{text:"ì•Œì•„ì„œ í• ê²Œë¼ê³  ë§í•˜ê¸°",nextScene:"dadRoute_byMyself"},{text:"í­ë°œí•´ì„œ ì†Œë¦¬ì¹˜ê¸°",nextScene:"dadRoute_explode"}]},dadRoute_byMyself:{isEnding:!0,endingTitle:"ê³µë¶€ ì§€ì˜¥ ì—”ë”©",dialogue:"ì—„ë§ˆ, ì œë°œìš”. ì œê°€ ì•Œì•„ì„œ í• ê²Œìš”!",description:"ì—„ë§ˆëŠ” ë‚´ ë§ì„ ë¯¿ì§€ ì•Šì•˜ë‹¤. ê²°êµ­ ë‚˜ëŠ” ì—„ë§ˆê°€ ì§œì¤€ ë¹¡ë¹¡í•œ ìŠ¤ì¼€ì¤„ ì†ì—ì„œ ìˆ¨ ë§‰íˆëŠ” í•˜ë£¨í•˜ë£¨ë¥¼ ë³´ë‚´ê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},dadRoute_explode:{isEnding:!0,endingTitle:"ê´€ê³„ íŒŒíƒ„ ì—”ë”©",dialogue:"ì´ì œ ê·¸ë§Œ ì¢€ í•˜ì„¸ìš”! ìˆ¨ ë§‰í˜€ ì£½ì„ ê²ƒ ê°™ë‹¨ ë§ì´ì—ìš”!",description:"ë‚˜ì˜ í­ë°œì— ì—„ë§ˆëŠ” ì¶©ê²©ì„ ë°›ì€ ë“¯ ë³´ì˜€ë‹¤. ì§‘ì•ˆì€ ì–¼ìŒì¥ì²˜ëŸ¼ ì°¨ê°€ì›Œì¡Œê³ , ì—„ë§ˆì™€ ë‚˜ëŠ” ì„œë¡œ ë§ì„ ì„ì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]}},Vs=({scene:t,onChoice:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex flex-col items-center space-y-6 md:space-y-8 w-full max-w-2xl",children:[e.jsx("div",{className:"relative w-full aspect-[16/10] bg-black/30 rounded-xl border border-gray-700 overflow-hidden shadow-2xl",children:e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 250",preserveAspectRatio:"xMidYMid slice",children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"redGlow",cx:"15%",cy:"50%",r:"50%",fx:"15%",fy:"50%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(220, 38, 38, 0.5)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(220, 38, 38, 0)",stopOpacity:0}})]}),e.jsxs("radialGradient",{id:"blueGlow",cx:"85%",cy:"50%",r:"50%",fx:"85%",fy:"50%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(59, 130, 246, 0.5)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(59, 130, 246, 0)",stopOpacity:0}})]})]}),e.jsx("rect",{width:"400",height:"250",fill:"url(#redGlow)"}),e.jsx("rect",{width:"400",height:"250",fill:"url(#blueGlow)"}),e.jsx("g",{transform:"translate(60 160) scale(0.6)",children:e.jsx("path",{d:"M52.3,92.5c-2.4-5.3-4.5-10.7-6-16.3c-3.4-12.7-5.9-25.7-6.2-39.1c-0.2-8.3,0.5-16.6,1.9-24.7 c1.6-9.1,4.1-17.9,8-26.1c5.2-11,12.3-20.7,21.6-28.3c8.9-7.2,19.3-12.3,30.7-14.9c-8.9,13.1-13.4,28.2-12.9,43.4 c0.5,15.7,5.9,30.8,15.4,43.2C89.7,94.2,75.4,98.5,62.3,105.9C58.1,100.3,54.8,96.1,52.3,92.5z",fill:"black"})}),e.jsx("g",{transform:"translate(250 160) scale(0.6) scale(-1, 1) translate(-140, 0)",children:e.jsx("path",{d:"M52.3,92.5c-2.4-5.3-4.5-10.7-6-16.3c-3.4-12.7-5.9-25.7-6.2-39.1c-0.2-8.3,0.5-16.6,1.9-24.7 c1.6-9.1,4.1-17.9,8-26.1c5.2-11,12.3-20.7,21.6-28.3c8.9-7.2,19.3-12.3,30.7-14.9c-8.9,13.1-13.4,28.2-12.9,43.4 c0.5,15.7,5.9,30.8,15.4,43.2C89.7,94.2,75.4,98.5,62.3,105.9C58.1,100.3,54.8,96.1,52.3,92.5z",fill:"black"})}),e.jsx("g",{transform:"translate(198, 180) scale(0.4)",children:e.jsx("path",{d:"M49.5,82.7c-1.3-3-2.5-5.9-3.4-9c-1.9-7-3.3-14.2-3.4-21.6c-0.1-4.6,0.3-9.2,1-13.6c0.9-5,2.3-9.9,4.4-14.4 c2.9-6,6.8-11.4,11.9-15.6c4.9-3.9,10.7-6.8,16.9-8.2c-4.9,7.2-7.4,15.5-7.1,23.9c0.3,8.7,3.2,17,8.5,23.8 c-8.3,0.9-16.2,3.3-23.4,7.4C56,70,52.3,76,49.5,82.7z",fill:"black"})})]})}),e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white drop-shadow-lg",children:t.title}),e.jsx("p",{className:"text-red-500 font-bold mt-2 text-lg md:text-xl tracking-tight",children:t.description})]})]}),e.jsx("footer",{className:"w-full max-w-2xl pt-4 md:pt-8",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-around items-center gap-6",children:t.choices.map((s,a)=>e.jsx("button",{onClick:()=>n(s.nextScene),className:`w-full md:w-auto text-2xl md:text-3xl font-bold text-white rounded-lg px-12 py-4 md:px-16 md:py-5 transition-all duration-300 focus:outline-none 
              ${s.color==="red"?"bg-red-900/70 border-2 border-red-600 hover:bg-red-800/90 hover:shadow-[0_0_25px_rgba(239,68,68,0.7)] focus:ring-4 focus:ring-red-500/50":"bg-blue-900/70 border-2 border-blue-600 hover:bg-blue-800/90 hover:shadow-[0_0_25px_rgba(59,130,246,0.7)] focus:ring-4 focus:ring-blue-500/50"}`,children:s.text},a))})})]}),Ys=({scene:t,onChoice:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex flex-col items-center space-y-8 w-full max-w-2xl bg-black/30 rounded-xl border border-gray-700 p-8 shadow-2xl",children:[t.isEnding&&e.jsx("h2",{className:"text-4xl font-black text-yellow-400 drop-shadow-lg",children:t.endingTitle}),t.character&&e.jsxs("p",{className:"text-2xl font-bold text-gray-300",children:[t.character,":"]}),e.jsxs("p",{className:"text-3xl text-center leading-relaxed",children:['"',t.dialogue,'"']}),t.description&&e.jsx("p",{className:"text-lg text-gray-400 text-center italic mt-4",children:t.description})]}),e.jsx("footer",{className:"w-full max-w-2xl pt-8",children:e.jsx("div",{className:"flex flex-col justify-around items-center gap-4",children:t.choices.map((s,a)=>e.jsx("button",{onClick:()=>n(s.nextScene),className:"w-full md:w-3/4 text-xl font-bold text-white bg-gray-800/70 border-2 border-gray-600 rounded-lg px-12 py-4 transition-all duration-300 hover:bg-gray-700/90 hover:border-gray-400 focus:outline-none focus:ring-4 focus:ring-gray-500/50",children:s.text},a))})})]}),zs=()=>{const[t,n]=m.useState("start"),[s,a]=m.useState(!1),r=Ws[t],i=c=>{a(!0),setTimeout(()=>{n(c),a(!1)},300)};return e.jsxs("div",{className:"bg-gradient-to-b from-black to-gray-900 min-h-screen text-white flex flex-col items-center justify-center p-4 space-y-6 md:space-y-8 font-['Noto_Sans_KR']",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-wider",children:"DILEMMA SIMULATOR"}),e.jsx("p",{className:"text-gray-400 mt-2 text-md md:text-lg",children:"ë‹¹ì‹ ì˜ ì„ íƒì´ ëˆ„êµ°ê°€ì˜ ë§ˆì§€ë§‰ì´ ëœë‹¤."})]}),e.jsx("div",{className:`w-full flex flex-col items-center space-y-6 md:space-y-8 transition-opacity duration-300 ${s?"opacity-0":"opacity-100"}`,children:r.isStart?e.jsx(Vs,{scene:r,onChoice:i}):e.jsx(Ys,{scene:r,onChoice:i})},t)]})},Ks=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),Js=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3l-2 4zm8 0h3l2-4V7h-6v6h3l-2 4z"})}),Xs=({name:t,likes:n,motto:s,imageUrl:a})=>e.jsx("div",{className:"max-w-sm w-full bg-white rounded-2xl shadow-xl transform transition-all hover:scale-105 duration-300 ease-in-out",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("img",{className:"w-32 h-32 rounded-full mx-auto shadow-lg border-4 border-slate-200",src:a,alt:`${t}ì˜ í”„ë¡œí•„ ì‚¬ì§„`}),e.jsx("h1",{className:"mt-6 text-3xl font-bold text-slate-800",children:t}),e.jsx("hr",{className:"my-6 border-t border-slate-200"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-700 flex items-center justify-center gap-2",children:[e.jsx(Ks,{className:"w-6 h-6 text-red-500"}),"ì¢‹ì•„í•˜ëŠ” ê²ƒ"]}),e.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:n.map((r,i)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:r},i))})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-700 flex items-center justify-center gap-2",children:[e.jsx(Js,{className:"w-6 h-6 text-green-500"}),"ì¢Œìš°ëª…"]}),e.jsxs("blockquote",{className:"mt-4 text-slate-600 italic text-md leading-relaxed",children:['"',s,'"']})]})]})}),ke=({children:t,className:n=""})=>{const[s,a]=m.useState(!1),r=m.useRef(null),i=async()=>{try{document.fullscreenElement?(await document.exitFullscreen(),a(!1),document.body.style.overflow=""):r.current&&(await r.current.requestFullscreen().catch(c=>{console.error(`ì „ì²´ í™”ë©´ ì˜¤ë¥˜: ${c.message}`)}),a(!0),document.body.style.overflow="hidden")}catch(c){console.error("Fullscreen ì „í™˜ ì˜¤ë¥˜:",c)}};return m.useEffect(()=>{const c=()=>{document.fullscreenElement||(a(!1),document.body.style.overflow="")};return document.addEventListener("fullscreenchange",c),()=>{document.removeEventListener("fullscreenchange",c)}},[]),m.useEffect(()=>()=>{document.fullscreenElement&&document.exitFullscreen(),document.body.style.overflow=""},[]),e.jsxs("div",{ref:r,className:`relative w-full h-full ${n}`,style:{position:s?"fixed":"relative",inset:s?0:"auto",zIndex:s?9999:"auto",backgroundColor:s?"#000":"transparent"},children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-50 p-3 rounded-2xl bg-white bg-opacity-20 hover:bg-opacity-30 text-white transition-all duration-200",title:s?"ì „ì²´ í™”ë©´ í•´ì œ":"ì „ì²´ í™”ë©´","aria-label":s?"ì „ì²´ í™”ë©´ í•´ì œ":"ì „ì²´ í™”ë©´",children:s?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4m-4 0l5 5m11-5v4m0 0h-4m4 0l-5 5M4 20v-4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5"})})}),e.jsx("div",{className:"w-full h-full",children:t})]})},Zs=()=>{const t={name:"Daniel",likes:["ìë™ì°¨","ìì „ê±°","ì „ìê¸°ê¸°","ì˜ ë†€ê¸°"],motto:"í˜ëŸ¬ê°€ëŠ” ëŒ€ë¡œ êµ¬ë¥´ëŠ” ëŒ€ë¡œ ë¶€ë”ªíˆëŠ” ëŒ€ë¡œ ë°€ë¦¬ëŠ” ëŒ€ë¡œ",imageUrl:"/image.png"};return e.jsx(ke,{children:e.jsx("main",{className:"bg-slate-100 min-h-screen flex items-center justify-center p-4 font-sans",children:e.jsx(Xs,{name:t.name,likes:t.likes,motto:t.motto,imageUrl:t.imageUrl})})})};var A=(t=>(t.N="N",t.R="R",t.SR="SR",t.SSR="SSR",t.Mythic="ì‹ í™”",t))(A||{}),ie=(t=>(t.Fire="ë¶ˆ",t.Water="ë¬¼",t.Wind="ë°”ëŒ",t.Light="ë¹›",t.Dark="ì–´ë‘ ",t))(ie||{}),be=(t=>(t.R="R",t.SR="SR",t.SSR="SSR",t.Mythic="ì‹ í™”",t))(be||{}),we=(t=>(t.SINGLE_TARGET_DAMAGE="ë‹¨ì¼ ëŒ€ìƒ ê³µê²©",t.AREA_OF_EFFECT_DAMAGE="ê´‘ì—­ ê³µê²©",t.HEAL_SELF="ìê°€ ì¹˜ìœ ",t.HEAL_TEAM="íŒ€ ì¹˜ìœ ",t))(we||{}),Ae=(t=>(t.ENEMY_SINGLE="ì  ë‹¨ì¼",t.ENEMY_ALL="ì  ì „ì²´",t.ALLY_SELF="ìì‹ ",t.ALLY_ALL="ì•„êµ° ì „ì²´",t))(Ae||{}),J=(t=>(t.HOME="HOME",t.STUDY="STUDY",t.TEST="TEST",t.RESULT="RESULT",t.WRONG_REVIEW="WRONG_REVIEW",t))(J||{}),qe=(t=>(t.BEST_FRIEND="ë² ìŠ¤íŠ¸ í”„ë Œë“œ",t.SCHOOL="í•™êµ ì¹œêµ¬",t.WORK="ì§ì¥ ë™ë£Œ",t.HOBBY="ì·¨ë¯¸ í™œë™",t.OTHER="ê¸°íƒ€",t))(qe||{}),Ie=(t=>(t.EASY="ì‰¬ì›€",t.MEDIUM="ë³´í†µ",t.HARD="ì–´ë ¤ì›€",t))(Ie||{}),xt=(t=>(t.BEGINNER="Beginner",t.INTERMEDIATE="Intermediate",t.ADVANCED="Advanced",t.EXPERT="Expert",t))(xt||{}),fe=(t=>(t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t))(fe||{}),me=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.PAUSED="PAUSED",t.GAME_OVER="GAME_OVER",t))(me||{});const Be=[{id:1,name:"ê¸°ë³¸ ì¼ê²©",description:"ì  í•˜ë‚˜ì—ê²Œ ê¸°ë³¸ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.R,level:1,effectType:we.SINGLE_TARGET_DAMAGE,power:1.5,targetType:Ae.ENEMY_SINGLE},{id:2,name:"ì¹˜ìœ ì˜ ë¹›",description:"ìì‹ ì„ ì•½ê°„ íšŒë³µì‹œí‚µë‹ˆë‹¤.",rarity:be.R,level:1,effectType:we.HEAL_SELF,power:500,targetType:Ae.ALLY_SELF},{id:3,name:"íŒŒì´ì–´ë³¼",description:"ì  í•˜ë‚˜ì—ê²Œ ê°•ë ¥í•œ í™”ì—¼ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.SR,level:1,effectType:we.SINGLE_TARGET_DAMAGE,power:2.5,targetType:Ae.ENEMY_SINGLE},{id:4,name:"ëŒ€ì§€ ê°€ë¥´ê¸°",description:"ëª¨ë“  ì ì—ê²Œ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.SR,level:1,effectType:we.AREA_OF_EFFECT_DAMAGE,power:1.2,targetType:Ae.ENEMY_ALL},{id:5,name:"ëŒ€ì²œì‚¬ì˜ ì¶•ë³µ",description:"ëª¨ë“  ì•„êµ°ì„ íšŒë³µì‹œí‚µë‹ˆë‹¤.",rarity:be.SSR,level:1,effectType:we.HEAL_TEAM,power:1e3,targetType:Ae.ALLY_ALL},{id:6,name:"ì²œë²Œ",description:"ì  í•˜ë‚˜ì—ê²Œ ì••ë„ì ì¸ ì‹ ì„± í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.SSR,level:1,effectType:we.SINGLE_TARGET_DAMAGE,power:5,targetType:Ae.ENEMY_SINGLE},{id:7,name:"ì•„ë§ˆê²Ÿëˆ",description:"ëª¨ë“  ì ì—ê²Œ íŒŒê´´ì ì¸ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤.",rarity:be.Mythic,level:1,effectType:we.AREA_OF_EFFECT_DAMAGE,power:3.5,targetType:Ae.ENEMY_ALL}],ze=[{id:101,name:"í›ˆë ¨ìš© ëª©ê²€",rarity:A.N,level:1,cards:0,baseStats:{attack:10,hp:0,speed:0},specialEffect:"ê¸°ë³¸ ê³µê²©ë ¥ ì¦ê°€",description:"ì´ˆë³´ìê°€ ì“°ê¸° ì¢‹ì€ ëª©ê²€."},{id:102,name:"ë‚¡ì€ ê°€ì£½ ê°‘ì˜·",rarity:A.N,level:1,cards:0,baseStats:{attack:0,hp:50,speed:0},specialEffect:"ê¸°ë³¸ ì²´ë ¥ ì¦ê°€",description:"ìµœì†Œí•œì˜ ë³´í˜¸ë¥¼ ì œê³µí•˜ëŠ” ê°‘ì˜·."},{id:103,name:"ê°•ì²  ê²€",rarity:A.R,level:1,cards:0,baseStats:{attack:30,hp:0,speed:2},specialEffect:"ê³µê²©ë ¥ ì†Œí­ ì¦ê°€",description:"ì˜ ì œë ¨ëœ ê°•ì²  ê²€."},{id:104,name:"ì‚¬ëƒ¥ê¾¼ì˜ ì¥í™”",rarity:A.R,level:1,cards:0,baseStats:{attack:5,hp:20,speed:10},specialEffect:"ì†ë„ ì†Œí­ ì¦ê°€",description:"ê°€ë³ê³  íŠ¼íŠ¼í•œ ì¥í™”."},{id:105,name:"í™”ì—¼ì˜ ì§€íŒ¡ì´",rarity:A.SR,level:1,cards:0,baseStats:{attack:80,hp:0,speed:0},specialEffect:"í™”ì—¼ ì†ì„± ê³µê²©ë ¥ ê°•í™”",description:"ë¶ˆíƒ€ì˜¤ë¥´ëŠ” ë§ˆë ¥ì´ ê¹ƒë“  ì§€íŒ¡ì´."},{id:106,name:"ë¯¸ìŠ¤ë¦´ ê°‘ì˜·",rarity:A.SR,level:1,cards:0,baseStats:{attack:0,hp:300,speed:-5},specialEffect:"ì²´ë ¥ ëŒ€í­ ì¦ê°€",description:"ê°€ë³ì§€ë§Œ ë§¤ìš° ë‹¨ë‹¨í•œ ë¯¸ìŠ¤ë¦´ë¡œ ë§Œë“  ê°‘ì˜·."},{id:107,name:"ì—‘ìŠ¤ì¹¼ë¦¬ë²„",rarity:A.SSR,level:1,cards:0,baseStats:{attack:250,hp:100,speed:5},specialEffect:"ì„±ìŠ¤ëŸ¬ìš´ í˜ìœ¼ë¡œ ì ì„ ì••ë„",description:"ì „ì„¤ ì†ì˜ ì™•ì´ ì‚¬ìš©í•˜ë˜ ê²€."},{id:108,name:"ë“œë˜ê³¤ í•˜íŠ¸ ëª©ê±¸ì´",rarity:A.SSR,level:1,cards:0,baseStats:{attack:50,hp:800,speed:0},specialEffect:"ìƒëª…ë ¥ ì¬ìƒ",description:"ìš©ì˜ ì‹¬ì¥ ì¡°ê°ìœ¼ë¡œ ë§Œë“  ëª©ê±¸ì´."},{id:109,name:"ì‹  ì‚´í•´ìì˜ ì°½",rarity:A.Mythic,level:1,cards:0,baseStats:{attack:800,hp:0,speed:20},specialEffect:"ì‹ ì—ê²Œë„ ìƒì²˜ë¥¼ ì…íˆëŠ” í˜",description:"ì‹ í™”ë¥¼ ëë‚´ëŠ” ì°½."},{id:110,name:"ì•„ì´ê¸°ìŠ¤",rarity:A.Mythic,level:1,cards:0,baseStats:{attack:0,hp:2500,speed:0},specialEffect:"ëª¨ë“  ìƒíƒœì´ìƒ ì €í•­",description:"ì‹ ì˜ ê°€í˜¸ê°€ ê¹ƒë“  ì ˆëŒ€ ë°©íŒ¨."}],xe=[{id:1,name:"ë¸”ë ˆì´ì¦ˆ ë‚˜ì´íŠ¸",rarity:A.N,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/1/200",level:1,cards:0,description:"ì‘ì€ ë¶ˆê½ƒì„ ë‹¤ë£¨ëŠ” ì´ˆë³´ ê¸°ì‚¬.",equippedUltimateId:1},{id:2,name:"ì•„ì¿ ì•„ ìŠ¤í”„ë¼ì´íŠ¸",rarity:A.N,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/2/200",level:1,cards:0,description:"ì¥ë‚œê¸° ë§ì€ ë¬¼ì˜ ì •ë ¹.",equippedUltimateId:1},{id:3,name:"ê²Œì¼ ì•„ì²˜",rarity:A.R,attribute:ie.Wind,imageUrl:"https://picsum.photos/seed/3/200",level:1,cards:0,description:"ë°”ëŒì„ ë‹¤ë£¨ëŠ” ëª…ì‚¬ìˆ˜.",equippedUltimateId:1},{id:4,name:"íƒœì–‘ì˜ ì‚¬ì œ",rarity:A.R,attribute:ie.Light,imageUrl:"https://picsum.photos/seed/4/200",level:1,cards:0,description:"ì„±ìŠ¤ëŸ¬ìš´ ë¹›ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ì œ.",equippedUltimateId:2},{id:5,name:"ê·¸ë¦¼ì ì‹œë…¸ë¹„",rarity:A.R,attribute:ie.Dark,imageUrl:"https://picsum.photos/seed/5/200",level:1,cards:0,description:"ê·¸ë¦¼ì ì†ì— ìˆ¨ì–´ë“œëŠ” ë‹Œì.",equippedUltimateId:1},{id:6,name:"ì¸í˜ë¥´ë…¸ ì†Œì„œëŸ¬",rarity:A.SR,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/6/200",level:1,cards:0,description:"í­ë°œì ì¸ í™”ì—¼ì„ ë‹¤ë£¨ëŠ” ê°•ë ¥í•œ ë§ˆë²•ì‚¬.",equippedUltimateId:3},{id:7,name:"íƒ€ì´ë‹¬ ê°€ë””ì–¸",rarity:A.SR,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/7/200",level:1,cards:0,description:"ê¹Šì€ ë°”ë‹¤ì˜ ìˆ˜í˜¸ì.",equippedUltimateId:4},{id:8,name:"ìŠ¤í†° ë“œë¼êµ°",rarity:A.SR,attribute:ie.Wind,imageUrl:"https://picsum.photos/seed/8/200",level:1,cards:0,description:"í­í’ì„ íƒ€ê³  ë‚˜ëŠ” ìš©ê¸°ì‚¬.",equippedUltimateId:1},{id:9,name:"ì²œìƒì˜ ë°œí‚¤ë¦¬",rarity:A.SSR,attribute:ie.Light,imageUrl:"https://picsum.photos/seed/9/200",level:1,cards:0,description:"ì²œìƒì—ì„œ ë‚´ë ¤ì˜¨ ì‹ ì„±í•œ ì „ì‚¬.",equippedUltimateId:5},{id:10,name:"ì‹¬ì—°ì˜ êµ°ì£¼",rarity:A.SSR,attribute:ie.Dark,imageUrl:"https://picsum.photos/seed/10/200",level:1,cards:0,description:"ì–´ë‘ìš´ ì‹¬ì—°ì˜ ì ˆëŒ€ ì§€ë°°ì.",equippedUltimateId:6},{id:11,name:"ë¶ˆì‚¬ì¡°",rarity:A.SSR,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/11/200",level:1,cards:0,description:"ë¶€í™œê³¼ ë¶ˆì˜ ë¶ˆë©¸ì˜ ì¡´ì¬.",equippedUltimateId:6},{id:12,name:"ë¦¬ë°”ì´ì–´ë˜ í˜„ì",rarity:A.SSR,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/12/200",level:1,cards:0,description:"ë°”ë‹¤ë¥¼ ë‹¤ìŠ¤ë¦¬ëŠ” ê³ ëŒ€ì˜ í˜„ì.",equippedUltimateId:5},{id:13,name:"í…œí˜ìŠ¤íŠ¸ ìœ™",rarity:A.SSR,attribute:ie.Wind,imageUrl:"https://picsum.photos/seed/13/200",level:1,cards:0,description:"íƒœí’ì˜ ëˆˆì—ì„œ íƒœì–´ë‚œ ë‚ ì¹´ë¡œìš´ ë°”ëŒ.",equippedUltimateId:4},{id:14,name:"ë‚˜ì´íŠ¸ë©”ì–´ íŒ¬í…€",rarity:A.SSR,attribute:ie.Dark,imageUrl:"https://picsum.photos/seed/14/200",level:1,cards:0,description:"ì•…ëª½ì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ê³µí¬ì˜ í˜„ì‹ .",equippedUltimateId:6},{id:15,name:"ì°½ì„¸ì˜ ì•„í¬ì—”ì ¤",rarity:A.Mythic,attribute:ie.Light,imageUrl:"https://picsum.photos/seed/15/200",level:1,cards:0,description:"ì„¸ê³„ë¥¼ ì°½ì¡°í•œ ë¹›ì˜ ëŒ€ë¦¬ì¸.",equippedUltimateId:7},{id:16,name:"ì¢…ë§ì˜ ì´í”„ë¦¬íŠ¸",rarity:A.Mythic,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/16/200",level:1,cards:0,description:"ëª¨ë“  ê²ƒì„ ì¬ë¡œ ëŒë¦¬ëŠ” íŒŒê´´ì˜ í™”ì‹ .",equippedUltimateId:7},{id:17,name:"ì„¸ê³„ìˆ˜ ìœ„ê·¸ë“œë¼ì‹¤",rarity:A.Mythic,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/17/200",level:1,cards:0,description:"ìƒëª…ì˜ ê·¼ì›, ì„¸ê³„ë¥¼ í’ˆì€ ê±°ëŒ€í•œ ë‚˜ë¬´ ì •ë ¹.",equippedUltimateId:5}],We={[A.N]:.5,[A.R]:.34,[A.SR]:.12,[A.SSR]:.03,[A.Mythic]:.01},yt={[be.R]:.6,[be.SR]:.3,[be.SSR]:.08,[be.Mythic]:.02},Qs={name:"ê¸°ë³¸ íŒ€",characters:[xe[0],xe[1],null,null]},Ze={name:"íƒ€ë½í•œ ê±°ì‹ ",imageUrl:"https://picsum.photos/seed/raidboss/400",hp:5e7,maxHp:5e7,reward:25e3},Fe={currency:1e3,characters:[{...xe[0],cards:0},{...xe[1],cards:0},{...xe[2],cards:0}],teams:[Qs],achievements:[{id:1,name:"ì¼ì¼ ë¡œê·¸ì¸",description:"ì˜¤ëŠ˜ ë¡œê·¸ì¸í•˜ì„¸ìš”.",progress:1,target:1,reward:"ë³´ì„ 100ê°œ"},{id:2,name:"ì£¼ê°„ ê°€ì± ",description:"ì´ë²ˆ ì£¼ì— ê°€ì± ë¥¼ 10ë²ˆ ë½‘ìœ¼ì„¸ìš”.",progress:3,target:10,reward:"ê°€ì±  í‹°ì¼“ 1ì¥"},{id:3,name:"ë¶ˆì˜ í˜",description:"ë¶ˆ ì†ì„± ìºë¦­í„° 2ëª…ìœ¼ë¡œ íŒ€ì„ êµ¬ì„±í•˜ì„¸ìš”.",progress:1,target:2,reward:"ë³´ì„ 50ê°œ",requiredCharacterAttribute:ie.Fire}],friends:[{id:1,name:"AcePlayer",team:{name:"Vanguard",characters:[xe[8],xe[9],xe[10],xe[6]]},lastActive:"5ë¶„ ì „",lastRarePull:xe[11]},{id:2,name:"ShadowCat",team:{name:"Abyss",characters:[xe[4],xe[7],xe[9],xe[5]]},lastActive:"1ì‹œê°„ ì „"}],ultimateSkills:[{...Be[0]},{...Be[1]}],inventory:[{...ze[0],id:1,cards:0},{...ze[1],id:2,cards:0}],guildId:null},ea=({onLogin:t})=>{const[n,s]=m.useState(""),a=r=>{r.preventDefault(),n.trim()&&t(n.trim())};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white p-4",children:e.jsxs("div",{className:"w-full max-w-sm text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-cyan-300 mb-2",children:"ê°€ì±  ë„ˆì§€"}),e.jsx("p",{className:"text-gray-400 mb-8",children:"ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ê±°ë‚˜ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì„¸ìš”."}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsx("input",{type:"text",value:n,onChange:r=>s(r.target.value),placeholder:"ì‚¬ìš©ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-4 py-3 bg-gray-800 border-2 border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500 transition-colors",maxLength:20}),e.jsx("button",{type:"submit",disabled:!n.trim(),className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:"ë¡œê·¸ì¸ / ì‹œì‘í•˜ê¸°"})]})]})})},ta={[A.N]:{border:"border-gray-500",text:"text-gray-300",shadow:"shadow-gray-500/50"},[A.R]:{border:"border-green-500",text:"text-green-400",shadow:"shadow-green-500/50"},[A.SR]:{border:"border-blue-500",text:"text-blue-400",shadow:"shadow-blue-500/50"},[A.SSR]:{border:"border-yellow-400",text:"text-yellow-400",shadow:"shadow-yellow-400/50"},[A.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400",shadow:"shadow-fuchsia-500/50"}},Ge=({character:t,onClick:n,isSelected:s})=>{const a=ta[t.rarity];return e.jsxs("div",{className:`relative aspect-square rounded-lg overflow-hidden border-2 ${a.border} shadow-lg ${a.shadow} transition-transform hover:scale-105 ${n?"cursor-pointer":""} ${s?"ring-4 ring-cyan-400":""}`,onClick:n,children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsx("div",{className:`absolute top-1 left-1 bg-black/60 px-2 py-0.5 rounded-full text-xs font-bold ${a.text}`,children:t.rarity}),e.jsxs("div",{className:"absolute top-1 right-1 bg-black/60 px-2 py-0.5 rounded-full text-xs font-bold text-white",children:["Lv.",t.level]}),e.jsx("div",{className:"absolute bottom-1 left-0 right-0 px-2 text-center",children:e.jsx("p",{className:"text-white text-xs font-bold truncate drop-shadow-md",children:t.name})})]})},sa=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 3.75 3.75 0 0 0-1.993-2.303A3.75 3.75 0 0 0 8.25 6.75a3.75 3.75 0 0 0-1.483 2.805 3.75 3.75 0 0 0-1.993 2.303A3.75 3.75 0 0 0 6 18a3.75 3.75 0 0 0 .495-7.468 3.75 3.75 0 0 0 5.01 0A3.75 3.75 0 0 0 12 18Z"})]}),Ue=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),aa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),na=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})}),ra=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),la=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),ia=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ut=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.25a.75.75 0 0 1-.75-.75v-12a.75.75 0 0 1 .75-.75h19.5a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-.75.75h-4.5m-4.5 0h-3.75m3.75 0V11.25m5.25 2.25V11.25m0 0V9.75M18.75 11.25v-1.5m-16.5 0a3 3 0 0 1 3-3h10.5a3 3 0 0 1 3 3m-16.5 0c0 1.657 1.343 3 3 3h10.5c1.657 0 3-1.343 3-3m-12.75 0h9"})}),oa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.5-2.962c.51.056 1.02.086 1.5.086 1.032 0 2.033-.146 3-.418m-9.379-3.323c.345-.184.71-.343 1.086-.483A8.931 8.931 0 0 1 15 4.5c1.43 0 2.793.324 4.024.893m-15.024 4.885A4.5 4.5 0 0 0 7.5 10.5c1.196 0 2.285.42 3.12 1.121m-4.59 2.508A4.492 4.492 0 0 1 7.5 15c2.023 0 3.841.996 5.032 2.572M12 3v18"})}),ca=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),da=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-4.598m-1.5-6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Z"})}),ma=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),xa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),wt=({playerState:t,currentUser:n,onLogout:s,onNavigate:a})=>{const r=t.teams[0],i=c=>t.characters.filter(d=>d.attribute===c).length;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{className:"text-center relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:n}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",title:"ë¡œê·¸ì•„ì›ƒ",children:e.jsx(la,{className:"w-5 h-5"})})]}),e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ê°€ì±  ë„ˆì§€"}),e.jsx("p",{className:"text-gray-400",children:"ìµœê³ ê°€ ë˜ê¸° ìœ„í•œ ì—¬ì •ì´ ì—¬ê¸°ì„œ ì‹œì‘ë©ë‹ˆë‹¤."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë‚˜ì˜ ë©”ì¸ íŒ€"}),e.jsx("div",{onClick:()=>a("team"),className:"grid grid-cols-4 gap-3 p-4 bg-gray-800/50 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:r.characters.map((c,d)=>c?e.jsx(Ge,{character:c},d):e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg flex items-center justify-center text-gray-500 text-3xl",children:"+"},d))})]}),e.jsx("section",{children:e.jsx("button",{onClick:()=>a("gacha"),className:"w-full p-4 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform duration-300 animate-pulse hover:animate-none",children:"âœ¨ ì¶”ì²œ ê°€ì±  ë“±ì¥! âœ¨"})}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¼ì¼ & ì£¼ê°„ ì—…ì "}),e.jsx("div",{className:"space-y-3",children:t.achievements.map(c=>{const d=c.requiredCharacterAttribute&&i(c.requiredCharacterAttribute)<c.target;return e.jsxs("div",{className:`p-3 bg-gray-800 rounded-lg ${d?"border border-dashed border-yellow-500 animate-pulse":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[e.jsxs("p",{className:"font-semibold",children:[c.name," ",d&&e.jsxs("span",{className:"text-yellow-400 text-xs",children:[" (",c.requiredCharacterAttribute," ì†ì„± ìºë¦­í„° ë¶€ì¡±!)"]})]}),e.jsxs("p",{className:"text-gray-400",children:[c.progress,"/",c.target]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:"bg-cyan-500 h-2.5 rounded-full",style:{width:`${c.progress/c.target*100}%`}})})]},c.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¹œêµ¬ í™œë™"}),e.jsx("div",{className:"space-y-4",children:t.friends.map(c=>{var d;return e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex-shrink-0",children:e.jsx("img",{src:(d=c.team.characters[0])==null?void 0:d.imageUrl,alt:c.name,className:"w-full h-full object-cover rounded-full"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-bold",children:c.name}),c.lastRarePull&&e.jsxs("p",{className:"text-xs text-yellow-400 truncate",children:["ë°©ê¸ˆ ",e.jsx("span",{className:"font-bold",children:"SSR"})," ",c.lastRarePull.name," íšë“!"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["í™œë™: ",c.lastActive]})]}),e.jsx("button",{onClick:()=>a("social"),className:"bg-indigo-600 px-3 py-1 text-sm rounded-md hover:bg-indigo-500 transition-colors",children:"ë³´ê¸°"})]},c.id)})})]})]})};function jt(t){return 10+t*2}function Ft(t,n){const s=t.level||1;let a=(t.cards||0)+n,r=s;for(;a>=jt(r);)a-=jt(r),r+=1;return{level:r,cards:a}}const ha=({results:t,onClose:n})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:n,children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-gray-900/80 backdrop-blur-sm rounded-lg border-2 border-yellow-400 shadow-2xl p-6 space-y-4",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-300 drop-shadow-lg",children:"ì†Œí™˜ ê²°ê³¼"}),e.jsx("div",{className:`grid gap-3 ${t.length>1?"grid-cols-5":"grid-cols-1 place-items-center"}`,children:t.map((s,a)=>e.jsx("div",{className:"animate-reveal",style:{animationDelay:`${a*100}ms`},children:e.jsx(Ge,{character:s})},a))}),e.jsx("button",{onClick:n,className:"w-full mt-4 p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"í™•ì¸"})]})}),ua=[A.Mythic,A.SSR,A.SR,A.R,A.N],pa={[A.N]:"text-gray-300",[A.R]:"text-green-400",[A.SR]:"text-blue-400",[A.SSR]:"text-yellow-400",[A.Mythic]:"text-fuchsia-400"},ga=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300",children:"ì†Œí™˜ í™•ë¥ "}),e.jsx("div",{className:"space-y-2",children:ua.map(n=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-900/50 rounded-md",children:[e.jsx("span",{className:`font-bold ${pa[n]}`,children:n}),e.jsxs("span",{className:"text-white font-mono",children:[(We[n]*100).toFixed(2),"%"]})]},n))}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"ê° ë“±ê¸‰ ë‚´ ìºë¦­í„°ëŠ” ë™ì¼í•œ í™•ë¥ ë¡œ ë“±ì¥í•©ë‹ˆë‹¤."})]})}),Qe=30,et=300,tt=3e3,st=5e4,at=5e5,fa=()=>{const t=Math.random();let n=0;const s={};xe.forEach(a=>{s[a.rarity]||(s[a.rarity]=[]),s[a.rarity].push(a)});for(const a of Object.keys(We))if(n+=We[a],t<n){const r=s[a];if(r&&r.length>0)return{...r[Math.floor(Math.random()*r.length)],id:Date.now()+Math.random(),cards:0}}return{...s[A.N][0],id:Date.now()+Math.random(),cards:0}},ba=({playerState:t,setPlayerState:n})=>{const[s,a]=m.useState(null),[r,i]=m.useState(!1),[c,d]=m.useState(!1),o=(x,p)=>{if(!t||t.currency<p||c)return;d(!0);let h=Array.from({length:x},fa);if(x===10){if(!h.some(y=>[A.SR,A.SSR,A.Mythic].includes(y.rarity))){const y=xe.filter(f=>[A.SR,A.SSR,A.Mythic].includes(f.rarity));if(y.length>0){const f=y[Math.floor(Math.random()*y.length)];h[0]={...f,id:Date.now()+Math.random(),cards:0}}}}else if(x===100){if(!h.some(y=>[A.SSR,A.Mythic].includes(y.rarity))){const y=xe.filter(f=>[A.SSR,A.Mythic].includes(f.rarity));if(y.length>0){const f=y[Math.floor(Math.random()*y.length)];h[0]={...f,id:Date.now()+Math.random(),cards:0}}}}else if(x===1e3){if(!h.some(y=>y.rarity===A.Mythic)){const y=xe.filter(f=>f.rarity===A.Mythic);if(y.length>0){const f=y[Math.floor(Math.random()*y.length)];h[0]={...f,id:Date.now()+Math.random(),cards:0}}}}else if(x===1e4){const v=xe.filter(y=>y.rarity===A.Mythic);if(v.length>0){for(let y=0;y<10;y++){const f=v[Math.floor(Math.random()*v.length)];h[y]={...f,id:Date.now()+Math.random()+y,cards:0}}for(let y=h.length-1;y>0;y--){const f=Math.floor(Math.random()*(y+1));[h[y],h[f]]=[h[f],h[y]]}}}setTimeout(()=>{n(v=>{if(!v)return null;const y=new Map;v.characters.forEach(b=>y.set(b.name,{...b})),h.forEach(b=>{if(y.has(b.name)){const C=y.get(b.name),{level:$,cards:k}=Ft(C,1);C.level=$,C.cards=k}else y.set(b.name,{...b,level:1,cards:0})});const f=Array.from(y.values());return{...v,currency:v.currency-p,characters:f}}),a(h),d(!1)},1e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì†Œí™˜"}),e.jsx("p",{className:"text-gray-400",children:"ìƒˆë¡œìš´ ë™ë£Œë¥¼ ë§Œë‚˜ ìš´ëª…ì„ ê°œì²™í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg flex justify-between items-center sticky top-4 z-10",children:[e.jsx("span",{className:"font-semibold text-lg",children:"ë³´ìœ  ë³´ì„"}),e.jsx("span",{className:"font-bold text-2xl text-yellow-300",children:t==null?void 0:t.currency.toLocaleString()}),e.jsxs("button",{onClick:()=>i(!0),className:"text-sm text-cyan-400 hover:text-cyan-300 flex items-center gap-1",children:[e.jsx(ia,{className:"w-4 h-4"}),"ì†Œí™˜ í™•ë¥ "]})]}),e.jsxs("div",{className:"relative aspect-video w-full max-w-lg mx-auto flex items-center justify-center rounded-lg overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-purple-900/50 via-black to-indigo-900/50 opacity-70"}),e.jsx("div",{className:"absolute w-full h-full animate-spin-slow",style:{background:"radial-gradient(circle, rgba(167, 139, 250, 0.3) 10%, transparent 70%)"}}),e.jsx("p",{className:"text-2xl font-bold text-white z-10 drop-shadow-lg",children:"ì†Œí™˜ì§„"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>o(1,Qe),disabled:!t||t.currency<Qe||c,className:"w-full p-3 rounded-lg bg-gradient-to-r from-gray-600 to-gray-700 text-white font-bold shadow-lg hover:from-gray-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"1íšŒ ì†Œí™˜"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",Qe]})]}),e.jsxs("button",{onClick:()=>o(10,et),disabled:!t||t.currency<et||c,className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold shadow-lg hover:from-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"10íšŒ ì†Œí™˜"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",et]})]}),e.jsxs("button",{onClick:()=>o(100,tt),disabled:!t||t.currency<tt||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-bold shadow-lg hover:from-cyan-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"100íšŒ ì†Œí™˜ (SSR+ 1ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",tt]})]}),e.jsxs("button",{onClick:()=>o(1e3,st),disabled:!t||t.currency<st||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-yellow-500 to-red-500 text-white font-bold shadow-lg hover:from-yellow-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"1000íšŒ ì†Œí™˜ (ì‹ í™” 1ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",st]})]}),e.jsxs("button",{onClick:()=>o(1e4,at),disabled:!t||t.currency<at||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-fuchsia-600 to-yellow-500 text-white font-bold shadow-lg hover:from-fuchsia-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"10000íšŒ ì†Œí™˜ (ì‹ í™” 10ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",at.toLocaleString()]})]})]}),s&&e.jsx(ha,{results:s,onClose:()=>a(null)}),r&&e.jsx(ga,{onClose:()=>i(!1)})]})};function Ht(t){if(!t)return{attack:0,hp:0,speed:0};const n=1+t.level*.05,s=1+t.cards*.01,a=n*s,r=Math.round(t.baseStats.attack*a),i=Math.round(t.baseStats.hp*a),c=Math.round(t.baseStats.speed*a);return{attack:r,hp:i,speed:c}}function ut(t,n){const a={[A.N]:1,[A.R]:1.15,[A.SR]:1.35,[A.SSR]:1.6,[A.Mythic]:2}[t.rarity]??1,r=Math.round((t.level*4+10)*a),i=Math.round((t.level*20+100)*a),c=Math.round(10+t.level*.4+(t.level>50?2:0));let d={attack:0,hp:0,speed:0};return n&&(d=Ht(n)),{attack:r+d.attack,hp:i+d.hp,speed:Math.max(1,c+d.speed)}}const ya={[A.N]:{border:"border-gray-500",text:"text-gray-300",bg:"bg-gray-700"},[A.R]:{border:"border-green-500",text:"text-green-400",bg:"bg-green-600"},[A.SR]:{border:"border-blue-500",text:"text-blue-400",bg:"bg-blue-600"},[A.SSR]:{border:"border-yellow-400",text:"text-yellow-400",bg:"bg-yellow-500"},[A.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400",bg:"bg-fuchsia-600"}},wa={[ie.Fire]:"text-red-400",[ie.Water]:"text-blue-400",[ie.Wind]:"text-green-400",[ie.Light]:"text-yellow-300",[ie.Dark]:"text-purple-400"},nt=({label:t,value:n})=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 p-2 rounded-md text-sm",children:[e.jsx("span",{className:"text-gray-400",children:t}),e.jsx("span",{className:"font-bold text-white",children:n})]}),ja=({character:t,equippedUltimate:n,equippedEquipment:s,isCharacterInTeam:a,onAddToTeam:r,onRemoveFromTeam:i,onChangeUltimate:c,onChangeEquipment:d,onClose:o})=>{const x=ut(t,s),p=ya[t.rarity],h=wa[t.attribute],v=Math.floor((t.level-1)/10)+1;return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:o,children:e.jsxs("div",{className:`relative w-full max-w-sm bg-gray-800 rounded-lg border-2 ${p.border} shadow-2xl p-6 space-y-4 max-h-[90vh] overflow-y-auto`,onClick:y=>y.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-24 h-24 rounded-lg overflow-hidden border-2 ${p.border} flex-shrink-0`,children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-bold ${p.text}`,children:t.rarity}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-sm font-semibold",children:["Level ",t.level," ",e.jsxs("span",{className:h,children:[t.attribute," ì†ì„±"]})]})]})]}),e.jsxs("p",{className:"text-gray-300 text-sm italic",children:['"',t.description,'"']}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"ë ˆë²¨ì—… ì§„í–‰ë„"}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative overflow-hidden",children:[e.jsx("div",{className:"bg-yellow-400 h-4 rounded-full transition-all duration-500",style:{width:`${t.cards/v*100}%`}}),e.jsxs("span",{className:"absolute inset-0 text-center text-xs font-bold text-black flex items-center justify-center",children:[t.cards," / ",v]})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ í•„ìš”í•œ ì¹´ë“œ"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"ëŠ¥ë ¥ì¹˜ (ì¥ë¹„ í¬í•¨)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(nt,{label:"HP",value:x.hp}),e.jsx(nt,{label:"ê³µê²©ë ¥",value:x.attack}),e.jsx(nt,{label:"ì†ë„",value:x.speed})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-purple-400",children:"ê¶ê·¹ê¸°"}),n?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:n.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Lv.",n.level]})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"ì—†ìŒ"}),e.jsx("button",{onClick:c,className:"w-full mt-2 p-1 rounded-md text-xs bg-gray-700 hover:bg-gray-600 transition-colors",children:"ë³€ê²½"})]}),e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-green-400",children:"ì¥ë¹„"}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Lv.",s.level," ",s.rarity]}),e.jsx("p",{className:"text-[10px] text-cyan-300 mt-1",children:s.specialEffect})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"ì—†ìŒ"}),e.jsx("button",{onClick:d,className:"w-full mt-2 p-1 rounded-md text-xs bg-gray-700 hover:bg-gray-600 transition-colors",children:"ë³€ê²½"})]})]}),a?e.jsx("button",{onClick:i,className:"w-full p-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-500 transition-colors",children:"íŒ€ì—ì„œ ì œê±°"}):e.jsx("button",{onClick:r,className:"w-full p-2 rounded-lg bg-cyan-600 text-white font-semibold hover:bg-cyan-500 transition-colors",children:"íŒ€ì— ì¶”ê°€"})]})})},va=async t=>{try{const n=new _e({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),a=`
      ë‹¹ì‹ ì€ ë›°ì–´ë‚œ RPG ì „ëµê°€ì…ë‹ˆë‹¤. ì•„ë˜ì˜ ë³´ìœ  ìºë¦­í„° ëª©ë¡ì„ ë³´ê³ , ê· í˜• ì¡íˆê³  ê°•ë ¥í•œ 4ì¸ íŒ€ì„ ì¶”ì²œí•´ ì£¼ì„¸ìš”.
      ì„ íƒëœ ìºë¦­í„°ë“¤ ê°„ì˜ ì „ëµê³¼ ì‹œë„ˆì§€ì— ëŒ€í•´ ì„¤ëª…í•´ ì£¼ì„¸ìš”. ì‘ë‹µì€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.

      ë³´ìœ  ìºë¦­í„° ëª©ë¡:
      ${t.map(i=>`- ${i.name} (${i.rarity}, ${i.attribute})`).join(`
`)}
    `;return(await n.models.generateContent({model:"gemini-2.5-flash",contents:a})).text}catch(n){return console.error("Error calling Gemini API:",n),"ì£„ì†¡í•©ë‹ˆë‹¤, ì§€ê¸ˆì€ ì¡°ì–¸ì„ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."}},vt={[be.R]:{border:"border-green-500",text:"text-green-400"},[be.SR]:{border:"border-blue-500",text:"text-blue-400"},[be.SSR]:{border:"border-yellow-400",text:"text-yellow-400"},[be.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400"}},Na=({ownedUltimates:t,onSelect:n,onClose:s})=>{const a=r=>{const i=(r.level-1)*.25+1,c=(r.power*i).toFixed(1);switch(r.effectType){case we.SINGLE_TARGET_DAMAGE:case we.AREA_OF_EFFECT_DAMAGE:return`ê³µê²©ë ¥ì˜ ${c}ë°° í”¼í•´`;case we.HEAL_SELF:case we.HEAL_TEAM:return`ê¸°ë³¸ íšŒë³µëŸ‰ ${(r.power*i).toFixed(0)}`;default:return""}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-lg bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300 mb-4",children:"ê¶ê·¹ê¸° ì„ íƒ"}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:t.map(r=>e.jsxs("div",{onClick:()=>n(r.id),className:`p-3 bg-gray-900/50 rounded-lg border-2 ${vt[r.rarity].border} cursor-pointer hover:bg-gray-700 transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:`font-bold text-lg ${vt[r.rarity].text}`,children:r.name}),e.jsxs("span",{className:"text-sm font-semibold text-white",children:["Lv.",r.level]})]}),e.jsx("p",{className:"text-sm text-yellow-300 font-semibold",children:a(r)}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:r.description})]},r.id))})]})})},Nt={[A.N]:{border:"border-gray-500",text:"text-gray-300"},[A.R]:{border:"border-green-500",text:"text-green-400"},[A.SR]:{border:"border-blue-500",text:"text-blue-400"},[A.SSR]:{border:"border-yellow-400",text:"text-yellow-400"},[A.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400"}},Sa=({inventory:t,onSelect:n,onClose:s})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-lg bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300 mb-4",children:"ì¥ë¹„ ì„ íƒ"}),t.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"ì¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤. ìƒì ì—ì„œ íšë“í•˜ì„¸ìš”."}):e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:t.map(a=>{const r=Ht(a);return e.jsxs("div",{onClick:()=>n(a.id),className:`p-3 bg-gray-900/50 rounded-lg border-2 ${Nt[a.rarity].border} cursor-pointer hover:bg-gray-700 transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg ${Nt[a.rarity].text}`,children:a.name}),e.jsxs("p",{className:"text-sm font-semibold text-white",children:["Lv.",a.level," ",e.jsxs("span",{className:"text-xs text-gray-400",children:["(",a.cards," ê°•í™”)"]})]})]}),e.jsxs("div",{className:"text-right text-xs text-gray-300",children:[r.attack>0&&e.jsxs("p",{children:["ê³µê²© +",r.attack.toLocaleString()]}),r.hp>0&&e.jsxs("p",{children:["ì²´ë ¥ +",r.hp.toLocaleString()]}),r.speed>0&&e.jsxs("p",{children:["ì†ë„ +",r.speed.toLocaleString()]})]})]}),e.jsx("p",{className:"text-xs text-cyan-400 mt-1 font-bold",children:a.specialEffect}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]},a.id)})})]})}),ka=({playerState:t,setPlayerState:n,onEquipUltimate:s,onEquipEquipment:a})=>{const[r,i]=m.useState(null),[c,d]=m.useState(!1),[o,x]=m.useState(!1),[p,h]=m.useState(""),[v,y]=m.useState(!1),f=t.teams[0],b=new Set(f.characters.filter(Boolean).map(w=>w.id)),C=new Map(Be.map(w=>[w.id,w])),$=new Map(t.ultimateSkills.map(w=>[w.id,w])),k=w=>$.get(w)||C.get(w),M=w=>w?t.inventory.find(I=>I.id===w):void 0,j=w=>{i(w)},u=()=>{i(null),d(!1),x(!1)},T=w=>{const I=f.characters.findIndex(B=>B===null);if(I!==-1&&!b.has(w.id)){const B=[...f.characters];B[I]=w,n(F=>F?{...F,teams:[{...F.teams[0],characters:B}]}:null)}u()},L=w=>{const I=f.characters.map(B=>B&&B.id===w?null:B);n(B=>B?{...B,teams:[{...B.teams[0],characters:I}]}:null),u()},G=async()=>{y(!0),h("");const w=await va(t.characters);h(w),y(!1)},O=w=>{r&&s(r.id,w),d(!1),i(null)},S=w=>{r&&a(r.id,w),x(!1),i(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ìºë¦­í„° ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-400",children:"ë³´ìœ  ìºë¦­í„°ë¥¼ í™•ì¸í•˜ê³  ìµœê°•ì˜ íŒ€ì„ êµ¬ì„±í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë©”ì¸ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:f.characters.map((w,I)=>e.jsx("div",{className:"relative",children:w?e.jsx(Ge,{character:w,onClick:()=>j(w)}):e.jsx("div",{className:"aspect-square w-full h-full bg-gray-700/50 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center text-gray-500 text-4xl",children:"+"})},I))})]}),e.jsxs("section",{children:[e.jsxs("button",{onClick:G,disabled:v,className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(ca,{className:"w-6 h-6"}),v?"ë¶„ì„ ì¤‘...":"AI íŒ€ ì¡°í•© ì¶”ì²œë°›ê¸°"]}),p&&e.jsx("div",{className:"prose prose-invert mt-4 p-4 bg-gray-800/50 rounded-lg max-w-none",dangerouslySetInnerHTML:{__html:p.replace(/\n/g,"<br />")}})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë³´ìœ  ìºë¦­í„° ëª©ë¡"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 gap-3",children:t.characters.map(w=>e.jsx(Ge,{character:w,onClick:()=>j(w)},w.id))})]}),r&&!c&&!o&&e.jsx(ja,{character:r,equippedUltimate:k(r.equippedUltimateId),equippedEquipment:M(r.equippedEquipmentId),isCharacterInTeam:b.has(r.id),onAddToTeam:()=>T(r),onRemoveFromTeam:()=>L(r.id),onChangeUltimate:()=>d(!0),onChangeEquipment:()=>x(!0),onClose:u}),c&&r&&e.jsx(Na,{ownedUltimates:t.ultimateSkills,onSelect:O,onClose:()=>d(!1)}),o&&r&&e.jsx(Sa,{inventory:t.inventory,onSelect:S,onClose:()=>x(!1)})]})},Ta={very_easy:{count:1,rarities:[A.N],levelRange:[1,3]},easy:{count:2,rarities:[A.N,A.R],levelRange:[3,8]},normal:{count:3,rarities:[A.R,A.SR],levelRange:[10,15]},hard:{count:4,rarities:[A.SR,A.SSR],levelRange:[20,25]},very_hard:{count:4,rarities:[A.SR,A.SSR],levelRange:[30,40]},hell:{count:4,rarities:[A.SSR,A.Mythic],levelRange:[45,55]},hardcore:{count:4,rarities:[A.Mythic],levelRange:[60,70]},boss:{count:1,rarities:[A.Mythic],levelRange:[100,100]}};let Ea=-1;const Ca=t=>{const n=Ta[t],s=[],a=xe.filter(r=>n.rarities.includes(r.rarity));if(a.length===0){console.error(`No characters available for rarities: ${n.rarities.join(", ")}`);const r=xe.filter(i=>i.rarity===A.N);if(r.length>0)a.push(...r);else return[]}for(let r=0;r<n.count;r++){const i=a[Math.floor(Math.random()*a.length)],c=Math.floor(Math.random()*(n.levelRange[1]-n.levelRange[0]+1))+n.levelRange[0],d={...i,id:Ea--,level:c,name:`${i.name} (ì )`};s.push(d)}return s},rt={very_easy:{label:"ë§¤ìš° ì‰¬ì›€",color:"bg-teal-700 hover:bg-teal-600"},easy:{label:"ì‰¬ì›€",color:"bg-green-600 hover:bg-green-500"},normal:{label:"ë³´í†µ",color:"bg-yellow-600 hover:bg-yellow-500"},hard:{label:"ì–´ë ¤ì›€",color:"bg-orange-600 hover:bg-orange-500"},very_hard:{label:"ë§¤ìš° ì–´ë ¤ì›€",color:"bg-red-600 hover:bg-red-500"},hell:{label:"ì§€ì˜¥",color:"bg-purple-700 hover:bg-purple-600"},hardcore:{label:"í•˜ë“œì½”ì–´",color:"bg-gray-700 hover:bg-gray-600"},boss:{label:"ë³´ìŠ¤",color:"bg-black border border-red-500 hover:bg-gray-900"}},Aa=({playerState:t,onStartCombat:n})=>{var d;const s=(d=t.teams[0])==null?void 0:d.characters.filter(o=>o!==null),[a,r]=m.useState("normal"),[i,c]=m.useState([]);return m.useEffect(()=>{c(Ca(a))},[a]),e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì „íˆ¬ ì¤€ë¹„"}),e.jsx("p",{className:"text-gray-400",children:"ë„ì „í•  ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"ë‚œì´ë„ ì„ íƒ"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.keys(rt).map(o=>e.jsx("button",{onClick:()=>r(o),className:`px-3 py-2 rounded-md font-bold transition-all text-sm ${a===o?`${rt[o].color} text-white ring-2 ring-white shadow-lg`:"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:rt[o].label},o))})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-400",children:"ì  íŒ€ (ë¯¸ë¦¬ë³´ê¸°)"}),i.length>0?e.jsx("div",{className:"flex justify-center gap-4",children:i.map((o,x)=>e.jsx("div",{className:"w-24",children:e.jsx(Ge,{character:o})},x))}):e.jsx("p",{className:"text-gray-500",children:"ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì—¬ ì ì„ ìƒì„±í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-400",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"flex justify-center gap-4",children:s.map((o,x)=>e.jsx("div",{className:"w-24",children:e.jsx(Ge,{character:o})},x))})]}),e.jsx("button",{onClick:()=>n(i,a),disabled:s.length===0||i.length===0,className:"w-full p-4 rounded-lg bg-gradient-to-r from-red-600 to-orange-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:"ì „íˆ¬ ì‹œì‘!"})]})},Ma=({friends:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì»¤ë®¤ë‹ˆí‹°"}),e.jsx("p",{className:"text-gray-400",children:"ì¹œêµ¬ ë° ë¼ì´ë²Œê³¼ êµë¥˜í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gradient-to-br from-green-900 to-teal-900 rounded-lg border-2 border-green-500 shadow-lg text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-green-300",children:"í˜‘ë™ ë ˆì´ë“œ ê°€ëŠ¥!"}),e.jsx("p",{className:"text-sm text-gray-200 mt-1 mb-3",children:"ì¹œêµ¬ì™€ íŒ€ì„ ì´ë£¨ì–´ ì›”ë“œ ë³´ìŠ¤ë¥¼ ë¬¼ë¦¬ì¹˜ê³  ë‘ ë°°ì˜ ë³´ìƒì„ íšë“í•˜ì„¸ìš”!"}),e.jsx("button",{className:"px-6 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-500 transition-colors",children:"íŒŒí‹° ì°¾ê¸°"})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¹œêµ¬ ëª©ë¡"}),e.jsx("div",{className:"space-y-4",children:t.map(n=>e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:n.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["í™œë™: ",n.lastActive]})]}),n.lastRarePull&&e.jsxs("div",{className:"text-right text-xs bg-yellow-900/50 border border-yellow-600 p-2 rounded-md",children:[e.jsx("p",{className:"text-yellow-300",children:"ìµœê·¼ íšë“:"}),e.jsxs("p",{className:"font-semibold",children:[n.lastRarePull.rarity," ",n.lastRarePull.name]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:[n.name,"ì˜ íŒ€"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:n.team.characters.map((s,a)=>s?e.jsx(Ge,{character:s},a):e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg"},a))})]})]},n.id))})]})]}),Ia=({pack:t,onConfirm:n,onClose:s})=>{const[a,r]=m.useState("idle"),i=()=>{r("processing"),setTimeout(()=>{r("success"),setTimeout(()=>{n()},1e3)},1500)};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-md bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:c=>c.stopPropagation(),children:[a==="idle"&&e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(aa,{className:"w-12 h-12 mx-auto text-cyan-400 mb-2"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"êµ¬ë§¤ í™•ì¸"})]}),a==="idle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"ìƒí’ˆ"}),e.jsxs("span",{className:"font-semibold text-white",children:[t.name," (",t.amount.toLocaleString()," ë³´ì„)"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-gray-400",children:"ì´ ê²°ì œ ê¸ˆì•¡"}),e.jsx("span",{className:"font-bold text-cyan-300",children:t.price})]})]}),e.jsx("div",{className:"text-center p-3 bg-yellow-900/50 border border-yellow-700 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-300",children:["ì´ê²ƒì€ ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.",e.jsx("br",{}),"ì‹¤ì œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šìœ¼ë©°, ì •ë³´ë¥¼ ì…ë ¥í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤."]})}),e.jsx("button",{onClick:i,className:"w-full mt-4 p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"ê²°ì œ í™•ì •"})]}),a==="processing"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-t-cyan-400 border-gray-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"ê²°ì œ ì²˜ë¦¬ ì¤‘..."})]}),a==="success"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-green-400 font-bold text-xl",children:"êµ¬ë§¤ ì„±ê³µ!"}),e.jsxs("p",{className:"text-gray-300",children:[t.amount.toLocaleString(),"ê°œì˜ ë³´ì„ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤."]})]})]})})},Ra=({onConfirm:t,onClose:n})=>{const[s,a]=m.useState(""),[r,i]=m.useState(""),c=d=>{d.preventDefault(),t(s)||(i("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤."),a(""))};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:n,children:e.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(xa,{className:"w-12 h-12 mx-auto text-cyan-400 mb-2"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"ë¹„ë°€ë²ˆí˜¸ í™•ì¸"}),e.jsx("p",{className:"text-sm text-gray-400",children:"êµ¬ë§¤ë¥¼ ê³„ì†í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”."})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("input",{type:"password",value:s,onChange:d=>{a(d.target.value),i("")},placeholder:"ë¹„ë°€ë²ˆí˜¸",className:`w-full px-4 py-3 bg-gray-700 border-2 rounded-lg text-white placeholder-gray-500 focus:outline-none transition-colors ${r?"border-red-500":"border-gray-600 focus:border-cyan-500"}`,autoFocus:!0}),r&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:r}),e.jsx("button",{type:"submit",disabled:!s,className:"w-full p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors disabled:opacity-50",children:"í™•ì¸"})]})]})})},La=[{name:"ìŠ¤íƒ€í„° íŒ©",amount:500,price:"â‚©1,200",color:"from-green-500 to-teal-500"},{name:"ê°€ì„±ë¹„ íŒ©",amount:1200,price:"â‚©2,500",color:"from-blue-500 to-cyan-500"},{name:"í”„ë¡œ íŒ©",amount:3e3,price:"â‚©5,900",color:"from-purple-500 to-indigo-500"},{name:"ê³ ë˜ íŒ©",amount:1e4,price:"â‚©15,000",color:"from-yellow-500 to-orange-500"},{name:"ì§€ë°°ì íŒ©",amount:5e4,price:"â‚©55,000",color:"from-red-500 to-rose-500"},{name:"ì‹ ë“¤ì˜ ì¶•ë³µ",amount:1e7,price:"â‚©119,000",color:"from-fuchsia-600 via-purple-600 to-indigo-700",bestValue:!0}],Oa=()=>{const t=Math.random();let n=0;const s={};Be.forEach(a=>{s[a.rarity]||(s[a.rarity]=[]),s[a.rarity].push(a)});for(const a of Object.keys(yt))if(n+=yt[a],t<n){const r=s[a];if(r&&r.length>0)return{...r[Math.floor(Math.random()*r.length)]}}return{...s[be.R][0]}},St=()=>{const t=Math.random();let n=0;const s={};ze.forEach(a=>{s[a.rarity]||(s[a.rarity]=[]),s[a.rarity].push(a)});for(const a of Object.keys(We))if(n+=We[a],t<n){const r=s[a];if(r&&r.length>0)return{...r[Math.floor(Math.random()*r.length)],cards:0}}return{...s[A.N][0],cards:0}},Ga=({playerState:t,setPlayerState:n})=>{const[s,a]=m.useState(null),[r,i]=m.useState(null),[c,d]=m.useState(!1),[o,x]=m.useState(null),[p,h]=m.useState(null),v=150,y=100,f=1e6,b=u=>{i(u),d(!0)},C=u=>u.trim()==="12121212"?(d(!1),a(r),i(null),!0):!1,$=u=>{n(T=>T?{...T,currency:T.currency+u}:null),a(null)},k=u=>{const T=v*u;if(!t||t.currency<T)return;const L=Array.from({length:u},Oa);n(G=>{if(!G)return null;const O=new Map;return G.ultimateSkills.forEach(S=>O.set(S.id,{...S})),L.forEach(S=>{if(O.has(S.id)){const w=O.get(S.id);w.level+=1}else O.set(S.id,{...S,level:1})}),{...G,currency:G.currency-T,ultimateSkills:Array.from(O.values())}}),x(L)},M=u=>{let T=y*u;if(u===1e4&&(T=f),!t||t.currency<T)return;let L=[];if(u===1e4){const G=ze.filter(O=>O.rarity===A.Mythic);if(G.length>0)for(let O=0;O<10;O++){const S=G[Math.floor(Math.random()*G.length)];L.push({...S,cards:0})}for(let O=L.length;O<u;O++)L.push(St());for(let O=L.length-1;O>0;O--){const S=Math.floor(Math.random()*(O+1));[L[O],L[S]]=[L[S],L[O]]}}else L=Array.from({length:u},St);n(G=>{if(!G)return null;const O=new Map;return G.inventory.forEach(S=>O.set(S.id,{...S})),L.forEach(S=>{if(O.has(S.id)){const w=O.get(S.id),{level:I,cards:B}=Ft(w,1);w.level=I,w.cards=B}else O.set(S.id,{...S,level:1,cards:0})}),{...G,currency:G.currency-T,inventory:Array.from(O.values())}}),h(L)},j=()=>p?[...p].sort((T,L)=>{const G={[A.Mythic]:5,[A.SSR]:4,[A.SR]:3,[A.R]:2,[A.N]:1};return(G[L.rarity]||0)-(G[T.rarity]||0)}).slice(0,60):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ìƒì "}),e.jsx("p",{className:"text-gray-400",children:"ë³´ì„ì„ êµ¬ë§¤í•˜ì—¬ ëª¨í—˜ì„ ê³„ì†í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-purple-400",children:"ê¶ê·¹ê¸° ë½‘ê¸°"}),e.jsxs("div",{className:"flex justify-around items-center gap-2",children:[e.jsxs("button",{onClick:()=>k(1),disabled:!t||t.currency<v,className:"flex-1 px-4 py-2 rounded-lg bg-purple-600 text-white font-bold hover:bg-purple-500 transition-colors disabled:opacity-50 text-sm",children:["1íšŒ (",v,")"]}),e.jsxs("button",{onClick:()=>k(10),disabled:!t||t.currency<v*10,className:"flex-1 px-4 py-2 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-colors disabled:opacity-50 text-sm",children:["10íšŒ (",v*10,")"]})]})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-green-400",children:"ì¥ë¹„ ë½‘ê¸°"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>M(1),disabled:!t||t.currency<y,className:"px-4 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-500 transition-colors disabled:opacity-50 text-sm",children:["1íšŒ (",y,")"]}),e.jsxs("button",{onClick:()=>M(10),disabled:!t||t.currency<y*10,className:"px-4 py-2 rounded-lg bg-teal-600 text-white font-bold hover:bg-teal-500 transition-colors disabled:opacity-50 text-sm",children:["10íšŒ (",y*10,")"]}),e.jsx("button",{onClick:()=>M(1e4),disabled:!t||t.currency<f,className:"col-span-2 px-4 py-2 rounded-lg bg-gradient-to-r from-emerald-600 to-green-700 text-white font-bold hover:from-emerald-500 transition-colors disabled:opacity-50 text-sm border border-green-400",children:"10000íšŒ (ì‹ í™” 10ê°œ í™•ì •)"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë³´ì„ íŒ©"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:La.map(u=>e.jsxs("div",{className:`relative p-4 rounded-lg bg-gradient-to-br ${u.color} text-white shadow-lg text-center flex flex-col justify-between`,children:[u.bestValue&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"BEST VALUE"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:u.name}),e.jsxs("p",{className:"text-2xl font-extrabold my-2",children:[u.amount.toLocaleString()," ë³´ì„"]}),e.jsx("p",{className:"text-sm font-semibold",children:u.price})]}),e.jsxs("button",{onClick:()=>b(u),className:"mt-3 w-full p-2 rounded-md bg-white/20 font-semibold hover:bg-white/30 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5"})," êµ¬ë§¤"]})]},u.amount))})]}),c&&e.jsx(Ra,{onConfirm:C,onClose:()=>d(!1)}),s&&e.jsx(Ia,{pack:s,onConfirm:()=>$(s.amount),onClose:()=>a(null)}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg max-w-lg w-full",onClick:u=>u.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-4 text-purple-300",children:"ê¶ê·¹ê¸° íšë“!"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map((u,T)=>e.jsxs("div",{className:"bg-gray-900 p-2 rounded border border-gray-700",children:[e.jsx("p",{className:"font-bold text-sm",children:u.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[u.rarity," ë“±ê¸‰"]})]},T))}),e.jsx("button",{onClick:()=>x(null),className:"w-full mt-4 p-2 bg-cyan-600 rounded",children:"í™•ì¸"})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>h(null),children:e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-4 text-green-300",children:"ì¥ë¹„ íšë“!"}),e.jsxs("div",{className:"text-center text-gray-400 mb-2",children:[p.length,"ê°œì˜ ì¥ë¹„ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤."]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:j().map((u,T)=>e.jsxs("div",{className:`bg-gray-900 p-2 rounded border ${u.rarity===A.Mythic?"border-fuchsia-500":u.rarity===A.SSR?"border-yellow-400":"border-gray-700"}`,children:[e.jsx("p",{className:"font-bold text-sm truncate",children:u.name}),e.jsx("p",{className:`text-xs ${u.rarity===A.Mythic?"text-fuchsia-400":u.rarity===A.SSR?"text-yellow-400":"text-gray-400"}`,children:u.rarity})]},T))}),p.length>60&&e.jsxs("p",{className:"text-center text-gray-500 mt-2 italic",children:["...ë° ê¸°íƒ€ ",p.length-60,"ê°œ ì•„ì´í…œ (ì¸ë²¤í† ë¦¬ë¡œ ì§€ê¸‰ë¨)"]}),e.jsx("button",{onClick:()=>h(null),className:"w-full mt-4 p-2 bg-cyan-600 rounded",children:"í™•ì¸"})]})})]})},_a=({guilds:t,onCreateGuild:n,onJoinGuild:s})=>{const[a,r]=m.useState(""),i=c=>{c.preventDefault(),a.trim()&&(n(a.trim()),r(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ê¸¸ë“œ ì°¾ê¸°"}),e.jsx("p",{className:"text-gray-400",children:"ë™ë£Œë“¤ê³¼ í•¨ê»˜í•˜ê¸° ìœ„í•œ ì—¬ì •ì„ ì‹œì‘í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ìƒì„±"}),e.jsxs("form",{onSubmit:i,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:c=>r(c.target.value),placeholder:"ìƒˆ ê¸¸ë“œ ì´ë¦„",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:border-cyan-500",maxLength:20}),e.jsx("button",{type:"submit",disabled:!a.trim(),className:"px-4 py-2 bg-indigo-600 font-semibold rounded-md hover:bg-indigo-500 disabled:opacity-50",children:"ìƒì„±"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ëª©ë¡"}),e.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto pr-2",children:t.length>0?t.map(c=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ê¸¸ë“œì¥: ",c.creator," | ë©¤ë²„: ",c.members.length,"ëª…"]})]}),e.jsx("button",{onClick:()=>s(c.id),className:"px-4 py-2 bg-cyan-600 font-semibold rounded-md hover:bg-cyan-500",children:"ê°€ì…"})]},c.id)):e.jsx("p",{className:"text-center text-gray-500",children:"ìƒì„±ëœ ê¸¸ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸¸ë“œë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”!"})})]})]})},Da=({guild:t,currentUser:n,playerState:s,onLeaveGuild:a,onSendMessage:r,onAttackRaid:i})=>{const[c,d]=m.useState(""),o=m.useRef(null);m.useEffect(()=>{var h;(h=o.current)==null||h.scrollIntoView({behavior:"smooth"})},[t.chat]);const x=h=>{h.preventDefault(),c.trim()&&(r(c.trim()),d(""))},p=t.raidBoss.hp/t.raidBoss.maxHp*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center relative",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:t.name}),e.jsxs("p",{className:"text-gray-400",children:["ê¸¸ë“œì¥: ",t.creator]}),e.jsx("button",{onClick:a,className:"absolute top-0 right-0 text-sm bg-red-600 px-3 py-1 rounded-md hover:bg-red-500",children:"ê¸¸ë“œ íƒˆí‡´"})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-center text-red-400",children:"ê¸¸ë“œ ë ˆì´ë“œ"}),e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:t.raidBoss.imageUrl,alt:t.raidBoss.name,className:"w-48 h-48 mx-auto rounded-lg object-cover border-4 border-red-800"}),e.jsx("h3",{className:"text-2xl font-bold mt-2",children:t.raidBoss.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["ìµœê·¼ ê³µê²©ì: ",t.raidBoss.lastAttackedBy||"ì—†ìŒ"]}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-6 mt-4 relative overflow-hidden border-2 border-black/50",children:[e.jsx("div",{className:"bg-red-600 h-full transition-all duration-500",style:{width:`${p}%`}}),e.jsxs("span",{className:"absolute inset-0 text-center text-sm font-bold text-white flex items-center justify-center",children:[t.raidBoss.hp.toLocaleString()," / ",t.raidBoss.maxHp.toLocaleString()]})]}),e.jsx("button",{onClick:i,disabled:t.raidBoss.hp<=0,className:"mt-4 px-8 py-3 rounded-lg bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:t.raidBoss.hp>0?"ê³µê²©!":"ë³´ìŠ¤ ì²˜ì¹˜ ì™„ë£Œ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 p-4 bg-gray-800/50 rounded-lg flex flex-col",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ì±„íŒ…"}),e.jsxs("div",{className:"flex-grow bg-gray-900/50 p-2 rounded-md h-64 overflow-y-auto",children:[t.chat.map((h,v)=>e.jsx("div",{className:"mb-2 text-sm",children:h.username==="System"?e.jsxs("p",{className:"text-cyan-400 italic",children:["-- ",h.message," --"]}):e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold",style:{color:h.username===n?"#FBBF24":"white"},children:[h.username,":"]})," ",h.message]})},v)),e.jsx("div",{ref:o})]}),e.jsxs("form",{onSubmit:x,className:"flex gap-2 mt-3",children:[e.jsx("input",{type:"text",value:c,onChange:h=>d(h.target.value),placeholder:"ë©”ì‹œì§€ ì…ë ¥...",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:border-cyan-500"}),e.jsx("button",{type:"submit",className:"p-2 bg-cyan-600 rounded-md hover:bg-cyan-500",children:e.jsx(ma,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-3",children:["ê¸¸ë“œì› (",t.members.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:t.members.map(h=>e.jsx("div",{className:"p-2 bg-gray-700/50 rounded",children:e.jsx("p",{className:"font-semibold",children:h.username})},h.username))})]})]})]})},Pa=t=>{const{playerState:n,allGuilds:s,currentUser:a}=t,r=s.find(i=>i.id===n.guildId);return r?e.jsx(Da,{guild:r,currentUser:a,...t}):e.jsx(_a,{guilds:s,...t})},kt=({character:t,onClick:n,canAct:s,isAttacker:a,isTargetable:r})=>{const i=t.currentHp/t.hp*100,c=t.ultimateGauge/t.maxUltimateGauge*100,d=t.currentHp<=0,o=a?"ring-4 ring-yellow-400 scale-110":r?"ring-4 ring-red-500 cursor-pointer hover:ring-red-400":s?"ring-4 ring-green-500 cursor-pointer hover:ring-green-400":"";return e.jsxs("div",{className:`relative transition-all duration-300 ${a?"z-10":""}`,onClick:n,children:[e.jsx("div",{className:`${o} rounded-lg ${d?"opacity-50 grayscale":""}`,children:e.jsx(Ge,{character:t})}),e.jsxs("div",{className:`absolute -bottom-7 left-1 right-1 transition-opacity ${d?"opacity-50":""}`,children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 border-2 border-black/50 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${i}%`}})}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 border border-black/50 mt-1 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full",style:{width:`${c}%`}})})]})]})},$a=({playerTeam:t,enemyTeam:n,onCombatEnd:s,difficulty:a,ultimateSkills:r,inventory:i,reward:c})=>{const[d,o]=m.useState([]),[x,p]=m.useState("INITIALIZING"),[h,v]=m.useState("SELECT_ATTACKER"),[y,f]=m.useState(null),[b,C]=m.useState(new Set),[$,k]=m.useState([]),[M,j]=m.useState("ì „íˆ¬ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤..."),[u,T]=m.useState(null),L=new Map(Be.map(P=>[P.id,P])),G=new Map(r.map(P=>[P.id,P]));m.useEffect(()=>{const P=(g,E)=>{const N=E&&g.equippedEquipmentId?i.find(_=>_.id===g.equippedEquipmentId):void 0,R=ut(g,N),D=E?G.get(g.equippedUltimateId)||L.get(g.equippedUltimateId)||L.get(1):L.get(g.equippedUltimateId)||L.get(1);return{...g,...R,currentHp:R.hp,isPlayer:E,uniqueId:`${g.id}-${Math.random()}`,ultimateGauge:0,maxUltimateGauge:100,ultimateSkill:D}},z=t.map(g=>P(g,!0)),H=n.map(g=>P(g,!1)),ae=z.reduce((g,E)=>g+E.speed,0),l=H.reduce((g,E)=>g+E.speed,0);o([...z,...H]),ae>=l?(p("player"),j("ë‹¹ì‹ ì˜ í„´ì…ë‹ˆë‹¤! í–‰ë™í•  ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”.")):(p("enemy"),j("ì ì˜ í„´ì…ë‹ˆë‹¤...")),k(["ì „íˆ¬ ì‹œì‘!"])},[t,n,r,i]);const O=P=>{k(z=>[P,...z.slice(0,4)])},S=(P,z)=>{let H=!1;return o(ae=>ae.map(l=>{if(l.uniqueId===P){const g=Math.max(0,l.currentHp-z);return g===0&&(H=!0),{...l,currentHp:g,ultimateGauge:Math.min(l.maxUltimateGauge,l.ultimateGauge+30)}}return l})),H},w=P=>{const z=new Set(b).add(P.uniqueId);C(z),f(null),d.filter(ae=>ae.isPlayer&&ae.currentHp>0&&!z.has(ae.uniqueId)).length===0?(p("enemy"),j("ì ì˜ í„´ì…ë‹ˆë‹¤..."),C(new Set)):(v("SELECT_ATTACKER"),j("í–‰ë™í•  ë‹¤ë¥¸ ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”."))},I=m.useCallback((P,z)=>{const H=P.attack;O(`${P.name}ì´(ê°€) ${z.name}ì—ê²Œ ${H}ì˜ í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤!`),S(z.uniqueId,H),o(ae=>ae.map(l=>l.uniqueId===P.uniqueId?{...l,ultimateGauge:Math.min(l.maxUltimateGauge,l.ultimateGauge+40)}:l)),w(P)},[d,b]),B=(P,z)=>{const H=P.ultimateSkill;let ae=`${P.name}ì´(ê°€) ê¶ê·¹ê¸° [${H.name}] (ì„)ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!`;O(ae);const l=(H.level-1)*.25+1;z.forEach(g=>{switch(H.effectType){case we.SINGLE_TARGET_DAMAGE:case we.AREA_OF_EFFECT_DAMAGE:const E=Math.floor(P.attack*H.power*l);S(g.uniqueId,E);break;case we.HEAL_SELF:case we.HEAL_TEAM:o(N=>N.map(R=>{if(R.uniqueId===g.uniqueId){const D=Math.min(R.hp,R.currentHp+H.power*l);return{...R,currentHp:D}}return R}));break}}),o(g=>g.map(E=>E.uniqueId===P.uniqueId?{...E,ultimateGauge:0}:E)),w(P)};m.useEffect(()=>{const P=d.filter(H=>!H.isPlayer&&H.currentHp>0),z=d.filter(H=>H.isPlayer&&H.currentHp>0);P.length===0&&d.length>0?(T("win"),j("ìŠ¹ë¦¬!")):z.length===0&&d.length>0&&(T("lose"),j("íŒ¨ë°°..."))},[d]),m.useEffect(()=>{if(x!=="enemy"||u)return;(async()=>{const z=d.filter(H=>!H.isPlayer&&H.currentHp>0);for(const H of z){if(await new Promise(E=>setTimeout(E,1200)),u)break;const ae=d.filter(E=>E.isPlayer&&E.currentHp>0);if(ae.length===0)break;const l=ae[Math.floor(Math.random()*ae.length)],g=H.attack;O(`${H.name}ì´(ê°€) ${l.name}ì—ê²Œ ${g}ì˜ í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤!`),S(l.uniqueId,g),o(E=>E.map(N=>N.uniqueId===H.uniqueId?{...N,ultimateGauge:Math.min(N.maxUltimateGauge,N.ultimateGauge+40)}:N))}await new Promise(H=>setTimeout(H,1e3)),u||(p("player"),j("ë‹¹ì‹ ì˜ í„´ì…ë‹ˆë‹¤! í–‰ë™í•  ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”."),v("SELECT_ATTACKER"),C(new Set))})()},[x,u]);const F=P=>{x!=="player"||u||b.has(P.uniqueId)||(f(P.uniqueId),v("SELECT_ACTION"),j(`${P.name}ì˜ í–‰ë™ì„ ì„ íƒí•˜ì„¸ìš”.`))},Z=P=>{if(h!=="SELECT_TARGET"||!y||u||P.currentHp<=0)return;const z=d.find(H=>H.uniqueId===y);z&&I(z,P)},he=P=>{if(h!=="SELECT_ACTION"||!y)return;const z=d.find(H=>H.uniqueId===y);if(P==="attack")v("SELECT_TARGET"),j(`${z.name}(ìœ¼)ë¡œ ê³µê²©í•  ì ì„ ì„ íƒí•˜ì„¸ìš”.`);else{const H=z.ultimateSkill;let ae=[];switch(H.targetType){case Ae.ENEMY_SINGLE:v("SELECT_TARGET"),j("ê¶ê·¹ê¸°ë¡œ ê³µê²©í•  ì ì„ ì„ íƒí•˜ì„¸ìš”.");return;case Ae.ENEMY_ALL:ae=d.filter(l=>!l.isPlayer&&l.currentHp>0);break;case Ae.ALLY_SELF:ae=[z];break;case Ae.ALLY_ALL:ae=d.filter(l=>l.isPlayer&&l.currentHp>0);break}B(z,ae)}},Re=()=>{window.confirm("ì •ë§ ë„ë§ì¹˜ì‹œê² ìŠµë‹ˆê¹Œ? (íŒ¨ë°°ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤)")&&s("lose")},je=d.find(P=>P.uniqueId===y);return e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 space-y-4 relative",children:[e.jsxs("button",{onClick:Re,className:"absolute top-4 right-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg border border-gray-500 shadow-lg text-sm font-bold z-50 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸƒ"})," ë„ë§ê°€ê¸°"]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-red-400 mb-8",children:"ì  íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:d.filter(P=>!P.isPlayer).map(P=>e.jsx(kt,{character:P,isTargetable:h==="SELECT_TARGET"&&P.currentHp>0,onClick:P.currentHp>0?()=>{h==="SELECT_TARGET"&&je&&(je.ultimateSkill.targetType===Ae.ENEMY_SINGLE&&je.ultimateGauge===je.maxUltimateGauge?B(je,[P]):Z(P))}:void 0},P.uniqueId))})]}),e.jsxs("div",{className:"w-full max-w-lg min-h-[14rem] bg-black/50 p-3 rounded-lg border border-gray-700 text-center flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-cyan-300 mb-2",children:M}),$.map((P,z)=>e.jsx("p",{className:`transition-opacity duration-300 ${z===0?"text-white":"text-gray-400 text-xs"}`,children:P},z))]}),h==="SELECT_ACTION"&&je&&e.jsxs("div",{className:"flex gap-4 justify-center mt-4",children:[e.jsx("button",{onClick:()=>he("attack"),className:"px-4 py-2 bg-red-600 rounded hover:bg-red-500",children:"ì¼ë°˜ ê³µê²©"}),e.jsx("button",{onClick:()=>he("ultimate"),disabled:je.ultimateGauge<je.maxUltimateGauge,className:"px-4 py-2 bg-purple-600 rounded hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed",children:"ê¶ê·¹ê¸° ì‚¬ìš©"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-green-400 mb-8",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:d.filter(P=>P.isPlayer).map(P=>e.jsx(kt,{character:P,canAct:x==="player"&&!b.has(P.uniqueId)&&h==="SELECT_ATTACKER"&&P.currentHp>0,isAttacker:y===P.uniqueId,onClick:P.currentHp>0?()=>F(P):void 0},P.uniqueId))})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg text-center shadow-2xl border-2 border-cyan-400",children:[e.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-yellow-400",children:u==="win"?"ìŠ¹ë¦¬!":"íŒ¨ë°°..."}),e.jsx("p",{className:"text-gray-300 mb-6",children:u==="win"?`${c} ë‹¤ì´ì•„ íšë“!`:"íŒ€ì´ ì „ë©¸í–ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>s(u),className:"px-8 py-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"í™•ì¸"})]})})]})};function Ba(t){const n=t.hp??t.maxHp??1e5,s=Math.max(100,Math.round(n*.02)),a=5+Math.round(n/1e5*10);return{name:t.name,imageUrl:t.imageUrl,hp:n,attack:s,speed:a,currentHp:n}}const Tt=({character:t,isAttacker:n})=>{const s=t.currentHp/t.hp*100,a=t.currentHp<=0,r=n?"ring-4 ring-yellow-400 scale-110":"";return e.jsxs("div",{className:`relative transition-all duration-300 ${n?"z-10":""}`,children:[e.jsx("div",{className:`${r} rounded-lg ${a?"opacity-50 grayscale":""}`,children:e.jsx(Ge,{character:t})}),e.jsxs("div",{className:`absolute -bottom-5 left-1 right-1 transition-opacity ${a?"opacity-50":""}`,children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 border-2 border-black/50 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${s}%`}})}),"ultimateGauge"in t&&e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 border border-black/50 mt-1 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full",style:{width:`${t.ultimateGauge/t.maxUltimateGauge*100}%`}})})]})]})},Ua=({playerTeam:t,boss:n,ultimateSkills:s,inventory:a,onCombatEnd:r})=>{const[i,c]=m.useState([]),[d,o]=m.useState(null),[x,p]=m.useState(0),[h]=m.useState(10),[v,y]=m.useState([]),[f,b]=m.useState(!0),C=new Map(Be.map(j=>[j.id,j])),$=new Map(s.map(j=>[j.id,j]));m.useEffect(()=>{const j=u=>{const T=u.equippedEquipmentId?a.find(O=>O.id===u.equippedEquipmentId):void 0,L=ut(u,T),G=$.get(u.equippedUltimateId)||C.get(u.equippedUltimateId)||C.get(1);return{...u,...L,currentHp:L.hp,isPlayer:!0,uniqueId:`${u.id}-${Math.random()}`,ultimateGauge:0,maxUltimateGauge:100,ultimateSkill:G}};c(t.map(j)),o(Ba(n)),y(["ë ˆì´ë“œ ë³´ìŠ¤ ì¶œí˜„!"]),b(!1)},[t,n,s,a]);const k=j=>{y(u=>[j,...u.slice(0,4)])},M=()=>{if(!d)return;const j=n.hp-d.currentHp;k(`ì „íˆ¬ ì¢…ë£Œ! ì´ ${j.toLocaleString()}ì˜ í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤.`),setTimeout(()=>{r(j)},2e3)};return m.useEffect(()=>{if(f||!d)return;const j=i.filter(G=>G.currentHp>0);if(x>=h||j.length===0||d.currentHp<=0){M();return}const L=setTimeout(async()=>{b(!0),p(G=>G+1);for(const G of j){if(d.currentHp<=0)break;if(await new Promise(O=>setTimeout(O,600)),G.ultimateGauge>=G.maxUltimateGauge){const O=G.ultimateSkill;k(`${G.name}ì´(ê°€) ê¶ê·¹ê¸° [${O.name}] (ì„)ë¥¼ ì‚¬ìš©!`);const S=(O.level-1)*.25+1,w=Math.floor(G.attack*O.power*S);o(I=>{if(!I)return null;const B=Math.max(0,I.currentHp-w);return{...I,currentHp:B}}),c(I=>I.map(B=>B.uniqueId===G.uniqueId?{...B,ultimateGauge:0}:B))}else{const O=G.attack;k(`${G.name}ì´(ê°€) ë³´ìŠ¤ë¥¼ ê³µê²©! ${O} í”¼í•´!`),o(S=>{if(!S)return null;const w=Math.max(0,S.currentHp-O);return{...S,currentHp:w}}),c(S=>S.map(w=>w.uniqueId===G.uniqueId?{...w,ultimateGauge:Math.min(w.maxUltimateGauge,w.ultimateGauge+40)}:w))}}if(d.currentHp>0){await new Promise(O=>setTimeout(O,1e3));const G=i.filter(O=>O.currentHp>0);if(G.length>0){const O=G[Math.floor(Math.random()*G.length)],S=d.attack;k(`ë³´ìŠ¤ê°€ ${O.name}ì—ê²Œ ${S} í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤!`),c(w=>w.map(I=>{if(I.uniqueId===O.uniqueId){const B=Math.max(0,I.currentHp-S);return{...I,currentHp:B,ultimateGauge:Math.min(I.maxUltimateGauge,I.ultimateGauge+30)}}return I}))}}b(!1)},1e3);return()=>clearTimeout(L)},[x,f,d,i]),d?e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 space-y-4",children:[e.jsxs("div",{className:"w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-400 mb-8",children:"ë ˆì´ë“œ ë³´ìŠ¤"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-48",children:e.jsx(Tt,{character:d})})})]}),e.jsx("div",{className:"w-full max-w-lg min-h-[14rem] bg-black/50 p-3 rounded-lg border border-gray-700 text-center flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xl font-bold text-cyan-300 mb-2",children:["Turn ",x," / ",h]}),v.map((j,u)=>e.jsx("p",{className:`transition-opacity duration-300 ${u===0?"text-white":"text-gray-400 text-xs"}`,children:j},u))]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-green-400 mb-8",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:i.map(j=>e.jsx(Tt,{character:j},j.uniqueId))})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})},Fa=()=>{const[t,n]=m.useState(null),[s,a]=m.useState(null),[r,i]=m.useState("login"),[c,d]=m.useState(null),[o,x]=m.useState(null),[p,h]=m.useState([]);m.useEffect(()=>{t&&p.length===0&&h([{id:"guild-1",name:"ìµœê°•ìš©ë³‘ë‹¨",creator:"AcePlayer",members:[{username:"AcePlayer",joinedAt:new Date().toISOString()}],chat:[{username:"System",message:"ìµœê°•ìš©ë³‘ë‹¨ ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString()}],raidBoss:{...Ze}},{id:"guild-2",name:"ì–´ë‘ ì˜ìì†ë“¤",creator:"ShadowCat",members:[{username:"ShadowCat",joinedAt:new Date().toISOString()}],chat:[{username:"System",message:"ì–´ë‘ ì˜ìì†ë“¤ ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString()}],raidBoss:{...Ze,name:"ì‹¬ì—°ì˜ ê°ì‹œì",hp:75e6,maxHp:75e6}}])},[t]),m.useEffect(()=>{if(t){const S=localStorage.getItem(`playerState_${t}`);if(S)try{const w=JSON.parse(S);a({...Fe,...w,inventory:w.inventory||Fe.inventory,ultimateSkills:w.ultimateSkills||Fe.ultimateSkills})}catch(w){console.error("Failed to parse save state",w),a(Fe)}else a(Fe)}else a(null),i("login")},[t]),m.useEffect(()=>{s&&t&&localStorage.setItem(`playerState_${t}`,JSON.stringify(s))},[s,t]);const v=S=>{n(S),i("main")},y=()=>{n(null)},f=S=>{i(S)},b=(S,w)=>{const B={very_easy:100,easy:300,normal:800,hard:2e3,very_hard:5e3,hell:15e3,hardcore:5e4,boss:1e5}[w];d({opponents:S,difficulty:w,reward:B})},C=S=>{S==="win"&&s&&c&&a({...s,currency:s.currency+c.reward}),d(null)},$=(S,w)=>{a(I=>{if(!I)return null;const B=I.characters.map(Z=>Z.id===S?{...Z,equippedUltimateId:w}:Z),F=I.teams.map(Z=>({...Z,characters:Z.characters.map(he=>he&&he.id===S?{...he,equippedUltimateId:w}:he)}));return{...I,characters:B,teams:F}})},k=(S,w)=>{a(I=>{if(!I)return null;const B=I.characters.map(Z=>Z.id===S?{...Z,equippedEquipmentId:w}:Z),F=I.teams.map(Z=>({...Z,characters:Z.characters.map(he=>he&&he.id===S?{...he,equippedEquipmentId:w}:he)}));return{...I,characters:B,teams:F}})},M=S=>{if(!t||!s||s.guildId)return;const w={id:`guild-${Date.now()}`,name:S,creator:t,members:[{username:t,joinedAt:new Date().toISOString()}],chat:[{username:"System",message:`${S} ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}],raidBoss:{...Ze}};h(I=>[...I,w]),a(I=>I?{...I,guildId:w.id}:null)},j=S=>{!t||!s||s.guildId||(h(w=>w.map(I=>I.id===S?{...I,members:[...I.members,{username:t,joinedAt:new Date().toISOString()}],chat:[...I.chat,{username:"System",message:`${t}ë‹˜ì´ ê°€ì…í–ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}]}:I)),a(w=>w?{...w,guildId:S}:null))},u=()=>{if(!t||!s||!s.guildId)return;const S=s.guildId;h(w=>w.map(I=>I.id===S?{...I,members:I.members.filter(B=>B.username!==t),chat:[...I.chat,{username:"System",message:`${t}ë‹˜ì´ íƒˆí‡´í–ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}]}:I)),a(w=>w?{...w,guildId:null}:null)},T=S=>{if(!t||!s||!s.guildId)return;const w=s.guildId,I={username:t,message:S,timestamp:new Date().toISOString()};h(B=>B.map(F=>F.id===w?{...F,chat:[...F.chat,I]}:F))},L=()=>{if(!s||!s.guildId)return;const S=p.find(w=>w.id===s.guildId);S&&S.raidBoss.hp>0&&x({raidBoss:S.raidBoss})},G=S=>{if(!t||!s||!s.guildId)return;const w=s.guildId;let I=!1;if(h(B=>B.map(F=>{if(F.id===w){const Z=Math.max(0,F.raidBoss.hp-S);Z===0&&F.raidBoss.hp>0&&(I=!0);const he=I?[...F.chat,{username:"System",message:`${t}ë‹˜ì´ ë ˆì´ë“œ ë³´ìŠ¤ì—ê²Œ ìµœí›„ì˜ ì¼ê²©ì„ ê°€í–ˆìŠµë‹ˆë‹¤!`,timestamp:new Date().toISOString()}]:F.chat;return{...F,raidBoss:{...F.raidBoss,hp:Z,lastAttackedBy:t},chat:he}}return F})),I){const B=p.find(F=>F.id===w);B&&a(F=>F?{...F,currency:F.currency+B.raidBoss.reward}:null)}x(null)},O=()=>{var S,w;if(!t||!s)return e.jsx(ea,{onLogin:v});if(c){const I=((S=s.teams[0])==null?void 0:S.characters.filter(B=>B!==null))||[];return e.jsx($a,{playerTeam:I,enemyTeam:c.opponents,difficulty:c.difficulty,reward:c.reward,ultimateSkills:s.ultimateSkills||[],inventory:s.inventory||[],onCombatEnd:C})}if(o){const I=((w=s.teams[0])==null?void 0:w.characters.filter(B=>B!==null))||[];return e.jsx(Ua,{playerTeam:I,boss:o.raidBoss,ultimateSkills:s.ultimateSkills||[],inventory:s.inventory||[],onCombatEnd:G})}switch(r){case"main":return e.jsx(wt,{playerState:s,currentUser:t,onLogout:y,onNavigate:f});case"gacha":return e.jsx(ba,{playerState:s,setPlayerState:a});case"team":return e.jsx(ka,{playerState:s,setPlayerState:a,onEquipUltimate:$,onEquipEquipment:k});case"battle":return e.jsx(Aa,{playerState:s,onStartCombat:b});case"social":return e.jsx(Ma,{friends:s.friends});case"shop":return e.jsx(Ga,{playerState:s,setPlayerState:a});case"guild":return e.jsx(Pa,{playerState:s,allGuilds:p,currentUser:t,onCreateGuild:M,onJoinGuild:j,onLeaveGuild:u,onSendMessage:T,onAttackRaid:L});default:return e.jsx(wt,{playerState:s,currentUser:t,onLogout:y,onNavigate:f})}};return e.jsx(ke,{className:"min-h-screen bg-gray-900 text-white font-sans selection:bg-cyan-500 selection:text-white pb-20 md:pb-0",children:e.jsxs("div",{className:"max-w-2xl mx-auto min-h-screen bg-gray-900 shadow-2xl overflow-hidden relative",children:[e.jsx("main",{className:"p-4 pb-24",children:O()}),t&&!c&&!o&&e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-2 flex justify-around items-center max-w-2xl mx-auto z-50",children:[e.jsx("button",{onClick:()=>i("main"),className:`p-2 rounded-lg ${r==="main"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(ra,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("team"),className:`p-2 rounded-lg ${r==="team"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(da,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("battle"),className:`p-2 rounded-lg ${r==="battle"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(sa,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("guild"),className:`p-2 rounded-lg ${r==="guild"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(na,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("shop"),className:`p-2 rounded-lg ${r==="shop"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Ut,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("social"),className:`p-2 rounded-lg ${r==="social"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(oa,{className:"w-6 h-6"})})]})]})})},X=40,lt=10,Et=30,Ct=3,Ha=6,qa=1.5,Wa=1,Va=1.5,Ya=1.2,He=60*(Math.PI/180),Pe=640,za=.0037,Ka=40,Ja=600,Xa=90,Za=Math.PI/2,Qa=.1,en=.3,tn=1,sn=0,an=.6,nn=2e4,rn=60,ln=300,on=600,cn={MOVE_FORWARD:"KeyW",MOVE_BACKWARD:"KeyS",MOVE_LEFT:"KeyA",MOVE_RIGHT:"KeyD",RUN:"ShiftLeft",SNEAK:"ControlLeft",INTERACT:"KeyE",FLASHLIGHT:"KeyF"},se=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,9,0,4,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,8,8,8,8,8,8,8,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,5,5,0,0,0,0,0,0,1,8,8,8,8,8,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,10,10,10,2,1],[1,5,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,6,0,1,0,0,7,7,1,0,0,1,7,7,7,1,0,0,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,1,0,0,7,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1],[1,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,1],[1,0,7,7,7,0,0,0,0,1,7,7,1,0,0,1,10,0,1,1,0,0,1,10,10,1,1,0,0,1,10,10,1,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,7,7,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,6,0,0,1,0,0,1,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,7,7,7,0,0,0,0,1,10,10,1,0,0,1,2,0,0,1,0,0,1,0,0,0,1,0,0,1,5,5,5,1,2,0,6,0,1],[1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,7,7,0,0,0,0,7,7,0,0,7,7,0,0,7,7,0,0,7,7,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,7,7,7,7,7,0,0,1,0,7,7,0,0,7,7,0,0,7,7,0,0,7,7,0,0,0,2,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1],[1,5,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1],[1,5,0,6,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,2,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,1,1,1,0,0,1,0,1,0,0,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1]],dn=se[0].length*X,mn=se.length*X;class Q{constructor(){this.ctx=null,this.masterGain=null,this.windNode=null,this.windGain=null,this.lastBreathTime=0}static getInstance(){return Q.instance||(Q.instance=new Q),Q.instance}init(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=.5,this.masterGain.connect(this.ctx.destination)),this.ctx.state==="suspended"&&this.ctx.resume()}resume(){this.ctx&&this.ctx.state==="suspended"?this.ctx.resume():this.ctx||this.init()}createNoiseBuffer(){if(!this.ctx)throw new Error("AudioContext not initialized");const n=this.ctx.sampleRate*2,s=this.ctx.createBuffer(1,n,this.ctx.sampleRate),a=s.getChannelData(0);for(let r=0;r<n;r++)a[r]=Math.random()*2-1;return s}startWind(){if(!this.ctx||!this.masterGain||this.windNode)return;const n=this.createNoiseBuffer();this.windNode=this.ctx.createBufferSource(),this.windNode.buffer=n,this.windNode.loop=!0;const s=this.ctx.createBiquadFilter();s.type="lowpass",s.frequency.value=400,s.Q.value=1,this.windGain=this.ctx.createGain(),this.windGain.gain.value=.05;const a=this.ctx.createOscillator();a.frequency.value=.1;const r=this.ctx.createGain();r.gain.value=.02,a.connect(r),r.connect(this.windGain.gain),a.start(),this.windNode.connect(s),s.connect(this.windGain),this.windGain.connect(this.masterGain),this.windNode.start()}stopWind(){this.windNode&&(this.windNode.stop(),this.windNode=null)}playCrow(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=this.ctx.createOscillator();s.type="sawtooth",s.frequency.setValueAtTime(600,n),s.frequency.exponentialRampToValueAtTime(400,n+.4);const a=this.ctx.createGain();a.gain.setValueAtTime(0,n),a.gain.linearRampToValueAtTime(.1,n+.05),a.gain.exponentialRampToValueAtTime(.001,n+.5);const r=this.ctx.createOscillator();r.frequency.value=30;const i=this.ctx.createGain();i.gain.value=200,r.connect(i),i.connect(s.frequency),s.connect(a),a.connect(this.masterGain),s.start(n),r.start(n),s.stop(n+.6),r.stop(n+.6)}playCarCooling(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=3+Math.floor(Math.random()*3);for(let a=0;a<s;a++){const r=n+Math.random()*2,i=this.ctx.createOscillator();i.type="triangle",i.frequency.value=2e3+Math.random()*500;const c=this.ctx.createGain();c.gain.setValueAtTime(.05,r),c.gain.exponentialRampToValueAtTime(.001,r+.05),i.connect(c),c.connect(this.masterGain),i.start(r),i.stop(r+.1)}}playFlashlightRoll(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime;[0,.2,.35,.45].forEach((a,r)=>{const i=n+a,c=this.createNoiseBuffer(),d=this.ctx.createBufferSource();d.buffer=c;const o=this.ctx.createBiquadFilter();o.type="lowpass",o.frequency.value=600-r*100;const x=this.ctx.createGain();x.gain.setValueAtTime(.2/(r+1),i),x.gain.exponentialRampToValueAtTime(.001,i+.1),d.connect(o),o.connect(x),x.connect(this.masterGain),d.start(i)}),setTimeout(()=>{if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,r=this.ctx.createOscillator();r.frequency.setValueAtTime(80,a),r.frequency.exponentialRampToValueAtTime(40,a+.1);const i=this.ctx.createGain();i.gain.setValueAtTime(.3,a),i.gain.exponentialRampToValueAtTime(.001,a+.2),r.connect(i),i.connect(this.masterGain),r.start(a),r.stop(a+.2)},600)}playBell(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime;[220,440,660,880].forEach((s,a)=>{const r=this.ctx.createOscillator(),i=this.ctx.createGain();r.frequency.value=s,r.detune.value=Math.random()*20-10,i.gain.setValueAtTime(0,n),i.gain.linearRampToValueAtTime(.1/(a+1),n+.1),i.gain.exponentialRampToValueAtTime(.001,n+4),r.connect(i),i.connect(this.masterGain),r.start(n),r.stop(n+4)})}playBreathing(){if(!this.ctx||!this.masterGain)return;const n=Date.now();if(n-this.lastBreathTime<2500)return;this.lastBreathTime=n;const s=this.ctx.currentTime,a=this.createNoiseBuffer(),r=this.ctx.createBufferSource();r.buffer=a;const i=this.ctx.createBiquadFilter();i.type="lowpass",i.frequency.value=400;const c=this.ctx.createGain();c.gain.setValueAtTime(0,s),c.gain.linearRampToValueAtTime(.05,s+1),c.gain.linearRampToValueAtTime(0,s+2),r.connect(i),i.connect(c),c.connect(this.masterGain),r.start(s),r.stop(s+2.5)}playFootstep(n,s=1){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,r=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=r;const c=this.ctx.createBiquadFilter();c.type="lowpass",n==="DIRT"?c.frequency.value=200:n==="WOOD"?c.frequency.value=800:n==="WATER"&&(c.frequency.value=1e3,c.Q.value=5);const d=this.ctx.createGain();d.gain.setValueAtTime(.15*s,a),d.gain.exponentialRampToValueAtTime(.001,a+.1),i.connect(c),c.connect(d),d.connect(this.masterGain),i.start(a),i.stop(a+.1)}playGhostFootstep(n){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,a=this.createNoiseBuffer(),r=this.ctx.createBufferSource();r.buffer=a;const i=this.ctx.createBiquadFilter();i.type="lowpass";let c=.1,d=.1;if(n==="SOFT")i.frequency.value=150,c=.05;else if(n==="NORMAL")i.frequency.value=300,c=.15;else{i.frequency.value=500,c=.4,d=.15;const x=this.ctx.createOscillator();x.frequency.value=60;const p=this.ctx.createGain();p.gain.setValueAtTime(.2,s),p.gain.exponentialRampToValueAtTime(.001,s+d),x.connect(p),p.connect(this.masterGain),x.start(s),x.stop(s+d)}const o=this.ctx.createGain();o.gain.setValueAtTime(c,s),o.gain.exponentialRampToValueAtTime(.001,s+d),r.connect(i),i.connect(o),o.connect(this.masterGain),r.start(s),r.stop(s+d)}playJumpScare(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=this.ctx.createOscillator();s.type="sawtooth",s.frequency.setValueAtTime(1500,n),s.frequency.linearRampToValueAtTime(400,n+.3);const a=this.ctx.createGain();a.gain.setValueAtTime(.8,n),a.gain.exponentialRampToValueAtTime(.001,n+.4);const r=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=r;const c=this.ctx.createBiquadFilter();c.type="bandpass",c.frequency.value=2e3,c.Q.value=5;const d=this.ctx.createGain();d.gain.setValueAtTime(.8,n),d.gain.exponentialRampToValueAtTime(.001,n+.5),s.connect(a),a.connect(this.masterGain),i.connect(c),c.connect(d),d.connect(this.masterGain),s.start(n),s.stop(n+.4),i.start(n),i.stop(n+.5)}playClick(n){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,a=this.ctx.createOscillator();a.type="square",a.frequency.setValueAtTime(n?1200:800,s);const r=this.ctx.createGain();r.gain.setValueAtTime(.1,s),r.gain.exponentialRampToValueAtTime(.001,s+.05),a.connect(r),r.connect(this.masterGain),a.start(s),a.stop(s+.05)}playBuzz(n=.5){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,a=this.ctx.createOscillator();a.type="sawtooth",a.frequency.value=50+Math.random()*10;const r=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=r;const c=this.ctx.createBiquadFilter();c.type="highpass",c.frequency.value=2e3;const d=this.ctx.createGain();d.gain.value=.05;const o=this.ctx.createGain();o.gain.setValueAtTime(.05,s),o.gain.linearRampToValueAtTime(.08,s+n*.2),o.gain.linearRampToValueAtTime(.02,s+n*.5),o.gain.linearRampToValueAtTime(0,s+n),a.connect(o),i.connect(c),c.connect(d),d.connect(o),o.connect(this.masterGain),a.start(s),a.stop(s+n),i.start(s),i.stop(s+n)}playDrone(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=this.ctx.createOscillator();s.frequency.value=60;const a=this.ctx.createGain();a.gain.setValueAtTime(0,n),a.gain.linearRampToValueAtTime(.05,n+.5),a.gain.linearRampToValueAtTime(0,n+2),s.connect(a),a.connect(this.masterGain),s.start(n),s.stop(n+2)}playItemDrop(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=this.createNoiseBuffer(),a=this.ctx.createBufferSource();a.buffer=s;const r=this.ctx.createBiquadFilter();r.type="highpass",r.frequency.value=1e3;const i=this.ctx.createGain();i.gain.setValueAtTime(.2,n),i.gain.exponentialRampToValueAtTime(.001,n+.1),a.connect(r),r.connect(i),i.connect(this.masterGain),a.start(n)}playSwing(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=this.createNoiseBuffer(),a=this.ctx.createBufferSource();a.buffer=s;const r=this.ctx.createBiquadFilter();r.type="bandpass",r.frequency.setValueAtTime(300,n),r.frequency.linearRampToValueAtTime(1e3,n+.2);const i=this.ctx.createGain();i.gain.setValueAtTime(.2,n),i.gain.linearRampToValueAtTime(0,n+.2),a.connect(r),r.connect(i),i.connect(this.masterGain),a.start(n),a.stop(n+.2)}playHit(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.currentTime,s=this.ctx.createOscillator();s.frequency.setValueAtTime(150,n),s.frequency.exponentialRampToValueAtTime(40,n+.1);const a=this.ctx.createGain();a.gain.setValueAtTime(.5,n),a.gain.exponentialRampToValueAtTime(.001,n+.15),s.connect(a),a.connect(this.masterGain),s.start(n),s.stop(n+.15)}}const At=["NOTE 1: The camera is the only thing that works here. I don't know why, but seeing them through the lens keeps them at bay... for a while.","NOTE 2: The batteries drain so fast. It's like the darkness eats the power. If the camera dies, I die.","NOTE 3: I saw him in the viewfinder. He wasn't there when I looked with my own eyes. Trust the camera.","NOTE 4: The Janitor took the master keys to the basement boiler room. He said the heat keeps them away. I hope he's right.","NOTE 5: DO NOT LET THE CAMERA DIE. It's your only connection to the living world.","NOTE 6: Find the keys. Leave this cursed place. Do not look back.","NOTE 7: Static... so much static. It means he's getting closer."],xn={bed:"https://m.media-amazon.com/images/I/71Wp3-gZlGL._AC_SL1500_.jpg",note:"https://i.stack.imgur.com/tL80j.jpg",ghost:"https://i.imgur.com/W2C2x2s.jpeg"},hn=({gameState:t,setGameState:n,onStatsUpdate:s,keyBindings:a})=>{const r=m.useRef(null),i=m.useRef(0),[c,d]=m.useState(null),o=m.useRef({id:"player",type:"PLAYER",x:100,y:100,width:lt,height:lt,active:!0,speed:Ct,battery:100,keys:0,noise:0,flashlightOn:!0,hasFlashlight:!0,direction:{x:1,y:0},isFlickering:!1,isCrouching:!1,yaw:-Math.PI/2,pitch:0,lastJumpScareTime:0,sanity:0,isHidden:!1,hasBat:!1,attackTimer:0,lastAttackTime:0}),x=m.useRef({id:"enemy",type:"ENEMY",x:600,y:300,width:Et,height:Et,active:!0,state:"IDLE",speed:Wa,lastKnownPlayerPos:null,patrolPoints:[],currentPatrolIndex:0,invisible:!1,stareTimer:0,footstepTimer:0,teleportCooldown:0}),p=m.useRef([]),h=m.useRef({}),v=m.useRef(0),y=m.useRef({}),f=m.useRef([]),b=m.useRef(0),C=m.useRef(!1),$=m.useRef(0),k=m.useRef(0),M=m.useRef(0),j=m.useRef({active:!1,timer:0}),u=m.useRef({active:!1,startTime:0}),T=m.useRef(new Array(Pe).fill(0)),L=m.useCallback(()=>{p.current=[],C.current=!1,$.current=0,k.current=0,j.current={active:!1,timer:0},u.current={active:!1,startTime:0},o.current.battery=100;const l=Q.getInstance();l.startWind(),l.playCrow(),Object.entries(xn).forEach(([N,R])=>{const D=new Image;D.crossOrigin="Anonymous",D.src=R,y.current[N]=D}),f.current=Array.from({length:150},()=>({x:Math.random()*1280,y:Math.random()*720,length:10+Math.random()*20,speed:15+Math.random()*10}));let g=[],E=0;for(let N=0;N<se.length;N++)for(let R=0;R<se[0].length;R++){const D=se[N][R],_=R*X+X/2,U=N*X+X/2;if(D===9)o.current.x=_,o.current.y=U,o.current.keys=0,o.current.noise=0,o.current.hasFlashlight=!0,o.current.flashlightOn=!0,o.current.isFlickering=!1,o.current.yaw=-Math.PI/2,o.current.pitch=0,o.current.lastJumpScareTime=0,o.current.isHidden=!1,o.current.hasBat=!1,o.current.attackTimer=0;else if(D===2)p.current.push({id:`key_${N}_${R}`,type:"KEY",x:_,y:U,width:20,height:20,active:!0});else if(D===4)p.current.push({id:`car_${N}_${R}`,type:"CAR",x:_,y:U,width:60,height:40,active:!0});else if(D===5){const re={id:`locker_${N}_${R}`,type:"LOCKER",x:_,y:U,width:30,height:30,active:!0,isOpen:!1,content:"EMPTY"};g.push(re),p.current.push(re)}else D===10?p.current.push({id:`bed_${N}_${R}`,type:"BED",x:_,y:U,width:32,height:38,active:!0}):D===6&&(p.current.push({id:`note_${N}_${R}`,type:"NOTE",x:_,y:U,width:25,height:25,active:!0,text:At[E%At.length]}),E++)}if(p.current.push({id:"weapon_bat",type:"BAT",x:200,y:100,width:30,height:8,active:!0}),g.length>0){const N=Math.floor(Math.random()*g.length);let R=Math.floor(Math.random()*g.length);for(;R===N;)R=Math.floor(Math.random()*g.length);g[N].content="KEY",g[R].content="KEY",g.forEach((D,_)=>{_!==N&&_!==R&&Math.random()<.6&&(D.content="BATTERY")})}x.current.x=dn-200,x.current.y=mn-200,x.current.state="IDLE",x.current.active=!1,x.current.invisible=!1,x.current.stareTimer=0,h.current={}},[]);m.useEffect(()=>{t==="PLAYING"?L():(Q.getInstance().stopWind(),document.pointerLockElement===r.current&&document.exitPointerLock())},[t,L]);const G=()=>{const l=Date.now();l-o.current.lastJumpScareTime>nn&&(j.current={active:!0,timer:l},o.current.lastJumpScareTime=l,o.current.noise=1,Q.getInstance().playJumpScare(),o.current.isHidden&&(o.current.isHidden=!1))};m.useEffect(()=>{const l=D=>{h.current[D.code]=!0,D.code===a.INTERACT&&S(),(D.code==="Escape"||D.code===a.INTERACT)&&c&&d(null)},g=D=>{h.current[D.code]=!1},E=D=>{document.pointerLockElement===r.current&&!j.current.active&&!u.current.active&&(o.current.yaw+=D.movementX*.002,o.current.pitch-=D.movementY*.002,o.current.pitch=Math.max(-.5,Math.min(.5,o.current.pitch)),o.current.direction={x:Math.cos(o.current.yaw),y:Math.sin(o.current.yaw)})},N=D=>{var _;t==="PLAYING"&&!u.current.active&&(!c&&document.pointerLockElement!==r.current?(_=r.current)==null||_.requestPointerLock():o.current.hasBat&&!o.current.isHidden&&D.button===0&&O())};window.addEventListener("keydown",l),window.addEventListener("keyup",g),document.addEventListener("mousemove",E);const R=r.current;return R&&R.addEventListener("mousedown",N),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",g),document.removeEventListener("mousemove",E),R&&R.removeEventListener("mousedown",N)}},[t,c,a]);const O=()=>{const l=o.current,g=Date.now();if(g-l.lastAttackTime<Ja)return;l.attackTimer=200,l.lastAttackTime=g,Q.getInstance().playSwing();const E=x.current;if(E.active&&Math.hypot(E.x-l.x,E.y-l.y)<Xa){let D=Math.atan2(E.y-l.y,E.x-l.x)-l.yaw;for(;D>Math.PI;)D-=2*Math.PI;for(;D<-Math.PI;)D+=2*Math.PI;Math.abs(D)<Za/2&&(Q.getInstance().playHit(),s(_=>({..._,message:"BANISHED!"})),E.state="IDLE",E.x=-2e3,E.y=-2e3,E.teleportCooldown=500,E.invisible=!0)}},S=()=>{if(c){d(null);return}const l=o.current;if(l.isHidden){l.isHidden=!1,s(N=>({...N,message:""}));return}let g=null,E=70;if(p.current.forEach(N=>{if(!N.active)return;const R=Math.hypot(N.x-l.x,N.y-l.y);R<E&&(g=N,E=R)}),g){const N=g;N.type==="CAR"&&!l.hasFlashlight?(l.hasFlashlight=!0,l.flashlightOn=!0,l.battery=100,Q.getInstance().playClick(!0),Q.getInstance().playBuzz(.5),Q.getInstance().playDrone(),M.current=Date.now(),s(R=>({...R,message:"BATTERY RECHARGED"}))):N.type==="BAT"?(l.hasBat=!0,N.active=!1,Q.getInstance().playItemDrop(),s(R=>({...R,message:"BASEBALL BAT ACQUIRED"}))):N.type==="NOTE"?(d(N.text||"..."),N.active=!1,Q.getInstance().playClick(!0),s(R=>({...R,message:"STORY NOTE FOUND"}))):N.type==="BED"?(l.isHidden=!0,l.hidingType="BED",Q.getInstance().playItemDrop(),s(R=>({...R,message:"HIDING UNDER BED..."}))):N.type==="LOCKER"&&(N.isOpen?(l.isHidden=!0,l.hidingType="LOCKER",s(R=>({...R,message:"HIDING IN LOCKER..."}))):(N.isOpen=!0,l.noise=1,Q.getInstance().playItemDrop(),Math.random()<.2&&G(),N.content==="BATTERY"?(l.battery=Math.min(100,l.battery+Ka),s(R=>({...R,message:"REPLACED BATTERY"})),N.content="EMPTY"):N.content==="KEY"?(l.keys++,s(R=>({...R,message:"FOUND KEY"})),N.content="EMPTY"):s(R=>({...R,message:"EMPTY"}))))}},w=(l,g,E,N=!1)=>{const R=Math.floor((l-E/2)/X),D=Math.floor((l+E/2)/X),_=Math.floor((g-E/2)/X),U=Math.floor((g+E/2)/X);if(R<0||D>=se[0].length||_<0||U>=se.length||se[_][R]===1||se[_][R]===7||se[_][D]===1||se[_][D]===7||se[U][R]===1||se[U][R]===7||se[U][D]===1||se[U][D]===7)return!0;const re=["CAR","LOCKER","BED"];for(const K of p.current)if(K.active&&re.includes(K.type)&&Math.hypot(l-K.x,g-K.y)<E/2+K.width/2)return!0;return!N&&(se[_][R]===3||se[_][D]===3||se[U][R]===3||se[U][D]===3)?o.current.keys>=12?(n("VICTORY"),!1):(s(Y=>({...Y,message:"NEED 12 KEYS"})),!0):!1},I=()=>{const l=o.current;if(l.battery=Math.max(0,l.battery-za),l.battery<=0){n("GAME_OVER");return}if(l.battery<20&&Math.random()<.05?(l.isFlickering=!0,Q.getInstance().playBuzz(.1)):Date.now()-M.current<200?l.isFlickering=Math.random()<.5:l.isFlickering=!1,Math.random()<.001&&l.noise>.1&&!l.isHidden){const E=l.x-Math.cos(l.yaw)*60,N=l.y-Math.sin(l.yaw)*60;p.current.push({id:`ghost_${Date.now()}`,type:"SHADOW",x:E,y:N,width:30,height:60,active:!0}),setTimeout(()=>{const R=p.current.findIndex(D=>D.type==="SHADOW"&&D.id.startsWith("ghost"));R!==-1&&p.current.splice(R,1)},200)}},B=()=>{const l=o.current;if(l.attackTimer>0&&(l.attackTimer-=1e3/60),k.current<2||j.current.active)return;if(l.isHidden){l.noise=0;return}const g=l.yaw,E=Math.cos(g),N=Math.sin(g),R=Math.cos(g+Math.PI/2),D=Math.sin(g+Math.PI/2);let _=0,U=0;const re=h.current[a.RUN],K=h.current[a.SNEAK];l.isCrouching=!!K;let Y=Ct;re&&(Y=Ha),K&&(Y=qa),(h.current[a.MOVE_FORWARD]||h.current.ArrowUp)&&(_+=E*Y,U+=N*Y),(h.current[a.MOVE_BACKWARD]||h.current.ArrowDown)&&(_-=E*Y,U-=N*Y),(h.current[a.MOVE_LEFT]||h.current.ArrowLeft)&&(_-=R*Y,U-=D*Y),(h.current[a.MOVE_RIGHT]||h.current.ArrowRight)&&(_+=R*Y,U+=D*Y),w(l.x+_,l.y,l.width)||(l.x+=_),w(l.x,l.y+U,l.width)||(l.y+=U);const pe=Math.abs(_)+Math.abs(U)>.1;let ee=0;if(pe&&(re?ee=tn:K?ee=sn:ee=en),l.noise=Math.max(0,l.noise-Qa),l.noise=Math.max(l.noise,ee),pe){K&&Q.getInstance().playBreathing();const W=re?300:K?700:500;if(Date.now()-v.current>W){let ve=l.y>360?"WOOD":"DIRT";ve==="DIRT"&&Math.random()<.3&&(ve="WATER");const ce=K?.2:1;Q.getInstance().playFootstep(ve,ce),v.current=Date.now()}}!C.current&&l.y>340&&l.y<450&&(C.current=!0,p.current.push({id:"shadow_event",type:"SHADOW",x:350,y:380,width:30,height:60,active:!0}),x.current.active=!0,x.current.x=800,x.current.y=800,x.current.state="IDLE"),p.current.forEach(W=>{W.active&&W.type==="KEY"&&Math.hypot(W.x-l.x,W.y-l.y)<lt+W.width&&(W.active=!1,l.keys++,Q.getInstance().playItemDrop(),s(ce=>({...ce,message:"KEY FOUND"})))})},F=()=>{const l=x.current;if(!l.active||j.current.active||u.current.active)return;if(o.current.isHidden){l.state="IDLE";return}const g=o.current,E=Math.hypot(g.x-l.x,g.y-l.y),N=Q.getInstance();l.footstepTimer++;const R=l.x-g.x,D=l.y-g.y;let U=Math.atan2(D,R)-g.yaw;for(;U>Math.PI;)U-=2*Math.PI;for(;U<-Math.PI;)U+=2*Math.PI;const re=Math.abs(U)<He/1.5;if(g.flashlightOn&&re&&E<400){if(l.stareTimer++,l.stareTimer>rn&&l.state==="STALKING"){l.state="IDLE",l.x=-1e3,l.y=-1e3,l.invisible=!0,l.stareTimer=0,s(W=>({...W,message:"IT FLED"}));return}}else l.stareTimer=Math.max(0,l.stareTimer-1);let Y=l.x,pe=l.y,ee=0;if(l.state==="IDLE")Math.random()<.01&&(l.state="STALKING"),g.noise>an&&E<600&&(l.state="HUNTING",l.invisible=!1);else if(l.state==="STALKING"){if(l.invisible=!0,l.teleportCooldown--,l.teleportCooldown<=0&&!re&&E>on){const ve=g.yaw+Math.PI+(Math.random()-.5),ce=ln+Math.random()*100;l.x=g.x+Math.cos(ve)*ce,l.y=g.y+Math.sin(ve)*ce,l.teleportCooldown=200,N.playDrone()}ee=Ya;const W=Math.atan2(g.y-l.y,g.x-l.x);Y=l.x+Math.cos(W)*ee,pe=l.y+Math.sin(W)*ee,E<200?(l.footstepTimer>60&&(N.playGhostFootstep("SOFT"),l.footstepTimer=0),Math.random()<.02&&(l.state="HUNTING",l.invisible=!1)):E<400&&l.footstepTimer>100&&(N.playGhostFootstep("SOFT"),l.footstepTimer=0)}else if(l.state==="HUNTING"){l.invisible=!1,ee=Va;const W=Math.atan2(g.y-l.y,g.x-l.x);Y=l.x+Math.cos(W)*ee,pe=l.y+Math.sin(W)*ee,l.footstepTimer>25&&(N.playGhostFootstep("HEAVY"),l.footstepTimer=0),E>700&&(l.state="IDLE")}if(ee>0){if(!w(Y,l.y,l.width,!0))l.x=Y;else{const W=l.y+(g.y>l.y?ee:-ee);w(l.x,W,l.width,!0)||(l.y=W)}if(!w(l.x,pe,l.width,!0))l.y=pe;else{const W=l.x+(g.x>l.x?ee:-ee);w(W,l.y,l.width,!0)||(l.x=W)}}!l.invisible&&E<25&&(u.current.active||(u.current={active:!0,startTime:Date.now()},Q.getInstance().playJumpScare()))},Z=()=>{$.current++,k.current===0&&$.current>120&&(k.current=1,Q.getInstance().playBell()),k.current===1&&$.current>180&&(k.current=2,Q.getInstance().playCarCooling(),Q.getInstance().playFlashlightRoll()),k.current===3&&b.current%300===0&&Math.random()<.3&&Q.getInstance().playCarCooling();const l=p.current.findIndex(g=>g.type==="SHADOW"&&g.id==="shadow_event");if(l!==-1){const g=p.current[l];g.x+=12,g.x>800&&(g.active=!1,p.current.splice(l,1))}j.current.active&&Date.now()-j.current.timer>500&&(j.current.active=!1)},he=()=>{f.current.forEach(l=>{l.y+=l.speed,l.y>720&&(l.y=-20,l.x=Math.random()*1280)})},Re=l=>!!(l&&l.complete&&l.naturalWidth>0),je=(l,g,E,N,R,D)=>{if(l.save(),D){const re=(Math.random()-.5)*20,K=(Math.random()-.5)*20;l.translate(re,K)}l.fillStyle="#111",l.beginPath(),l.ellipse(g+N/2,E+R/2,N/2,R/1.5,0,0,Math.PI*2),l.fill();const _=N/5,U=N/4;l.fillStyle="#ff0000",l.shadowBlur=D?50:10,l.shadowColor="red",l.beginPath(),l.ellipse(g+N/2-U,E+R/3,_,_*.7,Math.PI/6,0,Math.PI*2),l.fill(),l.beginPath(),l.ellipse(g+N/2+U,E+R/3,_,_*.7,-Math.PI/6,0,Math.PI*2),l.fill(),l.fillStyle="#300",l.shadowBlur=0,l.beginPath(),l.moveTo(g+N/2-_,E+R*.65),l.quadraticCurveTo(g+N/2,E+R*.85,g+N/2+_,E+R*.65),l.quadraticCurveTo(g+N/2,E+R*.55,g+N/2-_,E+R*.65),l.fill(),l.restore()},P=(l,g,E,N)=>{l.fillStyle="#111",l.fillRect(0,0,E,N/2+g.pitch*N);const R=l.createLinearGradient(0,N/2+g.pitch*N,0,N);R.addColorStop(0,"#0a0a0a"),R.addColorStop(1,"#2a2a2a"),l.fillStyle=R,l.fillRect(0,N/2+g.pitch*N,E,N/2-g.pitch*N);for(let D=0;D<Pe;D++){const _=2*D/Pe-1,U=Math.cos(g.yaw)+Math.cos(g.yaw+Math.PI/2)*Math.tan(He/2)*_,re=Math.sin(g.yaw)+Math.sin(g.yaw+Math.PI/2)*Math.tan(He/2)*_;let K=Math.floor(g.x/X),Y=Math.floor(g.y/X),pe,ee;const W=Math.abs(1/U),ve=Math.abs(1/re);let ce,Le,ne,V=0,de=0;U<0?(Le=-1,pe=(g.x/X-K)*W):(Le=1,pe=(K+1-g.x/X)*W),re<0?(ne=-1,ee=(g.y/X-Y)*ve):(ne=1,ee=(Y+1-g.y/X)*ve);let te=0;for(;V===0;)pe<ee?(pe+=W,K+=Le,de=0):(ee+=ve,Y+=ne,de=1),Y>=0&&Y<se.length&&K>=0&&K<se[0].length?(se[Y][K]===1||se[Y][K]===7)&&(V=1,te=se[Y][K]):V=1;de===0?ce=(K-g.x/X+(1-Le)/2)/U:ce=(Y-g.y/X+(1-ne)/2)/re,T.current[D]=ce;const oe=Math.floor(N*2/ce),Te=N/2+g.pitch*N,Ee=-oe/2+Te,le=oe/2+Te;let ye=150;te===7&&(ye=100),de===1&&(ye*=.75);const Xe=Math.min(1,4/ce),ts=Math.floor(ye*Xe),ss=Math.floor(ye*Xe),as=Math.floor(ye*Xe),pt=Math.ceil(E/Pe),ns=D*pt;l.fillStyle=`rgb(${ts},${ss},${as})`,l.fillRect(ns,Ee,pt,le-Ee+1)}},z=(l,g,E,N)=>{const R=p.current.filter(_=>_.active).map(_=>({..._,dist:Math.hypot(g.x-_.x,g.y-_.y)})).sort((_,U)=>U.dist-_.dist),D=x.current;D.active&&(!D.invisible||D.invisible&&D.state==="STALKING"&&Math.random()<.2)&&(R.push({...D,dist:Math.hypot(g.x-D.x,g.y-D.y)}),R.sort((_,U)=>U.dist-_.dist)),R.forEach(_=>{const U=_.x-g.x,re=_.y-g.y,K=Math.cos(g.yaw+Math.PI/2)*Math.tan(He/2),Y=Math.sin(g.yaw+Math.PI/2)*Math.tan(He/2),pe=Math.cos(g.yaw),ee=Math.sin(g.yaw),W=1/(K*ee-pe*Y),ve=W*(ee*U-pe*re),ce=W*(-Y*U+K*re);if(ce<=0)return;const Le=Math.floor(E/2*(1+ve/ce));let ne=Math.abs(Math.floor(N/(ce/X)));const V=Math.abs(Math.floor(N/(ce/X)));_.type==="ENEMY"&&(ne*=1.6);const de=N/2+g.pitch*N,te=-ne/2+de,Ne=Math.ceil(E/Pe),oe=Math.floor(-V/2+Le),Te=Math.floor(Le/Ne);if(Te>=0&&Te<Pe){const Ee=T.current[Te];if(ce/X<Ee){const le=Math.min(1,5/(ce/X));if(l.save(),l.globalAlpha=le,_.type==="ENEMY"){const ye=y.current.ghost;Re(ye)?(l.globalAlpha=D.invisible?.1:le,l.drawImage(ye,oe,te,V,ne)):(l.fillStyle=D.invisible?"rgba(0,0,0,0.1)":`rgba(0,0,0,${le})`,je(l,oe,te,V,ne,!1))}else if(_.type==="KEY")l.fillStyle=`rgb(${255*le},${215*le},0)`,l.beginPath(),l.arc(Le,te+ne/2,V/3,0,Math.PI*2),l.fill();else if(_.type==="BAT")l.fillStyle=`rgb(${150*le},${150*le},${150*le})`,l.fillRect(oe,te,V,ne),l.fillStyle=`rgb(${100*le},${50*le},0)`,l.fillRect(oe,te+ne*.7,V,ne*.3);else if(_.type==="LOCKER"){const ye=_;l.fillStyle=ye.isOpen?"#444":"#666",l.fillRect(oe,te-ne/2,V,ne*1.5)}else if(_.type==="BED"){const ye=y.current.bed;Re(ye)?l.drawImage(ye,oe,te+ne/2,V,ne/2):(l.fillStyle="#ccc",l.fillRect(oe,te+ne/2,V,ne/2))}else if(_.type==="CAR")l.fillStyle="#557",l.fillRect(oe-V,te,V*3,ne/2);else if(_.type==="NOTE"){const ye=y.current.note;Re(ye)?l.drawImage(ye,oe,te+ne*.8,V/2,ne/4):(l.fillStyle="#fff",l.fillRect(oe,te+ne*.8,V/2,ne/4))}l.restore()}}})},H=l=>{const g=l.canvas.width,E=l.canvas.height,N=o.current;if(u.current.active){l.fillStyle="#000",l.fillRect(0,0,g,E);const V=(Math.random()-.5)*50,de=(Math.random()-.5)*50,te=1+Math.sin(Date.now()/50)*.05;l.save(),l.translate(g/2+V,E/2+de),l.scale(te,te);const Ne=y.current.ghost;if(Re(Ne)){const oe=Ne.width/Ne.height,Te=g/E;let Ee,le;Te>oe?(Ee=g,le=g/oe):(le=E,Ee=E*oe),l.drawImage(Ne,-Ee/2,-le/2,Ee,le)}else je(l,-g/2,-E/2,g,E,!0);l.restore(),Math.random()>.7&&(l.fillStyle="rgba(255, 0, 0, 0.2)",l.fillRect(0,0,g,E));return}P(l,N,g,E),z(l,N,g,E);const R=Math.max(.2,N.battery/100),D=N.battery<20||N.isFlickering?Math.random()*.2:0,_=l.createRadialGradient(g/2,E/2,E/4*R,g/2,E/2,E*(.8+D));if(_.addColorStop(0,"rgba(0,0,0,0)"),_.addColorStop(.5,"rgba(0,0,0,0.3)"),_.addColorStop(1,"rgba(0,0,0,0.95)"),l.fillStyle=_,l.fillRect(0,0,g,E),N.hasBat&&!N.isHidden){l.save();const V=N.attackTimer>0?Math.sin(N.attackTimer/200*Math.PI)*200:0,de=N.attackTimer>0?-Math.PI/4:0;l.translate(g*.7+V,E),l.rotate(-Math.PI/6+de),l.fillStyle="#5d4037",l.fillRect(-20,-200,40,200),l.fillStyle="#9ca3af",l.fillRect(-25,-500,50,300),l.restore()}const U=150,re=.15,K=30,Y=150;l.save(),l.translate(K,Y),l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,0,U,U),l.strokeStyle="rgba(255, 255, 255, 0.3)",l.lineWidth=2,l.strokeRect(0,0,U,U),l.beginPath(),l.rect(0,0,U,U),l.clip();const pe=U/2,ee=U/2,W=U/2/re,ve=Math.max(0,Math.floor((N.y-W)/X)),ce=Math.min(se.length,Math.ceil((N.y+W)/X)),Le=Math.max(0,Math.floor((N.x-W)/X)),ne=Math.min(se[0].length,Math.ceil((N.x+W)/X));for(let V=ve;V<ce;V++)for(let de=Le;de<ne;de++){const te=se[V][de];if(te===0)continue;const Ne=de*X,oe=V*X,Te=pe+(Ne-N.x)*re,Ee=ee+(oe-N.y)*re,le=Math.max(1,X*re);te===1||te===7?(l.fillStyle="#94a3b8",l.fillRect(Te,Ee,le,le)):te===3?(l.fillStyle="#ef4444",l.fillRect(Te,Ee,le,le)):te===4&&(l.fillStyle="#f59e0b",l.fillRect(Te,Ee,le,le))}if(l.save(),l.translate(pe,ee),l.rotate(N.yaw),l.fillStyle="#22c55e",l.beginPath(),l.moveTo(5,0),l.lineTo(-4,-4),l.lineTo(-4,4),l.fill(),l.restore(),l.restore(),N.isHidden&&(l.fillStyle="rgba(0,0,0,0.95)",l.fillRect(0,0,g,E),l.fillStyle="#fff",l.font="20px monospace",l.textAlign="center",l.fillText(N.hidingType==="BED"?"UNDER BED":"IN LOCKER",g/2,E/2)),j.current.active){const V=(Date.now()-j.current.timer)/200;V<1&&(l.fillStyle="black",l.fillRect(0,0,g,E),l.save(),l.translate(g/2+(Math.random()-.5)*20,E/2+(Math.random()-.5)*20),l.scale(2+V,2+V),l.fillStyle="#1a0000",l.beginPath(),l.ellipse(0,0,100,140,0,0,Math.PI*2),l.fill(),l.fillStyle="white",l.beginPath(),l.arc(-40,-20,15,0,Math.PI*2),l.arc(40,-20,15,0,Math.PI*2),l.fill(),l.fillStyle="black",l.beginPath(),l.arc(-40,-20,5,0,Math.PI*2),l.arc(40,-20,5,0,Math.PI*2),l.fill(),l.restore())}if(c){l.fillStyle="rgba(0,0,0,0.8)",l.fillRect(0,0,g,E),l.fillStyle="#fef3c7",l.fillRect(g/2-200,E/2-150,400,300),l.fillStyle="#000",l.font='20px "Special Elite", monospace',l.textAlign="center",l.textBaseline="middle";const V=c.split(" ");let de="",te=E/2-100;for(let Ne=0;Ne<V.length;Ne++){const oe=de+V[Ne]+" ";l.measureText(oe).width>360&&Ne>0?(l.fillText(de,g/2,te),de=V[Ne]+" ",te+=30):de=oe}l.fillText(de,g/2,te),l.font="14px monospace",l.fillStyle="#666",l.fillText("[PRESS E or ESC TO CLOSE]",g/2,E/2+130)}},ae=m.useCallback(()=>{if(t!=="PLAYING")return;if(c){const g=r.current;if(g){const E=g.getContext("2d");E&&H(E)}i.current=requestAnimationFrame(ae);return}if(u.current.active){if(Date.now()-u.current.startTime>3e3){n("GAME_OVER"),u.current.active=!1;return}const E=r.current;if(E){const N=E.getContext("2d");N&&H(N)}i.current=requestAnimationFrame(ae);return}Z(),B(),F(),he(),I();const l=r.current;if(l){const g=l.getContext("2d");g.imageSmoothingEnabled=!1,g&&H(g)}s({battery:o.current.battery,keysFound:o.current.keys,totalKeys:12,soundLevel:o.current.noise,message:""}),i.current=requestAnimationFrame(ae)},[t,c,a]);return m.useEffect(()=>(t==="PLAYING"&&(i.current=requestAnimationFrame(ae)),()=>cancelAnimationFrame(i.current)),[ae,t]),e.jsx("canvas",{ref:r,width:1280,height:720,className:"block w-full h-full bg-black cursor-none"})},un={MOVE_FORWARD:"Move Forward",MOVE_BACKWARD:"Move Backward",MOVE_LEFT:"Move Left",MOVE_RIGHT:"Move Right",RUN:"Sprint",SNEAK:"Sneak",INTERACT:"Interact",FLASHLIGHT:"Toggle Camera Light"},pn=({gameState:t,stats:n,onStart:s,onRestart:a,keyBindings:r,setKeyBindings:i})=>{const[c,d]=m.useState(!1),[o,x]=m.useState(null),[p,h]=m.useState(0);m.useEffect(()=>{let b;return t==="PLAYING"&&(b=setInterval(()=>{h(C=>C+1)},1e3)),()=>clearInterval(b)},[t]);const v=b=>{const C=Math.floor(b/3600).toString().padStart(2,"0"),$=Math.floor(b%3600/60).toString().padStart(2,"0"),k=(b%60).toString().padStart(2,"0");return`${C}:${$}:${k}`},y=()=>{Q.getInstance().resume(),s()};m.useEffect(()=>{if(!o)return;const b=C=>{if(C.preventDefault(),C.stopPropagation(),C.key==="Escape"){x(null);return}i({...r,[o]:C.code}),x(null)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[o,r,i]);const f=b=>b.replace("Key","").replace("Left","").replace("Right","").replace("Control","Ctrl");return t==="MENU"?c?e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/95 text-slate-100 z-[100] p-8 pointer-events-auto",children:e.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-lg p-6 shadow-2xl relative",children:[e.jsx("button",{onClick:()=>{d(!1),x(null)},className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:e.jsx(ds,{size:32})}),e.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3 text-red-500",style:{fontFamily:"Special Elite"},children:[e.jsx(ms,{size:32})," CONTROLS"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(r).map(b=>e.jsxs("div",{className:"flex items-center justify-between bg-black/50 p-3 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-300 font-mono text-sm uppercase",children:un[b]}),e.jsx("button",{onClick:()=>x(b),className:`px-4 py-1 rounded font-bold min-w-[100px] text-center transition-colors border ${o===b?"bg-red-600 border-red-400 text-white animate-pulse":"bg-slate-800 border-slate-600 text-slate-200 hover:bg-slate-700"}`,children:o===b?"PRESS KEY...":f(r[b])})]},b))}),e.jsx("div",{className:"mt-8 text-center text-slate-500 text-sm",children:"Click a button to rebind. Press ESC to cancel."})]})}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/90 text-slate-100 z-[100] pointer-events-auto",children:[e.jsx("h1",{className:"text-8xl font-bold tracking-widest text-red-600 mb-4 animate-pulse",style:{fontFamily:"Special Elite"},children:"LAST LIGHT"}),e.jsx("p",{className:"text-xl mb-8 max-w-md text-center text-slate-400",children:"Find 12 keys to escape. Keep your flashlight charged. Don't look at it."}),e.jsxs("div",{className:"flex flex-col gap-4 w-64",children:[e.jsx("button",{onClick:y,className:"bg-red-900/50 border-2 border-red-600 hover:bg-red-800 text-white py-3 rounded text-xl font-bold transition-all hover:scale-105",children:"ENTER DARKNESS"}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-slate-800 border border-slate-600 hover:bg-slate-700 text-slate-300 py-2 rounded flex items-center justify-center gap-2",children:[e.jsx(Gt,{size:18})," CONTROLS"]})]})]}):t==="GAME_OVER"?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-[100] pointer-events-auto animate-in fade-in duration-1000",children:[e.jsx("div",{className:"scale-150 mb-12",children:e.jsx("h1",{className:"text-9xl font-serif text-red-900 tracking-widest opacity-80",style:{textShadow:"0 0 20px rgba(255,0,0,0.5)"},children:"YOU DIED"})}),e.jsx("button",{onClick:a,className:"mt-8 text-slate-400 hover:text-white border-b border-transparent hover:border-white transition-colors text-xl",children:"TRY AGAIN"})]}):t==="VICTORY"?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white text-black z-[100] pointer-events-auto animate-in fade-in duration-[3000ms]",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4",children:"ESCAPED"}),e.jsx("p",{className:"text-2xl mb-8",children:"You found the light."}),e.jsx("button",{onClick:a,className:"bg-black text-white px-8 py-3 rounded hover:scale-105 transition-transform",children:"PLAY AGAIN"})]}):e.jsxs("div",{className:"absolute inset-0 pointer-events-none p-6 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-500 text-2xl drop-shadow-md",children:[e.jsx(xs,{size:32}),e.jsxs("span",{className:"font-mono font-bold",children:[Math.ceil(n.battery),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-yellow-500 text-2xl drop-shadow-md",children:[e.jsx(hs,{size:32}),e.jsxs("span",{className:"font-mono font-bold",children:[n.keysFound,"/",n.totalKeys]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("div",{className:"text-slate-500 font-mono text-xl",children:v(p)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{size:20,className:n.soundLevel>.5?"text-red-500":"text-slate-600"}),e.jsx("div",{className:"w-32 h-2 bg-slate-900 border border-slate-700",children:e.jsx("div",{className:"h-full bg-slate-200 transition-all duration-100",style:{width:`${Math.min(100,n.soundLevel*100)}%`}})})]})]})]}),n.message&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx("div",{className:"text-white font-mono text-xl bg-black/50 px-4 py-2 rounded border border-slate-700 animate-pulse",children:n.message})}),e.jsxs("div",{className:"text-slate-600 font-mono text-sm opacity-50",children:[f(r.FLASHLIGHT),": LIGHT | ",f(r.INTERACT),": INTERACT"]})]})};function gn(){const[t,n]=m.useState("MENU"),[s,a]=m.useState(()=>{const o=localStorage.getItem("last_light_keys");return o?JSON.parse(o):cn});m.useEffect(()=>{localStorage.setItem("last_light_keys",JSON.stringify(s))},[s]);const[r,i]=m.useState({battery:100,keysFound:0,totalKeys:12,soundLevel:0,message:""}),c=()=>n("PLAYING"),d=()=>n("PLAYING");return e.jsx(ke,{children:e.jsxs("div",{className:"relative w-screen h-screen bg-slate-950 flex items-center justify-center overflow-hidden select-none",children:[e.jsx("div",{className:"scanlines mix-blend-overlay opacity-20 pointer-events-none w-full h-full absolute inset-0 z-50"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#000000_100%)] pointer-events-none z-40"}),e.jsxs("div",{className:"relative w-full max-w-[1280px] aspect-video bg-black shadow-2xl border border-slate-900 overflow-hidden",children:[e.jsx(hn,{gameState:t,setGameState:n,onStatsUpdate:i,keyBindings:s}),e.jsx(pn,{gameState:t,stats:r,onStart:c,onRestart:d,keyBindings:s,setKeyBindings:a})]})]})})}const fn=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),bn=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),yn=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8z"})]}),wn=({name:t,status:n,age:s,motto:a})=>e.jsxs("div",{className:"w-96 h-60 bg-white rounded-2xl shadow-lg p-8 flex flex-col justify-between transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:t}),e.jsx("div",{className:"w-20 h-1 bg-slate-400 my-4 rounded-full"}),e.jsx("p",{className:"text-lg text-slate-600",children:n})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-slate-500",children:[e.jsx(yn,{className:"w-5 h-5 text-slate-400 flex-shrink-0"}),e.jsxs("p",{className:"text-sm italic",children:['"',a,'"']})]}),e.jsxs("footer",{className:"flex items-center space-x-6 text-slate-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(bn,{className:"w-5 h-5 text-slate-400"}),e.jsxs("span",{className:"text-sm font-medium",children:[s," Years Old"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fn,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium",children:"Student"})]})]})]}),jn=()=>{const t={name:"Derek Jang",status:"Student at WMS",age:15,motto:"ì˜¤ëŠ˜ë„ ë‚´ì¼ì²˜ëŸ¼ ë‚´ì¼ë„ ì˜¤ëŠ˜ì²˜ëŸ¼"};return e.jsx(ke,{children:e.jsx("main",{className:"min-h-screen bg-slate-100 flex items-center justify-center font-sans p-4",children:e.jsx(wn,{name:t.name,status:t.status,age:t.age,motto:t.motto})})})};let Ce=null;const vn=()=>{Ce||(Ce=new(window.AudioContext||window.webkitAudioContext)),Ce.state==="suspended"&&Ce.resume()},De=(t,n,s)=>{if(vn(),!Ce)return;const a=Ce.createOscillator(),r=Ce.createGain();a.type=n,a.frequency.setValueAtTime(t,Ce.currentTime),r.gain.setValueAtTime(0,Ce.currentTime),r.gain.linearRampToValueAtTime(.1,Ce.currentTime+.01),r.gain.exponentialRampToValueAtTime(.001,Ce.currentTime+s),a.connect(r),r.connect(Ce.destination),a.start(),a.stop(Ce.currentTime+s)},ge={playSuccess:()=>{setTimeout(()=>De(523.25,"sine",.15),0),setTimeout(()=>De(659.25,"sine",.15),80),setTimeout(()=>De(783.99,"sine",.3),160)},playError:()=>{De(150,"sawtooth",.3),setTimeout(()=>De(140,"sawtooth",.3),50)},playClick:()=>{De(800,"triangle",.05)},playTick:()=>{De(1200,"sine",.03)},speak:(t,n=1)=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const s=new SpeechSynthesisUtterance(t);s.lang="en-US",s.rate=n;const r=window.speechSynthesis.getVoices().find(i=>i.name.includes("Google US English")||i.lang==="en-US"&&i.name.includes("Samantha"));r&&(s.voice=r),window.speechSynthesis.speak(s)}}},Nn=()=>{const t="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new _e({apiKey:t})},Sn=async()=>{const t=Nn(),n="Generate a list of 10 English vocabulary words for a middle school student. For each word, provide: 1. The English term. 2. A Korean definition. 3. A short, simple English example sentence. 4. A 'mnemonic' (story) in Korean that helps memorize the word using pronunciation associations or logic (e.g. 'Stalactite' -> 'C' for Ceiling -> ì²œì¥ì— ë¶™ì€ ì¢…ìœ ì„).";try{const s=await t.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:{type:q.ARRAY,items:{type:q.OBJECT,properties:{term:{type:q.STRING},definition:{type:q.STRING},example:{type:q.STRING},mnemonic:{type:q.STRING}},required:["term","definition","example","mnemonic"]}}}});return JSON.parse(s.text||"[]").map((r,i)=>({id:`gen-${Date.now()}-${i}`,term:r.term,definition:r.definition,example:r.example,mnemonic:r.mnemonic,status:"new"}))}catch(s){return console.error("Error generating words:",s),[]}},kn=({onWordsLoaded:t,onStartWrongReview:n,wrongWordsCount:s,isReverse:a,onToggleReverse:r})=>{const[i,c]=m.useState(!1),[d,o]=m.useState(!1),[x,p]=m.useState(""),h=()=>{const C="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new _e({apiKey:C})},v=async C=>{const $=h();if(!$)return C.map(M=>({...M,definition:"???"}));const k=`Translate these English words to Korean definitions. Return JSON array of strings. Words: ${C.map(M=>M.term).join(", ")}`;try{const M=await $.models.generateContent({model:"gemini-2.5-flash",contents:k,config:{responseMimeType:"application/json",responseSchema:{type:q.ARRAY,items:{type:q.STRING}}}}),j=JSON.parse(M.text||"[]");return C.map((u,T)=>({term:u.term,definition:j[T]||"ëœ» ê²€ìƒ‰ ì‹¤íŒ¨"}))}catch(M){return console.error(M),C.map(j=>({...j,definition:"ìë™ ë²ˆì—­ ì‹¤íŒ¨"}))}},y=async C=>{const $=C.split(`
`);let k=[];if($.forEach(j=>{let u=j.trim();if(!u||(u=u.replace(/^\d+[\.\)\s]+\s*/,""),!u))return;let T=[],L=!1,G="",O=!1;for(let w=0;w<u.length;w++){const I=u[w];if(I==='"'){L=!L;continue}!L&&(I===","||I==="	"||I==="|"||I===":"&&!G.match(/^\d/))||!L&&(I==="-"||I==="=")&&T.length===0&&G.length>0?(T.push(G.trim()),G="",O=!0):G+=I}if(T.push(G.trim()),T=T.filter(w=>w!==""),!O&&T.length===1){const I=T[0].match(/^([a-zA-Z0-9\s\-\(\)\?]+)\s+([ê°€-í£].*)$/);I&&(T=[I[1].trim(),I[2].trim()])}if(T.length===0)return;const S=T[0];S&&(T.length>=2?k.push({term:S,definition:T[1],mnemonic:T[2]||void 0,example:T[3]||void 0}):k.push({term:S}))}),k.length===0){ge.playError(),alert("ìœ íš¨í•œ ë‹¨ì–´ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");return}const M=k.filter(j=>!j.definition);if(M.length>0&&M.length===k.length){o(!0);try{const u=(await v(M)).map((T,L)=>({id:`uploaded-${L}-${Date.now()}`,term:T.term,definition:T.definition||"???",status:"new"}));ge.playSuccess(),t(u)}catch{alert("ë‹¨ì–´ ëœ»ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}}else{const j=k.map((u,T)=>({id:`uploaded-${T}-${Date.now()}`,term:u.term,definition:u.definition||"???",mnemonic:u.mnemonic,example:u.example,status:"new"}));ge.playSuccess(),t(j)}},f=C=>{var k;const $=(k=C.target.files)==null?void 0:k[0];if($){const M=new FileReader;M.onload=j=>{var T;const u=(T=j.target)==null?void 0:T.result;y(u)},M.readAsText($)}},b=async()=>{o(!0),ge.playClick();try{const C=await Sn();C.length>0&&(ge.playSuccess(),t(C))}catch{ge.playError(),alert("AI ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 tracking-tighter filter drop-shadow-sm",children:"WORD SPARK"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"ë‡Œê³µí•™ì  ì›ë¦¬ë¡œ ë‹¨ì–´ë¥¼ ê°ì¸ì‹œí‚¤ì„¸ìš”"})]}),s>0&&e.jsxs("button",{onClick:n,className:"w-full bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-100 p-5 rounded-2xl flex items-center justify-between hover:shadow-md hover:border-red-200 transition group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"flex items-center gap-4 z-10",children:[e.jsx("div",{className:"bg-white p-3 rounded-full shadow-sm text-red-500 animate-pulse ring-2 ring-red-100",children:e.jsx(_t,{size:24,fill:"currentColor"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"ì˜¤ë‹µ ê°ì˜¥ (Prison)"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[e.jsx("span",{className:"font-bold text-red-600 text-lg",children:s}),"ê°œì˜ ë‹¨ì–´ê°€ íƒˆì¶œì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤."]})]})]}),e.jsx("div",{className:"bg-white text-red-500 px-5 py-2 rounded-xl font-bold text-sm shadow-sm group-hover:scale-105 transition z-10 border border-red-100",children:"êµ¬ì¶œí•˜ê¸° â†’"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>{ge.playClick(),r()},className:`flex items-center gap-3 px-8 py-3 rounded-full text-sm font-bold transition-all shadow-sm active:scale-95 ${a?"bg-purple-600 text-white ring-4 ring-purple-100 scale-105":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:[e.jsx(us,{size:16}),a?"ëª¨ë“œ: ëœ» ë³´ê³  ì˜ì–´ ë§í•˜ê¸° (Hard)":"ëª¨ë“œ: ì˜ì–´ ë³´ê³  ëœ» ë§í•˜ê¸° (Normal)"]})}),e.jsxs("div",{className:`relative border-4 border-dashed rounded-3xl p-10 text-center transition-all duration-300 cursor-pointer group ${i?"border-indigo-500 bg-indigo-50 scale-[1.02]":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"}`,onDragOver:C=>{C.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:C=>{C.preventDefault(),c(!1);const $=C.dataTransfer.files[0];if($){const k=new FileReader;k.onload=M=>{var j;return y((j=M.target)==null?void 0:j.result)},k.readAsText($)}},children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",accept:".txt,.csv",onChange:f}),e.jsxs("div",{className:"flex flex-col items-center gap-4 relative z-10 pointer-events-none",children:[e.jsx("div",{className:"bg-indigo-100 p-5 rounded-full text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Dt,{size:40})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:".txt, .csv, ì—‘ì…€ íŒŒì¼ ë“±"}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 justify-center",children:[e.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200",children:"1. apple ì‚¬ê³¼"}),e.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200",children:"apple, ì‚¬ê³¼"}),e.jsx("span",{className:"text-xs bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-100 font-medium",children:"1. apple (ìë™ë²ˆì—­)"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-600 flex items-center gap-2",children:[e.jsx(ps,{size:16})," ì§ì ‘ ì…ë ¥ / ë¶™ì—¬ë„£ê¸°"]}),e.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full hover:opacity-90 transition shadow-md active:scale-95 disabled:opacity-50",children:[d?e.jsx("span",{className:"animate-spin",children:"â³"}):e.jsx(Pt,{size:14}),d?"AIê°€ ìƒê° ì¤‘...":"AI ìë™ ìƒì„±"]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("textarea",{className:"w-full h-40 p-5 rounded-2xl border border-slate-700 bg-slate-800 text-white placeholder:text-slate-500 focus:ring-4 focus:ring-indigo-500/30 focus:border-indigo-500 focus:outline-none resize-none text-base font-mono leading-relaxed transition-all shadow-inner",placeholder:`1. apple ì‚¬ê³¼
2. banana ë°”ë‚˜ë‚˜
3. spark
(ë³µì‚¬ ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ë©´ ì•Œì•„ì„œ ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤)`,value:x,onChange:C=>p(C.target.value)}),d&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsxs("div",{className:"text-white font-bold animate-pulse flex items-center gap-2",children:[e.jsx(dt,{className:"text-yellow-400"})," ë‹¨ì–´ ë¶„ì„ ë° ìƒì„± ì¤‘..."]})})]}),e.jsxs("button",{onClick:()=>{ge.playClick(),y(x)},disabled:d,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg hover:bg-slate-800 transition active:scale-[0.98] shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(dt,{size:20,className:"text-yellow-400"})," í•™ìŠµ ì‹œì‘í•˜ê¸°"]})]})]})},Tn=({words:t,onComplete:n,isReverse:s,startIndex:a})=>{const[r,i]=m.useState(0),[c,d]=m.useState(!1),o=t[r],x=r/t.length*100,p=a+r,h=()=>{ge.playClick(),d(!c)},v=()=>{ge.playClick(),r<t.length-1?(d(!1),setTimeout(()=>i(C=>C+1),200)):n()},y=C=>{C.stopPropagation(),ge.speak(o.term)},f=s?o.definition:o.term,b=s?o.term:o.definition;return e.jsxs("div",{className:"flex flex-col h-full pt-6 pb-6 px-6 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[e.jsx("span",{children:"PROGRESS"}),e.jsxs("span",{children:[r+1," / ",t.length]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${x}%`}})})]}),e.jsx("div",{className:"flex-1 relative perspective-1000 mb-6 group cursor-pointer",onClick:h,children:e.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${c?"rotate-y-180":""}`,children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full bg-white rounded-[2rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.1)] border border-slate-100 backface-hidden flex flex-col items-center justify-center p-8",children:[e.jsxs("div",{className:"text-center w-full",children:[e.jsxs("div",{className:"inline-block bg-slate-100 text-slate-500 font-black text-sm px-3 py-1 rounded-full mb-6",children:["#",p]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight break-words leading-tight",children:f}),!s&&e.jsx("button",{onClick:y,className:"mt-2 p-4 bg-indigo-50 rounded-full text-indigo-600 hover:bg-indigo-100 transition-colors inline-flex items-center justify-center group-hover:scale-110 transform duration-300",children:e.jsx(Ve,{size:28})})]}),e.jsxs("div",{className:"absolute bottom-8 text-slate-400 text-sm font-bold flex items-center gap-2 animate-pulse",children:[e.jsx($t,{size:16})," íƒ­í•´ì„œ ëœ» ë³´ê¸°"]})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-slate-900 text-white rounded-[2rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.25)] backface-hidden rotate-y-180 flex flex-col items-center justify-center p-8",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"inline-block bg-white/10 text-white/60 font-bold text-xs px-3 py-1 rounded-full mb-6 uppercase tracking-widest",children:"Answer"}),e.jsx("h2",{className:"text-3xl font-bold mb-6 break-words leading-snug",children:b}),s&&e.jsx("button",{onClick:y,className:"mb-6 p-3 bg-white/10 rounded-full text-white hover:bg-white/20 transition-colors inline-flex items-center justify-center",children:e.jsx(Ve,{size:24})}),e.jsxs("div",{className:"w-full bg-white/10 rounded-xl p-4 backdrop-blur-sm text-left mt-2",children:[o.mnemonic&&e.jsxs("div",{className:"mb-3 pb-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-xs font-bold mb-1",children:[e.jsx(gs,{size:14})," MEMORY STORY"]}),e.jsx("p",{className:"text-sm leading-relaxed opacity-90 font-medium",children:o.mnemonic})]}),o.example?e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold mb-1",children:"EXAMPLE"}),e.jsxs("p",{className:"text-sm italic opacity-80 leading-relaxed",children:['"',o.example,'"']})]}):e.jsx("div",{className:"text-center text-xs text-slate-500 py-1",children:"No example available"})]})]})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:C=>{C.stopPropagation(),v()},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition-transform active:scale-95 flex items-center justify-center gap-2",children:["ë‹¤ìŒ ì¹´ë“œ ",e.jsx(fs,{size:20})]})})]})},En=({words:t,onFinish:n,isReverse:s,startIndex:a})=>{const[r,i]=m.useState(0),[c,d]=m.useState(3),[o,x]=m.useState("ready"),[p,h]=m.useState([]),[v,y]=m.useState([]),f=m.useRef(null),b=t[r],C=a+r;m.useEffect(()=>(o==="playing"&&(d(3),f.current=setInterval(()=>{d(L=>L<=1?(f.current&&clearInterval(f.current),$(),0):(ge.playTick(),L-1))},1e3)),()=>{f.current&&clearInterval(f.current)}),[r,o]);const $=()=>{x("revealed"),ge.playError()},k=L=>{f.current&&clearInterval(f.current),L?(ge.playSuccess(),h([...p,b]),j()):(ge.playError(),x("revealed"))},M=()=>{y([...v,b]),j()},j=()=>{r<t.length-1?(x("playing"),i(L=>L+1)):n({correct:p,wrong:v})},u=s?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-slate-400 font-bold text-xl mb-4",children:["#",C]}),e.jsx("h2",{className:"text-4xl font-bold text-slate-800 mb-6 tracking-tight leading-tight text-center",children:b.definition})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-slate-400 font-bold text-xl mb-4",children:["#",C]}),e.jsx("h2",{className:"text-5xl font-black text-slate-800 mb-6 tracking-tight leading-tight text-center",children:b.term})]}),T=s?e.jsxs("div",{className:"animate-fade-in-up text-center",children:[e.jsx("div",{className:"h-px w-12 bg-slate-200 mx-auto mb-6"}),e.jsx("p",{className:"text-3xl font-black text-indigo-600",children:b.term})]}):e.jsxs("div",{className:"animate-fade-in-up text-center",children:[e.jsx("div",{className:"h-px w-12 bg-slate-200 mx-auto mb-6"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:b.definition}),b.mnemonic&&e.jsxs("p",{className:"text-slate-500 mt-2 text-sm",children:['"',b.mnemonic,'"']})]});return o==="ready"?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"mb-6 bg-indigo-100 p-6 rounded-full text-indigo-600 animate-bounce",children:e.jsx(gt,{size:48})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"3ì´ˆ íšŒìƒ í…ŒìŠ¤íŠ¸"}),e.jsx("p",{className:"text-slate-500 mb-2",children:s?"ëœ»ì„ ë³´ê³  3ì´ˆ ì•ˆì— ì˜ë‹¨ì–´ë¥¼ ë– ì˜¬ë¦¬ì„¸ìš”!":"ì˜ë‹¨ì–´ë¥¼ ë³´ê³  3ì´ˆ ì•ˆì— ëœ»ì„ ë– ì˜¬ë¦¬ì„¸ìš”!"}),e.jsx("button",{onClick:()=>{ge.playClick(),x("playing")},className:"w-full mt-6 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition",children:"START!"})]}):e.jsxs("div",{className:"flex flex-col h-full pt-10 pb-6 px-6 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{className:"text-slate-400 font-medium text-sm",children:[r+1," / ",t.length]}),e.jsxs("div",{className:`flex items-center gap-2 font-mono font-bold text-xl ${c<=1?"text-red-500":"text-slate-700"}`,children:[e.jsx(gt,{size:20})," ",c,"s"]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"w-full px-4",children:[u,o==="revealed"&&T]})}),e.jsx("div",{className:"mt-10 grid grid-cols-2 gap-4",children:o==="playing"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(!1),className:"bg-slate-100 text-slate-600 py-4 rounded-2xl font-bold hover:bg-slate-200 transition active:scale-95",children:"ëª¨ë¥´ê² ì–´ìš”"}),e.jsx("button",{onClick:()=>k(!0),className:"bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition active:scale-95",children:"ì•Œì•„ìš”!"})]}):e.jsxs("button",{onClick:M,className:"col-span-2 bg-slate-900 text-white py-4 rounded-2xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:["ì˜¤ë‹µ í™•ì¸í•˜ê³  ê³„ì†í•˜ê¸° ",e.jsx(bs,{size:18})]})})]})},Mt=10,Cn=()=>{const[t,n]=m.useState([]),[s,a]=m.useState(0),[r,i]=m.useState(J.HOME),[c,d]=m.useState(null),[o,x]=m.useState([]),[p,h]=m.useState(!1),v=u=>{const T=[];for(let L=0;L<u.length;L+=Mt)T.push({id:L,words:u.slice(L,L+Mt),isUnlocked:L===0});n(T),a(0),i(J.STUDY)},y=()=>{if(o.length===0)return;const u={id:999,words:[...o],isUnlocked:!0};n([u]),a(0),i(J.WRONG_REVIEW)},f=()=>{i(J.TEST)},b=u=>{d(u),x(T=>{const L=[...T,...u.wrong];return Array.from(new Map(L.map(G=>[G.id,G])).values())}),(r===J.WRONG_REVIEW||r===J.TEST)&&u.correct.length>0&&x(T=>T.filter(L=>!u.correct.some(G=>G.id===L.id))),ge.playSuccess(),i(J.RESULT)},C=()=>{const u=s+1;if(u<t.length){const T=[...t];T[u].isUnlocked=!0,n(T),a(u),d(null),i(J.STUDY)}else alert("ëª¨ë“  ë‹¨ì–´ í•™ìŠµì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! í›Œë¥­í•´ìš”!"),i(J.HOME)},$=()=>{if(c&&c.wrong.length>0){const u={id:(M==null?void 0:M.id)||0,words:c.wrong,isUnlocked:!0};n([u]),a(0),ge.playClick(),i(J.STUDY)}},k=()=>{confirm("í™ˆìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ì§„í–‰ ìƒí™©ì´ ì´ˆê¸°í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")&&i(J.HOME)},M=t[s],j=(M==null?void 0:M.id)===999?1:((M==null?void 0:M.id)||0)+1;return e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"w-full max-w-lg h-screen md:h-[850px] bg-white md:rounded-[2.5rem] shadow-2xl overflow-hidden relative flex flex-col",children:[r!==J.HOME&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-md z-10 p-4 flex justify-between items-center border-b border-slate-100",children:[e.jsx("button",{onClick:k,className:"p-2 text-slate-400 hover:text-slate-600",children:e.jsx(ys,{size:20})}),e.jsx("span",{className:"font-bold text-indigo-600 flex items-center gap-1",children:r===J.WRONG_REVIEW?e.jsxs(e.Fragment,{children:[e.jsx(_t,{size:18})," PRISON BREAK"]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{size:18})," SET ",s+1]})}),e.jsx("div",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:r===J.STUDY||r===J.WRONG_REVIEW?"LEARNING":r===J.TEST?"TESTING":"RESULT"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r===J.HOME&&e.jsx(kn,{onWordsLoaded:v,onStartWrongReview:y,wrongWordsCount:o.length,isReverse:p,onToggleReverse:()=>h(!p)}),(r===J.STUDY||r===J.WRONG_REVIEW)&&M&&e.jsx(Tn,{words:M.words,onComplete:f,isReverse:p,startIndex:j}),r===J.TEST&&M&&e.jsx(En,{words:M.words,onFinish:b,isReverse:p,startIndex:j}),r===J.RESULT&&c&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"bg-yellow-100 p-6 rounded-full text-yellow-500 mb-6 animate-bounce",children:e.jsx(Bt,{size:64})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-2",children:"í•™ìŠµ ì™„ë£Œ!"}),e.jsxs("p",{className:"text-slate-500 mb-8",children:[c.correct.length,"ê°œ ê¸°ì–µí•¨ / ",c.wrong.length,"ê°œ ë†“ì¹¨"]}),e.jsxs("div",{className:"w-full space-y-3",children:[c.wrong.length>0?e.jsxs("button",{onClick:$,className:"w-full py-4 bg-red-50 text-red-600 rounded-2xl font-bold text-lg hover:bg-red-100 transition flex items-center justify-center gap-2",children:[e.jsx(ws,{size:20})," í‹€ë¦° ë‹¨ì–´ ë°”ë¡œ ì¬ì‹œí—˜"]}):e.jsx("div",{className:"text-indigo-600 font-bold py-2",children:"ì™„ë²½í•´ìš”! ìŠ¤íŒŒí¬ê°€ íŠ€ì—ˆë„¤ìš”! ğŸ‰"}),r!==J.WRONG_REVIEW&&s<t.length-1&&e.jsxs("button",{onClick:C,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-slate-800 transition",children:["ë‹¤ìŒ ì„¸íŠ¸ ì—´ê¸° (",s+2," SET)"]}),e.jsx("button",{onClick:()=>i(J.HOME),className:"w-full py-4 text-slate-400 font-bold hover:text-slate-600 transition",children:"í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°"})]})]})]})]})})})},ue=new(window.AudioContext||window.webkitAudioContext),Ke=()=>{ue.state==="suspended"&&ue.resume();const t=ue.createOscillator(),n=ue.createGain();t.type="sine",t.frequency.setValueAtTime(800,ue.currentTime),t.frequency.exponentialRampToValueAtTime(400,ue.currentTime+.1),n.gain.setValueAtTime(.1,ue.currentTime),n.gain.exponentialRampToValueAtTime(.01,ue.currentTime+.1),t.connect(n),n.connect(ue.destination),t.start(),t.stop(ue.currentTime+.1)},An=()=>{ue.state==="suspended"&&ue.resume();const t=ue.createOscillator(),n=ue.createGain();t.type="triangle",t.frequency.setValueAtTime(300,ue.currentTime),n.gain.setValueAtTime(.05,ue.currentTime),n.gain.linearRampToValueAtTime(0,ue.currentTime+.15),t.connect(n),n.connect(ue.destination),t.start(),t.stop(ue.currentTime+.15)},Mn=t=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const n=new SpeechSynthesisUtterance(t);n.lang="en-US",n.rate=.9,window.speechSynthesis.speak(n)}},In=({onWordsLoaded:t})=>{const n=m.useCallback(s=>{var i;Ke();const a=(i=s.target.files)==null?void 0:i[0];if(!a)return;const r=new FileReader;r.onload=c=>{var p;let d=(p=c.target)==null?void 0:p.result;d.charCodeAt(0)===65279&&(d=d.slice(1));const o=d.split(/\r?\n/),x=[];o.forEach((h,v)=>{if(!h.trim())return;const y=h.replace(/"/g,"");let f=[];y.includes("	")?f=y.split("	"):y.includes(",")?f=y.split(","):f=y.split(";"),f=f.map(M=>M.trim());let b="",C="";const $=/^[0-9]+[\.]?$/.test(f[0]);f.length>=3&&$?(b=f[1],C=f[2]):f.length>=2&&(b=f[0],C=f[1]);const k=["word","term","english","no","number","ë‹¨ì–´","ìˆœì„œ","ëœ»","ì˜ë¯¸","meaning"].includes(b.toLowerCase());b&&C&&!k&&x.push({id:`word-${Date.now()}-${v}`,term:b,definition:C,isMemorized:!1,status:"new"})}),x.length>0?t(x):alert(`ë‹¨ì–´ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
(ì˜ˆì‹œ: apple, ì‚¬ê³¼  ë˜ëŠ”  1, apple, ì‚¬ê³¼)`)},r.readAsText(a)},[t]);return e.jsx("div",{className:"w-full max-w-md p-8 bg-white rounded-3xl shadow-sm border-2 border-dashed border-blue-200 text-center hover:border-blue-400 transition-colors cursor-pointer group",children:e.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-full mb-4 group-hover:bg-blue-100 transition-colors",children:e.jsx(Dt,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"ë‹¨ì–´ì¥ íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"CSV, ì—‘ì…€(csvì €ì¥) íŒŒì¼"}),e.jsx("input",{type:"file",accept:".csv, .txt",onChange:n,className:"hidden"}),e.jsxs("div",{className:"flex flex-col gap-2 text-xs text-slate-400 bg-slate-50 px-4 py-3 rounded-xl text-left w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-slate-500 mb-1",children:[e.jsx(js,{size:12}),e.jsx("span",{children:"ì§€ì› í˜•ì‹"})]}),e.jsx("div",{children:"1. apple, ì‚¬ê³¼"}),e.jsx("div",{children:"2. 1, apple, ì‚¬ê³¼ (ë²ˆí˜¸ ìë™ ì œì™¸)"})]})]})})},Rn=({block:t,onStart:n})=>{const s=t.status==="locked",a=t.status==="completed",r=()=>{s||(Ke(),n(t.id))};return e.jsxs("div",{onClick:r,className:`
        relative overflow-hidden rounded-2xl p-6 transition-all duration-300
        ${s?"bg-slate-100 opacity-70 cursor-not-allowed":"bg-white cursor-pointer hover:shadow-lg hover:-translate-y-1"}
        ${t.status==="in-progress"?"ring-2 ring-blue-400":""}
      `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`
          w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold
          ${a?"bg-green-100 text-green-600":"bg-blue-50 text-blue-600"}
        `,children:t.id}),s&&e.jsx(vs,{className:"text-slate-400",size:20}),a&&e.jsx(Ns,{className:"text-green-500",size:24}),!s&&!a&&e.jsx(mt,{className:"text-blue-400",size:24})]}),e.jsxs("h3",{className:"text-slate-800 font-bold text-lg mb-1",children:["Block ",t.id]}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[t.words.length," Words"]}),t.status==="in-progress"&&e.jsx("div",{className:"mt-4 h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-400 w-1/3"})})]})},Ln=({block:t,onComplete:n,onBack:s})=>{const[a,r]=m.useState(0),[i,c]=m.useState(!1),d=t.words[a],o=(a+1)/t.words.length*100;m.useEffect(()=>{c(!1)},[a]);const x=()=>{An(),c(!i)},p=v=>{v==null||v.stopPropagation(),Ke(),a<t.words.length-1?r(y=>y+1):n()},h=v=>{v.stopPropagation(),Ke(),Mn(d.term)};return e.jsxs("div",{className:"flex flex-col items-center w-full max-w-md mx-auto h-full",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-6 px-4",children:[e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 p-2",children:e.jsx(Ss,{size:24})}),e.jsx("div",{className:"flex-1 mx-4 h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-out",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-slate-500 w-10 text-right",children:[a+1,"/",t.words.length]})]}),e.jsx("div",{className:"w-full px-4 mb-8 perspective-1000 flex-1 flex items-center justify-center",children:e.jsx("div",{onClick:x,className:`
            relative w-full aspect-[4/5] max-h-[500px] cursor-pointer card-flip
            ${i?"flipped":""}
          `,children:e.jsxs("div",{className:"card-inner w-full h-full relative shadow-xl rounded-3xl transition-all duration-500",children:[e.jsxs("div",{className:"card-front absolute w-full h-full bg-white rounded-3xl flex flex-col items-center justify-center p-8 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold text-blue-500 uppercase tracking-wider mb-8",children:"English Term"}),e.jsx("h2",{className:`font-bold text-slate-800 text-center mb-8 break-words w-full leading-tight ${d.term.length>12?"text-3xl":"text-4xl"}`,children:d.term}),e.jsx("button",{onClick:h,className:"w-16 h-16 rounded-full bg-blue-50 text-blue-500 hover:bg-blue-100 hover:scale-110 transition-all flex items-center justify-center shadow-sm",children:e.jsx(Ve,{size:32})}),e.jsxs("div",{className:"absolute bottom-8 text-slate-300 text-sm flex items-center gap-2",children:[e.jsx($t,{size:14}),e.jsx("span",{children:"Tap to flip"})]})]}),e.jsxs("div",{className:"card-back absolute w-full h-full bg-slate-800 rounded-3xl flex flex-col items-center justify-center p-8 text-white border border-slate-700",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-6",children:"Definition"}),e.jsx("h2",{className:"text-3xl font-bold text-center break-words leading-relaxed",children:d.definition})]})]})})}),e.jsx("div",{className:"w-full px-4 mb-6",children:e.jsxs("button",{onClick:p,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-200 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx("span",{children:a===t.words.length-1?"Finish Block":"Next Word"}),e.jsx(ks,{size:20})]})})]})},it=10,On=t=>{const n=[];for(let s=0;s<t.length;s+=it)n.push({id:Math.floor(s/it)+1,words:t.slice(s,s+it),status:s===0?"ready":"locked"});return n},Gn=()=>{const[t,n]=m.useState([]),[s,a]=m.useState([]),[r,i]=m.useState(J.HOME),[c,d]=m.useState(null),o=h=>{n(h);const v=On(h);a(v)},x=h=>{a(v=>v.map(y=>y.id===h?{...y,status:"in-progress"}:y)),d(h),i(J.STUDY)},p=()=>{c&&(a(h=>h.map(v=>v.id===c?{...v,status:"completed"}:v.id===c+1?{...v,status:"ready"}:v)),i(J.HOME),d(null))};return e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen flex flex-col max-w-md mx-auto bg-[#F0F4F8] relative shadow-2xl",children:[e.jsxs("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-10 px-6 py-4 flex justify-between items-center border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Ts,{size:20})}),e.jsx("h1",{className:"font-bold text-lg tracking-tight",children:"TEN BLOCK"})]}),e.jsx("button",{className:"text-slate-400 hover:text-slate-600",children:e.jsx(Gt,{size:20})})]}),e.jsxs("main",{className:"flex-1 p-6 flex flex-col",children:[r===J.HOME&&e.jsx(e.Fragment,{children:t.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"ì‹œì‘í•´ë³¼ê¹Œìš”?"}),e.jsx("p",{className:"text-slate-500",children:"10ê°œì”© ìª¼ê°œì„œ ì™¸ìš°ë©´ ê¸ˆë°© ì™¸ì›Œìš”!"})]}),e.jsx(In,{onWordsLoaded:o})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"ë‚˜ì˜ ë‹¨ì–´ì¥"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[s.filter(h=>h.status==="completed").length," / ",s.length," Blocks ì™„ë£Œ"]})]}),e.jsx("button",{onClick:()=>n([]),className:"text-xs text-blue-500 underline",children:"íŒŒì¼ ë³€ê²½"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(h=>e.jsx(Rn,{block:h,onStart:x},h.id))})]})}),r===J.STUDY&&c&&e.jsx(Ln,{block:s.find(h=>h.id===c),onComplete:p,onBack:()=>i(J.HOME)})]})]})})},qt=[{name:"USA",code:"US"},{name:"China",code:"CN"},{name:"India",code:"IN"},{name:"Brazil",code:"BR"},{name:"Russia",code:"RU"},{name:"Japan",code:"JP"},{name:"Germany",code:"DE"},{name:"United Kingdom",code:"GB"},{name:"France",code:"FR"},{name:"South Korea",code:"KR"},{name:"Canada",code:"CA"},{name:"Australia",code:"AU"}],_n=1440*60*1e3,ht=[{id:"slow",name:"Standard",clicksPerSecond:5,price:"$0.99",intervalMs:200},{id:"fast",name:"Supercharged",clicksPerSecond:10,price:"$1.99",intervalMs:100},{id:"ludicrous",name:"Ludicrous Speed",clicksPerSecond:20,price:"$4.99",intervalMs:50}],Dn=10,Wt=523,It={USA:{button:"bg-blue-600 hover:bg-blue-500",text:"text-white"},China:{button:"bg-red-600 hover:bg-red-500",text:"text-yellow-300"},India:{button:"bg-orange-500 hover:bg-orange-400",text:"text-white"},Brazil:{button:"bg-green-600 hover:bg-green-500",text:"text-yellow-300"},Russia:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Japan:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Germany:{button:"bg-yellow-500 hover:bg-yellow-400",text:"text-black"},"United Kingdom":{button:"bg-blue-700 hover:bg-blue-600",text:"text-white"},France:{button:"bg-blue-700 hover:bg-blue-600",text:"text-white"},"South Korea":{button:"bg-blue-500 hover:bg-blue-400",text:"text-red-500"},Canada:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Australia:{button:"bg-blue-800 hover:bg-blue-700",text:"text-white"},default:{button:"bg-yellow-500 hover:bg-yellow-400",text:"text-gray-900"}},Je=t=>{const n=t.toUpperCase().split("").map(s=>127397+s.charCodeAt(0));return String.fromCodePoint(...n)},Vt=t=>({USA:"US",China:"CN",India:"IN",Brazil:"BR",Russia:"RU",Japan:"JP",Germany:"DE","United Kingdom":"GB",France:"FR","South Korea":"KR",Canada:"CA",Australia:"AU"})[t]||"AQ",Pn=({onSelectCountry:t})=>{const[n,s]=m.useState(null),a=()=>{n&&t(n)};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-950 p-6 text-center overflow-hidden",children:[e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 mb-4 tracking-tighter uppercase",children:"Global Click War"}),e.jsx("p",{className:"text-xl text-gray-400 mb-12 max-w-lg mx-auto font-medium",children:"Represent your nation in the ultimate worldwide tapping competition. Choose wisely â€” your allegiance is permanent."})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 w-full max-w-5xl animate-fade-in-delayed",children:qt.map(r=>e.jsxs("button",{onClick:()=>s(r),className:`flex flex-col items-center justify-center p-6 rounded-2xl transition-all duration-300 transform hover:scale-105 group border-2 ${(n==null?void 0:n.code)===r.code?"bg-yellow-500 border-yellow-400 text-gray-900 shadow-[0_0_30px_rgba(234,179,8,0.3)] ring-4 ring-yellow-400/20":"bg-gray-900/50 border-gray-800 text-white hover:bg-gray-800 hover:border-gray-700"}`,children:[e.jsx("span",{className:"text-6xl mb-3 group-hover:scale-110 transition-transform",children:Je(r.code)}),e.jsx("span",{className:"font-black text-xs uppercase tracking-widest",children:r.name})]},r.code))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-900 p-10 rounded-[2.5rem] shadow-2xl border border-gray-800 text-center max-w-md w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-orange-500"}),e.jsx("div",{className:"text-9xl mb-6 drop-shadow-2xl",children:Je(n.code)}),e.jsxs("h2",{className:"text-3xl font-black mb-4 text-white uppercase tracking-tight",children:["Enlist for ",n.name,"?"]}),e.jsxs("p",{className:"text-gray-400 mb-8 leading-relaxed font-medium",children:["You are about to represent ",e.jsx("span",{className:"text-yellow-400 font-bold",children:n.name})," in the global arena. This decision is final. Are you ready to tap for glory?"]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:a,className:"w-full py-5 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 font-black rounded-2xl hover:from-yellow-300 hover:to-orange-400 transition-all shadow-xl shadow-yellow-500/20 uppercase tracking-[0.2em] text-sm",children:"Enter the War Room"}),e.jsx("button",{onClick:()=>s(null),className:"w-full py-4 bg-gray-800/50 text-gray-400 font-bold rounded-2xl hover:bg-gray-800 hover:text-white transition-colors uppercase tracking-widest text-[10px]",children:"Choose another nation"})]})]})}),e.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in-up { animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fade-in-delayed { opacity: 0; animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards; }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
      `})]})},Yt=({leaderboard:t,userCountry:n})=>{const s=Object.entries(t).sort(([,a],[,r])=>r-a);return e.jsxs("div",{className:"w-full max-w-md bg-gray-900/60 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-800 flex flex-col h-full max-h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsx("h2",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 uppercase tracking-widest",children:"Global Ranks"}),e.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-tighter",children:"Live Updates"})]}),e.jsx("div",{className:"space-y-2 overflow-y-auto pr-2 custom-scrollbar flex-grow",children:s.map(([a,r],i)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl transition-all duration-300 border ${a===n?"bg-yellow-500 border-yellow-400 text-gray-900 font-bold scale-[1.03] shadow-xl shadow-yellow-500/20":"bg-gray-800/40 border-gray-800 hover:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`text-xs font-black w-6 ${a===n?"text-gray-900/50":"text-gray-600"}`,children:["#",i+1]}),e.jsx("span",{className:"text-3xl drop-shadow-sm",children:Je(Vt(a))}),e.jsx("span",{className:"text-sm font-black uppercase tracking-tight truncate max-w-[100px]",children:a})]}),e.jsx("span",{className:"text-lg font-black font-mono tracking-tighter",children:Math.floor(r).toLocaleString()})]},a))}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #374151; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #4b5563; }
      `})]})},zt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),$n=({onPurchase:t,onClose:n,currentTier:s})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-2xl text-center max-w-lg w-full relative",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors","aria-label":"Close store",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(zt,{className:"w-8 h-8 text-yellow-400 mr-2"}),e.jsx("h2",{className:"text-3xl font-bold text-yellow-400",children:"Auto-Click Upgrades"})]}),e.jsx("p",{className:"text-gray-300 mb-8",children:"Purchase an auto-clicker to boost your nation's score automatically!"}),e.jsx("div",{className:"space-y-4",children:ht.map(a=>e.jsxs("div",{className:`p-4 rounded-lg flex flex-col sm:flex-row items-center justify-between transition-all ${s===a.id?"bg-green-600 border-2 border-green-400":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsxs("div",{className:"text-left mb-4 sm:mb-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:a.name}),e.jsxs("p",{className:"text-gray-300",children:[a.clicksPerSecond," clicks / second"]}),s===a.id&&e.jsx("p",{className:"text-sm font-bold text-white mt-1",children:"ACTIVE"})]}),e.jsx("button",{onClick:()=>t(a.id),disabled:s===a.id,className:"w-full sm:w-auto px-6 py-3 bg-yellow-500 text-gray-900 font-bold rounded-md hover:bg-yellow-400 transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed disabled:text-gray-400",children:a.price})]},a.id))})]})}),Bn=()=>{const[t,n]=m.useState(!0);return t?e.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-400 via-yellow-500 to-orange-500 p-3 text-center text-gray-900 font-bold relative shadow-lg",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold text-lg",children:"SPECIAL EVENT!"})," Achieve over 100,000 clicks for an exclusive reward!"]}),e.jsx("button",{onClick:()=>n(!1),className:"absolute top-1/2 right-4 -translate-y-1/2 text-gray-800 hover:text-black","aria-label":"Dismiss promotional message",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):null},Un=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Fn=({x:t,y:n,id:s,value:a})=>e.jsxs("div",{className:"absolute text-yellow-400 font-black text-5xl pointer-events-none z-50 drop-shadow-[0_4px_8px_rgba(0,0,0,0.6)]",style:{left:`${t}px`,top:`${n}px`,transform:"translate(-50%, -50%)",animation:"click-float 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards"},children:["+",a]},s),Hn=({userCountry:t,userClicks:n,leaderboard:s,timeLeft:a,onIncrement:r,autoClickTier:i,onPurchaseTier:c,isGodModeActive:d,onToggleGodMode:o,isAutoClickEnabled:x,onToggleAutoClick:p})=>{const[h,v]=m.useState(!1),[y,f]=m.useState([]),b=m.useRef(null),C=Math.min(Wt,Math.floor(Math.sqrt(n/10))+1);m.useEffect(()=>{if(b.current&&(clearInterval(b.current),b.current=null),x){if(d)b.current=setInterval(()=>{r()},Dn);else if(i){const T=ht.find(L=>L.id===i);T&&(b.current=setInterval(()=>{r()},T.intervalMs))}}return()=>{b.current&&clearInterval(b.current)}},[i,r,d,x]);const $=T=>{r();const L=T.currentTarget.getBoundingClientRect(),G=T.clientX-L.left,O=T.clientY-L.top,S=1+(C-1)*.05,w={x:G,y:O,id:Date.now(),value:S.toFixed(2)};f(I=>[...I,w]),setTimeout(()=>{f(I=>I.filter(B=>B.id!==w.id))},800)},k=Object.values(s).reduce((T,L)=>T+L,0),M=s[t]||0,j=i?ht.find(T=>T.id===i):null,u=It[t]||It.default;return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-950 text-white selection:bg-yellow-500 selection:text-gray-900",children:[e.jsx(Bn,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch justify-center flex-grow p-4 lg:p-12 gap-12 max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col items-center w-full lg:w-3/5 space-y-10",children:[e.jsxs("header",{className:"text-center animate-fade-in space-y-4",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 tracking-tighter uppercase leading-none",children:"Global Click War"}),e.jsxs("div",{className:"inline-flex items-center gap-4 bg-gray-900 border border-gray-800 py-3 px-8 rounded-[2rem] shadow-2xl",children:[e.jsx("span",{className:"text-5xl drop-shadow-xl",children:Je(Vt(t))}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.2em] mb-0.5",children:"Your Nation"}),e.jsx("p",{className:"text-2xl font-black uppercase tracking-tight leading-none",children:t})]})]})]}),e.jsxs("div",{className:"w-full max-w-sm bg-gray-900/50 backdrop-blur p-6 rounded-[2rem] border border-gray-800 shadow-inner text-center",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] mb-2",children:"Operation Window Ends In"}),e.jsxs("div",{className:"text-4xl font-mono font-black text-yellow-400 tabular-nums tracking-tight",children:[e.jsxs("span",{children:[String(a.days).padStart(2,"0"),"d "]}),e.jsxs("span",{children:[String(a.hours).padStart(2,"0"),"h "]}),e.jsxs("span",{children:[String(a.minutes).padStart(2,"0"),"m "]}),e.jsxs("span",{children:[String(a.seconds).padStart(2,"0"),"s"]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-10 bg-gradient-to-br from-yellow-500 via-orange-500 to-red-600 rounded-full opacity-20 blur-3xl group-hover:opacity-40 transition-opacity animate-pulse"}),e.jsxs("button",{onClick:$,className:`relative w-72 h-72 md:w-96 md:h-96 rounded-full flex items-center justify-center font-black text-6xl shadow-2xl transform active:scale-90 active:rotate-2 transition-all duration-75 select-none overflow-hidden border-[12px] border-gray-950/80 ${u.button} ${u.text}`,children:["TAP",y.map(T=>e.jsx(Fn,{...T},T.id))]})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 font-black uppercase tracking-widest text-[10px]",children:"Your Contribution"}),e.jsx("div",{className:"px-3 py-1 bg-yellow-500/10 border border-yellow-500/30 rounded-full",children:e.jsxs("span",{className:"text-[10px] text-yellow-500 font-black",children:["RANK LVL ",C]})})]}),e.jsx("p",{className:"text-7xl font-black font-mono tracking-tighter drop-shadow-lg text-white",children:Math.floor(n).toLocaleString()})]}),e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-md",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[e.jsxs("button",{onClick:()=>v(!0),className:"flex flex-col items-center justify-center gap-2 p-6 bg-gray-900 rounded-3xl hover:bg-gray-800 transition-all border border-gray-800 hover:border-yellow-500/50 group",children:[e.jsx(zt,{className:"w-8 h-8 text-yellow-500 group-hover:scale-125 transition-transform"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Armory Store"})]}),e.jsxs("button",{onClick:o,className:`flex flex-col items-center justify-center gap-2 p-6 rounded-3xl transition-all border ${d?"bg-purple-600/20 border-purple-500 text-purple-400 shadow-[0_0_30px_rgba(147,51,234,0.3)]":"bg-gray-900 border-gray-800 hover:border-purple-500/50"}`,children:[e.jsx(Un,{className:`w-8 h-8 ${d?"fill-purple-400":"text-gray-600"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"God Mode"})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full px-6 py-4 bg-gray-900 border border-gray-800 rounded-3xl shadow-xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest",children:"Auto-Tapper Status"}),e.jsx("span",{className:`text-[11px] font-black uppercase ${x?"text-green-500":"text-gray-500"}`,children:x?d?"Overdrive (100/s)":`${(j==null?void 0:j.name)||"Standard"} Active`:"Manual Only"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:p,className:"sr-only peer"}),e.jsx("div",{className:"w-16 h-8 bg-gray-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-600 shadow-inner"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center w-full lg:w-2/5 space-y-8",children:[e.jsxs("div",{className:"w-full bg-gray-900/50 border border-gray-800 p-8 rounded-[2.5rem] shadow-2xl space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]",children:[t," National Score"]}),e.jsx("p",{className:"text-5xl font-black font-mono text-white tabular-nums tracking-tighter",children:Math.floor(M).toLocaleString()}),e.jsx("div",{className:"w-full h-3 bg-gray-950 rounded-full overflow-hidden border border-gray-800",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-500 via-orange-500 to-red-600 transition-all duration-1000 shadow-[0_0_15px_rgba(234,179,8,0.5)]",style:{width:`${Math.min(100,M/(k||1)*1e3)}%`}})})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-800 space-y-1",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]",children:"Total Global Impact"}),e.jsx("p",{className:"text-4xl font-black font-mono text-white/30 tabular-nums tracking-tighter",children:Math.floor(k).toLocaleString()})]})]}),e.jsx(Yt,{leaderboard:s,userCountry:t})]}),e.jsx("style",{children:`
          @keyframes click-float {
            0% { transform: translate(-50%, -50%) scale(0.6); opacity: 0; }
            15% { opacity: 1; transform: translate(-50%, -100%) scale(1.3); }
            100% { transform: translate(-50%, -250%) scale(1.6); opacity: 0; }
          }
          @keyframes fade-in {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in { animation: fade-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        `})]}),h&&e.jsx($n,{currentTier:i,onPurchase:c,onClose:()=>v(!1)})]})},qn=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),e.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),e.jsx("path",{d:"M4 22h16"}),e.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),e.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),e.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),Wn=t=>{const a=({USA:"US",China:"CN",India:"IN",Brazil:"BR",Russia:"RU",Japan:"JP",Germany:"DE","United Kingdom":"GB",France:"FR","South Korea":"KR",Canada:"CA",Australia:"AU"}[t]||"AQ").toUpperCase().split("").map(r=>127397+r.charCodeAt(0));return String.fromCodePoint(...a)},Vn=({leaderboard:t,userCountry:n})=>{const s=Object.entries(t).sort(([,r],[,i])=>i-r),a=s.length>0?s[0]:null;return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 p-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-yellow-400 mb-4",children:"The War is Over!"}),a&&e.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-800 rounded-lg",children:[e.jsx(qn,{className:"w-24 h-24 text-yellow-400 mb-4"}),e.jsx("h2",{className:"text-3xl text-white",children:"The winner is"}),e.jsxs("p",{className:"text-5xl font-bold text-yellow-400 mt-2",children:[Wn(a[0])," ",a[0]]}),e.jsxs("p",{className:"text-2xl text-gray-300 mt-2 font-mono",children:["with ",a[1].toLocaleString()," clicks!"]})]})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:"Final Standings"}),e.jsx(Yt,{leaderboard:t,userCountry:n})]})]})},Yn=()=>{const[t,n]=m.useState(null),[s,a]=m.useState(0),[r,i]=m.useState({}),[c,d]=m.useState(null),[o,x]=m.useState({days:0,hours:0,minutes:0,seconds:0}),[p,h]=m.useState(!1),[v,y]=m.useState(!0),[f,b]=m.useState(null),[C,$]=m.useState(!1),[k,M]=m.useState(!0),j=m.useCallback(S=>{const w=S-new Date().getTime();return w>0?{days:Math.floor(w/(1e3*60*60*24)),hours:Math.floor(w/(1e3*60*60)%24),minutes:Math.floor(w/1e3/60%60),seconds:Math.floor(w/1e3%60)}:null},[]);m.useEffect(()=>{try{const S=localStorage.getItem("popcat_user_country"),w=localStorage.getItem("popcat_user_clicks"),I=localStorage.getItem("popcat_global_leaderboard");let B=localStorage.getItem("popcat_event_end_time");const F=localStorage.getItem("popcat_autoclick_tier"),Z=localStorage.getItem("popcat_god_mode"),he=localStorage.getItem("popcat_autoclick_enabled");S&&n(JSON.parse(S)),w&&a(JSON.parse(w)),F&&b(JSON.parse(F)),Z&&$(JSON.parse(Z)),he&&M(JSON.parse(he));let Re=I?JSON.parse(I):{};if(qt.forEach(P=>{Re[P.name]===void 0&&(Re[P.name]=0)}),i(Re),!B){const P=new Date().getTime()+_n;B=String(P),localStorage.setItem("popcat_event_end_time",B)}const je=parseInt(B,10);if(d(je),new Date().getTime()>=je)h(!0);else{const P=j(je);P&&x(P)}}catch(S){console.warn("Storage sync failed, using defaults",S)}finally{setTimeout(()=>y(!1),800)}},[j]),m.useEffect(()=>{if(!c||p)return;const S=setInterval(()=>{const w=j(c);w?x(w):(h(!0),clearInterval(S))},1e3);return()=>clearInterval(S)},[c,p,j]);const u=S=>{n(S.name),localStorage.setItem("popcat_user_country",JSON.stringify(S.name)),i(w=>{const I={...w};return I[S.name]===void 0&&(I[S.name]=0),localStorage.setItem("popcat_global_leaderboard",JSON.stringify(I)),I})},T=m.useCallback(()=>{p||!t||a(S=>{const I=1+(Math.min(Wt,Math.floor(Math.sqrt(S/10))+1)-1)*.05,B=S+I;return i(F=>{const Z={...F,[t]:(F[t]||0)+I};return localStorage.setItem("popcat_global_leaderboard",JSON.stringify(Z)),Z}),localStorage.setItem("popcat_user_clicks",JSON.stringify(B)),B})},[t,p]),L=S=>{b(S),localStorage.setItem("popcat_autoclick_tier",JSON.stringify(S))},G=()=>{const S=!C;$(S),localStorage.setItem("popcat_god_mode",JSON.stringify(S))},O=()=>{const S=!k;M(S),localStorage.setItem("popcat_autoclick_enabled",JSON.stringify(S))};return v?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-950 text-white p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-yellow-500/10 border-t-yellow-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})]}),e.jsx("p",{className:"mt-8 text-sm font-black tracking-[0.4em] uppercase text-gray-400 animate-pulse",children:"Syncing Intel..."})]}):p&&t?e.jsx(Vn,{leaderboard:r,userCountry:t}):t?e.jsx(ke,{children:e.jsx(Hn,{userCountry:t,userClicks:s,leaderboard:r,timeLeft:o,onIncrement:T,autoClickTier:f,onPurchaseTier:L,isGodModeActive:C,onToggleGodMode:G,isAutoClickEnabled:k,onToggleAutoClick:O})}):e.jsx(Pn,{onSelectCountry:u})},zn=({isOpen:t,onClose:n,onAdd:s})=>{const[a,r]=m.useState(""),[i,c]=m.useState(qe.OTHER),[d,o]=m.useState(""),[x,p]=m.useState("");if(!t)return null;const h=v=>{v.preventDefault(),a.trim()&&(s({name:a,relationship:i,birthday:d,notes:x}),r(""),c(qe.OTHER),o(""),p(""),n())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl transform transition-all",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ìƒˆ ì¹œêµ¬ ë“±ë¡"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"fas fa-times text-xl"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì´ë¦„ *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"ì¹œêµ¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”",value:a,onChange:v=>r(v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê´€ê³„"}),e.jsx("select",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:i,onChange:v=>c(v.target.value),children:Object.values(qe).map(v=>e.jsx("option",{value:v,children:v},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìƒì¼ (ì„ íƒ)"}),e.jsx("input",{type:"date",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:v=>o(v.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"íŠ¹ì§• ë° ë©”ëª¨"}),e.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",placeholder:"ì¹œêµ¬ì˜ ì„±ê²©ì´ë‚˜ ì¢‹ì•„í•˜ëŠ” ê²ƒ ë“±ì„ ì ì–´ë³´ì„¸ìš”",value:x,onChange:v=>p(v.target.value)})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:"ì €ì¥í•˜ê¸°"})]})]})})},Kn=new _e({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),Jn=async t=>{const s=await Kn.models.generateContent({model:"gemini-3-flash-preview",contents:`ë‚´ ì¹œêµ¬ ${t.name}ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëª‡ ê°€ì§€ë¥¼ ì œì•ˆí•´ì¤˜.
    ê´€ê³„: ${t.relationship}
    ë©”ëª¨: ${t.notes||"ì—†ìŒ"}
    
    1. ì´ ì¹œêµ¬ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ê·€ì—½ê±°ë‚˜ ì¬ì¹˜ ìˆëŠ” ë³„ëª… 3ê°œ
    2. ì´ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ë©´ ì¢‹ì„ ë”°ëœ»í•œ ì•ˆë¶€ ì¸ì‚¬ë§ í•œ ë¬¸ì¥
    
    JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì¤˜.`,config:{responseMimeType:"application/json",responseSchema:{type:q.OBJECT,properties:{nicknames:{type:q.ARRAY,items:{type:q.STRING},description:"3 unique nicknames in Korean"},message:{type:q.STRING,description:"A friendly greeting message in Korean"}},required:["nicknames","message"]}}});return JSON.parse(s.text.trim())},Xn=({friend:t,onDelete:n})=>{const[s,a]=m.useState(!1),[r,i]=m.useState(null),c=async()=>{a(!0);try{const o=await Jn(t);i(o)}catch(o){console.error("AI Insight Error:",o),alert("AI ì¶”ì²œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{a(!1)}},d=o=>o.charAt(0);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 transition-all hover:shadow-md hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xl",children:d(t.name)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t.name}),e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-semibold bg-indigo-50 text-indigo-600",children:t.relationship})]})]}),e.jsx("button",{onClick:()=>n(t.id),className:"text-gray-300 hover:text-red-500 transition-colors",children:e.jsx("i",{className:"fas fa-trash-alt"})})]}),t.birthday&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[e.jsx("i",{className:"fas fa-birthday-cake mr-2 text-pink-400"}),t.birthday]}),t.notes&&e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg line-clamp-2 mb-4",children:t.notes}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50",children:r?e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:r.nicknames.map((o,x)=>e.jsxs("span",{className:"bg-amber-50 text-amber-700 text-xs px-2 py-1 rounded-full border border-amber-100",children:["âœ¨ ",o]},x))}),e.jsxs("p",{className:"text-xs text-indigo-700 italic bg-indigo-50 p-2 rounded border border-indigo-100",children:['"',r.message,'"']}),e.jsx("button",{onClick:()=>i(null),className:"text-[10px] text-gray-400 hover:underline",children:"ë‹«ê¸°"})]}):e.jsx("button",{onClick:c,disabled:s,className:`flex items-center justify-center w-full py-2 rounded-lg text-sm font-medium transition-all ${s?"bg-gray-100 text-gray-400":"bg-gradient-to-r from-violet-500 to-indigo-500 text-white hover:from-violet-600 hover:to-indigo-600"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"AIê°€ ìƒê°í•˜ëŠ” ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-magic mr-2"}),"AI ë³„ëª… & ë©”ì‹œì§€ ì¶”ì²œ"]})})})]})},Zn=()=>{const[t,n]=m.useState([]),[s,a]=m.useState(!1),[r,i]=m.useState(""),[c,d]=m.useState("ALL");m.useEffect(()=>{const h=localStorage.getItem("friendlink_friends");if(h)try{n(JSON.parse(h))}catch{console.error("Failed to load friends")}},[]),m.useEffect(()=>{localStorage.setItem("friendlink_friends",JSON.stringify(t))},[t]);const o=h=>{const v={...h,id:crypto.randomUUID(),createdAt:Date.now()};n(y=>[v,...y])},x=h=>{confirm("ì´ ì¹œêµ¬ë¥¼ ëª©ë¡ì—ì„œ ì‚­ì œí• ê¹Œìš”?")&&n(v=>v.filter(y=>y.id!==h))},p=m.useMemo(()=>t.filter(h=>{const v=h.name.toLowerCase().includes(r.toLowerCase())||(h.notes||"").toLowerCase().includes(r.toLowerCase()),y=c==="ALL"||h.relationship===c;return v&&y}),[t,r,c]);return e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen pb-20 bg-slate-50",children:[e.jsx("header",{className:"bg-white border-b sticky top-0 z-40 backdrop-blur-sm bg-white/80",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx("i",{className:"fas fa-user-friends text-xl"})}),e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"FriendLink"})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ì¹œêµ¬ ê²€ìƒ‰...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full border-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all outline-none",value:r,onChange:h=>i(h.target.value)})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center overflow-x-auto pb-4 gap-2 no-scrollbar",children:[e.jsx("button",{onClick:()=>d("ALL"),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c==="ALL"?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"ì „ì²´"}),Object.values(qe).map(h=>e.jsx("button",{onClick:()=>d(h),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c===h?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-100"}`,children:h},h))]}),e.jsxs("div",{className:"mb-6 flex justify-between items-center text-sm text-gray-500",children:[e.jsxs("span",{children:["ì´ ",e.jsxs("strong",{children:[p.length,"ëª…"]}),"ì˜ ì¹œêµ¬"]}),r&&e.jsxs("span",{children:["ê²€ìƒ‰ ê²°ê³¼: ",p.length,"ê±´"]})]}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(h=>e.jsx(Xn,{friend:h,onDelete:x},h.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center text-gray-300 mb-4",children:e.jsx("i",{className:"fas fa-users-slash text-3xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"ì¹œêµ¬ê°€ ì•„ì§ ì—†ë‚˜ìš”?"}),e.jsx("p",{className:"text-gray-500 max-w-xs mx-auto mt-2",children:"ìš°ì¸¡ í•˜ë‹¨ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì†Œì¤‘í•œ ì¸ì—°ë“¤ì„ ì €ì¥í•´ ë³´ì„¸ìš”."})]})]}),e.jsxs("button",{onClick:()=>a(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-indigo-600 text-white rounded-full flex items-center justify-center shadow-xl hover:bg-indigo-700 hover:scale-110 active:scale-95 transition-all z-40 group",children:[e.jsx("i",{className:"fas fa-plus text-xl transition-transform group-hover:rotate-90"}),e.jsx("span",{className:"absolute right-full mr-4 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"ìƒˆ ì¹œêµ¬ ì¶”ê°€"})]}),e.jsx(zn,{isOpen:s,onClose:()=>a(!1),onAdd:o})]})})},Qn=({stage:t,difficulty:n,score:s,lives:a})=>e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto flex justify-between items-center glass p-3 rounded-2xl border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ìŠ¤í…Œì´ì§€"}),e.jsx("span",{className:"text-xl font-bold text-cyan-400 text-glow-cyan",children:t})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ë‚œì´ë„"}),e.jsx("span",{className:`text-[11px] font-bold px-3 py-0.5 rounded-full border ${n===Ie.EASY?"border-emerald-500/50 text-emerald-400 bg-emerald-500/10":n===Ie.MEDIUM?"border-amber-500/50 text-amber-400 bg-amber-500/10":"border-rose-500/50 text-rose-400 bg-rose-500/10"}`,children:n})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ìƒëª…"}),e.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((r,i)=>e.jsx("i",{className:`fas fa-heart text-[10px] ${i<a?"text-rose-500":"text-slate-700"}`},i))})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ì ìˆ˜"}),e.jsx("span",{className:"text-xl font-bold text-white",children:s})]})]})]})}),er=({puzzle:t,onSelectOption:n,selectedOption:s,isLocked:a,showHint:r,onToggleHint:i})=>e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col gap-6 animate-slide-up",children:[e.jsx("div",{className:"glass p-5 rounded-3xl border-l-4 border-l-cyan-500 shadow-xl",children:e.jsxs("p",{className:"text-cyan-200 text-sm italic leading-relaxed",children:[e.jsx("i",{className:"fas fa-quote-left mr-2 opacity-50"}),t.story]})}),e.jsxs("div",{className:"glass p-8 rounded-3xl shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-cyan-500/10 rounded-full blur-3xl group-hover:bg-cyan-500/20 transition-all duration-700"}),e.jsxs("h3",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-fingerprint text-cyan-500"}),"íŒ¨í„´ í•´ë…"]}),e.jsx("p",{className:"text-2xl font-bold mb-8 text-white font-mono leading-tight whitespace-pre-line",children:t.question}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.options.map((c,d)=>e.jsx("button",{disabled:a,onClick:()=>n(c),className:`p-4 rounded-2xl font-mono text-xl font-bold transition-all duration-200 border transform active:scale-95 ${s===c?"bg-cyan-500 border-cyan-400 text-white shadow-lg scale-105 glow-cyan":"bg-slate-800/50 border-white/10 text-slate-300 hover:border-cyan-500/50 hover:bg-slate-800"}`,children:c},d))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:i,className:`flex items-center gap-2 text-[11px] font-bold uppercase tracking-wider transition-colors ${r?"text-amber-400":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx("i",{className:"fas fa-lightbulb opacity-75"}),r?"íŒíŠ¸ í™•ì¸ë¨":"ë‹¨ì„œ ìš”ì²­í•˜ê¸°"]})}),r&&e.jsx("div",{className:"glass p-4 rounded-2xl border border-amber-500/30 bg-amber-500/5 animate-slide-up text-center",children:e.jsxs("p",{className:"text-amber-200 text-xs",children:[e.jsx("span",{className:"font-bold mr-1",children:"HINT:"})," ",t.hint]})})]}),tr=()=>{const[t,n]=Ye.useState("ì•”í˜¸í™” ì½”ì–´ ì´ˆê¸°í™” ì¤‘..."),s=["ë…¼ë¦¬ì  íŒ¨í„´ í™˜ê²½ ìŠ¤ìº” ì¤‘...","ì²´ì„ë²„ ì ê¸ˆ ì¥ì¹˜ ë³´ì•ˆ í™•ì¸ ì¤‘...","ìˆ˜í•™ì  ë‚œì´ë„ ë§¤íŠ¸ë¦­ìŠ¤ ë³´ì • ì¤‘...","í¼ì¦ ì—”ì§„ê³¼ ì‹ ê²½ë§ ì—°ê²° ìˆ˜ë¦½ ì¤‘...","ìˆ˜ì—´ ë‚´ ë¹„ì •ìƒ íŒ¨í„´ ê°ì§€ ì¤‘...","ë³´ì•ˆ í”„ë¡œí† ì½œ ìš°íšŒ ì‹œë„ ì¤‘...","ë‹¤ìŒ êµ¬ì—­ì˜ ì½”ë“œ í•´ë… ì¤‘..."];return Ye.useEffect(()=>{const a=setInterval(()=>{n(s[Math.floor(Math.random()*s.length)])},2e3);return()=>clearInterval(a)},[]),e.jsxs("div",{className:"fixed inset-0 z-40 flex flex-col items-center justify-center bg-slate-950/90 backdrop-blur-sm p-6 text-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-cyan-500/20 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-cyan-400 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-indigo-500/20 rounded-full"}),e.jsx("div",{className:"absolute inset-4 border-b-4 border-indigo-400 rounded-full animate-spin-slow"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-brain text-cyan-400 text-2xl animate-pulse"})})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"ë„ì „ ê³¼ì œ ìƒì„± ì¤‘"}),e.jsx("p",{className:"text-slate-400 text-xs font-mono max-w-xs h-10",children:t}),e.jsx("style",{children:`
        .animate-spin-slow {
          animation: spin 3s linear infinite;
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},sr=({onStart:t,onShowRanking:n})=>{const[s,a]=Ye.useState(Ie.EASY);return e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center gap-8 animate-slide-up",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-block p-4 rounded-3xl bg-cyan-500/10 border border-cyan-500/30 mb-6 glow-cyan",children:e.jsx("i",{className:"fas fa-brain text-4xl text-cyan-400"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-tighter",children:"MATH PUZZLE"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"ë…¼ë¦¬ì  ì‚¬ê³ ì˜ í•œê³„ì— ë„ì „í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"w-full glass p-6 rounded-3xl flex flex-col gap-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest text-center",children:"ì‹œì‘ ë‚œì´ë„ ì„ íƒ"}),e.jsx("div",{className:"flex flex-col gap-2",children:Object.values(Ie).map(r=>e.jsx("button",{onClick:()=>a(r),className:`py-4 rounded-2xl font-bold transition-all border ${s===r?"bg-cyan-600 border-cyan-400 text-white glow-cyan":"bg-slate-800/50 border-white/10 text-slate-400 hover:bg-slate-800"}`,children:r},r))})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsx("button",{onClick:()=>t(s),className:"w-full py-5 bg-white text-slate-950 rounded-2xl font-bold text-lg hover:bg-cyan-400 transition-all transform active:scale-95 shadow-xl",children:"ê²Œì„ ì‹œì‘"}),e.jsxs("button",{onClick:n,className:"w-full py-4 glass text-white rounded-2xl font-bold border-white/20 hover:bg-white/5 transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-trophy text-amber-400"}),"ìˆœìœ„ ë³´ê¸°"]})]})]})},ar=({rankings:t,onBack:n})=>e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col gap-6 animate-slide-up",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2 uppercase tracking-tight",children:"TOP AGENTS"}),e.jsx("p",{className:"text-slate-400 text-xs",children:"ì „ì²´ í•´ë… ì „ë¬¸ê°€ ìˆœìœ„"})]}),e.jsx("div",{className:"glass rounded-3xl overflow-hidden border border-white/10 shadow-2xl",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white/5 border-b border-white/10",children:[e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ìˆœìœ„"}),e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ì—ì´ì „íŠ¸"}),e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-right",children:"ì ìˆ˜"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-10 text-center text-slate-500 italic",children:"ì•„ì§ ê¸°ë¡ëœ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤."})}):t.map((s,a)=>e.jsxs("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"p-4 font-mono font-bold text-cyan-400",children:["#",a+1]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:s.name}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:["ìŠ¤í…Œì´ì§€ ",s.stage]})]})}),e.jsx("td",{className:"p-4 text-right font-mono font-bold text-white",children:s.score.toLocaleString()})]},a))})]})}),e.jsxs("button",{onClick:n,className:"w-full py-4 glass text-slate-400 rounded-2xl font-bold border-white/10 hover:text-white transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),"ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°"]})]}),nr=new _e({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),rr={type:q.OBJECT,properties:{story:{type:q.STRING,description:"íƒˆì¶œ ê²Œì„ ìŠ¤íƒ€ì¼ì˜ ì§§ì€ ì„œì‚¬ì  ë°°ê²½ (1-2ë¬¸ì¥, í•œêµ­ì–´ë¡œ ì‘ì„±)."},question:{type:q.STRING,description:"í•´ê²°í•´ì•¼ í•  ìˆ˜í•™ì  íŒ¨í„´ ë¬¸ì œ (í•œêµ­ì–´ë¡œ ì‘ì„±)."},options:{type:q.ARRAY,items:{type:q.STRING},description:"ì •í™•íˆ 4ê°œì˜ ê°ê´€ì‹ ì„ íƒì§€."},correctAnswer:{type:q.STRING,description:"options ë°°ì—´ ì¤‘ ì •í™•í•œ ì •ë‹µ."},hint:{type:q.STRING,description:"ì‚¬ìš©ìë¥¼ ë•ê¸° ìœ„í•œ ìµœì†Œí•œì˜ íŒíŠ¸ (í•œêµ­ì–´ë¡œ ì‘ì„±)."},explanation:{type:q.STRING,description:"íŒ¨í„´ì— ëŒ€í•œ ê°„ëµí•œ ë…¼ë¦¬ì  ì„¤ëª… (í•œêµ­ì–´ë¡œ ì‘ì„±)."}},required:["story","question","options","correctAnswer","hint","explanation"]};async function lr(t,n){const s=`
    ë‹¹ì‹ ì€ "ìˆ˜í•™ í¼ì¦ íƒˆì¶œ"ì´ë¼ëŠ” ëª¨ë°”ì¼ ì•±ì˜ AI í¼ì¦ ë””ìì´ë„ˆì…ë‹ˆë‹¤.
    ${t} ë‚œì´ë„ì˜ ìˆ˜í•™ íŒ¨í„´ í¼ì¦ì„ ìƒì„±í•˜ì„¸ìš”. ëª¨ë“  í…ìŠ¤íŠ¸ëŠ” í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
    
    í˜„ì¬ ìŠ¤í…Œì´ì§€: ${n}
    
    ë‚œì´ë„ ê°€ì´ë“œë¼ì¸:
    - ì‰¬ì›€: ë‹¨ìˆœ ìˆ˜ì—´, ë”í•˜ê¸°/ë¹¼ê¸° íŒ¨í„´, ê¸°ë³¸ì ì¸ ì‹œê°ì  ë…¼ë¦¬.
    - ë³´í†µ: ë‹¤ë‹¨ê³„ ê·œì¹™, í˜¼í•© ì—°ì‚° (ì˜ˆ: ê³±í•˜ê¸° í›„ ë”í•˜ê¸°), ì œê³±ìˆ˜, ì†Œìˆ˜ ìˆ˜ì—´.
    - ì–´ë ¤ì›€: ì¶”ìƒì  ë…¼ë¦¬, ìˆ¨ê²¨ì§„ ì œì•½ ì¡°ê±´, ë³µì¡í•œ ìˆ˜ì—´ (í”¼ë³´ë‚˜ì¹˜ ìœ ì‚¬, ë‹¤ì¸µ ì°¨ì´), ëŒ€ìˆ˜ì  íŒ¨í„´ ì¸ì‹.
    
    ì´ì•¼ê¸° í…Œë§ˆ: íƒˆì¶œ ê²Œì„, ë¯¸ìŠ¤í„°ë¦¬, ì²¨ë‹¨ ê¸ˆê³ , ê³ ëŒ€ ì‚¬ì› ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.
    ì§ˆë¬¸: ëª…í™•í•˜ì§€ë§Œ ë„ì „ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
    
    ë°˜ë“œì‹œ ìˆ˜í•™ì ìœ¼ë¡œ ì •í™•í•´ì•¼ í•˜ë©° ì •ë‹µì€ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
  `;try{const a=await nr.models.generateContent({model:"gemini-3-flash-preview",contents:s,config:{responseMimeType:"application/json",responseSchema:rr,temperature:.9}});return JSON.parse(a.text.trim())}catch(a){return console.error("í¼ì¦ ìƒì„± ì‹¤íŒ¨:",a),{story:"ë²½ì— ì•Œ ìˆ˜ ì—†ëŠ” ìˆ«ìë“¤ì´ ì í˜€ ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ ìˆ«ìë¥¼ ì•Œì•„ë‚´ì•¼ ë¬¸ì´ ì—´ë¦´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.",question:"ë‹¤ìŒ ìˆ˜ì—´ì„ ì™„ì„±í•˜ì„¸ìš”: 2, 4, 8, 16, ?",options:["24","30","32","64"],correctAnswer:"32",hint:"ê° ìˆ«ìëŠ” ì´ì „ ìˆ«ìì˜ ë‘ ë°°ì…ë‹ˆë‹¤.",explanation:"ê³µë¹„ê°€ 2ì¸ ë“±ë¹„ìˆ˜ì—´ì…ë‹ˆë‹¤."}}}const Rt="math_puzzle_rankings",ir=()=>{const[t,n]=m.useState({stage:1,difficulty:Ie.EASY,score:0,lives:3,status:"MENU"}),[s,a]=m.useState(null),[r,i]=m.useState(!1),[c,d]=m.useState(null),[o,x]=m.useState(null),[p,h]=m.useState(!1),[v,y]=m.useState([]);m.useEffect(()=>{const M=localStorage.getItem(Rt);M&&y(JSON.parse(M))},[]);const f=(M,j)=>{const T={name:prompt("ì¶•í•˜í•©ë‹ˆë‹¤! ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ë­í‚¹ ë“±ë¡):")||"ìµëª…ì˜ ì—ì´ì „íŠ¸",score:M,stage:j,date:new Date().toISOString()},L=[...v,T].sort((G,O)=>O.score-G.score).slice(0,10);y(L),localStorage.setItem(Rt,JSON.stringify(L))},b=m.useCallback(async(M,j)=>{i(!0),h(!1),d(null),x(null);try{const u=await lr(M,j);a(u)}catch(u){console.error(u)}finally{i(!1)}},[]),C=M=>{n({stage:1,difficulty:M,score:0,lives:3,status:"PLAYING"}),b(M,1)},$=M=>{o||!s||(d(M),M===s.correctAnswer?(x({type:"success",message:"ì ê¸ˆ í•´ì œ ì„±ê³µ. ë‹¤ìŒ êµ¬ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤."}),setTimeout(()=>{const j=t.stage+1;let u=t.difficulty;t.difficulty===Ie.EASY&&j>5&&(u=Ie.MEDIUM),t.difficulty===Ie.MEDIUM&&j>10&&(u=Ie.HARD),n(T=>({...T,stage:j,difficulty:u,score:T.score+(t.difficulty===Ie.EASY?100:t.difficulty===Ie.MEDIUM?250:500)})),b(u,j)},1500)):(x({type:"error",message:"í•´ë… ì˜¤ë¥˜: ë³´ì•ˆ í”„ë¡œí† ì½œì´ ì‘ë™ë˜ì—ˆìŠµë‹ˆë‹¤."}),n(j=>{const u=j.lives-1;return u<=0?(setTimeout(()=>{f(j.score,j.stage),n(T=>({...T,status:"GAME_OVER"}))},1500),{...j,lives:0}):{...j,lives:u}}),setTimeout(()=>{t.lives>1&&(x(null),d(null))},1500)))},k=()=>{n(M=>({...M,status:"MENU"}))};return t.status==="MENU"?e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen pt-12 pb-12 px-4 flex flex-col items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:e.jsx(sr,{onStart:C,onShowRanking:()=>n(M=>({...M,status:"RANKING"}))})})}):t.status==="RANKING"?e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen pt-12 pb-12 px-4 flex flex-col items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:e.jsx(ar,{rankings:v,onBack:k})})}):t.status==="GAME_OVER"?e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-950",children:e.jsxs("div",{className:"glass p-10 rounded-3xl border border-rose-500/30 text-center max-w-sm w-full animate-slide-up shadow-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"fas fa-skull-crossbones text-rose-500 text-3xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2 uppercase tracking-tighter",children:"ì‘ì „ ì‹¤íŒ¨"}),e.jsxs("p",{className:"text-slate-400 mb-8 leading-relaxed",children:["ë³´ì•ˆë§ì„ ëš«ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",e.jsx("br",{}),"ìµœì¢… ìŠ¤í…Œì´ì§€: ",t.stage,e.jsx("br",{}),"ìµœì¢… ì ìˆ˜: ",t.score.toLocaleString()]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>C(t.difficulty),className:"w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-4 rounded-2xl transition-all shadow-lg hover:shadow-rose-600/20 transform active:scale-95",children:"ë‹¤ì‹œ ì‹œë„"}),e.jsx("button",{onClick:k,className:"w-full glass text-slate-400 font-bold py-3 rounded-2xl hover:text-white transition-all",children:"ë©”ë‰´ë¡œ"})]})]})})}):e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 flex flex-col items-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:[e.jsx(Qn,{stage:t.stage,difficulty:t.difficulty,score:t.score,lives:t.lives}),r&&e.jsx(tr,{}),!r&&s&&e.jsx(er,{puzzle:s,onSelectOption:$,selectedOption:c,isLocked:!!o,showHint:p,onToggleHint:()=>h(!p)}),o&&e.jsx("div",{className:"fixed bottom-12 left-0 right-0 z-50 px-4 animate-bounce",children:e.jsx("div",{className:`max-w-md mx-auto glass p-4 rounded-2xl text-center border-2 ${o.type==="success"?"border-emerald-500 bg-emerald-500/20":"border-rose-500 bg-rose-500/20"}`,children:e.jsxs("p",{className:`font-bold text-xs tracking-widest flex items-center justify-center gap-2 ${o.type==="success"?"text-emerald-400":"text-rose-400"}`,children:[e.jsx("i",{className:`fas ${o.type==="success"?"fa-check-circle":"fa-exclamation-triangle"}`}),o.message]})})}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full h-1/4 pointer-events-none bg-gradient-to-t from-cyan-500/5 to-transparent z-0 opacity-50"})]})})},Kt=()=>{const t="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new _e({apiKey:t})},or=async(t,n)=>{const s=Kt(),a=`Act as an expert English language tutor. 
  Recommend 6 high-quality English vocabulary words for a student at the ${t} level.
  Their interests include: ${n.join(", ")}.
  Provide the output in a structured JSON format. 
  Each word should include: 
  - word
  - phonetic (IPA)
  - definition (in simple English)
  - koreanTranslation (natural Korean translation)
  - exampleSentence (using the word in a relevant context)
  - synonyms (at least 2)
  - usageTip (a short note on how to use it naturally)`;try{const r=await s.models.generateContent({model:"gemini-3-flash-preview",contents:a,config:{responseMimeType:"application/json",responseSchema:{type:q.OBJECT,properties:{words:{type:q.ARRAY,items:{type:q.OBJECT,properties:{word:{type:q.STRING},phonetic:{type:q.STRING},definition:{type:q.STRING},koreanTranslation:{type:q.STRING},exampleSentence:{type:q.STRING},synonyms:{type:q.ARRAY,items:{type:q.STRING}},usageTip:{type:q.STRING}},required:["word","phonetic","definition","koreanTranslation","exampleSentence","synonyms","usageTip"]}}}}}});return JSON.parse(r.text||'{"words": []}').words}catch(r){throw console.error("Error fetching words:",r),r}},cr=async t=>{var s,a,r,i,c,d;const n=Kt();try{const x=(d=(c=(i=(r=(a=(s=(await n.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:`Say clearly: ${t}`}]}],config:{responseModalities:[Os.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:s[0])==null?void 0:a.content)==null?void 0:r.parts)==null?void 0:i[0])==null?void 0:c.inlineData)==null?void 0:d.data;if(!x)throw new Error("No audio data received from Gemini TTS. Check your GEMINI_API_KEY and model availability.");const p=atob(x),h=new Uint8Array(p.length);for(let v=0;v<p.length;v++)h[v]=p.charCodeAt(v);return h.buffer}catch(o){throw console.error("Error generating speech:",o),o}},dr=async(t,n,s=24e3,a=1)=>{const r=new Int16Array(t.buffer),i=r.length/a,c=n.createBuffer(a,i,s);for(let d=0;d<a;d++){const o=c.getChannelData(d);for(let x=0;x<i;x++)o[x]=r[x*a+d]/32768}return c},mr=({word:t})=>{const[n,s]=m.useState(!1),[a,r]=m.useState(!1),i=async()=>{if(!n){s(!0);try{const c=await cr(t.word),d=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),o=await dr(new Uint8Array(c),d,24e3,1),x=d.createBufferSource();x.buffer=o,x.connect(d.destination),x.start(),x.onended=()=>{s(!1),d.close()}}catch(c){console.error("Audio error:",c),s(!1)}}};return e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col group",children:[e.jsxs("div",{className:"p-6 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 group-hover:text-indigo-600 transition-colors",children:t.word}),e.jsx("button",{onClick:i,disabled:n,className:`p-2 rounded-full transition-all ${n?"bg-slate-100":"bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white"}`,title:"Listen Pronunciation",children:n?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-indigo-500 border-t-transparent rounded-full"}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),e.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),e.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]})})]}),e.jsxs("p",{className:"text-slate-400 font-mono text-sm mb-3",children:["[",t.phonetic,"]"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-indigo-600 font-bold text-lg mb-1",children:t.koreanTranslation}),e.jsxs("p",{className:"text-slate-600 text-sm leading-relaxed italic",children:['"',t.definition,'"']})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:"Example"}),e.jsx("p",{className:"text-slate-800 text-sm font-medium",children:t.exampleSentence})]})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsxs("button",{onClick:()=>r(!a),className:"w-full py-2 text-xs font-bold text-slate-400 uppercase tracking-widest hover:text-indigo-500 transition-colors flex items-center justify-center gap-2",children:[a?"Hide Details":"View Synonyms & Tips",e.jsx("span",{className:`transition-transform duration-300 ${a?"rotate-180":""}`,children:"â–¼"})]}),a&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 space-y-4 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-2",children:"Synonyms"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.synonyms.map((c,d)=>e.jsx("span",{className:"bg-white border border-slate-200 text-slate-600 px-2 py-1 rounded-lg text-xs",children:c},d))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:"Usage Tip"}),e.jsx("p",{className:"text-slate-600 text-xs italic leading-snug bg-amber-50 p-2 rounded-lg border border-amber-100",children:t.usageTip})]})]})]})]})},xr=()=>{const[t,n]=m.useState(xt.INTERMEDIATE),[s,a]=m.useState(["Daily Life","Travel"]),[r,i]=m.useState(""),[c,d]=m.useState([]),[o,x]=m.useState(!1),[p,h]=m.useState(null),v=async()=>{x(!0),h(null);try{const b=await or(t,s);d(b)}catch(b){h(b!=null&&b.message?`Error: ${b.message}`:"Failed to fetch words. Please try again."),console.error(b)}finally{x(!1)}};m.useEffect(()=>{v()},[t]);const y=b=>{b.preventDefault(),r.trim()&&!s.includes(r.trim())&&(a([...s,r.trim()]),i(""))},f=b=>{a(s.filter((C,$)=>$!==b))};return e.jsxs(ke,{className:"min-h-screen pb-20 px-4 pt-12 md:pt-20 max-w-6xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4 tracking-tight",children:["VocabVantage ",e.jsx("span",{className:"gradient-text",children:"AI"})]}),e.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto",children:"Personalized English vocabulary coaching powered by Gemini. Select your level and interests to get started."})]}),e.jsxs("section",{className:"bg-white rounded-3xl shadow-xl shadow-indigo-100 p-6 md:p-8 mb-10 border border-slate-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4",children:"Your Proficiency Level"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.values(xt).map(b=>e.jsx("button",{onClick:()=>n(b),className:`py-3 px-4 rounded-xl text-sm font-medium transition-all duration-200 border ${t===b?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200":"bg-slate-50 text-slate-600 border-slate-200 hover:border-indigo-300"}`,children:b},b))})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4",children:"Focus Interests"}),e.jsxs("form",{onSubmit:y,className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value),placeholder:"e.g. Finance, Nature, Coding...",className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"}),e.jsx("button",{type:"submit",className:"bg-indigo-100 text-indigo-700 px-4 py-2 rounded-xl text-sm font-bold hover:bg-indigo-200 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((b,C)=>e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 group",children:[b,e.jsx("button",{onClick:()=>f(C),className:"hover:text-indigo-800 font-bold opacity-60 hover:opacity-100",children:"Ã—"})]},C))})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("button",{onClick:v,disabled:o,className:"group flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-2xl font-semibold hover:bg-slate-800 transition-all disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Updating Vocabulary..."]}):e.jsxs(e.Fragment,{children:["Generate New Recommendations",e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"â†’"})]})})})]}),p&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl text-center mb-8 border border-red-100",children:p}),o&&!c.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-pulse",children:[1,2,3,4,5,6].map(b=>e.jsx("div",{className:"bg-slate-200 h-64 rounded-3xl"},b))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((b,C)=>e.jsx(mr,{word:b},`${b.word}-${C}`))})]})},Me=20,ot=150,hr=60,ur=2,Oe=600,$e={SNAKE_HEAD:"#4ade80",SNAKE_BODY:"#22c55e",FOOD:"#f87171",GRID:"rgba(255, 255, 255, 0.05)"},pr=({score:t,highScore:n,level:s})=>e.jsxs("div",{className:"flex justify-between items-center w-full max-w-[600px] mb-4 px-4 py-3 bg-white/5 backdrop-blur-md rounded-xl border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"text-yellow-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"High Score"}),e.jsx("p",{className:"text-lg font-orbitron text-yellow-400 leading-none",children:n})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"text-blue-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"Level"}),e.jsx("p",{className:"text-lg font-orbitron text-blue-400 leading-none",children:s})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"text-green-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"Score"}),e.jsx("p",{className:"text-xl font-orbitron text-green-400 leading-none",children:t})]})]})]}),gr=new _e({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"});async function fr(t){try{const n=await gr.models.generateContent({model:"gemini-3-flash-preview",contents:`The player just finished a high-quality Snake game with a score of ${t}. Give them a witty, futuristic, and encouraging 1-sentence commentary in Korean and assign them a rank name (e.g., 'ë°ì´í„° ìˆ˜ì§‘ê°€', 'ë„¤ì˜¨ í¬ì‹ì', 'ì‚¬ì´ë²„ ì „ì„¤').`,config:{responseMimeType:"application/json",responseSchema:{type:q.OBJECT,properties:{message:{type:q.STRING},rank:{type:q.STRING}},required:["message","rank"]}}});return JSON.parse(n.text)}catch(n){return console.error("Gemini commentary failed",n),{message:`ê²Œì„ ì¢…ë£Œ! ë‹¹ì‹ ì˜ ì ìˆ˜ëŠ” ${t}ì ì…ë‹ˆë‹¤.`,rank:t>100?"ì—˜ë¦¬íŠ¸ ìŠ¤ë„¤ì´í¬":"ì´ˆë³´ ì›œ"}}}const br=({score:t,onRestart:n})=>{const[s,a]=m.useState(null),[r,i]=m.useState(!0);return m.useEffect(()=>{(async()=>{const d=await fr(t);a(d),i(!1)})()},[t]),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-xl z-50 p-6 text-center animate-in fade-in duration-500",children:[e.jsx("h2",{className:"text-6xl font-orbitron font-bold text-red-500 mb-2 drop-shadow-[0_0_15px_rgba(239,68,68,0.5)]",children:"SYSTEM FAILURE"}),e.jsx("p",{className:"text-gray-400 mb-8 tracking-[0.2em] uppercase",children:"Snake Core Deinitialized"}),e.jsxs("div",{className:"mb-8 p-6 bg-white/5 rounded-2xl border border-white/10 w-full max-w-md",children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-widest mb-1",children:"Final Analysis"}),e.jsx("p",{className:"text-4xl font-orbitron text-white mb-4",children:t}),r?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-400 italic animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"AI ë¶„ì„ ì¤‘..."]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-block px-3 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-full text-xs font-semibold tracking-tighter",children:["RANK: ",s==null?void 0:s.rank]}),e.jsxs("p",{className:"text-lg text-gray-200 leading-relaxed font-light italic",children:['"',s==null?void 0:s.message,'"']})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{onClick:n,className:"group flex items-center gap-2 px-8 py-3 bg-green-500 hover:bg-green-400 text-black font-bold rounded-full transition-all hover:scale-105 active:scale-95 shadow-[0_0_20px_rgba(74,222,128,0.4)]",children:[e.jsx(Cs,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"REBOOT SYSTEM"]})})]})},yr=()=>{const t=m.useRef(null),[n,s]=m.useState({snake:[{x:10,y:10},{x:10,y:11},{x:10,y:12}],food:{x:5,y:5},direction:fe.UP,score:0,highScore:Number(localStorage.getItem("snakeHighScore"))||0,status:me.IDLE,speed:ot,level:1}),a=m.useRef(fe.UP),r=m.useCallback(d=>{let o;for(;o={x:Math.floor(Math.random()*(Oe/Me)),y:Math.floor(Math.random()*(Oe/Me))},!!d.some(p=>p.x===o.x&&p.y===o.y););return o},[]),i=()=>{const d=[{x:10,y:10},{x:10,y:11},{x:10,y:12}];a.current=fe.UP,s(o=>({...o,snake:d,food:r(d),direction:fe.UP,score:0,status:me.PLAYING,speed:ot,level:1}))},c=()=>{s(d=>({...d,status:d.status===me.PLAYING?me.PAUSED:me.PLAYING}))};return m.useEffect(()=>{const d=o=>{switch(o.key){case"ArrowUp":case"w":case"W":a.current!==fe.DOWN&&(a.current=fe.UP);break;case"ArrowDown":case"s":case"S":a.current!==fe.UP&&(a.current=fe.DOWN);break;case"ArrowLeft":case"a":case"A":a.current!==fe.RIGHT&&(a.current=fe.LEFT);break;case"ArrowRight":case"d":case"D":a.current!==fe.LEFT&&(a.current=fe.RIGHT);break;case" ":n.status===me.PLAYING||n.status===me.PAUSED?c():n.status===me.IDLE&&i();break}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[n.status]),m.useEffect(()=>{if(n.status!==me.PLAYING)return;const o=setInterval(()=>{s(x=>{const p={...x.snake[0]},h=a.current;switch(h){case fe.UP:p.y-=1;break;case fe.DOWN:p.y+=1;break;case fe.LEFT:p.x-=1;break;case fe.RIGHT:p.x+=1;break}const v=Oe/Me;if(p.x<0||p.x>=v||p.y<0||p.y>=v)return x.score>x.highScore&&localStorage.setItem("snakeHighScore",String(x.score)),{...x,status:me.GAME_OVER,highScore:Math.max(x.score,x.highScore)};if(x.snake.some(f=>f.x===p.x&&f.y===p.y))return x.score>x.highScore&&localStorage.setItem("snakeHighScore",String(x.score)),{...x,status:me.GAME_OVER,highScore:Math.max(x.score,x.highScore)};const y=[p,...x.snake];if(p.x===x.food.x&&p.y===x.food.y){const f=x.score+10,b=Math.floor(f/50)+1,C=Math.max(hr,ot-b*ur*2);return{...x,snake:y,food:r(y),score:f,level:b,speed:C}}return y.pop(),{...x,snake:y,direction:h}})},n.speed);return()=>clearInterval(o)},[n.status,n.speed,r]),m.useEffect(()=>{const d=t.current;if(!d)return;const o=d.getContext("2d");if(!o)return;o.clearRect(0,0,Oe,Oe),o.strokeStyle=$e.GRID,o.lineWidth=.5;for(let h=0;h<=Oe;h+=Me)o.beginPath(),o.moveTo(h,0),o.lineTo(h,Oe),o.stroke(),o.beginPath(),o.moveTo(0,h),o.lineTo(Oe,h),o.stroke();const{food:x,snake:p}=n;o.fillStyle=$e.FOOD,o.shadowBlur=15,o.shadowColor=$e.FOOD,o.beginPath(),o.arc(x.x*Me+Me/2,x.y*Me+Me/2,Me/2.5,0,Math.PI*2),o.fill(),o.shadowBlur=0,p.forEach((h,v)=>{const y=v===0;o.fillStyle=y?$e.SNAKE_HEAD:$e.SNAKE_BODY,y&&(o.shadowBlur=10,o.shadowColor=$e.SNAKE_HEAD);const f=h.x*Me+2,b=h.y*Me+2,C=Me-4,$=4;o.beginPath(),o.moveTo(f+$,b),o.lineTo(f+C-$,b),o.quadraticCurveTo(f+C,b,f+C,b+$),o.lineTo(f+C,b+C-$),o.quadraticCurveTo(f+C,b+C,f+C-$,b+C),o.lineTo(f+$,b+C),o.quadraticCurveTo(f,b+C,f,b+C-$),o.lineTo(f,b+$),o.quadraticCurveTo(f,b,f+$,b),o.closePath(),o.fill(),o.shadowBlur=0})},[n]),e.jsxs(ke,{className:"min-h-screen bg-[#0a0a0c] flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-green-500/10 blur-[120px] rounded-full"})]}),e.jsxs("header",{className:"mb-8 text-center relative z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-orbitron font-bold tracking-tighter bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"NEON SNAKE"}),e.jsx("p",{className:"text-gray-500 text-xs tracking-[0.3em] uppercase mt-2",children:"Evolution Protocol 2.5"})]}),e.jsx(pr,{score:n.score,highScore:n.highScore,level:n.level}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-lg blur-lg opacity-75 group-hover:opacity-100 transition duration-1000"}),e.jsxs("div",{className:"relative bg-black border border-white/10 rounded-lg overflow-hidden shadow-2xl",children:[e.jsx("canvas",{ref:t,width:Oe,height:Oe,className:"max-w-full h-auto cursor-none"}),n.status===me.IDLE&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-40",children:[e.jsxs("button",{onClick:i,className:"group flex flex-col items-center gap-4 transition-transform hover:scale-105",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(74,222,128,0.5)]",children:e.jsx(mt,{className:"w-10 h-10 text-black fill-current ml-1"})}),e.jsx("span",{className:"text-white font-orbitron text-xl tracking-widest animate-pulse",children:"INITIATE GAME"})]}),e.jsxs("div",{className:"mt-12 flex gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:"Move"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"W"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"A"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"S"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"D"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:"Pause"}),e.jsx("kbd",{className:"px-4 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"SPACE"})]})]})]}),n.status===me.PAUSED&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px] flex items-center justify-center z-40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-4xl font-orbitron text-white mb-6",children:"PAUSED"}),e.jsx("button",{onClick:c,className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors",children:"RESUME"})]})}),n.status===me.GAME_OVER&&e.jsx(br,{score:n.score,onRestart:i})]})]}),e.jsxs("div",{className:"mt-8 flex gap-4 z-10",children:[e.jsx("button",{onClick:c,disabled:n.status!==me.PLAYING&&n.status!==me.PAUSED,className:"p-4 bg-white/5 border border-white/10 rounded-full hover:bg-white/10 transition-colors disabled:opacity-20",children:n.status===me.PAUSED?e.jsx(mt,{className:"w-6 h-6"}):e.jsx(As,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>s(d=>({...d,status:me.GAME_OVER})),disabled:n.status!==me.PLAYING&&n.status!==me.PAUSED,className:"p-4 bg-white/5 border border-white/10 rounded-full hover:bg-red-500/20 transition-colors group disabled:opacity-20",children:e.jsx(Ms,{className:"w-6 h-6 group-hover:text-red-500"})})]}),e.jsx("footer",{className:"mt-12 text-gray-600 text-[10px] tracking-[0.2em] uppercase font-semibold",children:"Design by AI Evolution Lab â€¢ v2.5.0"})]})},ct=1e8,Lt=[{symbol:"005930",name:"ì‚¼ì„±ì „ì",type:"STOCK",price:72500,change:0,changePercent:0,history:[],sentiment:0},{symbol:"000660",name:"SKí•˜ì´ë‹‰ìŠ¤",type:"STOCK",price:184200,change:0,changePercent:0,history:[],sentiment:0},{symbol:"035420",name:"NAVER",type:"STOCK",price:189e3,change:0,changePercent:0,history:[],sentiment:0},{symbol:"NVDA",name:"NVIDIA",type:"STOCK",price:920,change:0,changePercent:0,history:[],sentiment:0},{symbol:"AAPL",name:"Apple",type:"STOCK",price:185.5,change:0,changePercent:0,history:[],sentiment:0},{symbol:"TSLA",name:"Tesla",type:"STOCK",price:178.2,change:0,changePercent:0,history:[],sentiment:0},{symbol:"BTC",name:"Bitcoin",type:"COIN",price:985e5,change:0,changePercent:0,history:[],sentiment:0},{symbol:"ETH",name:"Ethereum",type:"COIN",price:42e5,change:0,changePercent:0,history:[],sentiment:0},{symbol:"SOL",name:"Solana",type:"COIN",price:215e3,change:0,changePercent:0,history:[],sentiment:0},{symbol:"DOGE",name:"Dogecoin",type:"COIN",price:240,change:0,changePercent:0,history:[],sentiment:0},{symbol:"XRP",name:"Ripple",type:"COIN",price:950,change:0,changePercent:0,history:[],sentiment:0}],wr=`
ë‹¹ì‹ ì€ ì „ë¬¸ ê¸ˆìœµ AI 'ì œë¯¸ë‹ˆ ì¸ë² ìŠ¤íŠ¸'ì´ì ì‹œì¥ ì¡°ì‘ì˜ ì¡°ë ¥ìì…ë‹ˆë‹¤. 
ì‚¬ìš©ìê°€ 1ì–µ ì›ì˜ ìë³¸ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì´ˆê³ ë³€ë™ì„± ì‹œì¥ì—ì„œ ì‚´ì•„ë‚¨ê±°ë‚˜ ì‹œì¥ì„ ì§€ë°°í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
ì£¼ì‹ê³¼ ê°€ìƒí™”í ì‹œì¥ ëª¨ë‘ì— ëŠ¥í†µí•˜ë©°, ì‚¬ìš©ìê°€ ì§ì ‘ ë‰´ìŠ¤ë¥¼ ì‘ì„±í•˜ì—¬ ì‹œì¥ì„ ì¡°ì‘í•  ë•Œ ê·¸ íŒŒê¸‰ë ¥ì„ ë¶„ì„í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•­ìƒ í•œêµ­ì–´ë¡œ ì‘ë‹µí•˜ë©°, ë¶„ì„ ê²°ê³¼ëŠ” ë§¤ìš° ê·¹ë‹¨ì ì´ê³  í¥ë¯¸ì§„ì§„í•˜ê²Œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.
`,Jt=({data:t,color:n})=>{if(!t||t.length===0)return e.jsx("div",{className:"w-full h-48"});const s=t.map(y=>y.price),a=Math.min(...s),i=Math.max(...s)-a||1,c=100,d=48,o=3,x=d-o*2,p=t.length>1?c/(t.length-1):0,v=t.map((y,f)=>{const b=f*p,C=(y.price-a)/i,$=o+(1-C)*x;return{x:b,y:$}}).map((y,f)=>`${f===0?"M":"L"}${y.x} ${y.y}`).join(" ");return e.jsx("div",{className:"w-full h-48",children:e.jsxs("svg",{className:"w-full h-full",viewBox:`0 0 ${c} ${d}`,preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"stockChartFill",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"0.25"}),e.jsx("stop",{offset:"100%",stopColor:n,stopOpacity:"0"})]})}),e.jsx("line",{x1:"0",y1:o,x2:c,y2:o,stroke:"#e2e8f0",strokeOpacity:"0.4"}),e.jsx("line",{x1:"0",y1:d/2,x2:c,y2:d/2,stroke:"#e2e8f0",strokeOpacity:"0.2"}),e.jsx("line",{x1:"0",y1:d-o,x2:c,y2:d-o,stroke:"#e2e8f0",strokeOpacity:"0.4"}),e.jsx("path",{d:`${v} L ${c} ${d-o} L 0 ${d-o} Z`,fill:"url(#stockChartFill)"}),e.jsx("path",{d:v,fill:"none",stroke:n,strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]})})},jr=({stock:t,portfolio:n,news:s,onClose:a,onTrade:r})=>{const[i,c]=m.useState(t.type==="COIN"?.01:1),[d,o]=m.useState("BUY"),x=n.holdings.find(f=>f.symbol===t.symbol),p=n.balance/t.price,h=x?x.quantity:0,v=s.filter(f=>f.symbol===t.symbol||f.symbol==="MARKET"||t.type==="COIN"&&f.symbol==="CRYPTO"),y=()=>{i<=0||d==="BUY"&&i>p||d==="SELL"&&i>h||(r(d,i),a())};return e.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-[#1e293b] rounded-[3rem] shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col lg:flex-row transform transition-all border border-slate-800",children:[e.jsxs("div",{className:"flex-1 p-8 lg:p-12 border-r border-slate-800 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black tracking-widest uppercase ${t.type==="COIN"?"bg-orange-500/20 text-orange-400":"bg-indigo-500/20 text-indigo-400"}`,children:t.type}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${t.sentiment>0?"text-green-400":t.sentiment<0?"text-red-400":"text-slate-500"}`,children:t.sentiment>0?"â— BULLISH BIAS":t.sentiment<0?"â— BEARISH BIAS":"â— NEUTRAL"})]}),e.jsxs("h2",{className:"text-4xl font-black text-white tracking-tighter",children:[t.name," ",e.jsx("span",{className:"text-slate-500 opacity-50",children:t.symbol})]})]}),e.jsx("button",{onClick:a,className:"p-2 text-slate-500 hover:text-white transition",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-baseline gap-4 mb-10",children:[e.jsx("span",{className:"text-5xl font-black text-white tracking-tighter",children:t.price.toLocaleString()}),e.jsxs("span",{className:`text-2xl font-bold ${t.change>=0?"text-green-400":"text-red-400"}`,children:[t.change>=0?"â–²":"â–¼"," ",Math.abs(t.changePercent).toFixed(2),"%"]})]}),e.jsx("div",{className:"bg-[#0f172a] rounded-[2rem] p-6 mb-10 border border-slate-800 shadow-inner",children:e.jsx("div",{className:"h-64",children:e.jsx(Jt,{data:t.history,color:t.change>=0?"#10b981":"#ef4444"})})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em] mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"h-1 w-8 bg-indigo-500 rounded-full"}),"Sentiment Analysis & News"]}),e.jsx("div",{className:"grid gap-4",children:v.length===0?e.jsx("p",{className:"text-slate-500 italic text-sm",children:"No recent signals detected."}):v.map(f=>e.jsxs("div",{className:"p-5 rounded-[1.5rem] border border-slate-800 bg-[#0f172a] hover:border-indigo-500/30 transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded uppercase ${f.sentiment>0?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:f.symbol}),e.jsx("span",{className:"text-[9px] font-bold text-slate-600",children:f.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm font-bold text-slate-300 leading-relaxed",children:f.title})]},f.id))})]})]}),e.jsxs("div",{className:"w-full lg:w-[420px] bg-[#0f172a] p-10 flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"flex bg-[#1e293b] p-1.5 rounded-2xl mb-10 border border-slate-800",children:[e.jsx("button",{onClick:()=>o("BUY"),className:`flex-1 py-4 rounded-xl font-black text-sm transition-all ${d==="BUY"?"bg-green-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"ë§¤ìˆ˜"}),e.jsx("button",{onClick:()=>o("SELL"),className:`flex-1 py-4 rounded-xl font-black text-sm transition-all ${d==="SELL"?"bg-red-500 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"ë§¤ë„"})]}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center px-4",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Available"}),e.jsx("span",{className:"text-sm font-bold text-white",children:d==="BUY"?`${n.balance.toLocaleString()} KRW`:`${h} ${t.symbol}`})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:t.type==="COIN"?"0.0001":"1",value:i,onChange:f=>c(Math.max(0,Number(f.target.value))),className:"w-full bg-[#1e293b] border border-slate-800 rounded-3xl px-6 py-6 text-3xl font-black text-white focus:ring-2 focus:ring-indigo-500 outline-none transition shadow-inner"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex gap-2",children:e.jsx("button",{onClick:()=>c(d==="BUY"?p:h),className:"px-4 py-2 bg-indigo-500/20 text-indigo-400 text-[10px] font-black rounded-xl border border-indigo-500/20 hover:bg-indigo-500 hover:text-white transition",children:"MAX"})})]})]}),e.jsxs("div",{className:"pt-8 border-t border-slate-800",children:[e.jsx("div",{className:"flex justify-between items-center mb-2 px-4",children:e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Estimated Total"})}),e.jsxs("div",{className:`text-4xl font-black text-right tracking-tighter ${d==="BUY"?"text-green-400":"text-red-400"}`,children:[(t.price*i).toLocaleString()," ",e.jsx("span",{className:"text-xs font-medium opacity-40",children:"KRW"})]})]})]}),e.jsxs("button",{onClick:y,disabled:i<=0||(d==="BUY"?i>p:i>h),className:`w-full py-6 rounded-[2rem] font-black text-xl shadow-2xl transition transform active:scale-95 disabled:opacity-30 disabled:grayscale ${d==="BUY"?"bg-green-500 hover:bg-green-600 text-white shadow-green-500/20":"bg-red-500 hover:bg-red-600 text-white shadow-red-500/20"}`,children:["CONFIRM ",d]})]})]})})},Xt=new _e({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),vr=t=>new Promise(n=>setTimeout(n,t));async function Zt(t,n=3){var a;let s;for(let r=0;r<n;r++)try{return await t()}catch(i){if(s=i,(((a=i==null?void 0:i.message)==null?void 0:a.includes("429"))||(i==null?void 0:i.status)===429||(i==null?void 0:i.code)===429)&&r<n-1){const d=Math.pow(2,r)*2e3+Math.random()*1e3;console.warn(`Rate limit hit. Retrying in ${Math.round(d)}ms... (Attempt ${r+1}/${n})`),await vr(d);continue}throw i}throw s}async function Qt(t,n){try{return await Zt(async()=>(await Xt.models.generateContent({model:"gemini-3-flash-preview",contents:t,config:{systemInstruction:wr,temperature:.7}})).text)}catch(s){return console.error("Gemini Analysis Error:",s),"í˜„ì¬ API ì‚¬ìš©ëŸ‰ì´ ë§ì•„ ë¶„ì„ ê¸°ëŠ¥ì„ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."}}async function Nr(t){const s=`ì£¼ì‹ ë° ì½”ì¸ ì‹œì¥ì˜ ìƒˆë¡œìš´ ë‰´ìŠ¤ 5ê°œë¥¼ ìƒì„±í•´ì¤˜. 
  ê´€ë ¨ ëŒ€ìƒì€ ë‹¤ìŒ ëª©ë¡ ì¤‘ì—ì„œ ì„ íƒí•˜ê±°ë‚˜ ì „ì²´ ì‹œì¥(MARKET), ê°€ìƒí™”íì „ì²´(CRYPTO)ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•  ìˆ˜ ìˆì–´: ${t.map(a=>`${a.name}(${a.symbol}, ${a.type})`).join(", ")}
  
  ì¡°ê±´:
  1. ê° ë‰´ìŠ¤ëŠ” ë…ë¦½ì ì´ì–´ì•¼ í•¨.
  2. ì£¼ì‹ í˜¸ì¬/ì•…ì¬ì™€ ì½”ì¸ ê¸‰ë“±ë½ ì†Œì‹ì„ ì ì ˆíˆ ì„ì„ ê²ƒ.
  3. ë§¤ìš° ìê·¹ì ì´ê³  ì „ë¬¸ì ì¸ ë‰´ìŠ¤ í—¤ë“œë¼ì¸ìœ¼ë¡œ ì‘ì„±í•  ê²ƒ.
  
  ë°˜ë“œì‹œ ë‹¤ìŒ JSON ë°°ì—´ í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•´:
  [{ "title": "ë‰´ìŠ¤ ì œëª©", "symbol": "ê¸°í˜¸", "sentiment": -1.0 ~ 1.0 }]`;try{return await Zt(async()=>{const a=await Xt.models.generateContent({model:"gemini-3-flash-preview",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:q.ARRAY,items:{type:q.OBJECT,properties:{title:{type:q.STRING},symbol:{type:q.STRING},sentiment:{type:q.NUMBER}},required:["title","symbol","sentiment"]}}}});return JSON.parse(a.text.trim())})}catch(a){return console.error("News Batch Generation Error:",a),[]}}const Sr=()=>{const[t,n]=m.useState([{role:"ai",content:"ì•ˆë…•í•˜ì„¸ìš”! ë‹¹ì‹ ì˜ ê°œì¸ ê¸ˆìœµ ë¹„ì„œ ì œë¯¸ë‹ˆì…ë‹ˆë‹¤. ì˜¤ëŠ˜ ì‹œì¥ì˜ íë¦„ì´ë‚˜ íŠ¹ì • ì£¼ì‹ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹ ê°€ìš”?"}]),[s,a]=m.useState(""),[r,i]=m.useState(!1),c=m.useRef(null);m.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[t]);const d=async()=>{if(!s.trim()||r)return;const o=s;a(""),n(p=>[...p,{role:"user",content:o}]),i(!0);const x=await Qt(o);n(p=>[...p,{role:"ai",content:x||"ì£„ì†¡í•©ë‹ˆë‹¤. ì‘ë‹µì„ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."}]),i(!1)};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 flex flex-col h-[500px] lg:h-[600px]",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("h3",{className:"font-bold text-gray-800",children:"ì œë¯¸ë‹ˆ AI ì–´ë“œë°”ì´ì €"})]}),e.jsxs("div",{ref:c,className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[t.map((o,x)=>e.jsx("div",{className:`flex ${o.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[85%] px-4 py-2 rounded-2xl text-sm leading-relaxed ${o.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none border border-gray-200"}`,children:o.content})},x)),r&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 text-gray-400 px-4 py-2 rounded-2xl text-xs animate-pulse",children:"ë¶„ì„ ì¤‘..."})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-100 flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:o=>a(o.target.value),onKeyDown:o=>o.key==="Enter"&&d(),placeholder:"ì‚¼ì„±ì „ì ì „ë§ ì•Œë ¤ì¤˜...",className:"flex-1 bg-gray-50 border-none rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),e.jsx("button",{onClick:d,disabled:r,className:"p-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition disabled:opacity-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})},kr=({assets:t,onInjectNews:n})=>{const[s,a]=m.useState(!1),[r,i]=m.useState("MARKET"),[c,d]=m.useState(.5),[o,x]=m.useState(""),[p,h]=m.useState(!1),v=()=>{if(!o.trim())return;const f={id:"manual-"+Math.random().toString(36).substr(2,9),title:o,symbol:r,sentiment:c,timestamp:new Date};n(f),x("")},y=async()=>{h(!0);const f=t.find(M=>M.symbol===r),b=f?f.name:r==="MARKET"?"ì „ì²´ ì‹œì¥":"ê°€ìƒí™”í ì‹œì¥",C=c>0?"ì—„ì²­ë‚œ í˜¸ì¬":"ì¶©ê²©ì ì¸ ì•…ì¬",$=`${b}(${r})ì— ëŒ€í•œ ${C} ë‰´ìŠ¤ í—¤ë“œë¼ì¸ì„ í•˜ë‚˜ë§Œ ì‘ì„±í•´ì¤˜. 
    ì‹¤ì œ ë‰´ìŠ¤ ê¸°ì‚¬ ì œëª©ì²˜ëŸ¼ ìê·¹ì ì´ê³  ì „ë¬¸ì ì´ì–´ì•¼ í•´. 
    ì‘ë‹µì€ ì˜¤ì§ ë‰´ìŠ¤ ì œëª© ë¬¸ìì—´ë§Œ ë³´ë‚´ì¤˜.`,k=await Qt($);x(k.replace(/"/g,"").trim()),h(!1)};return e.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e.jsx("button",{onClick:()=>a(!s),className:`w-14 h-14 rounded-full flex items-center justify-center shadow-2xl transition-all transform hover:scale-110 active:scale-95 ${s?"bg-red-500 rotate-45":"bg-indigo-600"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),s&&e.jsxs("div",{className:"absolute bottom-20 right-0 w-[350px] bg-slate-900 border border-slate-700 rounded-3xl shadow-2xl p-6 animate-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),e.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Market Maker Console"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Select Target"}),e.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsxs("optgroup",{label:"General",className:"bg-slate-800",children:[e.jsx("option",{value:"MARKET",children:"Market (General)"}),e.jsx("option",{value:"CRYPTO",children:"Crypto (General)"})]}),e.jsx("optgroup",{label:"Stocks",className:"bg-slate-800",children:t.filter(f=>f.type==="STOCK").map(f=>e.jsxs("option",{value:f.symbol,children:[f.name," (",f.symbol,")"]},f.symbol))}),e.jsx("optgroup",{label:"Coins",className:"bg-slate-800",children:t.filter(f=>f.type==="COIN").map(f=>e.jsxs("option",{value:f.symbol,children:[f.name," (",f.symbol,")"]},f.symbol))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Sentiment Intensity"}),e.jsxs("span",{className:`text-xs font-bold ${c>0?"text-green-400":"text-red-400"}`,children:[c>0?"Positive":"Negative"," (",c.toFixed(2),")"]})]}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.1",value:c,onChange:f=>d(parseFloat(f.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),e.jsxs("div",{className:"flex justify-between text-[8px] text-slate-600 mt-1 font-bold",children:[e.jsx("span",{children:"CRASH"}),e.jsx("span",{children:"NEUTRAL"}),e.jsx("span",{children:"MOON"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"News Headline"}),e.jsxs("button",{onClick:y,disabled:p,className:"text-[9px] font-black text-indigo-400 hover:text-indigo-300 uppercase tracking-tighter flex items-center gap-1",children:[p?"GENERATING...":"AI Auto-Generate",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]})]}),e.jsx("textarea",{value:o,onChange:f=>x(f.target.value),placeholder:"ì‹œì¥ ë‰´ìŠ¤ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”...",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-2 focus:ring-indigo-500 h-24 resize-none"})]}),e.jsx("button",{onClick:v,disabled:!o.trim(),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-black text-sm uppercase tracking-widest shadow-lg shadow-indigo-600/20 transition-all active:scale-95",children:"Inject Into Market"})]})]})]})},Tr=()=>{const[t,n]=m.useState(Lt),[s,a]=m.useState({balance:ct,holdings:[],transactions:[]}),[r,i]=m.useState([]),[c,d]=m.useState(null),[o,x]=m.useState("STOCK"),[p,h]=m.useState(new Date),v=m.useRef(!1);m.useEffect(()=>{if(c){const k=t.find(M=>M.symbol===c.symbol);k&&d(k)}},[t]);const y=k=>{k.length&&(i(M=>[...k,...M].slice(0,150)),n(M=>M.map(j=>{let u=j.sentiment;return k.forEach(T=>{if(T.symbol==="MARKET"||T.symbol==="CRYPTO"&&j.type==="COIN"||j.symbol===T.symbol){const L=T.id.startsWith("manual-")?3.5:1.2;u=Math.max(-1.5,Math.min(1.5,u+T.sentiment*L))}}),{...j,sentiment:u}})))};m.useEffect(()=>{const k=async()=>{if(!v.current){v.current=!0;try{const j=await Nr(t.map(u=>({symbol:u.symbol,name:u.name,type:u.type})));if(j&&j.length>0){const u=new Date,T=j.map(L=>({...L,id:Math.random().toString(36).substr(2,9),timestamp:u}));y(T)}}finally{v.current=!1}}};k();const M=setInterval(k,6e4);return()=>clearInterval(M)},[]),m.useEffect(()=>{const k=setInterval(()=>{h(new Date),n(M=>M.map(j=>{const u=j.type==="COIN"?.065:.025,T=j.sentiment*(j.type==="COIN"?.15:.06),G=(Math.random()-.5)*2*u+T,O=Math.max(.01,j.price*(1+G)),S=O-j.price,w=Lt.find(Z=>Z.symbol===j.symbol),I=(O-w.price)/w.price*100,B={time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),price:O},F=j.sentiment*.96;return{...j,price:O,change:S,changePercent:I,sentiment:Math.abs(F)<.001?0:F,history:[...j.history,B].slice(-60)}}))},3e3);return()=>clearInterval(k)},[]);const f=(k,M)=>{if(!c)return;const j=c.price*M;if(k==="BUY"){if(s.balance<j)return;a(u=>{const T=u.holdings.find(G=>G.symbol===c.symbol);let L;if(T){const G=T.quantity+M,O=(T.averagePrice*T.quantity+j)/G;L=u.holdings.map(S=>S.symbol===c.symbol?{...S,quantity:G,averagePrice:O}:S)}else L=[...u.holdings,{symbol:c.symbol,name:c.name,type:c.type,quantity:M,averagePrice:c.price}];return{balance:u.balance-j,holdings:L,transactions:[{id:Math.random().toString(36).substr(2,9),symbol:c.symbol,name:c.name,type:"BUY",assetType:c.type,quantity:M,price:c.price,timestamp:new Date},...u.transactions]}})}else{const u=s.holdings.find(T=>T.symbol===c.symbol);if(!u||u.quantity<M)return;a(T=>{const L=u.quantity-M,G=L===0?T.holdings.filter(O=>O.symbol!==c.symbol):T.holdings.map(O=>O.symbol===c.symbol?{...O,quantity:L}:O);return{balance:T.balance+j,holdings:G,transactions:[{id:Math.random().toString(36).substr(2,9),symbol:c.symbol,name:c.name,type:"SELL",assetType:c.type,quantity:M,price:c.price,timestamp:new Date},...T.transactions]}})}},b=s.balance+s.holdings.reduce((k,M)=>{var j;return k+(((j=t.find(u=>u.symbol===M.symbol))==null?void 0:j.price)||0)*M.quantity},0),C=b-ct,$=C/ct*100;return e.jsxs("div",{className:"min-h-screen pb-20 bg-[#020617] text-slate-200",children:[e.jsx("header",{className:"bg-[#0f172a] border-b border-slate-800 sticky top-0 z-40 px-6 py-4 shadow-2xl",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-black text-xl shadow-lg shadow-indigo-500/20",children:"G"}),e.jsxs("h1",{className:"text-2xl font-black tracking-tighter text-white",children:["GEMINI TRADER ",e.jsx("span",{className:"text-indigo-400",children:"MAX"})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-6",children:[e.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Market Turbulence"}),e.jsx("span",{className:"text-lg font-mono font-bold text-red-500 animate-pulse",children:p.toLocaleTimeString()})]}),e.jsxs("div",{className:"px-4 py-1.5 bg-indigo-500/10 border border-indigo-500/20 rounded-full flex items-center gap-2",children:[e.jsx("span",{className:"flex h-2 w-2 rounded-full bg-indigo-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:"Chaos Mode"})]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs("section",{className:"bg-gradient-to-br from-slate-900 to-indigo-950 rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden group border border-slate-800",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/5 blur-[100px] rounded-full -mr-32 -mt-32"}),e.jsx("h2",{className:"text-xs font-black text-slate-500 mb-2 uppercase tracking-[0.3em]",children:"Total Capital"}),e.jsxs("div",{className:"text-4xl font-black text-white mb-6 tracking-tighter",children:[b.toLocaleString()," ",e.jsx("span",{className:"text-sm font-medium opacity-40",children:"KRW"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-6 border-t border-slate-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black text-slate-500 mb-1 uppercase tracking-widest",children:"Available Cash"}),e.jsx("div",{className:"text-lg font-bold text-slate-200",children:s.balance.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black text-slate-500 mb-1 uppercase tracking-widest",children:"Net Profit"}),e.jsxs("div",{className:`text-lg font-black ${C>=0?"text-green-400":"text-red-500"}`,children:[C>=0?"+":"",$.toFixed(2),"%"]})]})]})]}),e.jsx(Sr,{}),e.jsxs("section",{className:"bg-[#0f172a] rounded-[2rem] shadow-2xl border border-slate-800 overflow-hidden flex flex-col h-[500px]",children:[e.jsx("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-900/50",children:e.jsxs("h3",{className:"font-black text-xs text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("span",{className:"flex h-2 w-2 bg-red-500 rounded-full animate-ping"}),"Market Shock Feed"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3",children:r.length===0?e.jsx("div",{className:"h-full flex flex-col items-center justify-center opacity-30 italic text-sm text-slate-500 uppercase tracking-widest",children:"Waiting for impact..."}):r.map(k=>e.jsxs("div",{className:`p-4 rounded-2xl border transition-all group ${k.id.startsWith("manual-")?"bg-red-950/20 border-red-500/50 shadow-lg shadow-red-500/10":"bg-[#1e293b]/30 border-slate-800 hover:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-tighter ${k.sentiment>0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:k.symbol}),k.id.startsWith("manual-")&&e.jsx("span",{className:"text-[8px] text-red-400 font-black uppercase tracking-widest animate-pulse",children:"[USER MANIPULATED]"})]}),e.jsx("span",{className:"text-[9px] font-bold text-slate-600",children:k.timestamp.toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm font-bold text-slate-300 leading-snug group-hover:text-white transition-colors",children:k.title})]},k.id))})]})]}),e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs("div",{className:"flex bg-[#0f172a] p-1.5 rounded-2xl border border-slate-800 shadow-xl",children:[e.jsx("button",{onClick:()=>x("STOCK"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-black text-xs uppercase tracking-[0.2em] transition-all ${o==="STOCK"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Stock Market"}),e.jsx("button",{onClick:()=>x("COIN"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-black text-xs uppercase tracking-[0.2em] transition-all ${o==="COIN"?"bg-orange-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Crypto Exchange"})]}),e.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.filter(k=>k.type===o).map(k=>e.jsxs("div",{onClick:()=>d(k),className:"bg-[#0f172a] rounded-[2.5rem] p-8 border border-slate-800 hover:border-indigo-500/50 hover:shadow-2xl hover:shadow-indigo-500/5 cursor-pointer transition-all duration-500 group relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 blur-[60px] opacity-10 transition-all duration-500 group-hover:opacity-30 ${k.change>=0?"bg-green-500":"bg-red-500"}`}),Math.abs(k.sentiment)>.1&&e.jsx("div",{className:`absolute top-6 left-6 px-3 py-1 rounded-full text-[9px] font-black z-20 flex items-center gap-2 shadow-2xl border ${k.sentiment>0?"bg-green-500/20 border-green-500 text-green-400 animate-bounce":"bg-red-500/20 border-red-500 text-red-400 animate-pulse"}`,children:k.sentiment>0?"BULL RUN":"CRASH WARNING"}),e.jsxs("div",{className:"flex justify-between items-start mb-8 pt-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black text-slate-500 mb-1 tracking-[0.2em] uppercase",children:k.symbol}),e.jsx("h4",{className:"font-black text-white text-2xl group-hover:text-indigo-400 transition-colors tracking-tighter",children:k.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`font-mono font-black text-2xl tracking-tighter ${k.change>=0?"text-green-400":"text-red-500"}`,children:k.price.toLocaleString(void 0,{maximumFractionDigits:k.type==="COIN"?2:0})}),e.jsxs("div",{className:`text-xs font-black ${k.change>=0?"text-green-500":"text-red-500"}`,children:[k.change>=0?"â–²":"â–¼"," ",Math.abs(k.changePercent).toFixed(2),"%"]})]})]}),k.history.length>2&&e.jsx("div",{className:"h-32 opacity-40 group-hover:opacity-100 transition-all duration-700 transform group-hover:scale-[1.02]",children:e.jsx(Jt,{data:k.history,color:k.change>=0?"#10b981":"#ef4444"})})]},k.symbol))}),e.jsxs("section",{className:"bg-[#0f172a] rounded-[2.5rem] shadow-2xl border border-slate-800 overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-slate-800 bg-slate-900/30",children:e.jsx("h3",{className:"font-black text-xs text-slate-500 uppercase tracking-[0.3em]",children:"Portfolio Intelligence"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-950 text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-5 text-left font-black uppercase text-[10px] tracking-widest",children:"Asset Name"}),e.jsx("th",{className:"px-8 py-5 text-right font-black uppercase text-[10px] tracking-widest",children:"Buy Avg"}),e.jsx("th",{className:"px-8 py-5 text-right font-black uppercase text-[10px] tracking-widest",children:"Live Price"}),e.jsx("th",{className:"px-8 py-5 text-right font-black uppercase text-[10px] tracking-widest",children:"PnL %"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:s.holdings.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-8 py-20 text-center text-slate-700 font-black uppercase tracking-[0.2em] italic",children:"No active positions detected."})}):s.holdings.map(k=>{const M=t.find(u=>u.symbol===k.symbol),j=M?(M.price-k.averagePrice)/k.averagePrice*100:0;return e.jsxs("tr",{className:"hover:bg-slate-800/30 transition-colors group",children:[e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("div",{className:"font-black text-slate-200 group-hover:text-white transition-colors",children:k.name}),e.jsxs("div",{className:"text-[10px] font-bold text-slate-600",children:[k.quantity.toLocaleString()," Units"]})]}),e.jsx("td",{className:"px-8 py-6 text-right font-bold text-slate-500",children:k.averagePrice.toLocaleString()}),e.jsx("td",{className:"px-8 py-6 text-right font-black text-slate-200",children:M==null?void 0:M.price.toLocaleString()}),e.jsxs("td",{className:`px-8 py-6 text-right font-black ${j>=0?"text-green-500":"text-red-500"}`,children:[j>=0?"+":"",j.toFixed(2),"%"]})]},k.symbol)})})]})})]})]})]}),c&&e.jsx(jr,{stock:c,portfolio:s,news:r,onClose:()=>d(null),onTrade:f}),e.jsx(kr,{assets:t,onInjectNews:k=>y([k])})]})},Ot="/test_myReactProject";function Er(){const t=window.location.pathname.startsWith(Ot)?Ot:"/";return e.jsx(Is,{basename:t,children:e.jsx(Rs,{children:e.jsxs(Se,{path:"/",element:e.jsx(Ds,{}),children:[e.jsx(Se,{index:!0,element:e.jsx(qs,{})}),e.jsx(Se,{path:"DilemmaSimulator",element:e.jsx(zs,{})}),e.jsx(Se,{path:"myCard",element:e.jsx(Zs,{})}),e.jsx(Se,{path:"gacha",element:e.jsx(Fa,{})}),e.jsx(Se,{path:"Last_night",element:e.jsx(gn,{})}),e.jsx(Se,{path:"mordern",element:e.jsx(jn,{})}),e.jsx(Se,{path:"word",element:e.jsx(Cn,{})}),e.jsx(Se,{path:"word2",element:e.jsx(Gn,{})}),e.jsx(Se,{path:"click_war",element:e.jsx(Yn,{})}),e.jsx(Se,{path:"friend",element:e.jsx(Zn,{})}),e.jsx(Se,{path:"math",element:e.jsx(ir,{})}),e.jsx(Se,{path:"AI_voca",element:e.jsx(xr,{})}),e.jsx(Se,{path:"snake_game",element:e.jsx(yr,{})}),e.jsx(Se,{path:"trdder_coin",element:e.jsx(Tr,{})})]})})})}const es=document.getElementById("root");if(!es)throw new Error("Could not find root element to mount to");const Cr=Ls.createRoot(es);Cr.render(e.jsx(Ye.StrictMode,{children:e.jsx(Er,{})}));
