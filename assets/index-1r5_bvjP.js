import{u as Qt,a as es,r as m,j as e,O as ts,L as ss,b as as,X as rs,K as ns,S as Lt,B as ls,c as is,V as We,F as _t,A as os,U as Gt,d as cs,e as Ot,Z as ct,R as Dt,f as ds,C as ms,T as pt,g as xs,H as us,h as Pt,i as hs,k as ps,l as fs,m as gs,P as dt,n as bs,o as ys,p as ws,q as Ye,s as js,t as vs,v as Ns,w as Ss,x as ks,y as Es,z as Se,D as Ts}from"./vendor_react-CT_-0Q0D.js";import{G as De,T as W,M as Cs}from"./vendor_ai-CSRnzdR-.js";import"./vendor-DnC4bF5A.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const As=({activeCategory:t,onCategoryChange:r})=>{const s=Qt(),a=es(),[n,i]=m.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);m.useEffect(()=>{const u=window.document.documentElement;n?(u.classList.add("dark"),localStorage.setItem("theme","dark")):(u.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]);const c=()=>{i(!n)},d=typeof window<"u"&&window.history.length>1,o=typeof window<"u"&&a.pathname==="/"&&!d,x=["All","Game","MBTI"],p={All:"ì „ì²´",Game:"ê²Œì„",MBTI:"MBTI"};return e.jsx("header",{className:"sticky top-0 z-10",style:{background:"linear-gradient(90deg, #a8d8a8 0%, #a8d4e8 100%)"},children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"py-6 flex justify-between items-center",role:"banner",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}),e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-md",children:"Website Builder"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"í…Œë§ˆ ì „í™˜",children:n?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})]}),e.jsxs("nav",{"aria-label":"ì¹´í…Œê³ ë¦¬ ë„¤ë¹„ê²Œì´ì…˜",className:"flex items-center border-t border-white border-opacity-20",children:[e.jsx("button",{onClick:()=>s(o?"/":-1),"aria-label":o?"í™ˆìœ¼ë¡œ ì´ë™":"ë’¤ë¡œê°€ê¸°",title:o?"í™ˆìœ¼ë¡œ ì´ë™":"ë’¤ë¡œê°€ê¸°",className:"p-2 mx-2 rounded-xl text-white hover:bg-white hover:bg-opacity-20 transition-colors",children:o?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9.5L12 4l9 5.5V21a1 1 0 0 1-1 1h-6v-6H10v6H4a1 1 0 0 1-1-1V9.5z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex-1 flex",children:x.map(u=>e.jsx("button",{onClick:()=>r(u),"aria-current":t===u?"page":void 0,className:`px-4 py-3 text-sm font-medium transition-all duration-200 rounded-t-xl ${t===u?"bg-white bg-opacity-30 text-white border-b-4 border-white":"text-white text-opacity-80 hover:text-opacity-100"}`,children:p[u]},u))})]})]})})},Ms=()=>e.jsx("footer",{className:"mt-20 rounded-t-3xl",style:{background:"linear-gradient(90deg, #a8d4e8 0%, #a8d8a8 100%)"},children:e.jsxs("div",{className:"container mx-auto px-4 py-10 text-center text-white",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Â© ",new Date().getFullYear()," Website Builder. All rights reserved."]}),e.jsx("p",{className:"text-xs mt-3 text-white text-opacity-90",children:"With âœ¨ Ghibli Charm âœ¨"})]})}),Is=()=>{const[t,r]=m.useState("All"),[s,a]=m.useState(!1);return m.useEffect(()=>{const n=()=>{const i=window.location.pathname.includes("/gacha")||window.location.pathname.includes("/click_war")||window.location.pathname.includes("/snake_game")||window.location.pathname.includes("/last_night")||window.location.pathname.includes("/mordern")||window.location.pathname.includes("/word")||window.location.pathname.includes("/word2")||window.location.pathname.includes("/friend")||window.location.pathname.includes("/math")||window.location.pathname.includes("/AI_voca")||window.location.pathname.includes("/myCard")||window.location.pathname.includes("/DilemmaSimulator");a(i),i?document.body.style.overflow="hidden":document.body.style.overflow=""};return window.addEventListener("popstate",n),n(),()=>{window.removeEventListener("popstate",n),document.body.style.overflow=""}},[]),e.jsxs("div",{className:"flex flex-col min-h-screen transition-colors duration-300",style:{position:s?"fixed":"relative",width:"100%",height:s?"100vh":"auto",overflow:s?"hidden":"auto"},children:[!s&&e.jsx(As,{activeCategory:t,onCategoryChange:r}),e.jsx("main",{className:"flex-grow",style:{width:"100%"},children:e.jsx(ts,{context:{activeCategory:t,setActiveCategory:r}})}),!s&&e.jsx(Ms,{})]})},Rs=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),Ls=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),_s=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),ft=({website:t,onDelete:r})=>{const s=n=>{n.preventDefault(),n.stopPropagation(),r(t.id)},a=n=>{n.preventDefault(),n.stopPropagation()};return e.jsxs("div",{className:"rounded-3xl shadow-lg overflow-hidden transform hover:-translate-y-3 transition-all duration-300 ease-in-out flex flex-col",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(245,230,211,0.9) 100%)",border:"2px solid #d4c5b9"},children:[e.jsx("img",{src:t.thumbnailUrl,alt:t.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#4a4a4a"},children:t.name}),e.jsx("p",{className:"flex-grow mb-6",style:{color:"#6b6b6b"},children:t.description}),e.jsxs("div",{className:"mt-auto flex justify-end gap-3",children:[e.jsx("button",{className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Visit site",style:{color:"#a8d8a8"},children:e.jsx(_s,{})}),e.jsx("button",{onClick:a,className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Edit site",style:{color:"#a8d4e8"},children:e.jsx(Rs,{})}),e.jsx("button",{onClick:s,className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Delete site",style:{color:"#e8b4a8"},children:e.jsx(Ls,{})})]})]})]})},Gs=({website:t,onDelete:r})=>t.path?e.jsx(ss,{to:t.path,className:"block hover:scale-[1.01] transition-transform duration-150",children:e.jsx(ft,{website:t,onDelete:r})}):e.jsx(ft,{website:t,onDelete:r}),Os=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ds=({isOpen:t,onClose:r,onCreate:s})=>{const[a,n]=m.useState(""),[i,c]=m.useState(""),[d,o]=m.useState("Game");m.useEffect(()=>{t&&(n(""),c(""),o("Game"))},[t]);const x=p=>{p.preventDefault(),a.trim()&&i.trim()&&s({name:a,description:i,category:d})};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex justify-center items-center p-4",onClick:r,children:[e.jsxs("div",{className:"rounded-3xl shadow-2xl p-8 w-full max-w-md transform transition-all duration-300 ease-in-out",onClick:p=>p.stopPropagation(),style:{background:"linear-gradient(135deg, #fefaf0 0%, #f5e6d3 100%)",border:"3px solid #d4c5b9",animation:"fade-in-scale 0.3s forwards"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#4a4a4a"},children:"âœ¨ Create New Website"}),e.jsx("button",{onClick:r,className:"p-2 rounded-full transition-colors","aria-label":"Close modal",style:{color:"#a8d4e8"},children:e.jsx(Os,{})})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"website-name",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Website Name"}),e.jsx("input",{type:"text",id:"website-name",value:a,onChange:p=>n(p.target.value),className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none focus:ring-4",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a",focusRingColor:"rgba(168, 216, 168, 0.3)"},placeholder:"e.g., My Awesome Project",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"website-description",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Description"}),e.jsx("textarea",{id:"website-description",value:i,onChange:p=>c(p.target.value),rows:3,className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none focus:ring-4",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a"},placeholder:"A brief description of what your website is about.",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"website-category",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Category"}),e.jsxs("select",{id:"website-category",value:d,onChange:p=>o(p.target.value),className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a"},children:[e.jsx("option",{value:"Game",children:"ê²Œì„"}),e.jsx("option",{value:"MBTI",children:"MBTI"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-2xl font-medium transition-all hover:shadow-md",style:{background:"#f5d5b8",color:"#4a4a4a",border:"2px solid #d4c5b9"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white font-bold rounded-2xl transition-all hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},disabled:!a.trim()||!i.trim(),children:"Create Site"})]})]})]}),e.jsx("style",{children:`
        @keyframes fade-in-scale {
          from {
            transform: scale(0.95);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]}):null},gt=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),Ps=()=>{const{activeCategory:t,setActiveCategory:r}=as(),[s,a]=m.useState([{id:1,name:"DilemmaSimulator",description:"A professional portfolio showcasing my projects and skills in software development.",thumbnailUrl:"https://picsum.photos/seed/portfolio/600/400",category:"MBTI",path:"/DilemmaSimulator"},{id:2,name:"card",description:"A fordddddscuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/myCard"},{id:3,name:"gacha",description:"A forum for gamerjjjjjjs to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/gacha"},{id:4,name:"last night",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/last_night"},{id:5,name:"mordern",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/mordern"},{id:6,name:"word",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/word"},{id:7,name:"word2",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/word2"},{id:8,name:"click war",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/click_war"},{id:9,name:"friend",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/friend"},{id:10,name:"math",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/math"},{id:11,name:"AI_voca",description:"A forum for gaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/AI_voca"},{id:12,name:"snake_game",description:"play snake game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/snake_game"},,{id:13,name:"trdder_coin",description:"play dlab game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"mbti",path:"/trdder_coin"},{id:13,name:"Dlab",description:"play dlab game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"mbti",path:"/Dlab"}]),[n,i]=m.useState(!1),c=m.useCallback(x=>{a(p=>[...p,{...x,id:Date.now(),thumbnailUrl:`https://picsum.photos/seed/${Date.now()}/600/400`,path:`/${x.name.toLowerCase().replace(/\s+/g,"-")}`}]),i(!1)},[]),d=m.useCallback(x=>{a(p=>p.filter(u=>u.id!==x))},[]),o=m.useMemo(()=>t==="All"?s:s.filter(x=>x.category===t),[s,t]);return e.jsxs("div",{className:"container mx-auto p-4 md:p-8 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold",style:{color:"#4a4a4a",textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"âœ¨ My Sites âœ¨"}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 font-bold py-3 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-200 text-white",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:[e.jsx(gt,{}),"New Site"]})]}),o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(x=>e.jsx(Gs,{website:x,onDelete:d},x.id))}):e.jsx("div",{className:"text-center py-16 px-6 rounded-3xl shadow-lg",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(245,230,211,0.9) 100%)",border:"2px solid #d4c5b9"},children:s.length===0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4",style:{color:"#4a4a4a"},children:"No Websites Yet! ğŸŒ¸"}),e.jsx("p",{className:"mb-6",style:{color:"#6b6b6b"},children:'It looks a bit empty here. Click the "New Site" button to start your first project.'}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-2 text-white font-bold py-3 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-200",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:[e.jsx(gt,{}),"Create Your First Site"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",style:{color:"#4a4a4a"},children:"No Websites in this Category"}),e.jsxs("p",{style:{color:"#6b6b6b"},children:['There are no sites matching the category "',t,'".']})]})}),e.jsx(Ds,{isOpen:n,onClose:()=>i(!1),onCreate:c})]})},Us={start:{title:"ì—„ë§ˆ í¸? ì•„ë¹  í¸?",description:"ë”œë ˆë§ˆë¡œ ì¸í•œ ê²°ê³¼ë¥¼ ì°¸í˜¹í•˜ê²Œ ë³´ì—¬ì¤„ ì˜ˆì •",isStart:!0,choices:[{text:"ì—„ë§ˆ í¸",nextScene:"momRouteStart",color:"red"},{text:"ì•„ë¹  í¸",nextScene:"dadRouteStart",color:"blue"}]},momRouteStart:{character:"ì•„ë¹ ",dialogue:"ê·¸ë˜? ë„ˆ ì—„ë§ˆ í¸ì´ì•¼? ê·¸ëŸ¼ ì•ìœ¼ë¡œ ê²Œì„ì€ ì—†ë‹¤.",choices:[{text:"ë§ë¡œ ì„¤ë“í•˜ê¸°",nextScene:"momRoute_persuade"},{text:"ëª°ë˜ ê²Œì„í•˜ê¸°",nextScene:"momRoute_sneak"}]},momRoute_persuade:{character:"ì•„ë¹ ",dialogue:"ì‹œë„ëŸ½ë‹¤. ë‹¹ë¶„ê°„ ë„ˆëŠ” ê³µë¶€ ë¨¼ì €ë‹¤.",description:"ì•„ë¹ ê°€ ê²Œì„ê¸° ì „ì›ì„ ë½‘ê³  ìˆ¨ê²¨ë²„ë¦°ë‹¤.",choices:[{text:"ê²Œì„ê¸° ì°¾ê¸°",nextScene:"momRoute_findGame"},{text:"ìˆœìˆœíˆ ë”°ë¥´ê¸°",nextScene:"momRoute_obey"}]},momRoute_sneak:{character:"ë‚˜",dialogue:"ì•„ë¹ ê°€ ì ë“¤ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ëª°ë˜ ê²Œì„ì„ í–ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒ ë‚  ì•„ì¹¨, ì•„ë¹ ì—ê²Œ ë“¤í‚¤ê³  ë§ì•˜ë‹¤.",description:"ì•„ë¹ ê°€ í™”ë¥¼ ë‚´ë©° íœ´ëŒ€í°ì„ ì••ìˆ˜í–ˆë‹¤.",choices:[{text:"ë¯¸ì•ˆí•˜ë‹¤ê³  ë§í•˜ê¸°",nextScene:"momRoute_apologize"},{text:"ë°˜í•­í•˜ê¸°",nextScene:"momRoute_rebel"}]},momRoute_findGame:{character:"ë‚˜",dialogue:"ì•„ë¹ ê°€ ê²Œì„ê¸°ë¥¼ ì–´ë””ì— ìˆ¨ê²¼ì„ê¹Œ?",description:"ë°©, ê±°ì‹¤, ì°¨ ì•ˆì„ ë’¤ì ¸ë³´ì•˜ì§€ë§Œ ì°¾ì„ ìˆ˜ ì—†ì—ˆë‹¤. ê²°êµ­ ì•„ë¹ ì—ê²Œ ê²Œì„ê¸°ë¥¼ ì°¾ìœ¼ë ¤ í•œ ê²ƒì„ ë“¤í‚¤ê³  íœ´ëŒ€í°ë„ ì••ìˆ˜ë‹¹í–ˆë‹¤.",choices:[{text:"ë¯¸ì•ˆí•˜ë‹¤ê³  ë§í•˜ê¸°",nextScene:"momRoute_apologize"},{text:"ë°˜í•­í•˜ê¸°",nextScene:"momRoute_rebel"}]},momRoute_obey:{isEnding:!0,endingTitle:"í˜„ëª…í•œ íƒ€í˜‘ ì—”ë”©",dialogue:"ë‚˜ëŠ” ì•„ë¹ ì˜ ë§ì„ ë”°ë¥´ê¸°ë¡œ í–ˆë‹¤. ê²Œì„ ì—†ëŠ” ì‚¶ì€ ì§€ë£¨í–ˆì§€ë§Œ, ë” í° ê°ˆë“±ì€ í”¼í•  ìˆ˜ ìˆì—ˆë‹¤.",description:"ì‹œê°„ì´ í˜ëŸ¬ ì•„ë¹ ì˜ í™”ê°€ ëˆ„ê·¸ëŸ¬ì¡Œê³ , ìš°ë¦¬ëŠ” ê²Œì„ ì‹œê°„ì„ ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ íƒ€í˜‘í–ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},momRoute_apologize:{isEnding:!0,endingTitle:"ê²Œì„ ìƒì‹¤ ì—”ë”©",dialogue:"ì˜ëª»í–ˆì–´ìš”... ë‹¤ì‹œëŠ” ì•ˆ ê·¸ëŸ´ê²Œìš”.",description:"ë‚˜ì˜ ì‚¬ê³¼ì— ì•„ë¹ ì˜ ë§ˆìŒë„ ì¡°ê¸ˆì€ ëˆ„ê·¸ëŸ¬ì¡Œë‹¤. íœ´ëŒ€í°ì€ ëŒë ¤ë°›ì•˜ì§€ë§Œ, ê²Œì„ê¸°ëŠ” ì˜ì˜ ëŒì•„ì˜¤ì§€ ì•Šì•˜ë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},momRoute_rebel:{isEnding:!0,endingTitle:"ì™„ì „í•œ í†µì œ ì—”ë”©",dialogue:"ì•„ë¹ ê°€ ë­”ë°ìš”! ì´ê±´ ë‚´ ê±°ë€ ë§ì´ì—ìš”!",description:"ë‚˜ì˜ ë°˜í•­ì— ì•„ë¹ ëŠ” ë”ìš± í™”ë¥¼ ëƒˆê³ , ì§‘ì•ˆì˜ ë¶„ìœ„ê¸°ëŠ” ìµœì•…ìœ¼ë¡œ ì¹˜ë‹¬ì•˜ë‹¤. ë‚˜ëŠ” ë°©ì— ê°‡í˜€ ì™¸ë¶€ì™€ì˜ ëª¨ë“  ì†Œí†µì´ ì°¨ë‹¨ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},dadRouteStart:{character:"ì—„ë§ˆ",dialogue:"ë„¤ê°€â€¦ ì•„ë¹  í¸ì„ ë“ ë‹¤ê³ ? ê·¸ë˜. ê·¸ëŸ¼ ê³µë¶€ë§Œ í•´.",choices:[{text:"ì‚¬ê³¼í•˜ê¸°",nextScene:"dadRoute_apologize"},{text:"ê·¸ëƒ¥ ë°©ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°",nextScene:"dadRoute_goRoom"}]},dadRoute_apologize:{character:"ë‚˜",dialogue:"ì—„ë§ˆ, ë¯¸ì•ˆí•´ìš”. ê·¸ëŸ° ëœ»ì´ ì•„ë‹ˆì—ˆëŠ”ë°...",description:"ì—„ë§ˆëŠ” ë‚´ ì‚¬ê³¼ë¥¼ ë°›ì•„ì£¼ì—ˆì§€ë§Œ, ì„œìš´í•œ ê°ì •ì€ ì‰½ê²Œ ê°€ì‹œì§€ ì•ŠëŠ” ë“¯ ë³´ì˜€ë‹¤. ì—„ë§ˆëŠ” í•œìˆ¨ì„ ì‰¬ë©° ë‚´ ì„±ì í‘œë¥¼ êº¼ë‚´ ë“¤ì—ˆë‹¤.",choices:[{text:"ëŒ€í™”ë¥¼ ì´ì–´ë‚˜ê°€ê¸°",nextScene:"dadRoute_talk"},{text:"ìë¦¬ë¥¼ í”¼í•˜ê¸°",nextScene:"dadRoute_goRoom"}]},dadRoute_goRoom:{character:"ì—„ë§ˆ",dialogue:"ì–´ë”œ ë„ë§ê°€? ì•‰ì•„ë´. ìˆ˜í•™ í•™ì› í•˜ë‚˜ ë” ë“±ë¡í•˜ì.",description:"ì—„ë§ˆê°€ ë‚´ ë°© ë¬¸ì„ ì—´ê³  ë“¤ì–´ì™€ ì”ì†Œë¦¬ë¥¼ ì‹œì‘í•œë‹¤.",choices:[{text:"ê±°ì ˆí•˜ê¸°",nextScene:"dadRoute_refuse"},{text:"ì–µì§€ë¡œ ë™ì˜í•˜ê¸°",nextScene:"dadRoute_agree"}]},dadRoute_talk:{isEnding:!0,endingTitle:"ê´€ê³„ íšŒë³µ ì—”ë”©",dialogue:"ì—„ë§ˆ, ì €ë„ ë…¸ë ¥í•˜ê³  ìˆì–´ìš”. ì¡°ê¸ˆë§Œ ë¯¿ê³  ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",description:"ë‚˜ì˜ ì§„ì‹¬ ì–´ë¦° ë§ì— ì—„ë§ˆëŠ” ì ì‹œ ìƒê°ì— ì ê²¼ë‹¤. ìš°ë¦¬ëŠ” ì˜¤ëœ ëŒ€í™” ëì— ì„œë¡œì˜ ì…ì¥ì„ ì´í•´í•˜ê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},dadRoute_refuse:{character:"ë‚˜",dialogue:"ì‹«ì–´ìš”. ì§€ê¸ˆë„ ì¶©ë¶„íˆ í˜ë“¤ì–´ìš”.",description:"ë‚˜ì˜ ê±°ì ˆì— ì—„ë§ˆëŠ” í¬ê²Œ ì‹¤ë§í•œ ëˆˆì¹˜ì˜€ë‹¤. ê·¸ë‚  ì´í›„, ì—„ë§ˆì˜ ì”ì†Œë¦¬ëŠ” ì „ë³´ë‹¤ í›¨ì”¬ ì‹¬í•´ì¡Œë‹¤.",choices:[{text:"ì•Œì•„ì„œ í• ê²Œë¼ê³  ë§í•˜ê¸°",nextScene:"dadRoute_byMyself"},{text:"í­ë°œí•´ì„œ ì†Œë¦¬ì¹˜ê¸°",nextScene:"dadRoute_explode"}]},dadRoute_agree:{character:"ë‚˜",dialogue:"ë„¤... ì•Œê² ì–´ìš”.",description:"í•™ì›ì´ í•˜ë‚˜ ë” ëŠ˜ì—ˆê³ , ì¹œêµ¬ë“¤ê³¼ ë§Œë‚  ì‹œê°„ì€ ì™„ì „íˆ ì‚¬ë¼ì¡Œë‹¤. ì—„ë§ˆì˜ ê¸°ëŒ€ì¹˜ëŠ” ì ì  ë” ë†’ì•„ì ¸ë§Œ ê°„ë‹¤.",choices:[{text:"ì•Œì•„ì„œ í• ê²Œë¼ê³  ë§í•˜ê¸°",nextScene:"dadRoute_byMyself"},{text:"í­ë°œí•´ì„œ ì†Œë¦¬ì¹˜ê¸°",nextScene:"dadRoute_explode"}]},dadRoute_byMyself:{isEnding:!0,endingTitle:"ê³µë¶€ ì§€ì˜¥ ì—”ë”©",dialogue:"ì—„ë§ˆ, ì œë°œìš”. ì œê°€ ì•Œì•„ì„œ í• ê²Œìš”!",description:"ì—„ë§ˆëŠ” ë‚´ ë§ì„ ë¯¿ì§€ ì•Šì•˜ë‹¤. ê²°êµ­ ë‚˜ëŠ” ì—„ë§ˆê°€ ì§œì¤€ ë¹¡ë¹¡í•œ ìŠ¤ì¼€ì¤„ ì†ì—ì„œ ìˆ¨ ë§‰íˆëŠ” í•˜ë£¨í•˜ë£¨ë¥¼ ë³´ë‚´ê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]},dadRoute_explode:{isEnding:!0,endingTitle:"ê´€ê³„ íŒŒíƒ„ ì—”ë”©",dialogue:"ì´ì œ ê·¸ë§Œ ì¢€ í•˜ì„¸ìš”! ìˆ¨ ë§‰í˜€ ì£½ì„ ê²ƒ ê°™ë‹¨ ë§ì´ì—ìš”!",description:"ë‚˜ì˜ í­ë°œì— ì—„ë§ˆëŠ” ì¶©ê²©ì„ ë°›ì€ ë“¯ ë³´ì˜€ë‹¤. ì§‘ì•ˆì€ ì–¼ìŒì¥ì²˜ëŸ¼ ì°¨ê°€ì›Œì¡Œê³ , ì—„ë§ˆì™€ ë‚˜ëŠ” ì„œë¡œ ë§ì„ ì„ì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œì‘í•˜ê¸°",nextScene:"start"}]}},Bs=({scene:t,onChoice:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex flex-col items-center space-y-6 md:space-y-8 w-full max-w-2xl",children:[e.jsx("div",{className:"relative w-full aspect-[16/10] bg-black/30 rounded-xl border border-gray-700 overflow-hidden shadow-2xl",children:e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 250",preserveAspectRatio:"xMidYMid slice",children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"redGlow",cx:"15%",cy:"50%",r:"50%",fx:"15%",fy:"50%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(220, 38, 38, 0.5)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(220, 38, 38, 0)",stopOpacity:0}})]}),e.jsxs("radialGradient",{id:"blueGlow",cx:"85%",cy:"50%",r:"50%",fx:"85%",fy:"50%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(59, 130, 246, 0.5)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(59, 130, 246, 0)",stopOpacity:0}})]})]}),e.jsx("rect",{width:"400",height:"250",fill:"url(#redGlow)"}),e.jsx("rect",{width:"400",height:"250",fill:"url(#blueGlow)"}),e.jsx("g",{transform:"translate(60 160) scale(0.6)",children:e.jsx("path",{d:"M52.3,92.5c-2.4-5.3-4.5-10.7-6-16.3c-3.4-12.7-5.9-25.7-6.2-39.1c-0.2-8.3,0.5-16.6,1.9-24.7 c1.6-9.1,4.1-17.9,8-26.1c5.2-11,12.3-20.7,21.6-28.3c8.9-7.2,19.3-12.3,30.7-14.9c-8.9,13.1-13.4,28.2-12.9,43.4 c0.5,15.7,5.9,30.8,15.4,43.2C89.7,94.2,75.4,98.5,62.3,105.9C58.1,100.3,54.8,96.1,52.3,92.5z",fill:"black"})}),e.jsx("g",{transform:"translate(250 160) scale(0.6) scale(-1, 1) translate(-140, 0)",children:e.jsx("path",{d:"M52.3,92.5c-2.4-5.3-4.5-10.7-6-16.3c-3.4-12.7-5.9-25.7-6.2-39.1c-0.2-8.3,0.5-16.6,1.9-24.7 c1.6-9.1,4.1-17.9,8-26.1c5.2-11,12.3-20.7,21.6-28.3c8.9-7.2,19.3-12.3,30.7-14.9c-8.9,13.1-13.4,28.2-12.9,43.4 c0.5,15.7,5.9,30.8,15.4,43.2C89.7,94.2,75.4,98.5,62.3,105.9C58.1,100.3,54.8,96.1,52.3,92.5z",fill:"black"})}),e.jsx("g",{transform:"translate(198, 180) scale(0.4)",children:e.jsx("path",{d:"M49.5,82.7c-1.3-3-2.5-5.9-3.4-9c-1.9-7-3.3-14.2-3.4-21.6c-0.1-4.6,0.3-9.2,1-13.6c0.9-5,2.3-9.9,4.4-14.4 c2.9-6,6.8-11.4,11.9-15.6c4.9-3.9,10.7-6.8,16.9-8.2c-4.9,7.2-7.4,15.5-7.1,23.9c0.3,8.7,3.2,17,8.5,23.8 c-8.3,0.9-16.2,3.3-23.4,7.4C56,70,52.3,76,49.5,82.7z",fill:"black"})})]})}),e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white drop-shadow-lg",children:t.title}),e.jsx("p",{className:"text-red-500 font-bold mt-2 text-lg md:text-xl tracking-tight",children:t.description})]})]}),e.jsx("footer",{className:"w-full max-w-2xl pt-4 md:pt-8",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-around items-center gap-6",children:t.choices.map((s,a)=>e.jsx("button",{onClick:()=>r(s.nextScene),className:`w-full md:w-auto text-2xl md:text-3xl font-bold text-white rounded-lg px-12 py-4 md:px-16 md:py-5 transition-all duration-300 focus:outline-none 
              ${s.color==="red"?"bg-red-900/70 border-2 border-red-600 hover:bg-red-800/90 hover:shadow-[0_0_25px_rgba(239,68,68,0.7)] focus:ring-4 focus:ring-red-500/50":"bg-blue-900/70 border-2 border-blue-600 hover:bg-blue-800/90 hover:shadow-[0_0_25px_rgba(59,130,246,0.7)] focus:ring-4 focus:ring-blue-500/50"}`,children:s.text},a))})})]}),Fs=({scene:t,onChoice:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex flex-col items-center space-y-8 w-full max-w-2xl bg-black/30 rounded-xl border border-gray-700 p-8 shadow-2xl",children:[t.isEnding&&e.jsx("h2",{className:"text-4xl font-black text-yellow-400 drop-shadow-lg",children:t.endingTitle}),t.character&&e.jsxs("p",{className:"text-2xl font-bold text-gray-300",children:[t.character,":"]}),e.jsxs("p",{className:"text-3xl text-center leading-relaxed",children:['"',t.dialogue,'"']}),t.description&&e.jsx("p",{className:"text-lg text-gray-400 text-center italic mt-4",children:t.description})]}),e.jsx("footer",{className:"w-full max-w-2xl pt-8",children:e.jsx("div",{className:"flex flex-col justify-around items-center gap-4",children:t.choices.map((s,a)=>e.jsx("button",{onClick:()=>r(s.nextScene),className:"w-full md:w-3/4 text-xl font-bold text-white bg-gray-800/70 border-2 border-gray-600 rounded-lg px-12 py-4 transition-all duration-300 hover:bg-gray-700/90 hover:border-gray-400 focus:outline-none focus:ring-4 focus:ring-gray-500/50",children:s.text},a))})})]}),Hs=()=>{const[t,r]=m.useState("start"),[s,a]=m.useState(!1),n=Us[t],i=c=>{a(!0),setTimeout(()=>{r(c),a(!1)},300)};return e.jsxs("div",{className:"bg-gradient-to-b from-black to-gray-900 min-h-screen text-white flex flex-col items-center justify-center p-4 space-y-6 md:space-y-8 font-['Noto_Sans_KR']",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-wider",children:"DILEMMA SIMULATOR"}),e.jsx("p",{className:"text-gray-400 mt-2 text-md md:text-lg",children:"ë‹¹ì‹ ì˜ ì„ íƒì´ ëˆ„êµ°ê°€ì˜ ë§ˆì§€ë§‰ì´ ëœë‹¤."})]}),e.jsx("div",{className:`w-full flex flex-col items-center space-y-6 md:space-y-8 transition-opacity duration-300 ${s?"opacity-0":"opacity-100"}`,children:n.isStart?e.jsx(Bs,{scene:n,onChoice:i}):e.jsx(Fs,{scene:n,onChoice:i})},t)]})},$s=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),qs=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3l-2 4zm8 0h3l2-4V7h-6v6h3l-2 4z"})}),Vs=({name:t,likes:r,motto:s,imageUrl:a})=>e.jsx("div",{className:"max-w-sm w-full bg-white rounded-2xl shadow-xl transform transition-all hover:scale-105 duration-300 ease-in-out",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("img",{className:"w-32 h-32 rounded-full mx-auto shadow-lg border-4 border-slate-200",src:a,alt:`${t}ì˜ í”„ë¡œí•„ ì‚¬ì§„`}),e.jsx("h1",{className:"mt-6 text-3xl font-bold text-slate-800",children:t}),e.jsx("hr",{className:"my-6 border-t border-slate-200"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-700 flex items-center justify-center gap-2",children:[e.jsx($s,{className:"w-6 h-6 text-red-500"}),"ì¢‹ì•„í•˜ëŠ” ê²ƒ"]}),e.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:r.map((n,i)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:n},i))})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-700 flex items-center justify-center gap-2",children:[e.jsx(qs,{className:"w-6 h-6 text-green-500"}),"ì¢Œìš°ëª…"]}),e.jsxs("blockquote",{className:"mt-4 text-slate-600 italic text-md leading-relaxed",children:['"',s,'"']})]})]})}),ke=({children:t,className:r=""})=>{const[s,a]=m.useState(!1),n=m.useRef(null),i=async()=>{try{document.fullscreenElement?(await document.exitFullscreen(),a(!1),document.body.style.overflow=""):n.current&&(await n.current.requestFullscreen().catch(c=>{console.error(`ì „ì²´ í™”ë©´ ì˜¤ë¥˜: ${c.message}`)}),a(!0),document.body.style.overflow="hidden")}catch(c){console.error("Fullscreen ì „í™˜ ì˜¤ë¥˜:",c)}};return m.useEffect(()=>{const c=()=>{document.fullscreenElement||(a(!1),document.body.style.overflow="")};return document.addEventListener("fullscreenchange",c),()=>{document.removeEventListener("fullscreenchange",c)}},[]),m.useEffect(()=>()=>{document.fullscreenElement&&document.exitFullscreen(),document.body.style.overflow=""},[]),e.jsxs("div",{ref:n,className:`relative w-full h-full ${r}`,style:{position:s?"fixed":"relative",inset:s?0:"auto",zIndex:s?9999:"auto",backgroundColor:s?"#000":"transparent"},children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-50 p-3 rounded-2xl bg-white bg-opacity-20 hover:bg-opacity-30 text-white transition-all duration-200",title:s?"ì „ì²´ í™”ë©´ í•´ì œ":"ì „ì²´ í™”ë©´","aria-label":s?"ì „ì²´ í™”ë©´ í•´ì œ":"ì „ì²´ í™”ë©´",children:s?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4m-4 0l5 5m11-5v4m0 0h-4m4 0l-5 5M4 20v-4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5"})})}),e.jsx("div",{className:"w-full h-full",children:t})]})},Ws=()=>{const t={name:"Daniel",likes:["ìë™ì°¨","ìì „ê±°","ì „ìê¸°ê¸°","ì˜ ë†€ê¸°"],motto:"í˜ëŸ¬ê°€ëŠ” ëŒ€ë¡œ êµ¬ë¥´ëŠ” ëŒ€ë¡œ ë¶€ë”ªíˆëŠ” ëŒ€ë¡œ ë°€ë¦¬ëŠ” ëŒ€ë¡œ",imageUrl:"/image.png"};return e.jsx(ke,{children:e.jsx("main",{className:"bg-slate-100 min-h-screen flex items-center justify-center p-4 font-sans",children:e.jsx(Vs,{name:t.name,likes:t.likes,motto:t.motto,imageUrl:t.imageUrl})})})};var S=(t=>(t.N="N",t.R="R",t.SR="SR",t.SSR="SSR",t.Mythic="ì‹ í™”",t))(S||{}),ie=(t=>(t.Fire="ë¶ˆ",t.Water="ë¬¼",t.Wind="ë°”ëŒ",t.Light="ë¹›",t.Dark="ì–´ë‘ ",t))(ie||{}),be=(t=>(t.R="R",t.SR="SR",t.SSR="SSR",t.Mythic="ì‹ í™”",t))(be||{}),we=(t=>(t.SINGLE_TARGET_DAMAGE="ë‹¨ì¼ ëŒ€ìƒ ê³µê²©",t.AREA_OF_EFFECT_DAMAGE="ê´‘ì—­ ê³µê²©",t.HEAL_SELF="ìê°€ ì¹˜ìœ ",t.HEAL_TEAM="íŒ€ ì¹˜ìœ ",t))(we||{}),Ae=(t=>(t.ENEMY_SINGLE="ì  ë‹¨ì¼",t.ENEMY_ALL="ì  ì „ì²´",t.ALLY_SELF="ìì‹ ",t.ALLY_ALL="ì•„êµ° ì „ì²´",t))(Ae||{}),J=(t=>(t.HOME="HOME",t.STUDY="STUDY",t.TEST="TEST",t.RESULT="RESULT",t.WRONG_REVIEW="WRONG_REVIEW",t))(J||{}),qe=(t=>(t.BEST_FRIEND="ë² ìŠ¤íŠ¸ í”„ë Œë“œ",t.SCHOOL="í•™êµ ì¹œêµ¬",t.WORK="ì§ì¥ ë™ë£Œ",t.HOBBY="ì·¨ë¯¸ í™œë™",t.OTHER="ê¸°íƒ€",t))(qe||{}),Ie=(t=>(t.EASY="ì‰¬ì›€",t.MEDIUM="ë³´í†µ",t.HARD="ì–´ë ¤ì›€",t))(Ie||{}),mt=(t=>(t.BEGINNER="Beginner",t.INTERMEDIATE="Intermediate",t.ADVANCED="Advanced",t.EXPERT="Expert",t))(mt||{}),ge=(t=>(t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t))(ge||{}),me=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.PAUSED="PAUSED",t.GAME_OVER="GAME_OVER",t))(me||{});const Be=[{id:1,name:"ê¸°ë³¸ ì¼ê²©",description:"ì  í•˜ë‚˜ì—ê²Œ ê¸°ë³¸ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.R,level:1,effectType:we.SINGLE_TARGET_DAMAGE,power:1.5,targetType:Ae.ENEMY_SINGLE},{id:2,name:"ì¹˜ìœ ì˜ ë¹›",description:"ìì‹ ì„ ì•½ê°„ íšŒë³µì‹œí‚µë‹ˆë‹¤.",rarity:be.R,level:1,effectType:we.HEAL_SELF,power:500,targetType:Ae.ALLY_SELF},{id:3,name:"íŒŒì´ì–´ë³¼",description:"ì  í•˜ë‚˜ì—ê²Œ ê°•ë ¥í•œ í™”ì—¼ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.SR,level:1,effectType:we.SINGLE_TARGET_DAMAGE,power:2.5,targetType:Ae.ENEMY_SINGLE},{id:4,name:"ëŒ€ì§€ ê°€ë¥´ê¸°",description:"ëª¨ë“  ì ì—ê²Œ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.SR,level:1,effectType:we.AREA_OF_EFFECT_DAMAGE,power:1.2,targetType:Ae.ENEMY_ALL},{id:5,name:"ëŒ€ì²œì‚¬ì˜ ì¶•ë³µ",description:"ëª¨ë“  ì•„êµ°ì„ íšŒë³µì‹œí‚µë‹ˆë‹¤.",rarity:be.SSR,level:1,effectType:we.HEAL_TEAM,power:1e3,targetType:Ae.ALLY_ALL},{id:6,name:"ì²œë²Œ",description:"ì  í•˜ë‚˜ì—ê²Œ ì••ë„ì ì¸ ì‹ ì„± í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:be.SSR,level:1,effectType:we.SINGLE_TARGET_DAMAGE,power:5,targetType:Ae.ENEMY_SINGLE},{id:7,name:"ì•„ë§ˆê²Ÿëˆ",description:"ëª¨ë“  ì ì—ê²Œ íŒŒê´´ì ì¸ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤.",rarity:be.Mythic,level:1,effectType:we.AREA_OF_EFFECT_DAMAGE,power:3.5,targetType:Ae.ENEMY_ALL}],ze=[{id:101,name:"í›ˆë ¨ìš© ëª©ê²€",rarity:S.N,level:1,cards:0,baseStats:{attack:10,hp:0,speed:0},specialEffect:"ê¸°ë³¸ ê³µê²©ë ¥ ì¦ê°€",description:"ì´ˆë³´ìê°€ ì“°ê¸° ì¢‹ì€ ëª©ê²€."},{id:102,name:"ë‚¡ì€ ê°€ì£½ ê°‘ì˜·",rarity:S.N,level:1,cards:0,baseStats:{attack:0,hp:50,speed:0},specialEffect:"ê¸°ë³¸ ì²´ë ¥ ì¦ê°€",description:"ìµœì†Œí•œì˜ ë³´í˜¸ë¥¼ ì œê³µí•˜ëŠ” ê°‘ì˜·."},{id:103,name:"ê°•ì²  ê²€",rarity:S.R,level:1,cards:0,baseStats:{attack:30,hp:0,speed:2},specialEffect:"ê³µê²©ë ¥ ì†Œí­ ì¦ê°€",description:"ì˜ ì œë ¨ëœ ê°•ì²  ê²€."},{id:104,name:"ì‚¬ëƒ¥ê¾¼ì˜ ì¥í™”",rarity:S.R,level:1,cards:0,baseStats:{attack:5,hp:20,speed:10},specialEffect:"ì†ë„ ì†Œí­ ì¦ê°€",description:"ê°€ë³ê³  íŠ¼íŠ¼í•œ ì¥í™”."},{id:105,name:"í™”ì—¼ì˜ ì§€íŒ¡ì´",rarity:S.SR,level:1,cards:0,baseStats:{attack:80,hp:0,speed:0},specialEffect:"í™”ì—¼ ì†ì„± ê³µê²©ë ¥ ê°•í™”",description:"ë¶ˆíƒ€ì˜¤ë¥´ëŠ” ë§ˆë ¥ì´ ê¹ƒë“  ì§€íŒ¡ì´."},{id:106,name:"ë¯¸ìŠ¤ë¦´ ê°‘ì˜·",rarity:S.SR,level:1,cards:0,baseStats:{attack:0,hp:300,speed:-5},specialEffect:"ì²´ë ¥ ëŒ€í­ ì¦ê°€",description:"ê°€ë³ì§€ë§Œ ë§¤ìš° ë‹¨ë‹¨í•œ ë¯¸ìŠ¤ë¦´ë¡œ ë§Œë“  ê°‘ì˜·."},{id:107,name:"ì—‘ìŠ¤ì¹¼ë¦¬ë²„",rarity:S.SSR,level:1,cards:0,baseStats:{attack:250,hp:100,speed:5},specialEffect:"ì„±ìŠ¤ëŸ¬ìš´ í˜ìœ¼ë¡œ ì ì„ ì••ë„",description:"ì „ì„¤ ì†ì˜ ì™•ì´ ì‚¬ìš©í•˜ë˜ ê²€."},{id:108,name:"ë“œë˜ê³¤ í•˜íŠ¸ ëª©ê±¸ì´",rarity:S.SSR,level:1,cards:0,baseStats:{attack:50,hp:800,speed:0},specialEffect:"ìƒëª…ë ¥ ì¬ìƒ",description:"ìš©ì˜ ì‹¬ì¥ ì¡°ê°ìœ¼ë¡œ ë§Œë“  ëª©ê±¸ì´."},{id:109,name:"ì‹  ì‚´í•´ìì˜ ì°½",rarity:S.Mythic,level:1,cards:0,baseStats:{attack:800,hp:0,speed:20},specialEffect:"ì‹ ì—ê²Œë„ ìƒì²˜ë¥¼ ì…íˆëŠ” í˜",description:"ì‹ í™”ë¥¼ ëë‚´ëŠ” ì°½."},{id:110,name:"ì•„ì´ê¸°ìŠ¤",rarity:S.Mythic,level:1,cards:0,baseStats:{attack:0,hp:2500,speed:0},specialEffect:"ëª¨ë“  ìƒíƒœì´ìƒ ì €í•­",description:"ì‹ ì˜ ê°€í˜¸ê°€ ê¹ƒë“  ì ˆëŒ€ ë°©íŒ¨."}],xe=[{id:1,name:"ë¸”ë ˆì´ì¦ˆ ë‚˜ì´íŠ¸",rarity:S.N,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/1/200",level:1,cards:0,description:"ì‘ì€ ë¶ˆê½ƒì„ ë‹¤ë£¨ëŠ” ì´ˆë³´ ê¸°ì‚¬.",equippedUltimateId:1},{id:2,name:"ì•„ì¿ ì•„ ìŠ¤í”„ë¼ì´íŠ¸",rarity:S.N,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/2/200",level:1,cards:0,description:"ì¥ë‚œê¸° ë§ì€ ë¬¼ì˜ ì •ë ¹.",equippedUltimateId:1},{id:3,name:"ê²Œì¼ ì•„ì²˜",rarity:S.R,attribute:ie.Wind,imageUrl:"https://picsum.photos/seed/3/200",level:1,cards:0,description:"ë°”ëŒì„ ë‹¤ë£¨ëŠ” ëª…ì‚¬ìˆ˜.",equippedUltimateId:1},{id:4,name:"íƒœì–‘ì˜ ì‚¬ì œ",rarity:S.R,attribute:ie.Light,imageUrl:"https://picsum.photos/seed/4/200",level:1,cards:0,description:"ì„±ìŠ¤ëŸ¬ìš´ ë¹›ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ì œ.",equippedUltimateId:2},{id:5,name:"ê·¸ë¦¼ì ì‹œë…¸ë¹„",rarity:S.R,attribute:ie.Dark,imageUrl:"https://picsum.photos/seed/5/200",level:1,cards:0,description:"ê·¸ë¦¼ì ì†ì— ìˆ¨ì–´ë“œëŠ” ë‹Œì.",equippedUltimateId:1},{id:6,name:"ì¸í˜ë¥´ë…¸ ì†Œì„œëŸ¬",rarity:S.SR,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/6/200",level:1,cards:0,description:"í­ë°œì ì¸ í™”ì—¼ì„ ë‹¤ë£¨ëŠ” ê°•ë ¥í•œ ë§ˆë²•ì‚¬.",equippedUltimateId:3},{id:7,name:"íƒ€ì´ë‹¬ ê°€ë””ì–¸",rarity:S.SR,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/7/200",level:1,cards:0,description:"ê¹Šì€ ë°”ë‹¤ì˜ ìˆ˜í˜¸ì.",equippedUltimateId:4},{id:8,name:"ìŠ¤í†° ë“œë¼êµ°",rarity:S.SR,attribute:ie.Wind,imageUrl:"https://picsum.photos/seed/8/200",level:1,cards:0,description:"í­í’ì„ íƒ€ê³  ë‚˜ëŠ” ìš©ê¸°ì‚¬.",equippedUltimateId:1},{id:9,name:"ì²œìƒì˜ ë°œí‚¤ë¦¬",rarity:S.SSR,attribute:ie.Light,imageUrl:"https://picsum.photos/seed/9/200",level:1,cards:0,description:"ì²œìƒì—ì„œ ë‚´ë ¤ì˜¨ ì‹ ì„±í•œ ì „ì‚¬.",equippedUltimateId:5},{id:10,name:"ì‹¬ì—°ì˜ êµ°ì£¼",rarity:S.SSR,attribute:ie.Dark,imageUrl:"https://picsum.photos/seed/10/200",level:1,cards:0,description:"ì–´ë‘ìš´ ì‹¬ì—°ì˜ ì ˆëŒ€ ì§€ë°°ì.",equippedUltimateId:6},{id:11,name:"ë¶ˆì‚¬ì¡°",rarity:S.SSR,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/11/200",level:1,cards:0,description:"ë¶€í™œê³¼ ë¶ˆì˜ ë¶ˆë©¸ì˜ ì¡´ì¬.",equippedUltimateId:6},{id:12,name:"ë¦¬ë°”ì´ì–´ë˜ í˜„ì",rarity:S.SSR,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/12/200",level:1,cards:0,description:"ë°”ë‹¤ë¥¼ ë‹¤ìŠ¤ë¦¬ëŠ” ê³ ëŒ€ì˜ í˜„ì.",equippedUltimateId:5},{id:13,name:"í…œí˜ìŠ¤íŠ¸ ìœ™",rarity:S.SSR,attribute:ie.Wind,imageUrl:"https://picsum.photos/seed/13/200",level:1,cards:0,description:"íƒœí’ì˜ ëˆˆì—ì„œ íƒœì–´ë‚œ ë‚ ì¹´ë¡œìš´ ë°”ëŒ.",equippedUltimateId:4},{id:14,name:"ë‚˜ì´íŠ¸ë©”ì–´ íŒ¬í…€",rarity:S.SSR,attribute:ie.Dark,imageUrl:"https://picsum.photos/seed/14/200",level:1,cards:0,description:"ì•…ëª½ì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ê³µí¬ì˜ í˜„ì‹ .",equippedUltimateId:6},{id:15,name:"ì°½ì„¸ì˜ ì•„í¬ì—”ì ¤",rarity:S.Mythic,attribute:ie.Light,imageUrl:"https://picsum.photos/seed/15/200",level:1,cards:0,description:"ì„¸ê³„ë¥¼ ì°½ì¡°í•œ ë¹›ì˜ ëŒ€ë¦¬ì¸.",equippedUltimateId:7},{id:16,name:"ì¢…ë§ì˜ ì´í”„ë¦¬íŠ¸",rarity:S.Mythic,attribute:ie.Fire,imageUrl:"https://picsum.photos/seed/16/200",level:1,cards:0,description:"ëª¨ë“  ê²ƒì„ ì¬ë¡œ ëŒë¦¬ëŠ” íŒŒê´´ì˜ í™”ì‹ .",equippedUltimateId:7},{id:17,name:"ì„¸ê³„ìˆ˜ ìœ„ê·¸ë“œë¼ì‹¤",rarity:S.Mythic,attribute:ie.Water,imageUrl:"https://picsum.photos/seed/17/200",level:1,cards:0,description:"ìƒëª…ì˜ ê·¼ì›, ì„¸ê³„ë¥¼ í’ˆì€ ê±°ëŒ€í•œ ë‚˜ë¬´ ì •ë ¹.",equippedUltimateId:5}],Ve={[S.N]:.5,[S.R]:.34,[S.SR]:.12,[S.SSR]:.03,[S.Mythic]:.01},bt={[be.R]:.6,[be.SR]:.3,[be.SSR]:.08,[be.Mythic]:.02},Ys={name:"ê¸°ë³¸ íŒ€",characters:[xe[0],xe[1],null,null]},Ze={name:"íƒ€ë½í•œ ê±°ì‹ ",imageUrl:"https://picsum.photos/seed/raidboss/400",hp:5e7,maxHp:5e7,reward:25e3},He={currency:1e3,characters:[{...xe[0],cards:0},{...xe[1],cards:0},{...xe[2],cards:0}],teams:[Ys],achievements:[{id:1,name:"ì¼ì¼ ë¡œê·¸ì¸",description:"ì˜¤ëŠ˜ ë¡œê·¸ì¸í•˜ì„¸ìš”.",progress:1,target:1,reward:"ë³´ì„ 100ê°œ"},{id:2,name:"ì£¼ê°„ ê°€ì± ",description:"ì´ë²ˆ ì£¼ì— ê°€ì± ë¥¼ 10ë²ˆ ë½‘ìœ¼ì„¸ìš”.",progress:3,target:10,reward:"ê°€ì±  í‹°ì¼“ 1ì¥"},{id:3,name:"ë¶ˆì˜ í˜",description:"ë¶ˆ ì†ì„± ìºë¦­í„° 2ëª…ìœ¼ë¡œ íŒ€ì„ êµ¬ì„±í•˜ì„¸ìš”.",progress:1,target:2,reward:"ë³´ì„ 50ê°œ",requiredCharacterAttribute:ie.Fire}],friends:[{id:1,name:"AcePlayer",team:{name:"Vanguard",characters:[xe[8],xe[9],xe[10],xe[6]]},lastActive:"5ë¶„ ì „",lastRarePull:xe[11]},{id:2,name:"ShadowCat",team:{name:"Abyss",characters:[xe[4],xe[7],xe[9],xe[5]]},lastActive:"1ì‹œê°„ ì „"}],ultimateSkills:[{...Be[0]},{...Be[1]}],inventory:[{...ze[0],id:1,cards:0},{...ze[1],id:2,cards:0}],guildId:null},zs=({onLogin:t})=>{const[r,s]=m.useState(""),a=n=>{n.preventDefault(),r.trim()&&t(r.trim())};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white p-4",children:e.jsxs("div",{className:"w-full max-w-sm text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-cyan-300 mb-2",children:"ê°€ì±  ë„ˆì§€"}),e.jsx("p",{className:"text-gray-400 mb-8",children:"ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ê±°ë‚˜ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì„¸ìš”."}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsx("input",{type:"text",value:r,onChange:n=>s(n.target.value),placeholder:"ì‚¬ìš©ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-4 py-3 bg-gray-800 border-2 border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500 transition-colors",maxLength:20}),e.jsx("button",{type:"submit",disabled:!r.trim(),className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:"ë¡œê·¸ì¸ / ì‹œì‘í•˜ê¸°"})]})]})})},Ks={[S.N]:{border:"border-gray-500",text:"text-gray-300",shadow:"shadow-gray-500/50"},[S.R]:{border:"border-green-500",text:"text-green-400",shadow:"shadow-green-500/50"},[S.SR]:{border:"border-blue-500",text:"text-blue-400",shadow:"shadow-blue-500/50"},[S.SSR]:{border:"border-yellow-400",text:"text-yellow-400",shadow:"shadow-yellow-400/50"},[S.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400",shadow:"shadow-fuchsia-500/50"}},Ge=({character:t,onClick:r,isSelected:s})=>{const a=Ks[t.rarity];return e.jsxs("div",{className:`relative aspect-square rounded-lg overflow-hidden border-2 ${a.border} shadow-lg ${a.shadow} transition-transform hover:scale-105 ${r?"cursor-pointer":""} ${s?"ring-4 ring-cyan-400":""}`,onClick:r,children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsx("div",{className:`absolute top-1 left-1 bg-black/60 px-2 py-0.5 rounded-full text-xs font-bold ${a.text}`,children:t.rarity}),e.jsxs("div",{className:"absolute top-1 right-1 bg-black/60 px-2 py-0.5 rounded-full text-xs font-bold text-white",children:["Lv.",t.level]}),e.jsx("div",{className:"absolute bottom-1 left-0 right-0 px-2 text-center",children:e.jsx("p",{className:"text-white text-xs font-bold truncate drop-shadow-md",children:t.name})})]})},Js=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 3.75 3.75 0 0 0-1.993-2.303A3.75 3.75 0 0 0 8.25 6.75a3.75 3.75 0 0 0-1.483 2.805 3.75 3.75 0 0 0-1.993 2.303A3.75 3.75 0 0 0 6 18a3.75 3.75 0 0 0 .495-7.468 3.75 3.75 0 0 0 5.01 0A3.75 3.75 0 0 0 12 18Z"})]}),Fe=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),Xs=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),Zs=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})}),Qs=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),ea=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),ta=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ut=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.25a.75.75 0 0 1-.75-.75v-12a.75.75 0 0 1 .75-.75h19.5a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-.75.75h-4.5m-4.5 0h-3.75m3.75 0V11.25m5.25 2.25V11.25m0 0V9.75M18.75 11.25v-1.5m-16.5 0a3 3 0 0 1 3-3h10.5a3 3 0 0 1 3 3m-16.5 0c0 1.657 1.343 3 3 3h10.5c1.657 0 3-1.343 3-3m-12.75 0h9"})}),sa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.5-2.962c.51.056 1.02.086 1.5.086 1.032 0 2.033-.146 3-.418m-9.379-3.323c.345-.184.71-.343 1.086-.483A8.931 8.931 0 0 1 15 4.5c1.43 0 2.793.324 4.024.893m-15.024 4.885A4.5 4.5 0 0 0 7.5 10.5c1.196 0 2.285.42 3.12 1.121m-4.59 2.508A4.492 4.492 0 0 1 7.5 15c2.023 0 3.841.996 5.032 2.572M12 3v18"})}),aa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),ra=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-4.598m-1.5-6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Z"})}),na=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),la=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),yt=({playerState:t,currentUser:r,onLogout:s,onNavigate:a})=>{const n=t.teams[0],i=c=>t.characters.filter(d=>d.attribute===c).length;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{className:"text-center relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:r}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",title:"ë¡œê·¸ì•„ì›ƒ",children:e.jsx(ea,{className:"w-5 h-5"})})]}),e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ê°€ì±  ë„ˆì§€"}),e.jsx("p",{className:"text-gray-400",children:"ìµœê³ ê°€ ë˜ê¸° ìœ„í•œ ì—¬ì •ì´ ì—¬ê¸°ì„œ ì‹œì‘ë©ë‹ˆë‹¤."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë‚˜ì˜ ë©”ì¸ íŒ€"}),e.jsx("div",{onClick:()=>a("team"),className:"grid grid-cols-4 gap-3 p-4 bg-gray-800/50 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:n.characters.map((c,d)=>c?e.jsx(Ge,{character:c},d):e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg flex items-center justify-center text-gray-500 text-3xl",children:"+"},d))})]}),e.jsx("section",{children:e.jsx("button",{onClick:()=>a("gacha"),className:"w-full p-4 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform duration-300 animate-pulse hover:animate-none",children:"âœ¨ ì¶”ì²œ ê°€ì±  ë“±ì¥! âœ¨"})}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¼ì¼ & ì£¼ê°„ ì—…ì "}),e.jsx("div",{className:"space-y-3",children:t.achievements.map(c=>{const d=c.requiredCharacterAttribute&&i(c.requiredCharacterAttribute)<c.target;return e.jsxs("div",{className:`p-3 bg-gray-800 rounded-lg ${d?"border border-dashed border-yellow-500 animate-pulse":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[e.jsxs("p",{className:"font-semibold",children:[c.name," ",d&&e.jsxs("span",{className:"text-yellow-400 text-xs",children:[" (",c.requiredCharacterAttribute," ì†ì„± ìºë¦­í„° ë¶€ì¡±!)"]})]}),e.jsxs("p",{className:"text-gray-400",children:[c.progress,"/",c.target]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:"bg-cyan-500 h-2.5 rounded-full",style:{width:`${c.progress/c.target*100}%`}})})]},c.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¹œêµ¬ í™œë™"}),e.jsx("div",{className:"space-y-4",children:t.friends.map(c=>{var d;return e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex-shrink-0",children:e.jsx("img",{src:(d=c.team.characters[0])==null?void 0:d.imageUrl,alt:c.name,className:"w-full h-full object-cover rounded-full"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-bold",children:c.name}),c.lastRarePull&&e.jsxs("p",{className:"text-xs text-yellow-400 truncate",children:["ë°©ê¸ˆ ",e.jsx("span",{className:"font-bold",children:"SSR"})," ",c.lastRarePull.name," íšë“!"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["í™œë™: ",c.lastActive]})]}),e.jsx("button",{onClick:()=>a("social"),className:"bg-indigo-600 px-3 py-1 text-sm rounded-md hover:bg-indigo-500 transition-colors",children:"ë³´ê¸°"})]},c.id)})})]})]})};function wt(t){return 10+t*2}function Bt(t,r){const s=t.level||1;let a=(t.cards||0)+r,n=s;for(;a>=wt(n);)a-=wt(n),n+=1;return{level:n,cards:a}}const ia=({results:t,onClose:r})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:r,children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-gray-900/80 backdrop-blur-sm rounded-lg border-2 border-yellow-400 shadow-2xl p-6 space-y-4",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-300 drop-shadow-lg",children:"ì†Œí™˜ ê²°ê³¼"}),e.jsx("div",{className:`grid gap-3 ${t.length>1?"grid-cols-5":"grid-cols-1 place-items-center"}`,children:t.map((s,a)=>e.jsx("div",{className:"animate-reveal",style:{animationDelay:`${a*100}ms`},children:e.jsx(Ge,{character:s})},a))}),e.jsx("button",{onClick:r,className:"w-full mt-4 p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"í™•ì¸"})]})}),oa=[S.Mythic,S.SSR,S.SR,S.R,S.N],ca={[S.N]:"text-gray-300",[S.R]:"text-green-400",[S.SR]:"text-blue-400",[S.SSR]:"text-yellow-400",[S.Mythic]:"text-fuchsia-400"},da=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Fe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300",children:"ì†Œí™˜ í™•ë¥ "}),e.jsx("div",{className:"space-y-2",children:oa.map(r=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-900/50 rounded-md",children:[e.jsx("span",{className:`font-bold ${ca[r]}`,children:r}),e.jsxs("span",{className:"text-white font-mono",children:[(Ve[r]*100).toFixed(2),"%"]})]},r))}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"ê° ë“±ê¸‰ ë‚´ ìºë¦­í„°ëŠ” ë™ì¼í•œ í™•ë¥ ë¡œ ë“±ì¥í•©ë‹ˆë‹¤."})]})}),Qe=30,et=300,tt=3e3,st=5e4,at=5e5,ma=()=>{const t=Math.random();let r=0;const s={};xe.forEach(a=>{s[a.rarity]||(s[a.rarity]=[]),s[a.rarity].push(a)});for(const a of Object.keys(Ve))if(r+=Ve[a],t<r){const n=s[a];if(n&&n.length>0)return{...n[Math.floor(Math.random()*n.length)],id:Date.now()+Math.random(),cards:0}}return{...s[S.N][0],id:Date.now()+Math.random(),cards:0}},xa=({playerState:t,setPlayerState:r})=>{const[s,a]=m.useState(null),[n,i]=m.useState(!1),[c,d]=m.useState(!1),o=(x,p)=>{if(!t||t.currency<p||c)return;d(!0);let u=Array.from({length:x},ma);if(x===10){if(!u.some(w=>[S.SR,S.SSR,S.Mythic].includes(w.rarity))){const w=xe.filter(k=>[S.SR,S.SSR,S.Mythic].includes(k.rarity));if(w.length>0){const k=w[Math.floor(Math.random()*w.length)];u[0]={...k,id:Date.now()+Math.random(),cards:0}}}}else if(x===100){if(!u.some(w=>[S.SSR,S.Mythic].includes(w.rarity))){const w=xe.filter(k=>[S.SSR,S.Mythic].includes(k.rarity));if(w.length>0){const k=w[Math.floor(Math.random()*w.length)];u[0]={...k,id:Date.now()+Math.random(),cards:0}}}}else if(x===1e3){if(!u.some(w=>w.rarity===S.Mythic)){const w=xe.filter(k=>k.rarity===S.Mythic);if(w.length>0){const k=w[Math.floor(Math.random()*w.length)];u[0]={...k,id:Date.now()+Math.random(),cards:0}}}}else if(x===1e4){const j=xe.filter(w=>w.rarity===S.Mythic);if(j.length>0){for(let w=0;w<10;w++){const k=j[Math.floor(Math.random()*j.length)];u[w]={...k,id:Date.now()+Math.random()+w,cards:0}}for(let w=u.length-1;w>0;w--){const k=Math.floor(Math.random()*(w+1));[u[w],u[k]]=[u[k],u[w]]}}}setTimeout(()=>{r(j=>{if(!j)return null;const w=new Map;j.characters.forEach(b=>w.set(b.name,{...b})),u.forEach(b=>{if(w.has(b.name)){const E=w.get(b.name),{level:B,cards:P}=Bt(E,1);E.level=B,E.cards=P}else w.set(b.name,{...b,level:1,cards:0})});const k=Array.from(w.values());return{...j,currency:j.currency-p,characters:k}}),a(u),d(!1)},1e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì†Œí™˜"}),e.jsx("p",{className:"text-gray-400",children:"ìƒˆë¡œìš´ ë™ë£Œë¥¼ ë§Œë‚˜ ìš´ëª…ì„ ê°œì²™í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg flex justify-between items-center sticky top-4 z-10",children:[e.jsx("span",{className:"font-semibold text-lg",children:"ë³´ìœ  ë³´ì„"}),e.jsx("span",{className:"font-bold text-2xl text-yellow-300",children:t==null?void 0:t.currency.toLocaleString()}),e.jsxs("button",{onClick:()=>i(!0),className:"text-sm text-cyan-400 hover:text-cyan-300 flex items-center gap-1",children:[e.jsx(ta,{className:"w-4 h-4"}),"ì†Œí™˜ í™•ë¥ "]})]}),e.jsxs("div",{className:"relative aspect-video w-full max-w-lg mx-auto flex items-center justify-center rounded-lg overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-purple-900/50 via-black to-indigo-900/50 opacity-70"}),e.jsx("div",{className:"absolute w-full h-full animate-spin-slow",style:{background:"radial-gradient(circle, rgba(167, 139, 250, 0.3) 10%, transparent 70%)"}}),e.jsx("p",{className:"text-2xl font-bold text-white z-10 drop-shadow-lg",children:"ì†Œí™˜ì§„"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>o(1,Qe),disabled:!t||t.currency<Qe||c,className:"w-full p-3 rounded-lg bg-gradient-to-r from-gray-600 to-gray-700 text-white font-bold shadow-lg hover:from-gray-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"1íšŒ ì†Œí™˜"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",Qe]})]}),e.jsxs("button",{onClick:()=>o(10,et),disabled:!t||t.currency<et||c,className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold shadow-lg hover:from-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"10íšŒ ì†Œí™˜"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",et]})]}),e.jsxs("button",{onClick:()=>o(100,tt),disabled:!t||t.currency<tt||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-bold shadow-lg hover:from-cyan-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"100íšŒ ì†Œí™˜ (SSR+ 1ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",tt]})]}),e.jsxs("button",{onClick:()=>o(1e3,st),disabled:!t||t.currency<st||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-yellow-500 to-red-500 text-white font-bold shadow-lg hover:from-yellow-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"1000íšŒ ì†Œí™˜ (ì‹ í™” 1ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",st]})]}),e.jsxs("button",{onClick:()=>o(1e4,at),disabled:!t||t.currency<at||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-fuchsia-600 to-yellow-500 text-white font-bold shadow-lg hover:from-fuchsia-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"10000íšŒ ì†Œí™˜ (ì‹ í™” 10ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",at.toLocaleString()]})]})]}),s&&e.jsx(ia,{results:s,onClose:()=>a(null)}),n&&e.jsx(da,{onClose:()=>i(!1)})]})};function Ft(t){if(!t)return{attack:0,hp:0,speed:0};const r=1+t.level*.05,s=1+t.cards*.01,a=r*s,n=Math.round(t.baseStats.attack*a),i=Math.round(t.baseStats.hp*a),c=Math.round(t.baseStats.speed*a);return{attack:n,hp:i,speed:c}}function ut(t,r){const a={[S.N]:1,[S.R]:1.15,[S.SR]:1.35,[S.SSR]:1.6,[S.Mythic]:2}[t.rarity]??1,n=Math.round((t.level*4+10)*a),i=Math.round((t.level*20+100)*a),c=Math.round(10+t.level*.4+(t.level>50?2:0));let d={attack:0,hp:0,speed:0};return r&&(d=Ft(r)),{attack:n+d.attack,hp:i+d.hp,speed:Math.max(1,c+d.speed)}}const ua={[S.N]:{border:"border-gray-500",text:"text-gray-300",bg:"bg-gray-700"},[S.R]:{border:"border-green-500",text:"text-green-400",bg:"bg-green-600"},[S.SR]:{border:"border-blue-500",text:"text-blue-400",bg:"bg-blue-600"},[S.SSR]:{border:"border-yellow-400",text:"text-yellow-400",bg:"bg-yellow-500"},[S.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400",bg:"bg-fuchsia-600"}},ha={[ie.Fire]:"text-red-400",[ie.Water]:"text-blue-400",[ie.Wind]:"text-green-400",[ie.Light]:"text-yellow-300",[ie.Dark]:"text-purple-400"},rt=({label:t,value:r})=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 p-2 rounded-md text-sm",children:[e.jsx("span",{className:"text-gray-400",children:t}),e.jsx("span",{className:"font-bold text-white",children:r})]}),pa=({character:t,equippedUltimate:r,equippedEquipment:s,isCharacterInTeam:a,onAddToTeam:n,onRemoveFromTeam:i,onChangeUltimate:c,onChangeEquipment:d,onClose:o})=>{const x=ut(t,s),p=ua[t.rarity],u=ha[t.attribute],j=Math.floor((t.level-1)/10)+1;return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:o,children:e.jsxs("div",{className:`relative w-full max-w-sm bg-gray-800 rounded-lg border-2 ${p.border} shadow-2xl p-6 space-y-4 max-h-[90vh] overflow-y-auto`,onClick:w=>w.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Fe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-24 h-24 rounded-lg overflow-hidden border-2 ${p.border} flex-shrink-0`,children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-bold ${p.text}`,children:t.rarity}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-sm font-semibold",children:["Level ",t.level," ",e.jsxs("span",{className:u,children:[t.attribute," ì†ì„±"]})]})]})]}),e.jsxs("p",{className:"text-gray-300 text-sm italic",children:['"',t.description,'"']}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"ë ˆë²¨ì—… ì§„í–‰ë„"}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative overflow-hidden",children:[e.jsx("div",{className:"bg-yellow-400 h-4 rounded-full transition-all duration-500",style:{width:`${t.cards/j*100}%`}}),e.jsxs("span",{className:"absolute inset-0 text-center text-xs font-bold text-black flex items-center justify-center",children:[t.cards," / ",j]})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ í•„ìš”í•œ ì¹´ë“œ"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"ëŠ¥ë ¥ì¹˜ (ì¥ë¹„ í¬í•¨)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(rt,{label:"HP",value:x.hp}),e.jsx(rt,{label:"ê³µê²©ë ¥",value:x.attack}),e.jsx(rt,{label:"ì†ë„",value:x.speed})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-purple-400",children:"ê¶ê·¹ê¸°"}),r?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Lv.",r.level]})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"ì—†ìŒ"}),e.jsx("button",{onClick:c,className:"w-full mt-2 p-1 rounded-md text-xs bg-gray-700 hover:bg-gray-600 transition-colors",children:"ë³€ê²½"})]}),e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-green-400",children:"ì¥ë¹„"}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Lv.",s.level," ",s.rarity]}),e.jsx("p",{className:"text-[10px] text-cyan-300 mt-1",children:s.specialEffect})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"ì—†ìŒ"}),e.jsx("button",{onClick:d,className:"w-full mt-2 p-1 rounded-md text-xs bg-gray-700 hover:bg-gray-600 transition-colors",children:"ë³€ê²½"})]})]}),a?e.jsx("button",{onClick:i,className:"w-full p-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-500 transition-colors",children:"íŒ€ì—ì„œ ì œê±°"}):e.jsx("button",{onClick:n,className:"w-full p-2 rounded-lg bg-cyan-600 text-white font-semibold hover:bg-cyan-500 transition-colors",children:"íŒ€ì— ì¶”ê°€"})]})})},fa=async t=>{try{const r=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),a=`
      ë‹¹ì‹ ì€ ë›°ì–´ë‚œ RPG ì „ëµê°€ì…ë‹ˆë‹¤. ì•„ë˜ì˜ ë³´ìœ  ìºë¦­í„° ëª©ë¡ì„ ë³´ê³ , ê· í˜• ì¡íˆê³  ê°•ë ¥í•œ 4ì¸ íŒ€ì„ ì¶”ì²œí•´ ì£¼ì„¸ìš”.
      ì„ íƒëœ ìºë¦­í„°ë“¤ ê°„ì˜ ì „ëµê³¼ ì‹œë„ˆì§€ì— ëŒ€í•´ ì„¤ëª…í•´ ì£¼ì„¸ìš”. ì‘ë‹µì€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.

      ë³´ìœ  ìºë¦­í„° ëª©ë¡:
      ${t.map(i=>`- ${i.name} (${i.rarity}, ${i.attribute})`).join(`
`)}
    `;return(await r.models.generateContent({model:"gemini-2.5-flash",contents:a})).text}catch(r){return console.error("Error calling Gemini API:",r),"ì£„ì†¡í•©ë‹ˆë‹¤, ì§€ê¸ˆì€ ì¡°ì–¸ì„ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."}},jt={[be.R]:{border:"border-green-500",text:"text-green-400"},[be.SR]:{border:"border-blue-500",text:"text-blue-400"},[be.SSR]:{border:"border-yellow-400",text:"text-yellow-400"},[be.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400"}},ga=({ownedUltimates:t,onSelect:r,onClose:s})=>{const a=n=>{const i=(n.level-1)*.25+1,c=(n.power*i).toFixed(1);switch(n.effectType){case we.SINGLE_TARGET_DAMAGE:case we.AREA_OF_EFFECT_DAMAGE:return`ê³µê²©ë ¥ì˜ ${c}ë°° í”¼í•´`;case we.HEAL_SELF:case we.HEAL_TEAM:return`ê¸°ë³¸ íšŒë³µëŸ‰ ${(n.power*i).toFixed(0)}`;default:return""}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-lg bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Fe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300 mb-4",children:"ê¶ê·¹ê¸° ì„ íƒ"}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:t.map(n=>e.jsxs("div",{onClick:()=>r(n.id),className:`p-3 bg-gray-900/50 rounded-lg border-2 ${jt[n.rarity].border} cursor-pointer hover:bg-gray-700 transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:`font-bold text-lg ${jt[n.rarity].text}`,children:n.name}),e.jsxs("span",{className:"text-sm font-semibold text-white",children:["Lv.",n.level]})]}),e.jsx("p",{className:"text-sm text-yellow-300 font-semibold",children:a(n)}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:n.description})]},n.id))})]})})},vt={[S.N]:{border:"border-gray-500",text:"text-gray-300"},[S.R]:{border:"border-green-500",text:"text-green-400"},[S.SR]:{border:"border-blue-500",text:"text-blue-400"},[S.SSR]:{border:"border-yellow-400",text:"text-yellow-400"},[S.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400"}},ba=({inventory:t,onSelect:r,onClose:s})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-lg bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Fe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300 mb-4",children:"ì¥ë¹„ ì„ íƒ"}),t.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"ì¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤. ìƒì ì—ì„œ íšë“í•˜ì„¸ìš”."}):e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:t.map(a=>{const n=Ft(a);return e.jsxs("div",{onClick:()=>r(a.id),className:`p-3 bg-gray-900/50 rounded-lg border-2 ${vt[a.rarity].border} cursor-pointer hover:bg-gray-700 transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg ${vt[a.rarity].text}`,children:a.name}),e.jsxs("p",{className:"text-sm font-semibold text-white",children:["Lv.",a.level," ",e.jsxs("span",{className:"text-xs text-gray-400",children:["(",a.cards," ê°•í™”)"]})]})]}),e.jsxs("div",{className:"text-right text-xs text-gray-300",children:[n.attack>0&&e.jsxs("p",{children:["ê³µê²© +",n.attack.toLocaleString()]}),n.hp>0&&e.jsxs("p",{children:["ì²´ë ¥ +",n.hp.toLocaleString()]}),n.speed>0&&e.jsxs("p",{children:["ì†ë„ +",n.speed.toLocaleString()]})]})]}),e.jsx("p",{className:"text-xs text-cyan-400 mt-1 font-bold",children:a.specialEffect}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]},a.id)})})]})}),ya=({playerState:t,setPlayerState:r,onEquipUltimate:s,onEquipEquipment:a})=>{const[n,i]=m.useState(null),[c,d]=m.useState(!1),[o,x]=m.useState(!1),[p,u]=m.useState(""),[j,w]=m.useState(!1),k=t.teams[0],b=new Set(k.characters.filter(Boolean).map(g=>g.id)),E=new Map(Be.map(g=>[g.id,g])),B=new Map(t.ultimateSkills.map(g=>[g.id,g])),P=g=>B.get(g)||E.get(g),I=g=>g?t.inventory.find(C=>C.id===g):void 0,T=g=>{i(g)},f=()=>{i(null),d(!1),x(!1)},A=g=>{const C=k.characters.findIndex(U=>U===null);if(C!==-1&&!b.has(g.id)){const U=[...k.characters];U[C]=g,r($=>$?{...$,teams:[{...$.teams[0],characters:U}]}:null)}f()},_=g=>{const C=k.characters.map(U=>U&&U.id===g?null:U);r(U=>U?{...U,teams:[{...U.teams[0],characters:C}]}:null),f()},O=async()=>{w(!0),u("");const g=await fa(t.characters);u(g),w(!1)},D=g=>{n&&s(n.id,g),d(!1),i(null)},v=g=>{n&&a(n.id,g),x(!1),i(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ìºë¦­í„° ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-400",children:"ë³´ìœ  ìºë¦­í„°ë¥¼ í™•ì¸í•˜ê³  ìµœê°•ì˜ íŒ€ì„ êµ¬ì„±í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë©”ì¸ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:k.characters.map((g,C)=>e.jsx("div",{className:"relative",children:g?e.jsx(Ge,{character:g,onClick:()=>T(g)}):e.jsx("div",{className:"aspect-square w-full h-full bg-gray-700/50 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center text-gray-500 text-4xl",children:"+"})},C))})]}),e.jsxs("section",{children:[e.jsxs("button",{onClick:O,disabled:j,className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(aa,{className:"w-6 h-6"}),j?"ë¶„ì„ ì¤‘...":"AI íŒ€ ì¡°í•© ì¶”ì²œë°›ê¸°"]}),p&&e.jsx("div",{className:"prose prose-invert mt-4 p-4 bg-gray-800/50 rounded-lg max-w-none",dangerouslySetInnerHTML:{__html:p.replace(/\n/g,"<br />")}})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë³´ìœ  ìºë¦­í„° ëª©ë¡"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 gap-3",children:t.characters.map(g=>e.jsx(Ge,{character:g,onClick:()=>T(g)},g.id))})]}),n&&!c&&!o&&e.jsx(pa,{character:n,equippedUltimate:P(n.equippedUltimateId),equippedEquipment:I(n.equippedEquipmentId),isCharacterInTeam:b.has(n.id),onAddToTeam:()=>A(n),onRemoveFromTeam:()=>_(n.id),onChangeUltimate:()=>d(!0),onChangeEquipment:()=>x(!0),onClose:f}),c&&n&&e.jsx(ga,{ownedUltimates:t.ultimateSkills,onSelect:D,onClose:()=>d(!1)}),o&&n&&e.jsx(ba,{inventory:t.inventory,onSelect:v,onClose:()=>x(!1)})]})},wa={very_easy:{count:1,rarities:[S.N],levelRange:[1,3]},easy:{count:2,rarities:[S.N,S.R],levelRange:[3,8]},normal:{count:3,rarities:[S.R,S.SR],levelRange:[10,15]},hard:{count:4,rarities:[S.SR,S.SSR],levelRange:[20,25]},very_hard:{count:4,rarities:[S.SR,S.SSR],levelRange:[30,40]},hell:{count:4,rarities:[S.SSR,S.Mythic],levelRange:[45,55]},hardcore:{count:4,rarities:[S.Mythic],levelRange:[60,70]},boss:{count:1,rarities:[S.Mythic],levelRange:[100,100]}};let ja=-1;const va=t=>{const r=wa[t],s=[],a=xe.filter(n=>r.rarities.includes(n.rarity));if(a.length===0){console.error(`No characters available for rarities: ${r.rarities.join(", ")}`);const n=xe.filter(i=>i.rarity===S.N);if(n.length>0)a.push(...n);else return[]}for(let n=0;n<r.count;n++){const i=a[Math.floor(Math.random()*a.length)],c=Math.floor(Math.random()*(r.levelRange[1]-r.levelRange[0]+1))+r.levelRange[0],d={...i,id:ja--,level:c,name:`${i.name} (ì )`};s.push(d)}return s},nt={very_easy:{label:"ë§¤ìš° ì‰¬ì›€",color:"bg-teal-700 hover:bg-teal-600"},easy:{label:"ì‰¬ì›€",color:"bg-green-600 hover:bg-green-500"},normal:{label:"ë³´í†µ",color:"bg-yellow-600 hover:bg-yellow-500"},hard:{label:"ì–´ë ¤ì›€",color:"bg-orange-600 hover:bg-orange-500"},very_hard:{label:"ë§¤ìš° ì–´ë ¤ì›€",color:"bg-red-600 hover:bg-red-500"},hell:{label:"ì§€ì˜¥",color:"bg-purple-700 hover:bg-purple-600"},hardcore:{label:"í•˜ë“œì½”ì–´",color:"bg-gray-700 hover:bg-gray-600"},boss:{label:"ë³´ìŠ¤",color:"bg-black border border-red-500 hover:bg-gray-900"}},Na=({playerState:t,onStartCombat:r})=>{var d;const s=(d=t.teams[0])==null?void 0:d.characters.filter(o=>o!==null),[a,n]=m.useState("normal"),[i,c]=m.useState([]);return m.useEffect(()=>{c(va(a))},[a]),e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì „íˆ¬ ì¤€ë¹„"}),e.jsx("p",{className:"text-gray-400",children:"ë„ì „í•  ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"ë‚œì´ë„ ì„ íƒ"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.keys(nt).map(o=>e.jsx("button",{onClick:()=>n(o),className:`px-3 py-2 rounded-md font-bold transition-all text-sm ${a===o?`${nt[o].color} text-white ring-2 ring-white shadow-lg`:"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:nt[o].label},o))})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-400",children:"ì  íŒ€ (ë¯¸ë¦¬ë³´ê¸°)"}),i.length>0?e.jsx("div",{className:"flex justify-center gap-4",children:i.map((o,x)=>e.jsx("div",{className:"w-24",children:e.jsx(Ge,{character:o})},x))}):e.jsx("p",{className:"text-gray-500",children:"ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì—¬ ì ì„ ìƒì„±í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-400",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"flex justify-center gap-4",children:s.map((o,x)=>e.jsx("div",{className:"w-24",children:e.jsx(Ge,{character:o})},x))})]}),e.jsx("button",{onClick:()=>r(i,a),disabled:s.length===0||i.length===0,className:"w-full p-4 rounded-lg bg-gradient-to-r from-red-600 to-orange-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:"ì „íˆ¬ ì‹œì‘!"})]})},Sa=({friends:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì»¤ë®¤ë‹ˆí‹°"}),e.jsx("p",{className:"text-gray-400",children:"ì¹œêµ¬ ë° ë¼ì´ë²Œê³¼ êµë¥˜í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gradient-to-br from-green-900 to-teal-900 rounded-lg border-2 border-green-500 shadow-lg text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-green-300",children:"í˜‘ë™ ë ˆì´ë“œ ê°€ëŠ¥!"}),e.jsx("p",{className:"text-sm text-gray-200 mt-1 mb-3",children:"ì¹œêµ¬ì™€ íŒ€ì„ ì´ë£¨ì–´ ì›”ë“œ ë³´ìŠ¤ë¥¼ ë¬¼ë¦¬ì¹˜ê³  ë‘ ë°°ì˜ ë³´ìƒì„ íšë“í•˜ì„¸ìš”!"}),e.jsx("button",{className:"px-6 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-500 transition-colors",children:"íŒŒí‹° ì°¾ê¸°"})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¹œêµ¬ ëª©ë¡"}),e.jsx("div",{className:"space-y-4",children:t.map(r=>e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["í™œë™: ",r.lastActive]})]}),r.lastRarePull&&e.jsxs("div",{className:"text-right text-xs bg-yellow-900/50 border border-yellow-600 p-2 rounded-md",children:[e.jsx("p",{className:"text-yellow-300",children:"ìµœê·¼ íšë“:"}),e.jsxs("p",{className:"font-semibold",children:[r.lastRarePull.rarity," ",r.lastRarePull.name]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:[r.name,"ì˜ íŒ€"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.team.characters.map((s,a)=>s?e.jsx(Ge,{character:s},a):e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg"},a))})]})]},r.id))})]})]}),ka=({pack:t,onConfirm:r,onClose:s})=>{const[a,n]=m.useState("idle"),i=()=>{n("processing"),setTimeout(()=>{n("success"),setTimeout(()=>{r()},1e3)},1500)};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-md bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:c=>c.stopPropagation(),children:[a==="idle"&&e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Fe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(Xs,{className:"w-12 h-12 mx-auto text-cyan-400 mb-2"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"êµ¬ë§¤ í™•ì¸"})]}),a==="idle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"ìƒí’ˆ"}),e.jsxs("span",{className:"font-semibold text-white",children:[t.name," (",t.amount.toLocaleString()," ë³´ì„)"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-gray-400",children:"ì´ ê²°ì œ ê¸ˆì•¡"}),e.jsx("span",{className:"font-bold text-cyan-300",children:t.price})]})]}),e.jsx("div",{className:"text-center p-3 bg-yellow-900/50 border border-yellow-700 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-300",children:["ì´ê²ƒì€ ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.",e.jsx("br",{}),"ì‹¤ì œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šìœ¼ë©°, ì •ë³´ë¥¼ ì…ë ¥í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤."]})}),e.jsx("button",{onClick:i,className:"w-full mt-4 p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"ê²°ì œ í™•ì •"})]}),a==="processing"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-t-cyan-400 border-gray-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"ê²°ì œ ì²˜ë¦¬ ì¤‘..."})]}),a==="success"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-green-400 font-bold text-xl",children:"êµ¬ë§¤ ì„±ê³µ!"}),e.jsxs("p",{className:"text-gray-300",children:[t.amount.toLocaleString(),"ê°œì˜ ë³´ì„ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤."]})]})]})})},Ea=({onConfirm:t,onClose:r})=>{const[s,a]=m.useState(""),[n,i]=m.useState(""),c=d=>{d.preventDefault(),t(s)||(i("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤."),a(""))};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:r,children:e.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(Fe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(la,{className:"w-12 h-12 mx-auto text-cyan-400 mb-2"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"ë¹„ë°€ë²ˆí˜¸ í™•ì¸"}),e.jsx("p",{className:"text-sm text-gray-400",children:"êµ¬ë§¤ë¥¼ ê³„ì†í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”."})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("input",{type:"password",value:s,onChange:d=>{a(d.target.value),i("")},placeholder:"ë¹„ë°€ë²ˆí˜¸",className:`w-full px-4 py-3 bg-gray-700 border-2 rounded-lg text-white placeholder-gray-500 focus:outline-none transition-colors ${n?"border-red-500":"border-gray-600 focus:border-cyan-500"}`,autoFocus:!0}),n&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:n}),e.jsx("button",{type:"submit",disabled:!s,className:"w-full p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors disabled:opacity-50",children:"í™•ì¸"})]})]})})},Ta=[{name:"ìŠ¤íƒ€í„° íŒ©",amount:500,price:"â‚©1,200",color:"from-green-500 to-teal-500"},{name:"ê°€ì„±ë¹„ íŒ©",amount:1200,price:"â‚©2,500",color:"from-blue-500 to-cyan-500"},{name:"í”„ë¡œ íŒ©",amount:3e3,price:"â‚©5,900",color:"from-purple-500 to-indigo-500"},{name:"ê³ ë˜ íŒ©",amount:1e4,price:"â‚©15,000",color:"from-yellow-500 to-orange-500"},{name:"ì§€ë°°ì íŒ©",amount:5e4,price:"â‚©55,000",color:"from-red-500 to-rose-500"},{name:"ì‹ ë“¤ì˜ ì¶•ë³µ",amount:1e7,price:"â‚©119,000",color:"from-fuchsia-600 via-purple-600 to-indigo-700",bestValue:!0}],Ca=()=>{const t=Math.random();let r=0;const s={};Be.forEach(a=>{s[a.rarity]||(s[a.rarity]=[]),s[a.rarity].push(a)});for(const a of Object.keys(bt))if(r+=bt[a],t<r){const n=s[a];if(n&&n.length>0)return{...n[Math.floor(Math.random()*n.length)]}}return{...s[be.R][0]}},Nt=()=>{const t=Math.random();let r=0;const s={};ze.forEach(a=>{s[a.rarity]||(s[a.rarity]=[]),s[a.rarity].push(a)});for(const a of Object.keys(Ve))if(r+=Ve[a],t<r){const n=s[a];if(n&&n.length>0)return{...n[Math.floor(Math.random()*n.length)],cards:0}}return{...s[S.N][0],cards:0}},Aa=({playerState:t,setPlayerState:r})=>{const[s,a]=m.useState(null),[n,i]=m.useState(null),[c,d]=m.useState(!1),[o,x]=m.useState(null),[p,u]=m.useState(null),j=150,w=100,k=1e6,b=f=>{i(f),d(!0)},E=f=>f.trim()==="12121212"?(d(!1),a(n),i(null),!0):!1,B=f=>{r(A=>A?{...A,currency:A.currency+f}:null),a(null)},P=f=>{const A=j*f;if(!t||t.currency<A)return;const _=Array.from({length:f},Ca);r(O=>{if(!O)return null;const D=new Map;return O.ultimateSkills.forEach(v=>D.set(v.id,{...v})),_.forEach(v=>{if(D.has(v.id)){const g=D.get(v.id);g.level+=1}else D.set(v.id,{...v,level:1})}),{...O,currency:O.currency-A,ultimateSkills:Array.from(D.values())}}),x(_)},I=f=>{let A=w*f;if(f===1e4&&(A=k),!t||t.currency<A)return;let _=[];if(f===1e4){const O=ze.filter(D=>D.rarity===S.Mythic);if(O.length>0)for(let D=0;D<10;D++){const v=O[Math.floor(Math.random()*O.length)];_.push({...v,cards:0})}for(let D=_.length;D<f;D++)_.push(Nt());for(let D=_.length-1;D>0;D--){const v=Math.floor(Math.random()*(D+1));[_[D],_[v]]=[_[v],_[D]]}}else _=Array.from({length:f},Nt);r(O=>{if(!O)return null;const D=new Map;return O.inventory.forEach(v=>D.set(v.id,{...v})),_.forEach(v=>{if(D.has(v.id)){const g=D.get(v.id),{level:C,cards:U}=Bt(g,1);g.level=C,g.cards=U}else D.set(v.id,{...v,level:1,cards:0})}),{...O,currency:O.currency-A,inventory:Array.from(D.values())}}),u(_)},T=()=>p?[...p].sort((A,_)=>{const O={[S.Mythic]:5,[S.SSR]:4,[S.SR]:3,[S.R]:2,[S.N]:1};return(O[_.rarity]||0)-(O[A.rarity]||0)}).slice(0,60):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ìƒì "}),e.jsx("p",{className:"text-gray-400",children:"ë³´ì„ì„ êµ¬ë§¤í•˜ì—¬ ëª¨í—˜ì„ ê³„ì†í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-purple-400",children:"ê¶ê·¹ê¸° ë½‘ê¸°"}),e.jsxs("div",{className:"flex justify-around items-center gap-2",children:[e.jsxs("button",{onClick:()=>P(1),disabled:!t||t.currency<j,className:"flex-1 px-4 py-2 rounded-lg bg-purple-600 text-white font-bold hover:bg-purple-500 transition-colors disabled:opacity-50 text-sm",children:["1íšŒ (",j,")"]}),e.jsxs("button",{onClick:()=>P(10),disabled:!t||t.currency<j*10,className:"flex-1 px-4 py-2 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-colors disabled:opacity-50 text-sm",children:["10íšŒ (",j*10,")"]})]})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-green-400",children:"ì¥ë¹„ ë½‘ê¸°"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>I(1),disabled:!t||t.currency<w,className:"px-4 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-500 transition-colors disabled:opacity-50 text-sm",children:["1íšŒ (",w,")"]}),e.jsxs("button",{onClick:()=>I(10),disabled:!t||t.currency<w*10,className:"px-4 py-2 rounded-lg bg-teal-600 text-white font-bold hover:bg-teal-500 transition-colors disabled:opacity-50 text-sm",children:["10íšŒ (",w*10,")"]}),e.jsx("button",{onClick:()=>I(1e4),disabled:!t||t.currency<k,className:"col-span-2 px-4 py-2 rounded-lg bg-gradient-to-r from-emerald-600 to-green-700 text-white font-bold hover:from-emerald-500 transition-colors disabled:opacity-50 text-sm border border-green-400",children:"10000íšŒ (ì‹ í™” 10ê°œ í™•ì •)"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë³´ì„ íŒ©"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Ta.map(f=>e.jsxs("div",{className:`relative p-4 rounded-lg bg-gradient-to-br ${f.color} text-white shadow-lg text-center flex flex-col justify-between`,children:[f.bestValue&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"BEST VALUE"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:f.name}),e.jsxs("p",{className:"text-2xl font-extrabold my-2",children:[f.amount.toLocaleString()," ë³´ì„"]}),e.jsx("p",{className:"text-sm font-semibold",children:f.price})]}),e.jsxs("button",{onClick:()=>b(f),className:"mt-3 w-full p-2 rounded-md bg-white/20 font-semibold hover:bg-white/30 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5"})," êµ¬ë§¤"]})]},f.amount))})]}),c&&e.jsx(Ea,{onConfirm:E,onClose:()=>d(!1)}),s&&e.jsx(ka,{pack:s,onConfirm:()=>B(s.amount),onClose:()=>a(null)}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg max-w-lg w-full",onClick:f=>f.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-4 text-purple-300",children:"ê¶ê·¹ê¸° íšë“!"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map((f,A)=>e.jsxs("div",{className:"bg-gray-900 p-2 rounded border border-gray-700",children:[e.jsx("p",{className:"font-bold text-sm",children:f.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[f.rarity," ë“±ê¸‰"]})]},A))}),e.jsx("button",{onClick:()=>x(null),className:"w-full mt-4 p-2 bg-cyan-600 rounded",children:"í™•ì¸"})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>u(null),children:e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-4 text-green-300",children:"ì¥ë¹„ íšë“!"}),e.jsxs("div",{className:"text-center text-gray-400 mb-2",children:[p.length,"ê°œì˜ ì¥ë¹„ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤."]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:T().map((f,A)=>e.jsxs("div",{className:`bg-gray-900 p-2 rounded border ${f.rarity===S.Mythic?"border-fuchsia-500":f.rarity===S.SSR?"border-yellow-400":"border-gray-700"}`,children:[e.jsx("p",{className:"font-bold text-sm truncate",children:f.name}),e.jsx("p",{className:`text-xs ${f.rarity===S.Mythic?"text-fuchsia-400":f.rarity===S.SSR?"text-yellow-400":"text-gray-400"}`,children:f.rarity})]},A))}),p.length>60&&e.jsxs("p",{className:"text-center text-gray-500 mt-2 italic",children:["...ë° ê¸°íƒ€ ",p.length-60,"ê°œ ì•„ì´í…œ (ì¸ë²¤í† ë¦¬ë¡œ ì§€ê¸‰ë¨)"]}),e.jsx("button",{onClick:()=>u(null),className:"w-full mt-4 p-2 bg-cyan-600 rounded",children:"í™•ì¸"})]})})]})},Ma=({guilds:t,onCreateGuild:r,onJoinGuild:s})=>{const[a,n]=m.useState(""),i=c=>{c.preventDefault(),a.trim()&&(r(a.trim()),n(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ê¸¸ë“œ ì°¾ê¸°"}),e.jsx("p",{className:"text-gray-400",children:"ë™ë£Œë“¤ê³¼ í•¨ê»˜í•˜ê¸° ìœ„í•œ ì—¬ì •ì„ ì‹œì‘í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ìƒì„±"}),e.jsxs("form",{onSubmit:i,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:c=>n(c.target.value),placeholder:"ìƒˆ ê¸¸ë“œ ì´ë¦„",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:border-cyan-500",maxLength:20}),e.jsx("button",{type:"submit",disabled:!a.trim(),className:"px-4 py-2 bg-indigo-600 font-semibold rounded-md hover:bg-indigo-500 disabled:opacity-50",children:"ìƒì„±"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ëª©ë¡"}),e.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto pr-2",children:t.length>0?t.map(c=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ê¸¸ë“œì¥: ",c.creator," | ë©¤ë²„: ",c.members.length,"ëª…"]})]}),e.jsx("button",{onClick:()=>s(c.id),className:"px-4 py-2 bg-cyan-600 font-semibold rounded-md hover:bg-cyan-500",children:"ê°€ì…"})]},c.id)):e.jsx("p",{className:"text-center text-gray-500",children:"ìƒì„±ëœ ê¸¸ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸¸ë“œë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”!"})})]})]})},Ia=({guild:t,currentUser:r,playerState:s,onLeaveGuild:a,onSendMessage:n,onAttackRaid:i})=>{const[c,d]=m.useState(""),o=m.useRef(null);m.useEffect(()=>{var u;(u=o.current)==null||u.scrollIntoView({behavior:"smooth"})},[t.chat]);const x=u=>{u.preventDefault(),c.trim()&&(n(c.trim()),d(""))},p=t.raidBoss.hp/t.raidBoss.maxHp*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center relative",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:t.name}),e.jsxs("p",{className:"text-gray-400",children:["ê¸¸ë“œì¥: ",t.creator]}),e.jsx("button",{onClick:a,className:"absolute top-0 right-0 text-sm bg-red-600 px-3 py-1 rounded-md hover:bg-red-500",children:"ê¸¸ë“œ íƒˆí‡´"})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-center text-red-400",children:"ê¸¸ë“œ ë ˆì´ë“œ"}),e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:t.raidBoss.imageUrl,alt:t.raidBoss.name,className:"w-48 h-48 mx-auto rounded-lg object-cover border-4 border-red-800"}),e.jsx("h3",{className:"text-2xl font-bold mt-2",children:t.raidBoss.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["ìµœê·¼ ê³µê²©ì: ",t.raidBoss.lastAttackedBy||"ì—†ìŒ"]}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-6 mt-4 relative overflow-hidden border-2 border-black/50",children:[e.jsx("div",{className:"bg-red-600 h-full transition-all duration-500",style:{width:`${p}%`}}),e.jsxs("span",{className:"absolute inset-0 text-center text-sm font-bold text-white flex items-center justify-center",children:[t.raidBoss.hp.toLocaleString()," / ",t.raidBoss.maxHp.toLocaleString()]})]}),e.jsx("button",{onClick:i,disabled:t.raidBoss.hp<=0,className:"mt-4 px-8 py-3 rounded-lg bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:t.raidBoss.hp>0?"ê³µê²©!":"ë³´ìŠ¤ ì²˜ì¹˜ ì™„ë£Œ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 p-4 bg-gray-800/50 rounded-lg flex flex-col",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ì±„íŒ…"}),e.jsxs("div",{className:"flex-grow bg-gray-900/50 p-2 rounded-md h-64 overflow-y-auto",children:[t.chat.map((u,j)=>e.jsx("div",{className:"mb-2 text-sm",children:u.username==="System"?e.jsxs("p",{className:"text-cyan-400 italic",children:["-- ",u.message," --"]}):e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold",style:{color:u.username===r?"#FBBF24":"white"},children:[u.username,":"]})," ",u.message]})},j)),e.jsx("div",{ref:o})]}),e.jsxs("form",{onSubmit:x,className:"flex gap-2 mt-3",children:[e.jsx("input",{type:"text",value:c,onChange:u=>d(u.target.value),placeholder:"ë©”ì‹œì§€ ì…ë ¥...",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:border-cyan-500"}),e.jsx("button",{type:"submit",className:"p-2 bg-cyan-600 rounded-md hover:bg-cyan-500",children:e.jsx(na,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-3",children:["ê¸¸ë“œì› (",t.members.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:t.members.map(u=>e.jsx("div",{className:"p-2 bg-gray-700/50 rounded",children:e.jsx("p",{className:"font-semibold",children:u.username})},u.username))})]})]})]})},Ra=t=>{const{playerState:r,allGuilds:s,currentUser:a}=t,n=s.find(i=>i.id===r.guildId);return n?e.jsx(Ia,{guild:n,currentUser:a,...t}):e.jsx(Ma,{guilds:s,...t})},St=({character:t,onClick:r,canAct:s,isAttacker:a,isTargetable:n})=>{const i=t.currentHp/t.hp*100,c=t.ultimateGauge/t.maxUltimateGauge*100,d=t.currentHp<=0,o=a?"ring-4 ring-yellow-400 scale-110":n?"ring-4 ring-red-500 cursor-pointer hover:ring-red-400":s?"ring-4 ring-green-500 cursor-pointer hover:ring-green-400":"";return e.jsxs("div",{className:`relative transition-all duration-300 ${a?"z-10":""}`,onClick:r,children:[e.jsx("div",{className:`${o} rounded-lg ${d?"opacity-50 grayscale":""}`,children:e.jsx(Ge,{character:t})}),e.jsxs("div",{className:`absolute -bottom-7 left-1 right-1 transition-opacity ${d?"opacity-50":""}`,children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 border-2 border-black/50 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${i}%`}})}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 border border-black/50 mt-1 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full",style:{width:`${c}%`}})})]})]})},La=({playerTeam:t,enemyTeam:r,onCombatEnd:s,difficulty:a,ultimateSkills:n,inventory:i,reward:c})=>{const[d,o]=m.useState([]),[x,p]=m.useState("INITIALIZING"),[u,j]=m.useState("SELECT_ATTACKER"),[w,k]=m.useState(null),[b,E]=m.useState(new Set),[B,P]=m.useState([]),[I,T]=m.useState("ì „íˆ¬ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤..."),[f,A]=m.useState(null),_=new Map(Be.map(G=>[G.id,G])),O=new Map(n.map(G=>[G.id,G]));m.useEffect(()=>{const G=(h,N)=>{const y=N&&h.equippedEquipmentId?i.find(R=>R.id===h.equippedEquipmentId):void 0,M=ut(h,y),L=N?O.get(h.equippedUltimateId)||_.get(h.equippedUltimateId)||_.get(1):_.get(h.equippedUltimateId)||_.get(1);return{...h,...M,currentHp:M.hp,isPlayer:N,uniqueId:`${h.id}-${Math.random()}`,ultimateGauge:0,maxUltimateGauge:100,ultimateSkill:L}},z=t.map(h=>G(h,!0)),H=r.map(h=>G(h,!1)),ae=z.reduce((h,N)=>h+N.speed,0),l=H.reduce((h,N)=>h+N.speed,0);o([...z,...H]),ae>=l?(p("player"),T("ë‹¹ì‹ ì˜ í„´ì…ë‹ˆë‹¤! í–‰ë™í•  ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”.")):(p("enemy"),T("ì ì˜ í„´ì…ë‹ˆë‹¤...")),P(["ì „íˆ¬ ì‹œì‘!"])},[t,r,n,i]);const D=G=>{P(z=>[G,...z.slice(0,4)])},v=(G,z)=>{let H=!1;return o(ae=>ae.map(l=>{if(l.uniqueId===G){const h=Math.max(0,l.currentHp-z);return h===0&&(H=!0),{...l,currentHp:h,ultimateGauge:Math.min(l.maxUltimateGauge,l.ultimateGauge+30)}}return l})),H},g=G=>{const z=new Set(b).add(G.uniqueId);E(z),k(null),d.filter(ae=>ae.isPlayer&&ae.currentHp>0&&!z.has(ae.uniqueId)).length===0?(p("enemy"),T("ì ì˜ í„´ì…ë‹ˆë‹¤..."),E(new Set)):(j("SELECT_ATTACKER"),T("í–‰ë™í•  ë‹¤ë¥¸ ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”."))},C=m.useCallback((G,z)=>{const H=G.attack;D(`${G.name}ì´(ê°€) ${z.name}ì—ê²Œ ${H}ì˜ í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤!`),v(z.uniqueId,H),o(ae=>ae.map(l=>l.uniqueId===G.uniqueId?{...l,ultimateGauge:Math.min(l.maxUltimateGauge,l.ultimateGauge+40)}:l)),g(G)},[d,b]),U=(G,z)=>{const H=G.ultimateSkill;let ae=`${G.name}ì´(ê°€) ê¶ê·¹ê¸° [${H.name}] (ì„)ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!`;D(ae);const l=(H.level-1)*.25+1;z.forEach(h=>{switch(H.effectType){case we.SINGLE_TARGET_DAMAGE:case we.AREA_OF_EFFECT_DAMAGE:const N=Math.floor(G.attack*H.power*l);v(h.uniqueId,N);break;case we.HEAL_SELF:case we.HEAL_TEAM:o(y=>y.map(M=>{if(M.uniqueId===h.uniqueId){const L=Math.min(M.hp,M.currentHp+H.power*l);return{...M,currentHp:L}}return M}));break}}),o(h=>h.map(N=>N.uniqueId===G.uniqueId?{...N,ultimateGauge:0}:N)),g(G)};m.useEffect(()=>{const G=d.filter(H=>!H.isPlayer&&H.currentHp>0),z=d.filter(H=>H.isPlayer&&H.currentHp>0);G.length===0&&d.length>0?(A("win"),T("ìŠ¹ë¦¬!")):z.length===0&&d.length>0&&(A("lose"),T("íŒ¨ë°°..."))},[d]),m.useEffect(()=>{if(x!=="enemy"||f)return;(async()=>{const z=d.filter(H=>!H.isPlayer&&H.currentHp>0);for(const H of z){if(await new Promise(N=>setTimeout(N,1200)),f)break;const ae=d.filter(N=>N.isPlayer&&N.currentHp>0);if(ae.length===0)break;const l=ae[Math.floor(Math.random()*ae.length)],h=H.attack;D(`${H.name}ì´(ê°€) ${l.name}ì—ê²Œ ${h}ì˜ í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤!`),v(l.uniqueId,h),o(N=>N.map(y=>y.uniqueId===H.uniqueId?{...y,ultimateGauge:Math.min(y.maxUltimateGauge,y.ultimateGauge+40)}:y))}await new Promise(H=>setTimeout(H,1e3)),f||(p("player"),T("ë‹¹ì‹ ì˜ í„´ì…ë‹ˆë‹¤! í–‰ë™í•  ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”."),j("SELECT_ATTACKER"),E(new Set))})()},[x,f]);const $=G=>{x!=="player"||f||b.has(G.uniqueId)||(k(G.uniqueId),j("SELECT_ACTION"),T(`${G.name}ì˜ í–‰ë™ì„ ì„ íƒí•˜ì„¸ìš”.`))},se=G=>{if(u!=="SELECT_TARGET"||!w||f||G.currentHp<=0)return;const z=d.find(H=>H.uniqueId===w);z&&C(z,G)},ue=G=>{if(u!=="SELECT_ACTION"||!w)return;const z=d.find(H=>H.uniqueId===w);if(G==="attack")j("SELECT_TARGET"),T(`${z.name}(ìœ¼)ë¡œ ê³µê²©í•  ì ì„ ì„ íƒí•˜ì„¸ìš”.`);else{const H=z.ultimateSkill;let ae=[];switch(H.targetType){case Ae.ENEMY_SINGLE:j("SELECT_TARGET"),T("ê¶ê·¹ê¸°ë¡œ ê³µê²©í•  ì ì„ ì„ íƒí•˜ì„¸ìš”.");return;case Ae.ENEMY_ALL:ae=d.filter(l=>!l.isPlayer&&l.currentHp>0);break;case Ae.ALLY_SELF:ae=[z];break;case Ae.ALLY_ALL:ae=d.filter(l=>l.isPlayer&&l.currentHp>0);break}U(z,ae)}},Re=()=>{window.confirm("ì •ë§ ë„ë§ì¹˜ì‹œê² ìŠµë‹ˆê¹Œ? (íŒ¨ë°°ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤)")&&s("lose")},je=d.find(G=>G.uniqueId===w);return e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 space-y-4 relative",children:[e.jsxs("button",{onClick:Re,className:"absolute top-4 right-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg border border-gray-500 shadow-lg text-sm font-bold z-50 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸƒ"})," ë„ë§ê°€ê¸°"]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-red-400 mb-8",children:"ì  íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:d.filter(G=>!G.isPlayer).map(G=>e.jsx(St,{character:G,isTargetable:u==="SELECT_TARGET"&&G.currentHp>0,onClick:G.currentHp>0?()=>{u==="SELECT_TARGET"&&je&&(je.ultimateSkill.targetType===Ae.ENEMY_SINGLE&&je.ultimateGauge===je.maxUltimateGauge?U(je,[G]):se(G))}:void 0},G.uniqueId))})]}),e.jsxs("div",{className:"w-full max-w-lg min-h-[14rem] bg-black/50 p-3 rounded-lg border border-gray-700 text-center flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-cyan-300 mb-2",children:I}),B.map((G,z)=>e.jsx("p",{className:`transition-opacity duration-300 ${z===0?"text-white":"text-gray-400 text-xs"}`,children:G},z))]}),u==="SELECT_ACTION"&&je&&e.jsxs("div",{className:"flex gap-4 justify-center mt-4",children:[e.jsx("button",{onClick:()=>ue("attack"),className:"px-4 py-2 bg-red-600 rounded hover:bg-red-500",children:"ì¼ë°˜ ê³µê²©"}),e.jsx("button",{onClick:()=>ue("ultimate"),disabled:je.ultimateGauge<je.maxUltimateGauge,className:"px-4 py-2 bg-purple-600 rounded hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed",children:"ê¶ê·¹ê¸° ì‚¬ìš©"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-green-400 mb-8",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:d.filter(G=>G.isPlayer).map(G=>e.jsx(St,{character:G,canAct:x==="player"&&!b.has(G.uniqueId)&&u==="SELECT_ATTACKER"&&G.currentHp>0,isAttacker:w===G.uniqueId,onClick:G.currentHp>0?()=>$(G):void 0},G.uniqueId))})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg text-center shadow-2xl border-2 border-cyan-400",children:[e.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-yellow-400",children:f==="win"?"ìŠ¹ë¦¬!":"íŒ¨ë°°..."}),e.jsx("p",{className:"text-gray-300 mb-6",children:f==="win"?`${c} ë‹¤ì´ì•„ íšë“!`:"íŒ€ì´ ì „ë©¸í–ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>s(f),className:"px-8 py-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"í™•ì¸"})]})})]})};function _a(t){const r=t.hp??t.maxHp??1e5,s=Math.max(100,Math.round(r*.02)),a=5+Math.round(r/1e5*10);return{name:t.name,imageUrl:t.imageUrl,hp:r,attack:s,speed:a,currentHp:r}}const kt=({character:t,isAttacker:r})=>{const s=t.currentHp/t.hp*100,a=t.currentHp<=0,n=r?"ring-4 ring-yellow-400 scale-110":"";return e.jsxs("div",{className:`relative transition-all duration-300 ${r?"z-10":""}`,children:[e.jsx("div",{className:`${n} rounded-lg ${a?"opacity-50 grayscale":""}`,children:e.jsx(Ge,{character:t})}),e.jsxs("div",{className:`absolute -bottom-5 left-1 right-1 transition-opacity ${a?"opacity-50":""}`,children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 border-2 border-black/50 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${s}%`}})}),"ultimateGauge"in t&&e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 border border-black/50 mt-1 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full",style:{width:`${t.ultimateGauge/t.maxUltimateGauge*100}%`}})})]})]})},Ga=({playerTeam:t,boss:r,ultimateSkills:s,inventory:a,onCombatEnd:n})=>{const[i,c]=m.useState([]),[d,o]=m.useState(null),[x,p]=m.useState(0),[u]=m.useState(10),[j,w]=m.useState([]),[k,b]=m.useState(!0),E=new Map(Be.map(T=>[T.id,T])),B=new Map(s.map(T=>[T.id,T]));m.useEffect(()=>{const T=f=>{const A=f.equippedEquipmentId?a.find(D=>D.id===f.equippedEquipmentId):void 0,_=ut(f,A),O=B.get(f.equippedUltimateId)||E.get(f.equippedUltimateId)||E.get(1);return{...f,..._,currentHp:_.hp,isPlayer:!0,uniqueId:`${f.id}-${Math.random()}`,ultimateGauge:0,maxUltimateGauge:100,ultimateSkill:O}};c(t.map(T)),o(_a(r)),w(["ë ˆì´ë“œ ë³´ìŠ¤ ì¶œí˜„!"]),b(!1)},[t,r,s,a]);const P=T=>{w(f=>[T,...f.slice(0,4)])},I=()=>{if(!d)return;const T=r.hp-d.currentHp;P(`ì „íˆ¬ ì¢…ë£Œ! ì´ ${T.toLocaleString()}ì˜ í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤.`),setTimeout(()=>{n(T)},2e3)};return m.useEffect(()=>{if(k||!d)return;const T=i.filter(O=>O.currentHp>0);if(x>=u||T.length===0||d.currentHp<=0){I();return}const _=setTimeout(async()=>{b(!0),p(O=>O+1);for(const O of T){if(d.currentHp<=0)break;if(await new Promise(D=>setTimeout(D,600)),O.ultimateGauge>=O.maxUltimateGauge){const D=O.ultimateSkill;P(`${O.name}ì´(ê°€) ê¶ê·¹ê¸° [${D.name}] (ì„)ë¥¼ ì‚¬ìš©!`);const v=(D.level-1)*.25+1,g=Math.floor(O.attack*D.power*v);o(C=>{if(!C)return null;const U=Math.max(0,C.currentHp-g);return{...C,currentHp:U}}),c(C=>C.map(U=>U.uniqueId===O.uniqueId?{...U,ultimateGauge:0}:U))}else{const D=O.attack;P(`${O.name}ì´(ê°€) ë³´ìŠ¤ë¥¼ ê³µê²©! ${D} í”¼í•´!`),o(v=>{if(!v)return null;const g=Math.max(0,v.currentHp-D);return{...v,currentHp:g}}),c(v=>v.map(g=>g.uniqueId===O.uniqueId?{...g,ultimateGauge:Math.min(g.maxUltimateGauge,g.ultimateGauge+40)}:g))}}if(d.currentHp>0){await new Promise(D=>setTimeout(D,1e3));const O=i.filter(D=>D.currentHp>0);if(O.length>0){const D=O[Math.floor(Math.random()*O.length)],v=d.attack;P(`ë³´ìŠ¤ê°€ ${D.name}ì—ê²Œ ${v} í”¼í•´ë¥¼ ì…í˜”ìŠµë‹ˆë‹¤!`),c(g=>g.map(C=>{if(C.uniqueId===D.uniqueId){const U=Math.max(0,C.currentHp-v);return{...C,currentHp:U,ultimateGauge:Math.min(C.maxUltimateGauge,C.ultimateGauge+30)}}return C}))}}b(!1)},1e3);return()=>clearTimeout(_)},[x,k,d,i]),d?e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 space-y-4",children:[e.jsxs("div",{className:"w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-400 mb-8",children:"ë ˆì´ë“œ ë³´ìŠ¤"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-48",children:e.jsx(kt,{character:d})})})]}),e.jsx("div",{className:"w-full max-w-lg min-h-[14rem] bg-black/50 p-3 rounded-lg border border-gray-700 text-center flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xl font-bold text-cyan-300 mb-2",children:["Turn ",x," / ",u]}),j.map((T,f)=>e.jsx("p",{className:`transition-opacity duration-300 ${f===0?"text-white":"text-gray-400 text-xs"}`,children:T},f))]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-green-400 mb-8",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:i.map(T=>e.jsx(kt,{character:T},T.uniqueId))})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})},Oa=()=>{const[t,r]=m.useState(null),[s,a]=m.useState(null),[n,i]=m.useState("login"),[c,d]=m.useState(null),[o,x]=m.useState(null),[p,u]=m.useState([]);m.useEffect(()=>{t&&p.length===0&&u([{id:"guild-1",name:"ìµœê°•ìš©ë³‘ë‹¨",creator:"AcePlayer",members:[{username:"AcePlayer",joinedAt:new Date().toISOString()}],chat:[{username:"System",message:"ìµœê°•ìš©ë³‘ë‹¨ ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString()}],raidBoss:{...Ze}},{id:"guild-2",name:"ì–´ë‘ ì˜ìì†ë“¤",creator:"ShadowCat",members:[{username:"ShadowCat",joinedAt:new Date().toISOString()}],chat:[{username:"System",message:"ì–´ë‘ ì˜ìì†ë“¤ ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString()}],raidBoss:{...Ze,name:"ì‹¬ì—°ì˜ ê°ì‹œì",hp:75e6,maxHp:75e6}}])},[t]),m.useEffect(()=>{if(t){const v=localStorage.getItem(`playerState_${t}`);if(v)try{const g=JSON.parse(v);a({...He,...g,inventory:g.inventory||He.inventory,ultimateSkills:g.ultimateSkills||He.ultimateSkills})}catch(g){console.error("Failed to parse save state",g),a(He)}else a(He)}else a(null),i("login")},[t]),m.useEffect(()=>{s&&t&&localStorage.setItem(`playerState_${t}`,JSON.stringify(s))},[s,t]);const j=v=>{r(v),i("main")},w=()=>{r(null)},k=v=>{i(v)},b=(v,g)=>{const U={very_easy:100,easy:300,normal:800,hard:2e3,very_hard:5e3,hell:15e3,hardcore:5e4,boss:1e5}[g];d({opponents:v,difficulty:g,reward:U})},E=v=>{v==="win"&&s&&c&&a({...s,currency:s.currency+c.reward}),d(null)},B=(v,g)=>{a(C=>{if(!C)return null;const U=C.characters.map(se=>se.id===v?{...se,equippedUltimateId:g}:se),$=C.teams.map(se=>({...se,characters:se.characters.map(ue=>ue&&ue.id===v?{...ue,equippedUltimateId:g}:ue)}));return{...C,characters:U,teams:$}})},P=(v,g)=>{a(C=>{if(!C)return null;const U=C.characters.map(se=>se.id===v?{...se,equippedEquipmentId:g}:se),$=C.teams.map(se=>({...se,characters:se.characters.map(ue=>ue&&ue.id===v?{...ue,equippedEquipmentId:g}:ue)}));return{...C,characters:U,teams:$}})},I=v=>{if(!t||!s||s.guildId)return;const g={id:`guild-${Date.now()}`,name:v,creator:t,members:[{username:t,joinedAt:new Date().toISOString()}],chat:[{username:"System",message:`${v} ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}],raidBoss:{...Ze}};u(C=>[...C,g]),a(C=>C?{...C,guildId:g.id}:null)},T=v=>{!t||!s||s.guildId||(u(g=>g.map(C=>C.id===v?{...C,members:[...C.members,{username:t,joinedAt:new Date().toISOString()}],chat:[...C.chat,{username:"System",message:`${t}ë‹˜ì´ ê°€ì…í–ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}]}:C)),a(g=>g?{...g,guildId:v}:null))},f=()=>{if(!t||!s||!s.guildId)return;const v=s.guildId;u(g=>g.map(C=>C.id===v?{...C,members:C.members.filter(U=>U.username!==t),chat:[...C.chat,{username:"System",message:`${t}ë‹˜ì´ íƒˆí‡´í–ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}]}:C)),a(g=>g?{...g,guildId:null}:null)},A=v=>{if(!t||!s||!s.guildId)return;const g=s.guildId,C={username:t,message:v,timestamp:new Date().toISOString()};u(U=>U.map($=>$.id===g?{...$,chat:[...$.chat,C]}:$))},_=()=>{if(!s||!s.guildId)return;const v=p.find(g=>g.id===s.guildId);v&&v.raidBoss.hp>0&&x({raidBoss:v.raidBoss})},O=v=>{if(!t||!s||!s.guildId)return;const g=s.guildId;let C=!1;if(u(U=>U.map($=>{if($.id===g){const se=Math.max(0,$.raidBoss.hp-v);se===0&&$.raidBoss.hp>0&&(C=!0);const ue=C?[...$.chat,{username:"System",message:`${t}ë‹˜ì´ ë ˆì´ë“œ ë³´ìŠ¤ì—ê²Œ ìµœí›„ì˜ ì¼ê²©ì„ ê°€í–ˆìŠµë‹ˆë‹¤!`,timestamp:new Date().toISOString()}]:$.chat;return{...$,raidBoss:{...$.raidBoss,hp:se,lastAttackedBy:t},chat:ue}}return $})),C){const U=p.find($=>$.id===g);U&&a($=>$?{...$,currency:$.currency+U.raidBoss.reward}:null)}x(null)},D=()=>{var v,g;if(!t||!s)return e.jsx(zs,{onLogin:j});if(c){const C=((v=s.teams[0])==null?void 0:v.characters.filter(U=>U!==null))||[];return e.jsx(La,{playerTeam:C,enemyTeam:c.opponents,difficulty:c.difficulty,reward:c.reward,ultimateSkills:s.ultimateSkills||[],inventory:s.inventory||[],onCombatEnd:E})}if(o){const C=((g=s.teams[0])==null?void 0:g.characters.filter(U=>U!==null))||[];return e.jsx(Ga,{playerTeam:C,boss:o.raidBoss,ultimateSkills:s.ultimateSkills||[],inventory:s.inventory||[],onCombatEnd:O})}switch(n){case"main":return e.jsx(yt,{playerState:s,currentUser:t,onLogout:w,onNavigate:k});case"gacha":return e.jsx(xa,{playerState:s,setPlayerState:a});case"team":return e.jsx(ya,{playerState:s,setPlayerState:a,onEquipUltimate:B,onEquipEquipment:P});case"battle":return e.jsx(Na,{playerState:s,onStartCombat:b});case"social":return e.jsx(Sa,{friends:s.friends});case"shop":return e.jsx(Aa,{playerState:s,setPlayerState:a});case"guild":return e.jsx(Ra,{playerState:s,allGuilds:p,currentUser:t,onCreateGuild:I,onJoinGuild:T,onLeaveGuild:f,onSendMessage:A,onAttackRaid:_});default:return e.jsx(yt,{playerState:s,currentUser:t,onLogout:w,onNavigate:k})}};return e.jsx(ke,{className:"min-h-screen bg-gray-900 text-white font-sans selection:bg-cyan-500 selection:text-white pb-20 md:pb-0",children:e.jsxs("div",{className:"max-w-2xl mx-auto min-h-screen bg-gray-900 shadow-2xl overflow-hidden relative",children:[e.jsx("main",{className:"p-4 pb-24",children:D()}),t&&!c&&!o&&e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-2 flex justify-around items-center max-w-2xl mx-auto z-50",children:[e.jsx("button",{onClick:()=>i("main"),className:`p-2 rounded-lg ${n==="main"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Qs,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("team"),className:`p-2 rounded-lg ${n==="team"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(ra,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("battle"),className:`p-2 rounded-lg ${n==="battle"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Js,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("guild"),className:`p-2 rounded-lg ${n==="guild"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Zs,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("shop"),className:`p-2 rounded-lg ${n==="shop"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Ut,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("social"),className:`p-2 rounded-lg ${n==="social"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(sa,{className:"w-6 h-6"})})]})]})})},X=40,lt=10,Et=30,Tt=3,Da=6,Pa=1.5,Ua=1,Ba=1.5,Fa=1.2,$e=60*(Math.PI/180),Pe=640,Ha=.0037,$a=40,qa=600,Va=90,Wa=Math.PI/2,Ya=.1,za=.3,Ka=1,Ja=0,Xa=.6,Za=2e4,Qa=60,er=300,tr=600,sr={MOVE_FORWARD:"KeyW",MOVE_BACKWARD:"KeyS",MOVE_LEFT:"KeyA",MOVE_RIGHT:"KeyD",RUN:"ShiftLeft",SNEAK:"ControlLeft",INTERACT:"KeyE",FLASHLIGHT:"KeyF"},te=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,9,0,4,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,8,8,8,8,8,8,8,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,5,5,0,0,0,0,0,0,1,8,8,8,8,8,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,10,10,10,2,1],[1,5,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,6,0,1,0,0,7,7,1,0,0,1,7,7,7,1,0,0,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,1,0,0,7,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1],[1,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,1],[1,0,7,7,7,0,0,0,0,1,7,7,1,0,0,1,10,0,1,1,0,0,1,10,10,1,1,0,0,1,10,10,1,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,7,7,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,6,0,0,1,0,0,1,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,7,7,7,0,0,0,0,1,10,10,1,0,0,1,2,0,0,1,0,0,1,0,0,0,1,0,0,1,5,5,5,1,2,0,6,0,1],[1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,7,7,0,0,0,0,7,7,0,0,7,7,0,0,7,7,0,0,7,7,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,7,7,7,7,7,0,0,1,0,7,7,0,0,7,7,0,0,7,7,0,0,7,7,0,0,0,2,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1],[1,5,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1],[1,5,0,6,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,2,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,1,1,1,0,0,1,0,1,0,0,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1]],ar=te[0].length*X,rr=te.length*X;class Z{constructor(){this.ctx=null,this.masterGain=null,this.windNode=null,this.windGain=null,this.lastBreathTime=0}static getInstance(){return Z.instance||(Z.instance=new Z),Z.instance}init(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=.5,this.masterGain.connect(this.ctx.destination)),this.ctx.state==="suspended"&&this.ctx.resume()}resume(){this.ctx&&this.ctx.state==="suspended"?this.ctx.resume():this.ctx||this.init()}createNoiseBuffer(){if(!this.ctx)throw new Error("AudioContext not initialized");const r=this.ctx.sampleRate*2,s=this.ctx.createBuffer(1,r,this.ctx.sampleRate),a=s.getChannelData(0);for(let n=0;n<r;n++)a[n]=Math.random()*2-1;return s}startWind(){if(!this.ctx||!this.masterGain||this.windNode)return;const r=this.createNoiseBuffer();this.windNode=this.ctx.createBufferSource(),this.windNode.buffer=r,this.windNode.loop=!0;const s=this.ctx.createBiquadFilter();s.type="lowpass",s.frequency.value=400,s.Q.value=1,this.windGain=this.ctx.createGain(),this.windGain.gain.value=.05;const a=this.ctx.createOscillator();a.frequency.value=.1;const n=this.ctx.createGain();n.gain.value=.02,a.connect(n),n.connect(this.windGain.gain),a.start(),this.windNode.connect(s),s.connect(this.windGain),this.windGain.connect(this.masterGain),this.windNode.start()}stopWind(){this.windNode&&(this.windNode.stop(),this.windNode=null)}playCrow(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=this.ctx.createOscillator();s.type="sawtooth",s.frequency.setValueAtTime(600,r),s.frequency.exponentialRampToValueAtTime(400,r+.4);const a=this.ctx.createGain();a.gain.setValueAtTime(0,r),a.gain.linearRampToValueAtTime(.1,r+.05),a.gain.exponentialRampToValueAtTime(.001,r+.5);const n=this.ctx.createOscillator();n.frequency.value=30;const i=this.ctx.createGain();i.gain.value=200,n.connect(i),i.connect(s.frequency),s.connect(a),a.connect(this.masterGain),s.start(r),n.start(r),s.stop(r+.6),n.stop(r+.6)}playCarCooling(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=3+Math.floor(Math.random()*3);for(let a=0;a<s;a++){const n=r+Math.random()*2,i=this.ctx.createOscillator();i.type="triangle",i.frequency.value=2e3+Math.random()*500;const c=this.ctx.createGain();c.gain.setValueAtTime(.05,n),c.gain.exponentialRampToValueAtTime(.001,n+.05),i.connect(c),c.connect(this.masterGain),i.start(n),i.stop(n+.1)}}playFlashlightRoll(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime;[0,.2,.35,.45].forEach((a,n)=>{const i=r+a,c=this.createNoiseBuffer(),d=this.ctx.createBufferSource();d.buffer=c;const o=this.ctx.createBiquadFilter();o.type="lowpass",o.frequency.value=600-n*100;const x=this.ctx.createGain();x.gain.setValueAtTime(.2/(n+1),i),x.gain.exponentialRampToValueAtTime(.001,i+.1),d.connect(o),o.connect(x),x.connect(this.masterGain),d.start(i)}),setTimeout(()=>{if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,n=this.ctx.createOscillator();n.frequency.setValueAtTime(80,a),n.frequency.exponentialRampToValueAtTime(40,a+.1);const i=this.ctx.createGain();i.gain.setValueAtTime(.3,a),i.gain.exponentialRampToValueAtTime(.001,a+.2),n.connect(i),i.connect(this.masterGain),n.start(a),n.stop(a+.2)},600)}playBell(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime;[220,440,660,880].forEach((s,a)=>{const n=this.ctx.createOscillator(),i=this.ctx.createGain();n.frequency.value=s,n.detune.value=Math.random()*20-10,i.gain.setValueAtTime(0,r),i.gain.linearRampToValueAtTime(.1/(a+1),r+.1),i.gain.exponentialRampToValueAtTime(.001,r+4),n.connect(i),i.connect(this.masterGain),n.start(r),n.stop(r+4)})}playBreathing(){if(!this.ctx||!this.masterGain)return;const r=Date.now();if(r-this.lastBreathTime<2500)return;this.lastBreathTime=r;const s=this.ctx.currentTime,a=this.createNoiseBuffer(),n=this.ctx.createBufferSource();n.buffer=a;const i=this.ctx.createBiquadFilter();i.type="lowpass",i.frequency.value=400;const c=this.ctx.createGain();c.gain.setValueAtTime(0,s),c.gain.linearRampToValueAtTime(.05,s+1),c.gain.linearRampToValueAtTime(0,s+2),n.connect(i),i.connect(c),c.connect(this.masterGain),n.start(s),n.stop(s+2.5)}playFootstep(r,s=1){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,n=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=n;const c=this.ctx.createBiquadFilter();c.type="lowpass",r==="DIRT"?c.frequency.value=200:r==="WOOD"?c.frequency.value=800:r==="WATER"&&(c.frequency.value=1e3,c.Q.value=5);const d=this.ctx.createGain();d.gain.setValueAtTime(.15*s,a),d.gain.exponentialRampToValueAtTime(.001,a+.1),i.connect(c),c.connect(d),d.connect(this.masterGain),i.start(a),i.stop(a+.1)}playGhostFootstep(r){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,a=this.createNoiseBuffer(),n=this.ctx.createBufferSource();n.buffer=a;const i=this.ctx.createBiquadFilter();i.type="lowpass";let c=.1,d=.1;if(r==="SOFT")i.frequency.value=150,c=.05;else if(r==="NORMAL")i.frequency.value=300,c=.15;else{i.frequency.value=500,c=.4,d=.15;const x=this.ctx.createOscillator();x.frequency.value=60;const p=this.ctx.createGain();p.gain.setValueAtTime(.2,s),p.gain.exponentialRampToValueAtTime(.001,s+d),x.connect(p),p.connect(this.masterGain),x.start(s),x.stop(s+d)}const o=this.ctx.createGain();o.gain.setValueAtTime(c,s),o.gain.exponentialRampToValueAtTime(.001,s+d),n.connect(i),i.connect(o),o.connect(this.masterGain),n.start(s),n.stop(s+d)}playJumpScare(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=this.ctx.createOscillator();s.type="sawtooth",s.frequency.setValueAtTime(1500,r),s.frequency.linearRampToValueAtTime(400,r+.3);const a=this.ctx.createGain();a.gain.setValueAtTime(.8,r),a.gain.exponentialRampToValueAtTime(.001,r+.4);const n=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=n;const c=this.ctx.createBiquadFilter();c.type="bandpass",c.frequency.value=2e3,c.Q.value=5;const d=this.ctx.createGain();d.gain.setValueAtTime(.8,r),d.gain.exponentialRampToValueAtTime(.001,r+.5),s.connect(a),a.connect(this.masterGain),i.connect(c),c.connect(d),d.connect(this.masterGain),s.start(r),s.stop(r+.4),i.start(r),i.stop(r+.5)}playClick(r){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,a=this.ctx.createOscillator();a.type="square",a.frequency.setValueAtTime(r?1200:800,s);const n=this.ctx.createGain();n.gain.setValueAtTime(.1,s),n.gain.exponentialRampToValueAtTime(.001,s+.05),a.connect(n),n.connect(this.masterGain),a.start(s),a.stop(s+.05)}playBuzz(r=.5){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,a=this.ctx.createOscillator();a.type="sawtooth",a.frequency.value=50+Math.random()*10;const n=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=n;const c=this.ctx.createBiquadFilter();c.type="highpass",c.frequency.value=2e3;const d=this.ctx.createGain();d.gain.value=.05;const o=this.ctx.createGain();o.gain.setValueAtTime(.05,s),o.gain.linearRampToValueAtTime(.08,s+r*.2),o.gain.linearRampToValueAtTime(.02,s+r*.5),o.gain.linearRampToValueAtTime(0,s+r),a.connect(o),i.connect(c),c.connect(d),d.connect(o),o.connect(this.masterGain),a.start(s),a.stop(s+r),i.start(s),i.stop(s+r)}playDrone(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=this.ctx.createOscillator();s.frequency.value=60;const a=this.ctx.createGain();a.gain.setValueAtTime(0,r),a.gain.linearRampToValueAtTime(.05,r+.5),a.gain.linearRampToValueAtTime(0,r+2),s.connect(a),a.connect(this.masterGain),s.start(r),s.stop(r+2)}playItemDrop(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=this.createNoiseBuffer(),a=this.ctx.createBufferSource();a.buffer=s;const n=this.ctx.createBiquadFilter();n.type="highpass",n.frequency.value=1e3;const i=this.ctx.createGain();i.gain.setValueAtTime(.2,r),i.gain.exponentialRampToValueAtTime(.001,r+.1),a.connect(n),n.connect(i),i.connect(this.masterGain),a.start(r)}playSwing(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=this.createNoiseBuffer(),a=this.ctx.createBufferSource();a.buffer=s;const n=this.ctx.createBiquadFilter();n.type="bandpass",n.frequency.setValueAtTime(300,r),n.frequency.linearRampToValueAtTime(1e3,r+.2);const i=this.ctx.createGain();i.gain.setValueAtTime(.2,r),i.gain.linearRampToValueAtTime(0,r+.2),a.connect(n),n.connect(i),i.connect(this.masterGain),a.start(r),a.stop(r+.2)}playHit(){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,s=this.ctx.createOscillator();s.frequency.setValueAtTime(150,r),s.frequency.exponentialRampToValueAtTime(40,r+.1);const a=this.ctx.createGain();a.gain.setValueAtTime(.5,r),a.gain.exponentialRampToValueAtTime(.001,r+.15),s.connect(a),a.connect(this.masterGain),s.start(r),s.stop(r+.15)}}const Ct=["NOTE 1: The camera is the only thing that works here. I don't know why, but seeing them through the lens keeps them at bay... for a while.","NOTE 2: The batteries drain so fast. It's like the darkness eats the power. If the camera dies, I die.","NOTE 3: I saw him in the viewfinder. He wasn't there when I looked with my own eyes. Trust the camera.","NOTE 4: The Janitor took the master keys to the basement boiler room. He said the heat keeps them away. I hope he's right.","NOTE 5: DO NOT LET THE CAMERA DIE. It's your only connection to the living world.","NOTE 6: Find the keys. Leave this cursed place. Do not look back.","NOTE 7: Static... so much static. It means he's getting closer."],nr={bed:"https://m.media-amazon.com/images/I/71Wp3-gZlGL._AC_SL1500_.jpg",note:"https://i.stack.imgur.com/tL80j.jpg",ghost:"https://i.imgur.com/W2C2x2s.jpeg"},lr=({gameState:t,setGameState:r,onStatsUpdate:s,keyBindings:a})=>{const n=m.useRef(null),i=m.useRef(0),[c,d]=m.useState(null),o=m.useRef({id:"player",type:"PLAYER",x:100,y:100,width:lt,height:lt,active:!0,speed:Tt,battery:100,keys:0,noise:0,flashlightOn:!0,hasFlashlight:!0,direction:{x:1,y:0},isFlickering:!1,isCrouching:!1,yaw:-Math.PI/2,pitch:0,lastJumpScareTime:0,sanity:0,isHidden:!1,hasBat:!1,attackTimer:0,lastAttackTime:0}),x=m.useRef({id:"enemy",type:"ENEMY",x:600,y:300,width:Et,height:Et,active:!0,state:"IDLE",speed:Ua,lastKnownPlayerPos:null,patrolPoints:[],currentPatrolIndex:0,invisible:!1,stareTimer:0,footstepTimer:0,teleportCooldown:0}),p=m.useRef([]),u=m.useRef({}),j=m.useRef(0),w=m.useRef({}),k=m.useRef([]),b=m.useRef(0),E=m.useRef(!1),B=m.useRef(0),P=m.useRef(0),I=m.useRef(0),T=m.useRef({active:!1,timer:0}),f=m.useRef({active:!1,startTime:0}),A=m.useRef(new Array(Pe).fill(0)),_=m.useCallback(()=>{p.current=[],E.current=!1,B.current=0,P.current=0,T.current={active:!1,timer:0},f.current={active:!1,startTime:0},o.current.battery=100;const l=Z.getInstance();l.startWind(),l.playCrow(),Object.entries(nr).forEach(([y,M])=>{const L=new Image;L.crossOrigin="Anonymous",L.src=M,w.current[y]=L}),k.current=Array.from({length:150},()=>({x:Math.random()*1280,y:Math.random()*720,length:10+Math.random()*20,speed:15+Math.random()*10}));let h=[],N=0;for(let y=0;y<te.length;y++)for(let M=0;M<te[0].length;M++){const L=te[y][M],R=M*X+X/2,F=y*X+X/2;if(L===9)o.current.x=R,o.current.y=F,o.current.keys=0,o.current.noise=0,o.current.hasFlashlight=!0,o.current.flashlightOn=!0,o.current.isFlickering=!1,o.current.yaw=-Math.PI/2,o.current.pitch=0,o.current.lastJumpScareTime=0,o.current.isHidden=!1,o.current.hasBat=!1,o.current.attackTimer=0;else if(L===2)p.current.push({id:`key_${y}_${M}`,type:"KEY",x:R,y:F,width:20,height:20,active:!0});else if(L===4)p.current.push({id:`car_${y}_${M}`,type:"CAR",x:R,y:F,width:60,height:40,active:!0});else if(L===5){const ne={id:`locker_${y}_${M}`,type:"LOCKER",x:R,y:F,width:30,height:30,active:!0,isOpen:!1,content:"EMPTY"};h.push(ne),p.current.push(ne)}else L===10?p.current.push({id:`bed_${y}_${M}`,type:"BED",x:R,y:F,width:32,height:38,active:!0}):L===6&&(p.current.push({id:`note_${y}_${M}`,type:"NOTE",x:R,y:F,width:25,height:25,active:!0,text:Ct[N%Ct.length]}),N++)}if(p.current.push({id:"weapon_bat",type:"BAT",x:200,y:100,width:30,height:8,active:!0}),h.length>0){const y=Math.floor(Math.random()*h.length);let M=Math.floor(Math.random()*h.length);for(;M===y;)M=Math.floor(Math.random()*h.length);h[y].content="KEY",h[M].content="KEY",h.forEach((L,R)=>{R!==y&&R!==M&&Math.random()<.6&&(L.content="BATTERY")})}x.current.x=ar-200,x.current.y=rr-200,x.current.state="IDLE",x.current.active=!1,x.current.invisible=!1,x.current.stareTimer=0,u.current={}},[]);m.useEffect(()=>{t==="PLAYING"?_():(Z.getInstance().stopWind(),document.pointerLockElement===n.current&&document.exitPointerLock())},[t,_]);const O=()=>{const l=Date.now();l-o.current.lastJumpScareTime>Za&&(T.current={active:!0,timer:l},o.current.lastJumpScareTime=l,o.current.noise=1,Z.getInstance().playJumpScare(),o.current.isHidden&&(o.current.isHidden=!1))};m.useEffect(()=>{const l=L=>{u.current[L.code]=!0,L.code===a.INTERACT&&v(),(L.code==="Escape"||L.code===a.INTERACT)&&c&&d(null)},h=L=>{u.current[L.code]=!1},N=L=>{document.pointerLockElement===n.current&&!T.current.active&&!f.current.active&&(o.current.yaw+=L.movementX*.002,o.current.pitch-=L.movementY*.002,o.current.pitch=Math.max(-.5,Math.min(.5,o.current.pitch)),o.current.direction={x:Math.cos(o.current.yaw),y:Math.sin(o.current.yaw)})},y=L=>{var R;t==="PLAYING"&&!f.current.active&&(!c&&document.pointerLockElement!==n.current?(R=n.current)==null||R.requestPointerLock():o.current.hasBat&&!o.current.isHidden&&L.button===0&&D())};window.addEventListener("keydown",l),window.addEventListener("keyup",h),document.addEventListener("mousemove",N);const M=n.current;return M&&M.addEventListener("mousedown",y),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",h),document.removeEventListener("mousemove",N),M&&M.removeEventListener("mousedown",y)}},[t,c,a]);const D=()=>{const l=o.current,h=Date.now();if(h-l.lastAttackTime<qa)return;l.attackTimer=200,l.lastAttackTime=h,Z.getInstance().playSwing();const N=x.current;if(N.active&&Math.hypot(N.x-l.x,N.y-l.y)<Va){let L=Math.atan2(N.y-l.y,N.x-l.x)-l.yaw;for(;L>Math.PI;)L-=2*Math.PI;for(;L<-Math.PI;)L+=2*Math.PI;Math.abs(L)<Wa/2&&(Z.getInstance().playHit(),s(R=>({...R,message:"BANISHED!"})),N.state="IDLE",N.x=-2e3,N.y=-2e3,N.teleportCooldown=500,N.invisible=!0)}},v=()=>{if(c){d(null);return}const l=o.current;if(l.isHidden){l.isHidden=!1,s(y=>({...y,message:""}));return}let h=null,N=70;if(p.current.forEach(y=>{if(!y.active)return;const M=Math.hypot(y.x-l.x,y.y-l.y);M<N&&(h=y,N=M)}),h){const y=h;y.type==="CAR"&&!l.hasFlashlight?(l.hasFlashlight=!0,l.flashlightOn=!0,l.battery=100,Z.getInstance().playClick(!0),Z.getInstance().playBuzz(.5),Z.getInstance().playDrone(),I.current=Date.now(),s(M=>({...M,message:"BATTERY RECHARGED"}))):y.type==="BAT"?(l.hasBat=!0,y.active=!1,Z.getInstance().playItemDrop(),s(M=>({...M,message:"BASEBALL BAT ACQUIRED"}))):y.type==="NOTE"?(d(y.text||"..."),y.active=!1,Z.getInstance().playClick(!0),s(M=>({...M,message:"STORY NOTE FOUND"}))):y.type==="BED"?(l.isHidden=!0,l.hidingType="BED",Z.getInstance().playItemDrop(),s(M=>({...M,message:"HIDING UNDER BED..."}))):y.type==="LOCKER"&&(y.isOpen?(l.isHidden=!0,l.hidingType="LOCKER",s(M=>({...M,message:"HIDING IN LOCKER..."}))):(y.isOpen=!0,l.noise=1,Z.getInstance().playItemDrop(),Math.random()<.2&&O(),y.content==="BATTERY"?(l.battery=Math.min(100,l.battery+$a),s(M=>({...M,message:"REPLACED BATTERY"})),y.content="EMPTY"):y.content==="KEY"?(l.keys++,s(M=>({...M,message:"FOUND KEY"})),y.content="EMPTY"):s(M=>({...M,message:"EMPTY"}))))}},g=(l,h,N,y=!1)=>{const M=Math.floor((l-N/2)/X),L=Math.floor((l+N/2)/X),R=Math.floor((h-N/2)/X),F=Math.floor((h+N/2)/X);if(M<0||L>=te[0].length||R<0||F>=te.length||te[R][M]===1||te[R][M]===7||te[R][L]===1||te[R][L]===7||te[F][M]===1||te[F][M]===7||te[F][L]===1||te[F][L]===7)return!0;const ne=["CAR","LOCKER","BED"];for(const K of p.current)if(K.active&&ne.includes(K.type)&&Math.hypot(l-K.x,h-K.y)<N/2+K.width/2)return!0;return!y&&(te[R][M]===3||te[R][L]===3||te[F][M]===3||te[F][L]===3)?o.current.keys>=12?(r("VICTORY"),!1):(s(Y=>({...Y,message:"NEED 12 KEYS"})),!0):!1},C=()=>{const l=o.current;if(l.battery=Math.max(0,l.battery-Ha),l.battery<=0){r("GAME_OVER");return}if(l.battery<20&&Math.random()<.05?(l.isFlickering=!0,Z.getInstance().playBuzz(.1)):Date.now()-I.current<200?l.isFlickering=Math.random()<.5:l.isFlickering=!1,Math.random()<.001&&l.noise>.1&&!l.isHidden){const N=l.x-Math.cos(l.yaw)*60,y=l.y-Math.sin(l.yaw)*60;p.current.push({id:`ghost_${Date.now()}`,type:"SHADOW",x:N,y,width:30,height:60,active:!0}),setTimeout(()=>{const M=p.current.findIndex(L=>L.type==="SHADOW"&&L.id.startsWith("ghost"));M!==-1&&p.current.splice(M,1)},200)}},U=()=>{const l=o.current;if(l.attackTimer>0&&(l.attackTimer-=1e3/60),P.current<2||T.current.active)return;if(l.isHidden){l.noise=0;return}const h=l.yaw,N=Math.cos(h),y=Math.sin(h),M=Math.cos(h+Math.PI/2),L=Math.sin(h+Math.PI/2);let R=0,F=0;const ne=u.current[a.RUN],K=u.current[a.SNEAK];l.isCrouching=!!K;let Y=Tt;ne&&(Y=Da),K&&(Y=Pa),(u.current[a.MOVE_FORWARD]||u.current.ArrowUp)&&(R+=N*Y,F+=y*Y),(u.current[a.MOVE_BACKWARD]||u.current.ArrowDown)&&(R-=N*Y,F-=y*Y),(u.current[a.MOVE_LEFT]||u.current.ArrowLeft)&&(R-=M*Y,F-=L*Y),(u.current[a.MOVE_RIGHT]||u.current.ArrowRight)&&(R+=M*Y,F+=L*Y),g(l.x+R,l.y,l.width)||(l.x+=R),g(l.x,l.y+F,l.width)||(l.y+=F);const pe=Math.abs(R)+Math.abs(F)>.1;let Q=0;if(pe&&(ne?Q=Ka:K?Q=Ja:Q=za),l.noise=Math.max(0,l.noise-Ya),l.noise=Math.max(l.noise,Q),pe){K&&Z.getInstance().playBreathing();const q=ne?300:K?700:500;if(Date.now()-j.current>q){let ve=l.y>360?"WOOD":"DIRT";ve==="DIRT"&&Math.random()<.3&&(ve="WATER");const ce=K?.2:1;Z.getInstance().playFootstep(ve,ce),j.current=Date.now()}}!E.current&&l.y>340&&l.y<450&&(E.current=!0,p.current.push({id:"shadow_event",type:"SHADOW",x:350,y:380,width:30,height:60,active:!0}),x.current.active=!0,x.current.x=800,x.current.y=800,x.current.state="IDLE"),p.current.forEach(q=>{q.active&&q.type==="KEY"&&Math.hypot(q.x-l.x,q.y-l.y)<lt+q.width&&(q.active=!1,l.keys++,Z.getInstance().playItemDrop(),s(ce=>({...ce,message:"KEY FOUND"})))})},$=()=>{const l=x.current;if(!l.active||T.current.active||f.current.active)return;if(o.current.isHidden){l.state="IDLE";return}const h=o.current,N=Math.hypot(h.x-l.x,h.y-l.y),y=Z.getInstance();l.footstepTimer++;const M=l.x-h.x,L=l.y-h.y;let F=Math.atan2(L,M)-h.yaw;for(;F>Math.PI;)F-=2*Math.PI;for(;F<-Math.PI;)F+=2*Math.PI;const ne=Math.abs(F)<$e/1.5;if(h.flashlightOn&&ne&&N<400){if(l.stareTimer++,l.stareTimer>Qa&&l.state==="STALKING"){l.state="IDLE",l.x=-1e3,l.y=-1e3,l.invisible=!0,l.stareTimer=0,s(q=>({...q,message:"IT FLED"}));return}}else l.stareTimer=Math.max(0,l.stareTimer-1);let Y=l.x,pe=l.y,Q=0;if(l.state==="IDLE")Math.random()<.01&&(l.state="STALKING"),h.noise>Xa&&N<600&&(l.state="HUNTING",l.invisible=!1);else if(l.state==="STALKING"){if(l.invisible=!0,l.teleportCooldown--,l.teleportCooldown<=0&&!ne&&N>tr){const ve=h.yaw+Math.PI+(Math.random()-.5),ce=er+Math.random()*100;l.x=h.x+Math.cos(ve)*ce,l.y=h.y+Math.sin(ve)*ce,l.teleportCooldown=200,y.playDrone()}Q=Fa;const q=Math.atan2(h.y-l.y,h.x-l.x);Y=l.x+Math.cos(q)*Q,pe=l.y+Math.sin(q)*Q,N<200?(l.footstepTimer>60&&(y.playGhostFootstep("SOFT"),l.footstepTimer=0),Math.random()<.02&&(l.state="HUNTING",l.invisible=!1)):N<400&&l.footstepTimer>100&&(y.playGhostFootstep("SOFT"),l.footstepTimer=0)}else if(l.state==="HUNTING"){l.invisible=!1,Q=Ba;const q=Math.atan2(h.y-l.y,h.x-l.x);Y=l.x+Math.cos(q)*Q,pe=l.y+Math.sin(q)*Q,l.footstepTimer>25&&(y.playGhostFootstep("HEAVY"),l.footstepTimer=0),N>700&&(l.state="IDLE")}if(Q>0){if(!g(Y,l.y,l.width,!0))l.x=Y;else{const q=l.y+(h.y>l.y?Q:-Q);g(l.x,q,l.width,!0)||(l.y=q)}if(!g(l.x,pe,l.width,!0))l.y=pe;else{const q=l.x+(h.x>l.x?Q:-Q);g(q,l.y,l.width,!0)||(l.x=q)}}!l.invisible&&N<25&&(f.current.active||(f.current={active:!0,startTime:Date.now()},Z.getInstance().playJumpScare()))},se=()=>{B.current++,P.current===0&&B.current>120&&(P.current=1,Z.getInstance().playBell()),P.current===1&&B.current>180&&(P.current=2,Z.getInstance().playCarCooling(),Z.getInstance().playFlashlightRoll()),P.current===3&&b.current%300===0&&Math.random()<.3&&Z.getInstance().playCarCooling();const l=p.current.findIndex(h=>h.type==="SHADOW"&&h.id==="shadow_event");if(l!==-1){const h=p.current[l];h.x+=12,h.x>800&&(h.active=!1,p.current.splice(l,1))}T.current.active&&Date.now()-T.current.timer>500&&(T.current.active=!1)},ue=()=>{k.current.forEach(l=>{l.y+=l.speed,l.y>720&&(l.y=-20,l.x=Math.random()*1280)})},Re=l=>!!(l&&l.complete&&l.naturalWidth>0),je=(l,h,N,y,M,L)=>{if(l.save(),L){const ne=(Math.random()-.5)*20,K=(Math.random()-.5)*20;l.translate(ne,K)}l.fillStyle="#111",l.beginPath(),l.ellipse(h+y/2,N+M/2,y/2,M/1.5,0,0,Math.PI*2),l.fill();const R=y/5,F=y/4;l.fillStyle="#ff0000",l.shadowBlur=L?50:10,l.shadowColor="red",l.beginPath(),l.ellipse(h+y/2-F,N+M/3,R,R*.7,Math.PI/6,0,Math.PI*2),l.fill(),l.beginPath(),l.ellipse(h+y/2+F,N+M/3,R,R*.7,-Math.PI/6,0,Math.PI*2),l.fill(),l.fillStyle="#300",l.shadowBlur=0,l.beginPath(),l.moveTo(h+y/2-R,N+M*.65),l.quadraticCurveTo(h+y/2,N+M*.85,h+y/2+R,N+M*.65),l.quadraticCurveTo(h+y/2,N+M*.55,h+y/2-R,N+M*.65),l.fill(),l.restore()},G=(l,h,N,y)=>{l.fillStyle="#111",l.fillRect(0,0,N,y/2+h.pitch*y);const M=l.createLinearGradient(0,y/2+h.pitch*y,0,y);M.addColorStop(0,"#0a0a0a"),M.addColorStop(1,"#2a2a2a"),l.fillStyle=M,l.fillRect(0,y/2+h.pitch*y,N,y/2-h.pitch*y);for(let L=0;L<Pe;L++){const R=2*L/Pe-1,F=Math.cos(h.yaw)+Math.cos(h.yaw+Math.PI/2)*Math.tan($e/2)*R,ne=Math.sin(h.yaw)+Math.sin(h.yaw+Math.PI/2)*Math.tan($e/2)*R;let K=Math.floor(h.x/X),Y=Math.floor(h.y/X),pe,Q;const q=Math.abs(1/F),ve=Math.abs(1/ne);let ce,Le,re,V=0,de=0;F<0?(Le=-1,pe=(h.x/X-K)*q):(Le=1,pe=(K+1-h.x/X)*q),ne<0?(re=-1,Q=(h.y/X-Y)*ve):(re=1,Q=(Y+1-h.y/X)*ve);let ee=0;for(;V===0;)pe<Q?(pe+=q,K+=Le,de=0):(Q+=ve,Y+=re,de=1),Y>=0&&Y<te.length&&K>=0&&K<te[0].length?(te[Y][K]===1||te[Y][K]===7)&&(V=1,ee=te[Y][K]):V=1;de===0?ce=(K-h.x/X+(1-Le)/2)/F:ce=(Y-h.y/X+(1-re)/2)/ne,A.current[L]=ce;const oe=Math.floor(y*2/ce),Ee=y/2+h.pitch*y,Te=-oe/2+Ee,le=oe/2+Ee;let ye=150;ee===7&&(ye=100),de===1&&(ye*=.75);const Xe=Math.min(1,4/ce),Kt=Math.floor(ye*Xe),Jt=Math.floor(ye*Xe),Xt=Math.floor(ye*Xe),ht=Math.ceil(N/Pe),Zt=L*ht;l.fillStyle=`rgb(${Kt},${Jt},${Xt})`,l.fillRect(Zt,Te,ht,le-Te+1)}},z=(l,h,N,y)=>{const M=p.current.filter(R=>R.active).map(R=>({...R,dist:Math.hypot(h.x-R.x,h.y-R.y)})).sort((R,F)=>F.dist-R.dist),L=x.current;L.active&&(!L.invisible||L.invisible&&L.state==="STALKING"&&Math.random()<.2)&&(M.push({...L,dist:Math.hypot(h.x-L.x,h.y-L.y)}),M.sort((R,F)=>F.dist-R.dist)),M.forEach(R=>{const F=R.x-h.x,ne=R.y-h.y,K=Math.cos(h.yaw+Math.PI/2)*Math.tan($e/2),Y=Math.sin(h.yaw+Math.PI/2)*Math.tan($e/2),pe=Math.cos(h.yaw),Q=Math.sin(h.yaw),q=1/(K*Q-pe*Y),ve=q*(Q*F-pe*ne),ce=q*(-Y*F+K*ne);if(ce<=0)return;const Le=Math.floor(N/2*(1+ve/ce));let re=Math.abs(Math.floor(y/(ce/X)));const V=Math.abs(Math.floor(y/(ce/X)));R.type==="ENEMY"&&(re*=1.6);const de=y/2+h.pitch*y,ee=-re/2+de,Ne=Math.ceil(N/Pe),oe=Math.floor(-V/2+Le),Ee=Math.floor(Le/Ne);if(Ee>=0&&Ee<Pe){const Te=A.current[Ee];if(ce/X<Te){const le=Math.min(1,5/(ce/X));if(l.save(),l.globalAlpha=le,R.type==="ENEMY"){const ye=w.current.ghost;Re(ye)?(l.globalAlpha=L.invisible?.1:le,l.drawImage(ye,oe,ee,V,re)):(l.fillStyle=L.invisible?"rgba(0,0,0,0.1)":`rgba(0,0,0,${le})`,je(l,oe,ee,V,re,!1))}else if(R.type==="KEY")l.fillStyle=`rgb(${255*le},${215*le},0)`,l.beginPath(),l.arc(Le,ee+re/2,V/3,0,Math.PI*2),l.fill();else if(R.type==="BAT")l.fillStyle=`rgb(${150*le},${150*le},${150*le})`,l.fillRect(oe,ee,V,re),l.fillStyle=`rgb(${100*le},${50*le},0)`,l.fillRect(oe,ee+re*.7,V,re*.3);else if(R.type==="LOCKER"){const ye=R;l.fillStyle=ye.isOpen?"#444":"#666",l.fillRect(oe,ee-re/2,V,re*1.5)}else if(R.type==="BED"){const ye=w.current.bed;Re(ye)?l.drawImage(ye,oe,ee+re/2,V,re/2):(l.fillStyle="#ccc",l.fillRect(oe,ee+re/2,V,re/2))}else if(R.type==="CAR")l.fillStyle="#557",l.fillRect(oe-V,ee,V*3,re/2);else if(R.type==="NOTE"){const ye=w.current.note;Re(ye)?l.drawImage(ye,oe,ee+re*.8,V/2,re/4):(l.fillStyle="#fff",l.fillRect(oe,ee+re*.8,V/2,re/4))}l.restore()}}})},H=l=>{const h=l.canvas.width,N=l.canvas.height,y=o.current;if(f.current.active){l.fillStyle="#000",l.fillRect(0,0,h,N);const V=(Math.random()-.5)*50,de=(Math.random()-.5)*50,ee=1+Math.sin(Date.now()/50)*.05;l.save(),l.translate(h/2+V,N/2+de),l.scale(ee,ee);const Ne=w.current.ghost;if(Re(Ne)){const oe=Ne.width/Ne.height,Ee=h/N;let Te,le;Ee>oe?(Te=h,le=h/oe):(le=N,Te=N*oe),l.drawImage(Ne,-Te/2,-le/2,Te,le)}else je(l,-h/2,-N/2,h,N,!0);l.restore(),Math.random()>.7&&(l.fillStyle="rgba(255, 0, 0, 0.2)",l.fillRect(0,0,h,N));return}G(l,y,h,N),z(l,y,h,N);const M=Math.max(.2,y.battery/100),L=y.battery<20||y.isFlickering?Math.random()*.2:0,R=l.createRadialGradient(h/2,N/2,N/4*M,h/2,N/2,N*(.8+L));if(R.addColorStop(0,"rgba(0,0,0,0)"),R.addColorStop(.5,"rgba(0,0,0,0.3)"),R.addColorStop(1,"rgba(0,0,0,0.95)"),l.fillStyle=R,l.fillRect(0,0,h,N),y.hasBat&&!y.isHidden){l.save();const V=y.attackTimer>0?Math.sin(y.attackTimer/200*Math.PI)*200:0,de=y.attackTimer>0?-Math.PI/4:0;l.translate(h*.7+V,N),l.rotate(-Math.PI/6+de),l.fillStyle="#5d4037",l.fillRect(-20,-200,40,200),l.fillStyle="#9ca3af",l.fillRect(-25,-500,50,300),l.restore()}const F=150,ne=.15,K=30,Y=150;l.save(),l.translate(K,Y),l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,0,F,F),l.strokeStyle="rgba(255, 255, 255, 0.3)",l.lineWidth=2,l.strokeRect(0,0,F,F),l.beginPath(),l.rect(0,0,F,F),l.clip();const pe=F/2,Q=F/2,q=F/2/ne,ve=Math.max(0,Math.floor((y.y-q)/X)),ce=Math.min(te.length,Math.ceil((y.y+q)/X)),Le=Math.max(0,Math.floor((y.x-q)/X)),re=Math.min(te[0].length,Math.ceil((y.x+q)/X));for(let V=ve;V<ce;V++)for(let de=Le;de<re;de++){const ee=te[V][de];if(ee===0)continue;const Ne=de*X,oe=V*X,Ee=pe+(Ne-y.x)*ne,Te=Q+(oe-y.y)*ne,le=Math.max(1,X*ne);ee===1||ee===7?(l.fillStyle="#94a3b8",l.fillRect(Ee,Te,le,le)):ee===3?(l.fillStyle="#ef4444",l.fillRect(Ee,Te,le,le)):ee===4&&(l.fillStyle="#f59e0b",l.fillRect(Ee,Te,le,le))}if(l.save(),l.translate(pe,Q),l.rotate(y.yaw),l.fillStyle="#22c55e",l.beginPath(),l.moveTo(5,0),l.lineTo(-4,-4),l.lineTo(-4,4),l.fill(),l.restore(),l.restore(),y.isHidden&&(l.fillStyle="rgba(0,0,0,0.95)",l.fillRect(0,0,h,N),l.fillStyle="#fff",l.font="20px monospace",l.textAlign="center",l.fillText(y.hidingType==="BED"?"UNDER BED":"IN LOCKER",h/2,N/2)),T.current.active){const V=(Date.now()-T.current.timer)/200;V<1&&(l.fillStyle="black",l.fillRect(0,0,h,N),l.save(),l.translate(h/2+(Math.random()-.5)*20,N/2+(Math.random()-.5)*20),l.scale(2+V,2+V),l.fillStyle="#1a0000",l.beginPath(),l.ellipse(0,0,100,140,0,0,Math.PI*2),l.fill(),l.fillStyle="white",l.beginPath(),l.arc(-40,-20,15,0,Math.PI*2),l.arc(40,-20,15,0,Math.PI*2),l.fill(),l.fillStyle="black",l.beginPath(),l.arc(-40,-20,5,0,Math.PI*2),l.arc(40,-20,5,0,Math.PI*2),l.fill(),l.restore())}if(c){l.fillStyle="rgba(0,0,0,0.8)",l.fillRect(0,0,h,N),l.fillStyle="#fef3c7",l.fillRect(h/2-200,N/2-150,400,300),l.fillStyle="#000",l.font='20px "Special Elite", monospace',l.textAlign="center",l.textBaseline="middle";const V=c.split(" ");let de="",ee=N/2-100;for(let Ne=0;Ne<V.length;Ne++){const oe=de+V[Ne]+" ";l.measureText(oe).width>360&&Ne>0?(l.fillText(de,h/2,ee),de=V[Ne]+" ",ee+=30):de=oe}l.fillText(de,h/2,ee),l.font="14px monospace",l.fillStyle="#666",l.fillText("[PRESS E or ESC TO CLOSE]",h/2,N/2+130)}},ae=m.useCallback(()=>{if(t!=="PLAYING")return;if(c){const h=n.current;if(h){const N=h.getContext("2d");N&&H(N)}i.current=requestAnimationFrame(ae);return}if(f.current.active){if(Date.now()-f.current.startTime>3e3){r("GAME_OVER"),f.current.active=!1;return}const N=n.current;if(N){const y=N.getContext("2d");y&&H(y)}i.current=requestAnimationFrame(ae);return}se(),U(),$(),ue(),C();const l=n.current;if(l){const h=l.getContext("2d");h.imageSmoothingEnabled=!1,h&&H(h)}s({battery:o.current.battery,keysFound:o.current.keys,totalKeys:12,soundLevel:o.current.noise,message:""}),i.current=requestAnimationFrame(ae)},[t,c,a]);return m.useEffect(()=>(t==="PLAYING"&&(i.current=requestAnimationFrame(ae)),()=>cancelAnimationFrame(i.current)),[ae,t]),e.jsx("canvas",{ref:n,width:1280,height:720,className:"block w-full h-full bg-black cursor-none"})},ir={MOVE_FORWARD:"Move Forward",MOVE_BACKWARD:"Move Backward",MOVE_LEFT:"Move Left",MOVE_RIGHT:"Move Right",RUN:"Sprint",SNEAK:"Sneak",INTERACT:"Interact",FLASHLIGHT:"Toggle Camera Light"},or=({gameState:t,stats:r,onStart:s,onRestart:a,keyBindings:n,setKeyBindings:i})=>{const[c,d]=m.useState(!1),[o,x]=m.useState(null),[p,u]=m.useState(0);m.useEffect(()=>{let b;return t==="PLAYING"&&(b=setInterval(()=>{u(E=>E+1)},1e3)),()=>clearInterval(b)},[t]);const j=b=>{const E=Math.floor(b/3600).toString().padStart(2,"0"),B=Math.floor(b%3600/60).toString().padStart(2,"0"),P=(b%60).toString().padStart(2,"0");return`${E}:${B}:${P}`},w=()=>{Z.getInstance().resume(),s()};m.useEffect(()=>{if(!o)return;const b=E=>{if(E.preventDefault(),E.stopPropagation(),E.key==="Escape"){x(null);return}i({...n,[o]:E.code}),x(null)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[o,n,i]);const k=b=>b.replace("Key","").replace("Left","").replace("Right","").replace("Control","Ctrl");return t==="MENU"?c?e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/95 text-slate-100 z-[100] p-8 pointer-events-auto",children:e.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-lg p-6 shadow-2xl relative",children:[e.jsx("button",{onClick:()=>{d(!1),x(null)},className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:e.jsx(rs,{size:32})}),e.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3 text-red-500",style:{fontFamily:"Special Elite"},children:[e.jsx(ns,{size:32})," CONTROLS"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(n).map(b=>e.jsxs("div",{className:"flex items-center justify-between bg-black/50 p-3 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-300 font-mono text-sm uppercase",children:ir[b]}),e.jsx("button",{onClick:()=>x(b),className:`px-4 py-1 rounded font-bold min-w-[100px] text-center transition-colors border ${o===b?"bg-red-600 border-red-400 text-white animate-pulse":"bg-slate-800 border-slate-600 text-slate-200 hover:bg-slate-700"}`,children:o===b?"PRESS KEY...":k(n[b])})]},b))}),e.jsx("div",{className:"mt-8 text-center text-slate-500 text-sm",children:"Click a button to rebind. Press ESC to cancel."})]})}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/90 text-slate-100 z-[100] pointer-events-auto",children:[e.jsx("h1",{className:"text-8xl font-bold tracking-widest text-red-600 mb-4 animate-pulse",style:{fontFamily:"Special Elite"},children:"LAST LIGHT"}),e.jsx("p",{className:"text-xl mb-8 max-w-md text-center text-slate-400",children:"Find 12 keys to escape. Keep your flashlight charged. Don't look at it."}),e.jsxs("div",{className:"flex flex-col gap-4 w-64",children:[e.jsx("button",{onClick:w,className:"bg-red-900/50 border-2 border-red-600 hover:bg-red-800 text-white py-3 rounded text-xl font-bold transition-all hover:scale-105",children:"ENTER DARKNESS"}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-slate-800 border border-slate-600 hover:bg-slate-700 text-slate-300 py-2 rounded flex items-center justify-center gap-2",children:[e.jsx(Lt,{size:18})," CONTROLS"]})]})]}):t==="GAME_OVER"?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-[100] pointer-events-auto animate-in fade-in duration-1000",children:[e.jsx("div",{className:"scale-150 mb-12",children:e.jsx("h1",{className:"text-9xl font-serif text-red-900 tracking-widest opacity-80",style:{textShadow:"0 0 20px rgba(255,0,0,0.5)"},children:"YOU DIED"})}),e.jsx("button",{onClick:a,className:"mt-8 text-slate-400 hover:text-white border-b border-transparent hover:border-white transition-colors text-xl",children:"TRY AGAIN"})]}):t==="VICTORY"?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white text-black z-[100] pointer-events-auto animate-in fade-in duration-[3000ms]",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4",children:"ESCAPED"}),e.jsx("p",{className:"text-2xl mb-8",children:"You found the light."}),e.jsx("button",{onClick:a,className:"bg-black text-white px-8 py-3 rounded hover:scale-105 transition-transform",children:"PLAY AGAIN"})]}):e.jsxs("div",{className:"absolute inset-0 pointer-events-none p-6 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-500 text-2xl drop-shadow-md",children:[e.jsx(ls,{size:32}),e.jsxs("span",{className:"font-mono font-bold",children:[Math.ceil(r.battery),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-yellow-500 text-2xl drop-shadow-md",children:[e.jsx(is,{size:32}),e.jsxs("span",{className:"font-mono font-bold",children:[r.keysFound,"/",r.totalKeys]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("div",{className:"text-slate-500 font-mono text-xl",children:j(p)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{size:20,className:r.soundLevel>.5?"text-red-500":"text-slate-600"}),e.jsx("div",{className:"w-32 h-2 bg-slate-900 border border-slate-700",children:e.jsx("div",{className:"h-full bg-slate-200 transition-all duration-100",style:{width:`${Math.min(100,r.soundLevel*100)}%`}})})]})]})]}),r.message&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx("div",{className:"text-white font-mono text-xl bg-black/50 px-4 py-2 rounded border border-slate-700 animate-pulse",children:r.message})}),e.jsxs("div",{className:"text-slate-600 font-mono text-sm opacity-50",children:[k(n.FLASHLIGHT),": LIGHT | ",k(n.INTERACT),": INTERACT"]})]})};function cr(){const[t,r]=m.useState("MENU"),[s,a]=m.useState(()=>{const o=localStorage.getItem("last_light_keys");return o?JSON.parse(o):sr});m.useEffect(()=>{localStorage.setItem("last_light_keys",JSON.stringify(s))},[s]);const[n,i]=m.useState({battery:100,keysFound:0,totalKeys:12,soundLevel:0,message:""}),c=()=>r("PLAYING"),d=()=>r("PLAYING");return e.jsx(ke,{children:e.jsxs("div",{className:"relative w-screen h-screen bg-slate-950 flex items-center justify-center overflow-hidden select-none",children:[e.jsx("div",{className:"scanlines mix-blend-overlay opacity-20 pointer-events-none w-full h-full absolute inset-0 z-50"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#000000_100%)] pointer-events-none z-40"}),e.jsxs("div",{className:"relative w-full max-w-[1280px] aspect-video bg-black shadow-2xl border border-slate-900 overflow-hidden",children:[e.jsx(lr,{gameState:t,setGameState:r,onStatsUpdate:i,keyBindings:s}),e.jsx(or,{gameState:t,stats:n,onStart:c,onRestart:d,keyBindings:s,setKeyBindings:a})]})]})})}const dr=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),mr=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),xr=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8z"})]}),ur=({name:t,status:r,age:s,motto:a})=>e.jsxs("div",{className:"w-96 h-60 bg-white rounded-2xl shadow-lg p-8 flex flex-col justify-between transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:t}),e.jsx("div",{className:"w-20 h-1 bg-slate-400 my-4 rounded-full"}),e.jsx("p",{className:"text-lg text-slate-600",children:r})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-slate-500",children:[e.jsx(xr,{className:"w-5 h-5 text-slate-400 flex-shrink-0"}),e.jsxs("p",{className:"text-sm italic",children:['"',a,'"']})]}),e.jsxs("footer",{className:"flex items-center space-x-6 text-slate-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"w-5 h-5 text-slate-400"}),e.jsxs("span",{className:"text-sm font-medium",children:[s," Years Old"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dr,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium",children:"Student"})]})]})]}),hr=()=>{const t={name:"Derek Jang",status:"Student at WMS",age:15,motto:"ì˜¤ëŠ˜ë„ ë‚´ì¼ì²˜ëŸ¼ ë‚´ì¼ë„ ì˜¤ëŠ˜ì²˜ëŸ¼"};return e.jsx(ke,{children:e.jsx("main",{className:"min-h-screen bg-slate-100 flex items-center justify-center font-sans p-4",children:e.jsx(ur,{name:t.name,status:t.status,age:t.age,motto:t.motto})})})};let Ce=null;const pr=()=>{Ce||(Ce=new(window.AudioContext||window.webkitAudioContext)),Ce.state==="suspended"&&Ce.resume()},Oe=(t,r,s)=>{if(pr(),!Ce)return;const a=Ce.createOscillator(),n=Ce.createGain();a.type=r,a.frequency.setValueAtTime(t,Ce.currentTime),n.gain.setValueAtTime(0,Ce.currentTime),n.gain.linearRampToValueAtTime(.1,Ce.currentTime+.01),n.gain.exponentialRampToValueAtTime(.001,Ce.currentTime+s),a.connect(n),n.connect(Ce.destination),a.start(),a.stop(Ce.currentTime+s)},fe={playSuccess:()=>{setTimeout(()=>Oe(523.25,"sine",.15),0),setTimeout(()=>Oe(659.25,"sine",.15),80),setTimeout(()=>Oe(783.99,"sine",.3),160)},playError:()=>{Oe(150,"sawtooth",.3),setTimeout(()=>Oe(140,"sawtooth",.3),50)},playClick:()=>{Oe(800,"triangle",.05)},playTick:()=>{Oe(1200,"sine",.03)},speak:(t,r=1)=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const s=new SpeechSynthesisUtterance(t);s.lang="en-US",s.rate=r;const n=window.speechSynthesis.getVoices().find(i=>i.name.includes("Google US English")||i.lang==="en-US"&&i.name.includes("Samantha"));n&&(s.voice=n),window.speechSynthesis.speak(s)}}},fr=()=>{const t="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new De({apiKey:t})},gr=async()=>{const t=fr(),r="Generate a list of 10 English vocabulary words for a middle school student. For each word, provide: 1. The English term. 2. A Korean definition. 3. A short, simple English example sentence. 4. A 'mnemonic' (story) in Korean that helps memorize the word using pronunciation associations or logic (e.g. 'Stalactite' -> 'C' for Ceiling -> ì²œì¥ì— ë¶™ì€ ì¢…ìœ ì„).";try{const s=await t.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:W.ARRAY,items:{type:W.OBJECT,properties:{term:{type:W.STRING},definition:{type:W.STRING},example:{type:W.STRING},mnemonic:{type:W.STRING}},required:["term","definition","example","mnemonic"]}}}});return JSON.parse(s.text||"[]").map((n,i)=>({id:`gen-${Date.now()}-${i}`,term:n.term,definition:n.definition,example:n.example,mnemonic:n.mnemonic,status:"new"}))}catch(s){return console.error("Error generating words:",s),[]}},br=({onWordsLoaded:t,onStartWrongReview:r,wrongWordsCount:s,isReverse:a,onToggleReverse:n})=>{const[i,c]=m.useState(!1),[d,o]=m.useState(!1),[x,p]=m.useState(""),u=()=>{const E="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new De({apiKey:E})},j=async E=>{const B=u();if(!B)return E.map(I=>({...I,definition:"???"}));const P=`Translate these English words to Korean definitions. Return JSON array of strings. Words: ${E.map(I=>I.term).join(", ")}`;try{const I=await B.models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:{type:W.ARRAY,items:{type:W.STRING}}}}),T=JSON.parse(I.text||"[]");return E.map((f,A)=>({term:f.term,definition:T[A]||"ëœ» ê²€ìƒ‰ ì‹¤íŒ¨"}))}catch(I){return console.error(I),E.map(T=>({...T,definition:"ìë™ ë²ˆì—­ ì‹¤íŒ¨"}))}},w=async E=>{const B=E.split(`
`);let P=[];if(B.forEach(T=>{let f=T.trim();if(!f||(f=f.replace(/^\d+[\.\)\s]+\s*/,""),!f))return;let A=[],_=!1,O="",D=!1;for(let g=0;g<f.length;g++){const C=f[g];if(C==='"'){_=!_;continue}!_&&(C===","||C==="	"||C==="|"||C===":"&&!O.match(/^\d/))||!_&&(C==="-"||C==="=")&&A.length===0&&O.length>0?(A.push(O.trim()),O="",D=!0):O+=C}if(A.push(O.trim()),A=A.filter(g=>g!==""),!D&&A.length===1){const C=A[0].match(/^([a-zA-Z0-9\s\-\(\)\?]+)\s+([ê°€-í£].*)$/);C&&(A=[C[1].trim(),C[2].trim()])}if(A.length===0)return;const v=A[0];v&&(A.length>=2?P.push({term:v,definition:A[1],mnemonic:A[2]||void 0,example:A[3]||void 0}):P.push({term:v}))}),P.length===0){fe.playError(),alert("ìœ íš¨í•œ ë‹¨ì–´ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");return}const I=P.filter(T=>!T.definition);if(I.length>0&&I.length===P.length){o(!0);try{const f=(await j(I)).map((A,_)=>({id:`uploaded-${_}-${Date.now()}`,term:A.term,definition:A.definition||"???",status:"new"}));fe.playSuccess(),t(f)}catch{alert("ë‹¨ì–´ ëœ»ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}}else{const T=P.map((f,A)=>({id:`uploaded-${A}-${Date.now()}`,term:f.term,definition:f.definition||"???",mnemonic:f.mnemonic,example:f.example,status:"new"}));fe.playSuccess(),t(T)}},k=E=>{var P;const B=(P=E.target.files)==null?void 0:P[0];if(B){const I=new FileReader;I.onload=T=>{var A;const f=(A=T.target)==null?void 0:A.result;w(f)},I.readAsText(B)}},b=async()=>{o(!0),fe.playClick();try{const E=await gr();E.length>0&&(fe.playSuccess(),t(E))}catch{fe.playError(),alert("AI ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 tracking-tighter filter drop-shadow-sm",children:"WORD SPARK"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"ë‡Œê³µí•™ì  ì›ë¦¬ë¡œ ë‹¨ì–´ë¥¼ ê°ì¸ì‹œí‚¤ì„¸ìš”"})]}),s>0&&e.jsxs("button",{onClick:r,className:"w-full bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-100 p-5 rounded-2xl flex items-center justify-between hover:shadow-md hover:border-red-200 transition group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"flex items-center gap-4 z-10",children:[e.jsx("div",{className:"bg-white p-3 rounded-full shadow-sm text-red-500 animate-pulse ring-2 ring-red-100",children:e.jsx(_t,{size:24,fill:"currentColor"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"ì˜¤ë‹µ ê°ì˜¥ (Prison)"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[e.jsx("span",{className:"font-bold text-red-600 text-lg",children:s}),"ê°œì˜ ë‹¨ì–´ê°€ íƒˆì¶œì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤."]})]})]}),e.jsx("div",{className:"bg-white text-red-500 px-5 py-2 rounded-xl font-bold text-sm shadow-sm group-hover:scale-105 transition z-10 border border-red-100",children:"êµ¬ì¶œí•˜ê¸° â†’"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>{fe.playClick(),n()},className:`flex items-center gap-3 px-8 py-3 rounded-full text-sm font-bold transition-all shadow-sm active:scale-95 ${a?"bg-purple-600 text-white ring-4 ring-purple-100 scale-105":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:[e.jsx(os,{size:16}),a?"ëª¨ë“œ: ëœ» ë³´ê³  ì˜ì–´ ë§í•˜ê¸° (Hard)":"ëª¨ë“œ: ì˜ì–´ ë³´ê³  ëœ» ë§í•˜ê¸° (Normal)"]})}),e.jsxs("div",{className:`relative border-4 border-dashed rounded-3xl p-10 text-center transition-all duration-300 cursor-pointer group ${i?"border-indigo-500 bg-indigo-50 scale-[1.02]":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"}`,onDragOver:E=>{E.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:E=>{E.preventDefault(),c(!1);const B=E.dataTransfer.files[0];if(B){const P=new FileReader;P.onload=I=>{var T;return w((T=I.target)==null?void 0:T.result)},P.readAsText(B)}},children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",accept:".txt,.csv",onChange:k}),e.jsxs("div",{className:"flex flex-col items-center gap-4 relative z-10 pointer-events-none",children:[e.jsx("div",{className:"bg-indigo-100 p-5 rounded-full text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Gt,{size:40})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:".txt, .csv, ì—‘ì…€ íŒŒì¼ ë“±"}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 justify-center",children:[e.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200",children:"1. apple ì‚¬ê³¼"}),e.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200",children:"apple, ì‚¬ê³¼"}),e.jsx("span",{className:"text-xs bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-100 font-medium",children:"1. apple (ìë™ë²ˆì—­)"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-600 flex items-center gap-2",children:[e.jsx(cs,{size:16})," ì§ì ‘ ì…ë ¥ / ë¶™ì—¬ë„£ê¸°"]}),e.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full hover:opacity-90 transition shadow-md active:scale-95 disabled:opacity-50",children:[d?e.jsx("span",{className:"animate-spin",children:"â³"}):e.jsx(Ot,{size:14}),d?"AIê°€ ìƒê° ì¤‘...":"AI ìë™ ìƒì„±"]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("textarea",{className:"w-full h-40 p-5 rounded-2xl border border-slate-700 bg-slate-800 text-white placeholder:text-slate-500 focus:ring-4 focus:ring-indigo-500/30 focus:border-indigo-500 focus:outline-none resize-none text-base font-mono leading-relaxed transition-all shadow-inner",placeholder:`1. apple ì‚¬ê³¼
2. banana ë°”ë‚˜ë‚˜
3. spark
(ë³µì‚¬ ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ë©´ ì•Œì•„ì„œ ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤)`,value:x,onChange:E=>p(E.target.value)}),d&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsxs("div",{className:"text-white font-bold animate-pulse flex items-center gap-2",children:[e.jsx(ct,{className:"text-yellow-400"})," ë‹¨ì–´ ë¶„ì„ ë° ìƒì„± ì¤‘..."]})})]}),e.jsxs("button",{onClick:()=>{fe.playClick(),w(x)},disabled:d,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg hover:bg-slate-800 transition active:scale-[0.98] shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(ct,{size:20,className:"text-yellow-400"})," í•™ìŠµ ì‹œì‘í•˜ê¸°"]})]})]})},yr=({words:t,onComplete:r,isReverse:s,startIndex:a})=>{const[n,i]=m.useState(0),[c,d]=m.useState(!1),o=t[n],x=n/t.length*100,p=a+n,u=()=>{fe.playClick(),d(!c)},j=()=>{fe.playClick(),n<t.length-1?(d(!1),setTimeout(()=>i(E=>E+1),200)):r()},w=E=>{E.stopPropagation(),fe.speak(o.term)},k=s?o.definition:o.term,b=s?o.term:o.definition;return e.jsxs("div",{className:"flex flex-col h-full pt-6 pb-6 px-6 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[e.jsx("span",{children:"PROGRESS"}),e.jsxs("span",{children:[n+1," / ",t.length]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${x}%`}})})]}),e.jsx("div",{className:"flex-1 relative perspective-1000 mb-6 group cursor-pointer",onClick:u,children:e.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${c?"rotate-y-180":""}`,children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full bg-white rounded-[2rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.1)] border border-slate-100 backface-hidden flex flex-col items-center justify-center p-8",children:[e.jsxs("div",{className:"text-center w-full",children:[e.jsxs("div",{className:"inline-block bg-slate-100 text-slate-500 font-black text-sm px-3 py-1 rounded-full mb-6",children:["#",p]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight break-words leading-tight",children:k}),!s&&e.jsx("button",{onClick:w,className:"mt-2 p-4 bg-indigo-50 rounded-full text-indigo-600 hover:bg-indigo-100 transition-colors inline-flex items-center justify-center group-hover:scale-110 transform duration-300",children:e.jsx(We,{size:28})})]}),e.jsxs("div",{className:"absolute bottom-8 text-slate-400 text-sm font-bold flex items-center gap-2 animate-pulse",children:[e.jsx(Dt,{size:16})," íƒ­í•´ì„œ ëœ» ë³´ê¸°"]})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-slate-900 text-white rounded-[2rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.25)] backface-hidden rotate-y-180 flex flex-col items-center justify-center p-8",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"inline-block bg-white/10 text-white/60 font-bold text-xs px-3 py-1 rounded-full mb-6 uppercase tracking-widest",children:"Answer"}),e.jsx("h2",{className:"text-3xl font-bold mb-6 break-words leading-snug",children:b}),s&&e.jsx("button",{onClick:w,className:"mb-6 p-3 bg-white/10 rounded-full text-white hover:bg-white/20 transition-colors inline-flex items-center justify-center",children:e.jsx(We,{size:24})}),e.jsxs("div",{className:"w-full bg-white/10 rounded-xl p-4 backdrop-blur-sm text-left mt-2",children:[o.mnemonic&&e.jsxs("div",{className:"mb-3 pb-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-xs font-bold mb-1",children:[e.jsx(ds,{size:14})," MEMORY STORY"]}),e.jsx("p",{className:"text-sm leading-relaxed opacity-90 font-medium",children:o.mnemonic})]}),o.example?e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold mb-1",children:"EXAMPLE"}),e.jsxs("p",{className:"text-sm italic opacity-80 leading-relaxed",children:['"',o.example,'"']})]}):e.jsx("div",{className:"text-center text-xs text-slate-500 py-1",children:"No example available"})]})]})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:E=>{E.stopPropagation(),j()},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition-transform active:scale-95 flex items-center justify-center gap-2",children:["ë‹¤ìŒ ì¹´ë“œ ",e.jsx(ms,{size:20})]})})]})},wr=({words:t,onFinish:r,isReverse:s,startIndex:a})=>{const[n,i]=m.useState(0),[c,d]=m.useState(3),[o,x]=m.useState("ready"),[p,u]=m.useState([]),[j,w]=m.useState([]),k=m.useRef(null),b=t[n],E=a+n;m.useEffect(()=>(o==="playing"&&(d(3),k.current=setInterval(()=>{d(_=>_<=1?(k.current&&clearInterval(k.current),B(),0):(fe.playTick(),_-1))},1e3)),()=>{k.current&&clearInterval(k.current)}),[n,o]);const B=()=>{x("revealed"),fe.playError()},P=_=>{k.current&&clearInterval(k.current),_?(fe.playSuccess(),u([...p,b]),T()):(fe.playError(),x("revealed"))},I=()=>{w([...j,b]),T()},T=()=>{n<t.length-1?(x("playing"),i(_=>_+1)):r({correct:p,wrong:j})},f=s?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-slate-400 font-bold text-xl mb-4",children:["#",E]}),e.jsx("h2",{className:"text-4xl font-bold text-slate-800 mb-6 tracking-tight leading-tight text-center",children:b.definition})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-slate-400 font-bold text-xl mb-4",children:["#",E]}),e.jsx("h2",{className:"text-5xl font-black text-slate-800 mb-6 tracking-tight leading-tight text-center",children:b.term})]}),A=s?e.jsxs("div",{className:"animate-fade-in-up text-center",children:[e.jsx("div",{className:"h-px w-12 bg-slate-200 mx-auto mb-6"}),e.jsx("p",{className:"text-3xl font-black text-indigo-600",children:b.term})]}):e.jsxs("div",{className:"animate-fade-in-up text-center",children:[e.jsx("div",{className:"h-px w-12 bg-slate-200 mx-auto mb-6"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:b.definition}),b.mnemonic&&e.jsxs("p",{className:"text-slate-500 mt-2 text-sm",children:['"',b.mnemonic,'"']})]});return o==="ready"?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"mb-6 bg-indigo-100 p-6 rounded-full text-indigo-600 animate-bounce",children:e.jsx(pt,{size:48})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"3ì´ˆ íšŒìƒ í…ŒìŠ¤íŠ¸"}),e.jsx("p",{className:"text-slate-500 mb-2",children:s?"ëœ»ì„ ë³´ê³  3ì´ˆ ì•ˆì— ì˜ë‹¨ì–´ë¥¼ ë– ì˜¬ë¦¬ì„¸ìš”!":"ì˜ë‹¨ì–´ë¥¼ ë³´ê³  3ì´ˆ ì•ˆì— ëœ»ì„ ë– ì˜¬ë¦¬ì„¸ìš”!"}),e.jsx("button",{onClick:()=>{fe.playClick(),x("playing")},className:"w-full mt-6 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition",children:"START!"})]}):e.jsxs("div",{className:"flex flex-col h-full pt-10 pb-6 px-6 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{className:"text-slate-400 font-medium text-sm",children:[n+1," / ",t.length]}),e.jsxs("div",{className:`flex items-center gap-2 font-mono font-bold text-xl ${c<=1?"text-red-500":"text-slate-700"}`,children:[e.jsx(pt,{size:20})," ",c,"s"]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"w-full px-4",children:[f,o==="revealed"&&A]})}),e.jsx("div",{className:"mt-10 grid grid-cols-2 gap-4",children:o==="playing"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P(!1),className:"bg-slate-100 text-slate-600 py-4 rounded-2xl font-bold hover:bg-slate-200 transition active:scale-95",children:"ëª¨ë¥´ê² ì–´ìš”"}),e.jsx("button",{onClick:()=>P(!0),className:"bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition active:scale-95",children:"ì•Œì•„ìš”!"})]}):e.jsxs("button",{onClick:I,className:"col-span-2 bg-slate-900 text-white py-4 rounded-2xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:["ì˜¤ë‹µ í™•ì¸í•˜ê³  ê³„ì†í•˜ê¸° ",e.jsx(xs,{size:18})]})})]})},At=10,jr=()=>{const[t,r]=m.useState([]),[s,a]=m.useState(0),[n,i]=m.useState(J.HOME),[c,d]=m.useState(null),[o,x]=m.useState([]),[p,u]=m.useState(!1),j=f=>{const A=[];for(let _=0;_<f.length;_+=At)A.push({id:_,words:f.slice(_,_+At),isUnlocked:_===0});r(A),a(0),i(J.STUDY)},w=()=>{if(o.length===0)return;const f={id:999,words:[...o],isUnlocked:!0};r([f]),a(0),i(J.WRONG_REVIEW)},k=()=>{i(J.TEST)},b=f=>{d(f),x(A=>{const _=[...A,...f.wrong];return Array.from(new Map(_.map(O=>[O.id,O])).values())}),(n===J.WRONG_REVIEW||n===J.TEST)&&f.correct.length>0&&x(A=>A.filter(_=>!f.correct.some(O=>O.id===_.id))),fe.playSuccess(),i(J.RESULT)},E=()=>{const f=s+1;if(f<t.length){const A=[...t];A[f].isUnlocked=!0,r(A),a(f),d(null),i(J.STUDY)}else alert("ëª¨ë“  ë‹¨ì–´ í•™ìŠµì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! í›Œë¥­í•´ìš”!"),i(J.HOME)},B=()=>{if(c&&c.wrong.length>0){const f={id:(I==null?void 0:I.id)||0,words:c.wrong,isUnlocked:!0};r([f]),a(0),fe.playClick(),i(J.STUDY)}},P=()=>{confirm("í™ˆìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ì§„í–‰ ìƒí™©ì´ ì´ˆê¸°í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")&&i(J.HOME)},I=t[s],T=(I==null?void 0:I.id)===999?1:((I==null?void 0:I.id)||0)+1;return e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"w-full max-w-lg h-screen md:h-[850px] bg-white md:rounded-[2.5rem] shadow-2xl overflow-hidden relative flex flex-col",children:[n!==J.HOME&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-md z-10 p-4 flex justify-between items-center border-b border-slate-100",children:[e.jsx("button",{onClick:P,className:"p-2 text-slate-400 hover:text-slate-600",children:e.jsx(us,{size:20})}),e.jsx("span",{className:"font-bold text-indigo-600 flex items-center gap-1",children:n===J.WRONG_REVIEW?e.jsxs(e.Fragment,{children:[e.jsx(_t,{size:18})," PRISON BREAK"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ot,{size:18})," SET ",s+1]})}),e.jsx("div",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:n===J.STUDY||n===J.WRONG_REVIEW?"LEARNING":n===J.TEST?"TESTING":"RESULT"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n===J.HOME&&e.jsx(br,{onWordsLoaded:j,onStartWrongReview:w,wrongWordsCount:o.length,isReverse:p,onToggleReverse:()=>u(!p)}),(n===J.STUDY||n===J.WRONG_REVIEW)&&I&&e.jsx(yr,{words:I.words,onComplete:k,isReverse:p,startIndex:T}),n===J.TEST&&I&&e.jsx(wr,{words:I.words,onFinish:b,isReverse:p,startIndex:T}),n===J.RESULT&&c&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"bg-yellow-100 p-6 rounded-full text-yellow-500 mb-6 animate-bounce",children:e.jsx(Pt,{size:64})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-2",children:"í•™ìŠµ ì™„ë£Œ!"}),e.jsxs("p",{className:"text-slate-500 mb-8",children:[c.correct.length,"ê°œ ê¸°ì–µí•¨ / ",c.wrong.length,"ê°œ ë†“ì¹¨"]}),e.jsxs("div",{className:"w-full space-y-3",children:[c.wrong.length>0?e.jsxs("button",{onClick:B,className:"w-full py-4 bg-red-50 text-red-600 rounded-2xl font-bold text-lg hover:bg-red-100 transition flex items-center justify-center gap-2",children:[e.jsx(hs,{size:20})," í‹€ë¦° ë‹¨ì–´ ë°”ë¡œ ì¬ì‹œí—˜"]}):e.jsx("div",{className:"text-indigo-600 font-bold py-2",children:"ì™„ë²½í•´ìš”! ìŠ¤íŒŒí¬ê°€ íŠ€ì—ˆë„¤ìš”! ğŸ‰"}),n!==J.WRONG_REVIEW&&s<t.length-1&&e.jsxs("button",{onClick:E,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-slate-800 transition",children:["ë‹¤ìŒ ì„¸íŠ¸ ì—´ê¸° (",s+2," SET)"]}),e.jsx("button",{onClick:()=>i(J.HOME),className:"w-full py-4 text-slate-400 font-bold hover:text-slate-600 transition",children:"í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°"})]})]})]})]})})})},he=new(window.AudioContext||window.webkitAudioContext),Ke=()=>{he.state==="suspended"&&he.resume();const t=he.createOscillator(),r=he.createGain();t.type="sine",t.frequency.setValueAtTime(800,he.currentTime),t.frequency.exponentialRampToValueAtTime(400,he.currentTime+.1),r.gain.setValueAtTime(.1,he.currentTime),r.gain.exponentialRampToValueAtTime(.01,he.currentTime+.1),t.connect(r),r.connect(he.destination),t.start(),t.stop(he.currentTime+.1)},vr=()=>{he.state==="suspended"&&he.resume();const t=he.createOscillator(),r=he.createGain();t.type="triangle",t.frequency.setValueAtTime(300,he.currentTime),r.gain.setValueAtTime(.05,he.currentTime),r.gain.linearRampToValueAtTime(0,he.currentTime+.15),t.connect(r),r.connect(he.destination),t.start(),t.stop(he.currentTime+.15)},Nr=t=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const r=new SpeechSynthesisUtterance(t);r.lang="en-US",r.rate=.9,window.speechSynthesis.speak(r)}},Sr=({onWordsLoaded:t})=>{const r=m.useCallback(s=>{var i;Ke();const a=(i=s.target.files)==null?void 0:i[0];if(!a)return;const n=new FileReader;n.onload=c=>{var p;let d=(p=c.target)==null?void 0:p.result;d.charCodeAt(0)===65279&&(d=d.slice(1));const o=d.split(/\r?\n/),x=[];o.forEach((u,j)=>{if(!u.trim())return;const w=u.replace(/"/g,"");let k=[];w.includes("	")?k=w.split("	"):w.includes(",")?k=w.split(","):k=w.split(";"),k=k.map(I=>I.trim());let b="",E="";const B=/^[0-9]+[\.]?$/.test(k[0]);k.length>=3&&B?(b=k[1],E=k[2]):k.length>=2&&(b=k[0],E=k[1]);const P=["word","term","english","no","number","ë‹¨ì–´","ìˆœì„œ","ëœ»","ì˜ë¯¸","meaning"].includes(b.toLowerCase());b&&E&&!P&&x.push({id:`word-${Date.now()}-${j}`,term:b,definition:E,isMemorized:!1,status:"new"})}),x.length>0?t(x):alert(`ë‹¨ì–´ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
(ì˜ˆì‹œ: apple, ì‚¬ê³¼  ë˜ëŠ”  1, apple, ì‚¬ê³¼)`)},n.readAsText(a)},[t]);return e.jsx("div",{className:"w-full max-w-md p-8 bg-white rounded-3xl shadow-sm border-2 border-dashed border-blue-200 text-center hover:border-blue-400 transition-colors cursor-pointer group",children:e.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-full mb-4 group-hover:bg-blue-100 transition-colors",children:e.jsx(Gt,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"ë‹¨ì–´ì¥ íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"CSV, ì—‘ì…€(csvì €ì¥) íŒŒì¼"}),e.jsx("input",{type:"file",accept:".csv, .txt",onChange:r,className:"hidden"}),e.jsxs("div",{className:"flex flex-col gap-2 text-xs text-slate-400 bg-slate-50 px-4 py-3 rounded-xl text-left w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-slate-500 mb-1",children:[e.jsx(ps,{size:12}),e.jsx("span",{children:"ì§€ì› í˜•ì‹"})]}),e.jsx("div",{children:"1. apple, ì‚¬ê³¼"}),e.jsx("div",{children:"2. 1, apple, ì‚¬ê³¼ (ë²ˆí˜¸ ìë™ ì œì™¸)"})]})]})})},kr=({block:t,onStart:r})=>{const s=t.status==="locked",a=t.status==="completed",n=()=>{s||(Ke(),r(t.id))};return e.jsxs("div",{onClick:n,className:`
        relative overflow-hidden rounded-2xl p-6 transition-all duration-300
        ${s?"bg-slate-100 opacity-70 cursor-not-allowed":"bg-white cursor-pointer hover:shadow-lg hover:-translate-y-1"}
        ${t.status==="in-progress"?"ring-2 ring-blue-400":""}
      `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`
          w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold
          ${a?"bg-green-100 text-green-600":"bg-blue-50 text-blue-600"}
        `,children:t.id}),s&&e.jsx(fs,{className:"text-slate-400",size:20}),a&&e.jsx(gs,{className:"text-green-500",size:24}),!s&&!a&&e.jsx(dt,{className:"text-blue-400",size:24})]}),e.jsxs("h3",{className:"text-slate-800 font-bold text-lg mb-1",children:["Block ",t.id]}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[t.words.length," Words"]}),t.status==="in-progress"&&e.jsx("div",{className:"mt-4 h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-400 w-1/3"})})]})},Er=({block:t,onComplete:r,onBack:s})=>{const[a,n]=m.useState(0),[i,c]=m.useState(!1),d=t.words[a],o=(a+1)/t.words.length*100;m.useEffect(()=>{c(!1)},[a]);const x=()=>{vr(),c(!i)},p=j=>{j==null||j.stopPropagation(),Ke(),a<t.words.length-1?n(w=>w+1):r()},u=j=>{j.stopPropagation(),Ke(),Nr(d.term)};return e.jsxs("div",{className:"flex flex-col items-center w-full max-w-md mx-auto h-full",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-6 px-4",children:[e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 p-2",children:e.jsx(bs,{size:24})}),e.jsx("div",{className:"flex-1 mx-4 h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-out",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-slate-500 w-10 text-right",children:[a+1,"/",t.words.length]})]}),e.jsx("div",{className:"w-full px-4 mb-8 perspective-1000 flex-1 flex items-center justify-center",children:e.jsx("div",{onClick:x,className:`
            relative w-full aspect-[4/5] max-h-[500px] cursor-pointer card-flip
            ${i?"flipped":""}
          `,children:e.jsxs("div",{className:"card-inner w-full h-full relative shadow-xl rounded-3xl transition-all duration-500",children:[e.jsxs("div",{className:"card-front absolute w-full h-full bg-white rounded-3xl flex flex-col items-center justify-center p-8 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold text-blue-500 uppercase tracking-wider mb-8",children:"English Term"}),e.jsx("h2",{className:`font-bold text-slate-800 text-center mb-8 break-words w-full leading-tight ${d.term.length>12?"text-3xl":"text-4xl"}`,children:d.term}),e.jsx("button",{onClick:u,className:"w-16 h-16 rounded-full bg-blue-50 text-blue-500 hover:bg-blue-100 hover:scale-110 transition-all flex items-center justify-center shadow-sm",children:e.jsx(We,{size:32})}),e.jsxs("div",{className:"absolute bottom-8 text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Dt,{size:14}),e.jsx("span",{children:"Tap to flip"})]})]}),e.jsxs("div",{className:"card-back absolute w-full h-full bg-slate-800 rounded-3xl flex flex-col items-center justify-center p-8 text-white border border-slate-700",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-6",children:"Definition"}),e.jsx("h2",{className:"text-3xl font-bold text-center break-words leading-relaxed",children:d.definition})]})]})})}),e.jsx("div",{className:"w-full px-4 mb-6",children:e.jsxs("button",{onClick:p,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-200 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx("span",{children:a===t.words.length-1?"Finish Block":"Next Word"}),e.jsx(ys,{size:20})]})})]})},it=10,Tr=t=>{const r=[];for(let s=0;s<t.length;s+=it)r.push({id:Math.floor(s/it)+1,words:t.slice(s,s+it),status:s===0?"ready":"locked"});return r},Cr=()=>{const[t,r]=m.useState([]),[s,a]=m.useState([]),[n,i]=m.useState(J.HOME),[c,d]=m.useState(null),o=u=>{r(u);const j=Tr(u);a(j)},x=u=>{a(j=>j.map(w=>w.id===u?{...w,status:"in-progress"}:w)),d(u),i(J.STUDY)},p=()=>{c&&(a(u=>u.map(j=>j.id===c?{...j,status:"completed"}:j.id===c+1?{...j,status:"ready"}:j)),i(J.HOME),d(null))};return e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen flex flex-col max-w-md mx-auto bg-[#F0F4F8] relative shadow-2xl",children:[e.jsxs("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-10 px-6 py-4 flex justify-between items-center border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ws,{size:20})}),e.jsx("h1",{className:"font-bold text-lg tracking-tight",children:"TEN BLOCK"})]}),e.jsx("button",{className:"text-slate-400 hover:text-slate-600",children:e.jsx(Lt,{size:20})})]}),e.jsxs("main",{className:"flex-1 p-6 flex flex-col",children:[n===J.HOME&&e.jsx(e.Fragment,{children:t.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"ì‹œì‘í•´ë³¼ê¹Œìš”?"}),e.jsx("p",{className:"text-slate-500",children:"10ê°œì”© ìª¼ê°œì„œ ì™¸ìš°ë©´ ê¸ˆë°© ì™¸ì›Œìš”!"})]}),e.jsx(Sr,{onWordsLoaded:o})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"ë‚˜ì˜ ë‹¨ì–´ì¥"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[s.filter(u=>u.status==="completed").length," / ",s.length," Blocks ì™„ë£Œ"]})]}),e.jsx("button",{onClick:()=>r([]),className:"text-xs text-blue-500 underline",children:"íŒŒì¼ ë³€ê²½"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(u=>e.jsx(kr,{block:u,onStart:x},u.id))})]})}),n===J.STUDY&&c&&e.jsx(Er,{block:s.find(u=>u.id===c),onComplete:p,onBack:()=>i(J.HOME)})]})]})})},Ht=[{name:"USA",code:"US"},{name:"China",code:"CN"},{name:"India",code:"IN"},{name:"Brazil",code:"BR"},{name:"Russia",code:"RU"},{name:"Japan",code:"JP"},{name:"Germany",code:"DE"},{name:"United Kingdom",code:"GB"},{name:"France",code:"FR"},{name:"South Korea",code:"KR"},{name:"Canada",code:"CA"},{name:"Australia",code:"AU"}],Ar=1440*60*1e3,xt=[{id:"slow",name:"Standard",clicksPerSecond:5,price:"$0.99",intervalMs:200},{id:"fast",name:"Supercharged",clicksPerSecond:10,price:"$1.99",intervalMs:100},{id:"ludicrous",name:"Ludicrous Speed",clicksPerSecond:20,price:"$4.99",intervalMs:50}],Mr=10,$t=523,Mt={USA:{button:"bg-blue-600 hover:bg-blue-500",text:"text-white"},China:{button:"bg-red-600 hover:bg-red-500",text:"text-yellow-300"},India:{button:"bg-orange-500 hover:bg-orange-400",text:"text-white"},Brazil:{button:"bg-green-600 hover:bg-green-500",text:"text-yellow-300"},Russia:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Japan:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Germany:{button:"bg-yellow-500 hover:bg-yellow-400",text:"text-black"},"United Kingdom":{button:"bg-blue-700 hover:bg-blue-600",text:"text-white"},France:{button:"bg-blue-700 hover:bg-blue-600",text:"text-white"},"South Korea":{button:"bg-blue-500 hover:bg-blue-400",text:"text-red-500"},Canada:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Australia:{button:"bg-blue-800 hover:bg-blue-700",text:"text-white"},default:{button:"bg-yellow-500 hover:bg-yellow-400",text:"text-gray-900"}},Je=t=>{const r=t.toUpperCase().split("").map(s=>127397+s.charCodeAt(0));return String.fromCodePoint(...r)},qt=t=>({USA:"US",China:"CN",India:"IN",Brazil:"BR",Russia:"RU",Japan:"JP",Germany:"DE","United Kingdom":"GB",France:"FR","South Korea":"KR",Canada:"CA",Australia:"AU"})[t]||"AQ",Ir=({onSelectCountry:t})=>{const[r,s]=m.useState(null),a=()=>{r&&t(r)};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-950 p-6 text-center overflow-hidden",children:[e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 mb-4 tracking-tighter uppercase",children:"Global Click War"}),e.jsx("p",{className:"text-xl text-gray-400 mb-12 max-w-lg mx-auto font-medium",children:"Represent your nation in the ultimate worldwide tapping competition. Choose wisely â€” your allegiance is permanent."})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 w-full max-w-5xl animate-fade-in-delayed",children:Ht.map(n=>e.jsxs("button",{onClick:()=>s(n),className:`flex flex-col items-center justify-center p-6 rounded-2xl transition-all duration-300 transform hover:scale-105 group border-2 ${(r==null?void 0:r.code)===n.code?"bg-yellow-500 border-yellow-400 text-gray-900 shadow-[0_0_30px_rgba(234,179,8,0.3)] ring-4 ring-yellow-400/20":"bg-gray-900/50 border-gray-800 text-white hover:bg-gray-800 hover:border-gray-700"}`,children:[e.jsx("span",{className:"text-6xl mb-3 group-hover:scale-110 transition-transform",children:Je(n.code)}),e.jsx("span",{className:"font-black text-xs uppercase tracking-widest",children:n.name})]},n.code))}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-900 p-10 rounded-[2.5rem] shadow-2xl border border-gray-800 text-center max-w-md w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-orange-500"}),e.jsx("div",{className:"text-9xl mb-6 drop-shadow-2xl",children:Je(r.code)}),e.jsxs("h2",{className:"text-3xl font-black mb-4 text-white uppercase tracking-tight",children:["Enlist for ",r.name,"?"]}),e.jsxs("p",{className:"text-gray-400 mb-8 leading-relaxed font-medium",children:["You are about to represent ",e.jsx("span",{className:"text-yellow-400 font-bold",children:r.name})," in the global arena. This decision is final. Are you ready to tap for glory?"]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:a,className:"w-full py-5 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 font-black rounded-2xl hover:from-yellow-300 hover:to-orange-400 transition-all shadow-xl shadow-yellow-500/20 uppercase tracking-[0.2em] text-sm",children:"Enter the War Room"}),e.jsx("button",{onClick:()=>s(null),className:"w-full py-4 bg-gray-800/50 text-gray-400 font-bold rounded-2xl hover:bg-gray-800 hover:text-white transition-colors uppercase tracking-widest text-[10px]",children:"Choose another nation"})]})]})}),e.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in-up { animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fade-in-delayed { opacity: 0; animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards; }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
      `})]})},Vt=({leaderboard:t,userCountry:r})=>{const s=Object.entries(t).sort(([,a],[,n])=>n-a);return e.jsxs("div",{className:"w-full max-w-md bg-gray-900/60 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-800 flex flex-col h-full max-h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsx("h2",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 uppercase tracking-widest",children:"Global Ranks"}),e.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-tighter",children:"Live Updates"})]}),e.jsx("div",{className:"space-y-2 overflow-y-auto pr-2 custom-scrollbar flex-grow",children:s.map(([a,n],i)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl transition-all duration-300 border ${a===r?"bg-yellow-500 border-yellow-400 text-gray-900 font-bold scale-[1.03] shadow-xl shadow-yellow-500/20":"bg-gray-800/40 border-gray-800 hover:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`text-xs font-black w-6 ${a===r?"text-gray-900/50":"text-gray-600"}`,children:["#",i+1]}),e.jsx("span",{className:"text-3xl drop-shadow-sm",children:Je(qt(a))}),e.jsx("span",{className:"text-sm font-black uppercase tracking-tight truncate max-w-[100px]",children:a})]}),e.jsx("span",{className:"text-lg font-black font-mono tracking-tighter",children:Math.floor(n).toLocaleString()})]},a))}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #374151; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #4b5563; }
      `})]})},Wt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Rr=({onPurchase:t,onClose:r,currentTier:s})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-2xl text-center max-w-lg w-full relative",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors","aria-label":"Close store",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(Wt,{className:"w-8 h-8 text-yellow-400 mr-2"}),e.jsx("h2",{className:"text-3xl font-bold text-yellow-400",children:"Auto-Click Upgrades"})]}),e.jsx("p",{className:"text-gray-300 mb-8",children:"Purchase an auto-clicker to boost your nation's score automatically!"}),e.jsx("div",{className:"space-y-4",children:xt.map(a=>e.jsxs("div",{className:`p-4 rounded-lg flex flex-col sm:flex-row items-center justify-between transition-all ${s===a.id?"bg-green-600 border-2 border-green-400":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsxs("div",{className:"text-left mb-4 sm:mb-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:a.name}),e.jsxs("p",{className:"text-gray-300",children:[a.clicksPerSecond," clicks / second"]}),s===a.id&&e.jsx("p",{className:"text-sm font-bold text-white mt-1",children:"ACTIVE"})]}),e.jsx("button",{onClick:()=>t(a.id),disabled:s===a.id,className:"w-full sm:w-auto px-6 py-3 bg-yellow-500 text-gray-900 font-bold rounded-md hover:bg-yellow-400 transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed disabled:text-gray-400",children:a.price})]},a.id))})]})}),Lr=()=>{const[t,r]=m.useState(!0);return t?e.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-400 via-yellow-500 to-orange-500 p-3 text-center text-gray-900 font-bold relative shadow-lg",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold text-lg",children:"SPECIAL EVENT!"})," Achieve over 100,000 clicks for an exclusive reward!"]}),e.jsx("button",{onClick:()=>r(!1),className:"absolute top-1/2 right-4 -translate-y-1/2 text-gray-800 hover:text-black","aria-label":"Dismiss promotional message",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):null},_r=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Gr=({x:t,y:r,id:s,value:a})=>e.jsxs("div",{className:"absolute text-yellow-400 font-black text-5xl pointer-events-none z-50 drop-shadow-[0_4px_8px_rgba(0,0,0,0.6)]",style:{left:`${t}px`,top:`${r}px`,transform:"translate(-50%, -50%)",animation:"click-float 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards"},children:["+",a]},s),Or=({userCountry:t,userClicks:r,leaderboard:s,timeLeft:a,onIncrement:n,autoClickTier:i,onPurchaseTier:c,isGodModeActive:d,onToggleGodMode:o,isAutoClickEnabled:x,onToggleAutoClick:p})=>{const[u,j]=m.useState(!1),[w,k]=m.useState([]),b=m.useRef(null),E=Math.min($t,Math.floor(Math.sqrt(r/10))+1);m.useEffect(()=>{if(b.current&&(clearInterval(b.current),b.current=null),x){if(d)b.current=setInterval(()=>{n()},Mr);else if(i){const A=xt.find(_=>_.id===i);A&&(b.current=setInterval(()=>{n()},A.intervalMs))}}return()=>{b.current&&clearInterval(b.current)}},[i,n,d,x]);const B=A=>{n();const _=A.currentTarget.getBoundingClientRect(),O=A.clientX-_.left,D=A.clientY-_.top,v=1+(E-1)*.05,g={x:O,y:D,id:Date.now(),value:v.toFixed(2)};k(C=>[...C,g]),setTimeout(()=>{k(C=>C.filter(U=>U.id!==g.id))},800)},P=Object.values(s).reduce((A,_)=>A+_,0),I=s[t]||0,T=i?xt.find(A=>A.id===i):null,f=Mt[t]||Mt.default;return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-950 text-white selection:bg-yellow-500 selection:text-gray-900",children:[e.jsx(Lr,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch justify-center flex-grow p-4 lg:p-12 gap-12 max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col items-center w-full lg:w-3/5 space-y-10",children:[e.jsxs("header",{className:"text-center animate-fade-in space-y-4",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 tracking-tighter uppercase leading-none",children:"Global Click War"}),e.jsxs("div",{className:"inline-flex items-center gap-4 bg-gray-900 border border-gray-800 py-3 px-8 rounded-[2rem] shadow-2xl",children:[e.jsx("span",{className:"text-5xl drop-shadow-xl",children:Je(qt(t))}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.2em] mb-0.5",children:"Your Nation"}),e.jsx("p",{className:"text-2xl font-black uppercase tracking-tight leading-none",children:t})]})]})]}),e.jsxs("div",{className:"w-full max-w-sm bg-gray-900/50 backdrop-blur p-6 rounded-[2rem] border border-gray-800 shadow-inner text-center",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] mb-2",children:"Operation Window Ends In"}),e.jsxs("div",{className:"text-4xl font-mono font-black text-yellow-400 tabular-nums tracking-tight",children:[e.jsxs("span",{children:[String(a.days).padStart(2,"0"),"d "]}),e.jsxs("span",{children:[String(a.hours).padStart(2,"0"),"h "]}),e.jsxs("span",{children:[String(a.minutes).padStart(2,"0"),"m "]}),e.jsxs("span",{children:[String(a.seconds).padStart(2,"0"),"s"]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-10 bg-gradient-to-br from-yellow-500 via-orange-500 to-red-600 rounded-full opacity-20 blur-3xl group-hover:opacity-40 transition-opacity animate-pulse"}),e.jsxs("button",{onClick:B,className:`relative w-72 h-72 md:w-96 md:h-96 rounded-full flex items-center justify-center font-black text-6xl shadow-2xl transform active:scale-90 active:rotate-2 transition-all duration-75 select-none overflow-hidden border-[12px] border-gray-950/80 ${f.button} ${f.text}`,children:["TAP",w.map(A=>e.jsx(Gr,{...A},A.id))]})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 font-black uppercase tracking-widest text-[10px]",children:"Your Contribution"}),e.jsx("div",{className:"px-3 py-1 bg-yellow-500/10 border border-yellow-500/30 rounded-full",children:e.jsxs("span",{className:"text-[10px] text-yellow-500 font-black",children:["RANK LVL ",E]})})]}),e.jsx("p",{className:"text-7xl font-black font-mono tracking-tighter drop-shadow-lg text-white",children:Math.floor(r).toLocaleString()})]}),e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-md",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[e.jsxs("button",{onClick:()=>j(!0),className:"flex flex-col items-center justify-center gap-2 p-6 bg-gray-900 rounded-3xl hover:bg-gray-800 transition-all border border-gray-800 hover:border-yellow-500/50 group",children:[e.jsx(Wt,{className:"w-8 h-8 text-yellow-500 group-hover:scale-125 transition-transform"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Armory Store"})]}),e.jsxs("button",{onClick:o,className:`flex flex-col items-center justify-center gap-2 p-6 rounded-3xl transition-all border ${d?"bg-purple-600/20 border-purple-500 text-purple-400 shadow-[0_0_30px_rgba(147,51,234,0.3)]":"bg-gray-900 border-gray-800 hover:border-purple-500/50"}`,children:[e.jsx(_r,{className:`w-8 h-8 ${d?"fill-purple-400":"text-gray-600"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"God Mode"})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full px-6 py-4 bg-gray-900 border border-gray-800 rounded-3xl shadow-xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest",children:"Auto-Tapper Status"}),e.jsx("span",{className:`text-[11px] font-black uppercase ${x?"text-green-500":"text-gray-500"}`,children:x?d?"Overdrive (100/s)":`${(T==null?void 0:T.name)||"Standard"} Active`:"Manual Only"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:p,className:"sr-only peer"}),e.jsx("div",{className:"w-16 h-8 bg-gray-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-600 shadow-inner"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center w-full lg:w-2/5 space-y-8",children:[e.jsxs("div",{className:"w-full bg-gray-900/50 border border-gray-800 p-8 rounded-[2.5rem] shadow-2xl space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]",children:[t," National Score"]}),e.jsx("p",{className:"text-5xl font-black font-mono text-white tabular-nums tracking-tighter",children:Math.floor(I).toLocaleString()}),e.jsx("div",{className:"w-full h-3 bg-gray-950 rounded-full overflow-hidden border border-gray-800",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-500 via-orange-500 to-red-600 transition-all duration-1000 shadow-[0_0_15px_rgba(234,179,8,0.5)]",style:{width:`${Math.min(100,I/(P||1)*1e3)}%`}})})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-800 space-y-1",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]",children:"Total Global Impact"}),e.jsx("p",{className:"text-4xl font-black font-mono text-white/30 tabular-nums tracking-tighter",children:Math.floor(P).toLocaleString()})]})]}),e.jsx(Vt,{leaderboard:s,userCountry:t})]}),e.jsx("style",{children:`
          @keyframes click-float {
            0% { transform: translate(-50%, -50%) scale(0.6); opacity: 0; }
            15% { opacity: 1; transform: translate(-50%, -100%) scale(1.3); }
            100% { transform: translate(-50%, -250%) scale(1.6); opacity: 0; }
          }
          @keyframes fade-in {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in { animation: fade-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        `})]}),u&&e.jsx(Rr,{currentTier:i,onPurchase:c,onClose:()=>j(!1)})]})},Dr=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),e.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),e.jsx("path",{d:"M4 22h16"}),e.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),e.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),e.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),Pr=t=>{const a=({USA:"US",China:"CN",India:"IN",Brazil:"BR",Russia:"RU",Japan:"JP",Germany:"DE","United Kingdom":"GB",France:"FR","South Korea":"KR",Canada:"CA",Australia:"AU"}[t]||"AQ").toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...a)},Ur=({leaderboard:t,userCountry:r})=>{const s=Object.entries(t).sort(([,n],[,i])=>i-n),a=s.length>0?s[0]:null;return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 p-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-yellow-400 mb-4",children:"The War is Over!"}),a&&e.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-800 rounded-lg",children:[e.jsx(Dr,{className:"w-24 h-24 text-yellow-400 mb-4"}),e.jsx("h2",{className:"text-3xl text-white",children:"The winner is"}),e.jsxs("p",{className:"text-5xl font-bold text-yellow-400 mt-2",children:[Pr(a[0])," ",a[0]]}),e.jsxs("p",{className:"text-2xl text-gray-300 mt-2 font-mono",children:["with ",a[1].toLocaleString()," clicks!"]})]})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:"Final Standings"}),e.jsx(Vt,{leaderboard:t,userCountry:r})]})]})},Br=()=>{const[t,r]=m.useState(null),[s,a]=m.useState(0),[n,i]=m.useState({}),[c,d]=m.useState(null),[o,x]=m.useState({days:0,hours:0,minutes:0,seconds:0}),[p,u]=m.useState(!1),[j,w]=m.useState(!0),[k,b]=m.useState(null),[E,B]=m.useState(!1),[P,I]=m.useState(!0),T=m.useCallback(v=>{const g=v-new Date().getTime();return g>0?{days:Math.floor(g/(1e3*60*60*24)),hours:Math.floor(g/(1e3*60*60)%24),minutes:Math.floor(g/1e3/60%60),seconds:Math.floor(g/1e3%60)}:null},[]);m.useEffect(()=>{try{const v=localStorage.getItem("popcat_user_country"),g=localStorage.getItem("popcat_user_clicks"),C=localStorage.getItem("popcat_global_leaderboard");let U=localStorage.getItem("popcat_event_end_time");const $=localStorage.getItem("popcat_autoclick_tier"),se=localStorage.getItem("popcat_god_mode"),ue=localStorage.getItem("popcat_autoclick_enabled");v&&r(JSON.parse(v)),g&&a(JSON.parse(g)),$&&b(JSON.parse($)),se&&B(JSON.parse(se)),ue&&I(JSON.parse(ue));let Re=C?JSON.parse(C):{};if(Ht.forEach(G=>{Re[G.name]===void 0&&(Re[G.name]=0)}),i(Re),!U){const G=new Date().getTime()+Ar;U=String(G),localStorage.setItem("popcat_event_end_time",U)}const je=parseInt(U,10);if(d(je),new Date().getTime()>=je)u(!0);else{const G=T(je);G&&x(G)}}catch(v){console.warn("Storage sync failed, using defaults",v)}finally{setTimeout(()=>w(!1),800)}},[T]),m.useEffect(()=>{if(!c||p)return;const v=setInterval(()=>{const g=T(c);g?x(g):(u(!0),clearInterval(v))},1e3);return()=>clearInterval(v)},[c,p,T]);const f=v=>{r(v.name),localStorage.setItem("popcat_user_country",JSON.stringify(v.name)),i(g=>{const C={...g};return C[v.name]===void 0&&(C[v.name]=0),localStorage.setItem("popcat_global_leaderboard",JSON.stringify(C)),C})},A=m.useCallback(()=>{p||!t||a(v=>{const C=1+(Math.min($t,Math.floor(Math.sqrt(v/10))+1)-1)*.05,U=v+C;return i($=>{const se={...$,[t]:($[t]||0)+C};return localStorage.setItem("popcat_global_leaderboard",JSON.stringify(se)),se}),localStorage.setItem("popcat_user_clicks",JSON.stringify(U)),U})},[t,p]),_=v=>{b(v),localStorage.setItem("popcat_autoclick_tier",JSON.stringify(v))},O=()=>{const v=!E;B(v),localStorage.setItem("popcat_god_mode",JSON.stringify(v))},D=()=>{const v=!P;I(v),localStorage.setItem("popcat_autoclick_enabled",JSON.stringify(v))};return j?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-950 text-white p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-yellow-500/10 border-t-yellow-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})]}),e.jsx("p",{className:"mt-8 text-sm font-black tracking-[0.4em] uppercase text-gray-400 animate-pulse",children:"Syncing Intel..."})]}):p&&t?e.jsx(Ur,{leaderboard:n,userCountry:t}):t?e.jsx(ke,{children:e.jsx(Or,{userCountry:t,userClicks:s,leaderboard:n,timeLeft:o,onIncrement:A,autoClickTier:k,onPurchaseTier:_,isGodModeActive:E,onToggleGodMode:O,isAutoClickEnabled:P,onToggleAutoClick:D})}):e.jsx(Ir,{onSelectCountry:f})},Fr=({isOpen:t,onClose:r,onAdd:s})=>{const[a,n]=m.useState(""),[i,c]=m.useState(qe.OTHER),[d,o]=m.useState(""),[x,p]=m.useState("");if(!t)return null;const u=j=>{j.preventDefault(),a.trim()&&(s({name:a,relationship:i,birthday:d,notes:x}),n(""),c(qe.OTHER),o(""),p(""),r())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl transform transition-all",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ìƒˆ ì¹œêµ¬ ë“±ë¡"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"fas fa-times text-xl"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì´ë¦„ *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"ì¹œêµ¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”",value:a,onChange:j=>n(j.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê´€ê³„"}),e.jsx("select",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:i,onChange:j=>c(j.target.value),children:Object.values(qe).map(j=>e.jsx("option",{value:j,children:j},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìƒì¼ (ì„ íƒ)"}),e.jsx("input",{type:"date",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:j=>o(j.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"íŠ¹ì§• ë° ë©”ëª¨"}),e.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",placeholder:"ì¹œêµ¬ì˜ ì„±ê²©ì´ë‚˜ ì¢‹ì•„í•˜ëŠ” ê²ƒ ë“±ì„ ì ì–´ë³´ì„¸ìš”",value:x,onChange:j=>p(j.target.value)})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:"ì €ì¥í•˜ê¸°"})]})]})})},Hr=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),$r=async t=>{const s=await Hr.models.generateContent({model:"gemini-3-flash-preview",contents:`ë‚´ ì¹œêµ¬ ${t.name}ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëª‡ ê°€ì§€ë¥¼ ì œì•ˆí•´ì¤˜.
    ê´€ê³„: ${t.relationship}
    ë©”ëª¨: ${t.notes||"ì—†ìŒ"}
    
    1. ì´ ì¹œêµ¬ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ê·€ì—½ê±°ë‚˜ ì¬ì¹˜ ìˆëŠ” ë³„ëª… 3ê°œ
    2. ì´ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ë©´ ì¢‹ì„ ë”°ëœ»í•œ ì•ˆë¶€ ì¸ì‚¬ë§ í•œ ë¬¸ì¥
    
    JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì¤˜.`,config:{responseMimeType:"application/json",responseSchema:{type:W.OBJECT,properties:{nicknames:{type:W.ARRAY,items:{type:W.STRING},description:"3 unique nicknames in Korean"},message:{type:W.STRING,description:"A friendly greeting message in Korean"}},required:["nicknames","message"]}}});return JSON.parse(s.text.trim())},qr=({friend:t,onDelete:r})=>{const[s,a]=m.useState(!1),[n,i]=m.useState(null),c=async()=>{a(!0);try{const o=await $r(t);i(o)}catch(o){console.error("AI Insight Error:",o),alert("AI ì¶”ì²œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{a(!1)}},d=o=>o.charAt(0);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 transition-all hover:shadow-md hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xl",children:d(t.name)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t.name}),e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-semibold bg-indigo-50 text-indigo-600",children:t.relationship})]})]}),e.jsx("button",{onClick:()=>r(t.id),className:"text-gray-300 hover:text-red-500 transition-colors",children:e.jsx("i",{className:"fas fa-trash-alt"})})]}),t.birthday&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[e.jsx("i",{className:"fas fa-birthday-cake mr-2 text-pink-400"}),t.birthday]}),t.notes&&e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg line-clamp-2 mb-4",children:t.notes}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50",children:n?e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:n.nicknames.map((o,x)=>e.jsxs("span",{className:"bg-amber-50 text-amber-700 text-xs px-2 py-1 rounded-full border border-amber-100",children:["âœ¨ ",o]},x))}),e.jsxs("p",{className:"text-xs text-indigo-700 italic bg-indigo-50 p-2 rounded border border-indigo-100",children:['"',n.message,'"']}),e.jsx("button",{onClick:()=>i(null),className:"text-[10px] text-gray-400 hover:underline",children:"ë‹«ê¸°"})]}):e.jsx("button",{onClick:c,disabled:s,className:`flex items-center justify-center w-full py-2 rounded-lg text-sm font-medium transition-all ${s?"bg-gray-100 text-gray-400":"bg-gradient-to-r from-violet-500 to-indigo-500 text-white hover:from-violet-600 hover:to-indigo-600"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"AIê°€ ìƒê°í•˜ëŠ” ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-magic mr-2"}),"AI ë³„ëª… & ë©”ì‹œì§€ ì¶”ì²œ"]})})})]})},Vr=()=>{const[t,r]=m.useState([]),[s,a]=m.useState(!1),[n,i]=m.useState(""),[c,d]=m.useState("ALL");m.useEffect(()=>{const u=localStorage.getItem("friendlink_friends");if(u)try{r(JSON.parse(u))}catch{console.error("Failed to load friends")}},[]),m.useEffect(()=>{localStorage.setItem("friendlink_friends",JSON.stringify(t))},[t]);const o=u=>{const j={...u,id:crypto.randomUUID(),createdAt:Date.now()};r(w=>[j,...w])},x=u=>{confirm("ì´ ì¹œêµ¬ë¥¼ ëª©ë¡ì—ì„œ ì‚­ì œí• ê¹Œìš”?")&&r(j=>j.filter(w=>w.id!==u))},p=m.useMemo(()=>t.filter(u=>{const j=u.name.toLowerCase().includes(n.toLowerCase())||(u.notes||"").toLowerCase().includes(n.toLowerCase()),w=c==="ALL"||u.relationship===c;return j&&w}),[t,n,c]);return e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen pb-20 bg-slate-50",children:[e.jsx("header",{className:"bg-white border-b sticky top-0 z-40 backdrop-blur-sm bg-white/80",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx("i",{className:"fas fa-user-friends text-xl"})}),e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"FriendLink"})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ì¹œêµ¬ ê²€ìƒ‰...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full border-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all outline-none",value:n,onChange:u=>i(u.target.value)})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center overflow-x-auto pb-4 gap-2 no-scrollbar",children:[e.jsx("button",{onClick:()=>d("ALL"),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c==="ALL"?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"ì „ì²´"}),Object.values(qe).map(u=>e.jsx("button",{onClick:()=>d(u),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c===u?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-100"}`,children:u},u))]}),e.jsxs("div",{className:"mb-6 flex justify-between items-center text-sm text-gray-500",children:[e.jsxs("span",{children:["ì´ ",e.jsxs("strong",{children:[p.length,"ëª…"]}),"ì˜ ì¹œêµ¬"]}),n&&e.jsxs("span",{children:["ê²€ìƒ‰ ê²°ê³¼: ",p.length,"ê±´"]})]}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(u=>e.jsx(qr,{friend:u,onDelete:x},u.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center text-gray-300 mb-4",children:e.jsx("i",{className:"fas fa-users-slash text-3xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"ì¹œêµ¬ê°€ ì•„ì§ ì—†ë‚˜ìš”?"}),e.jsx("p",{className:"text-gray-500 max-w-xs mx-auto mt-2",children:"ìš°ì¸¡ í•˜ë‹¨ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì†Œì¤‘í•œ ì¸ì—°ë“¤ì„ ì €ì¥í•´ ë³´ì„¸ìš”."})]})]}),e.jsxs("button",{onClick:()=>a(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-indigo-600 text-white rounded-full flex items-center justify-center shadow-xl hover:bg-indigo-700 hover:scale-110 active:scale-95 transition-all z-40 group",children:[e.jsx("i",{className:"fas fa-plus text-xl transition-transform group-hover:rotate-90"}),e.jsx("span",{className:"absolute right-full mr-4 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"ìƒˆ ì¹œêµ¬ ì¶”ê°€"})]}),e.jsx(Fr,{isOpen:s,onClose:()=>a(!1),onAdd:o})]})})},Wr=({stage:t,difficulty:r,score:s,lives:a})=>e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto flex justify-between items-center glass p-3 rounded-2xl border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ìŠ¤í…Œì´ì§€"}),e.jsx("span",{className:"text-xl font-bold text-cyan-400 text-glow-cyan",children:t})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ë‚œì´ë„"}),e.jsx("span",{className:`text-[11px] font-bold px-3 py-0.5 rounded-full border ${r===Ie.EASY?"border-emerald-500/50 text-emerald-400 bg-emerald-500/10":r===Ie.MEDIUM?"border-amber-500/50 text-amber-400 bg-amber-500/10":"border-rose-500/50 text-rose-400 bg-rose-500/10"}`,children:r})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ìƒëª…"}),e.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((n,i)=>e.jsx("i",{className:`fas fa-heart text-[10px] ${i<a?"text-rose-500":"text-slate-700"}`},i))})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ì ìˆ˜"}),e.jsx("span",{className:"text-xl font-bold text-white",children:s})]})]})]})}),Yr=({puzzle:t,onSelectOption:r,selectedOption:s,isLocked:a,showHint:n,onToggleHint:i})=>e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col gap-6 animate-slide-up",children:[e.jsx("div",{className:"glass p-5 rounded-3xl border-l-4 border-l-cyan-500 shadow-xl",children:e.jsxs("p",{className:"text-cyan-200 text-sm italic leading-relaxed",children:[e.jsx("i",{className:"fas fa-quote-left mr-2 opacity-50"}),t.story]})}),e.jsxs("div",{className:"glass p-8 rounded-3xl shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-cyan-500/10 rounded-full blur-3xl group-hover:bg-cyan-500/20 transition-all duration-700"}),e.jsxs("h3",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-fingerprint text-cyan-500"}),"íŒ¨í„´ í•´ë…"]}),e.jsx("p",{className:"text-2xl font-bold mb-8 text-white font-mono leading-tight whitespace-pre-line",children:t.question}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.options.map((c,d)=>e.jsx("button",{disabled:a,onClick:()=>r(c),className:`p-4 rounded-2xl font-mono text-xl font-bold transition-all duration-200 border transform active:scale-95 ${s===c?"bg-cyan-500 border-cyan-400 text-white shadow-lg scale-105 glow-cyan":"bg-slate-800/50 border-white/10 text-slate-300 hover:border-cyan-500/50 hover:bg-slate-800"}`,children:c},d))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:i,className:`flex items-center gap-2 text-[11px] font-bold uppercase tracking-wider transition-colors ${n?"text-amber-400":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx("i",{className:"fas fa-lightbulb opacity-75"}),n?"íŒíŠ¸ í™•ì¸ë¨":"ë‹¨ì„œ ìš”ì²­í•˜ê¸°"]})}),n&&e.jsx("div",{className:"glass p-4 rounded-2xl border border-amber-500/30 bg-amber-500/5 animate-slide-up text-center",children:e.jsxs("p",{className:"text-amber-200 text-xs",children:[e.jsx("span",{className:"font-bold mr-1",children:"HINT:"})," ",t.hint]})})]}),zr=()=>{const[t,r]=Ye.useState("ì•”í˜¸í™” ì½”ì–´ ì´ˆê¸°í™” ì¤‘..."),s=["ë…¼ë¦¬ì  íŒ¨í„´ í™˜ê²½ ìŠ¤ìº” ì¤‘...","ì²´ì„ë²„ ì ê¸ˆ ì¥ì¹˜ ë³´ì•ˆ í™•ì¸ ì¤‘...","ìˆ˜í•™ì  ë‚œì´ë„ ë§¤íŠ¸ë¦­ìŠ¤ ë³´ì • ì¤‘...","í¼ì¦ ì—”ì§„ê³¼ ì‹ ê²½ë§ ì—°ê²° ìˆ˜ë¦½ ì¤‘...","ìˆ˜ì—´ ë‚´ ë¹„ì •ìƒ íŒ¨í„´ ê°ì§€ ì¤‘...","ë³´ì•ˆ í”„ë¡œí† ì½œ ìš°íšŒ ì‹œë„ ì¤‘...","ë‹¤ìŒ êµ¬ì—­ì˜ ì½”ë“œ í•´ë… ì¤‘..."];return Ye.useEffect(()=>{const a=setInterval(()=>{r(s[Math.floor(Math.random()*s.length)])},2e3);return()=>clearInterval(a)},[]),e.jsxs("div",{className:"fixed inset-0 z-40 flex flex-col items-center justify-center bg-slate-950/90 backdrop-blur-sm p-6 text-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-cyan-500/20 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-cyan-400 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-indigo-500/20 rounded-full"}),e.jsx("div",{className:"absolute inset-4 border-b-4 border-indigo-400 rounded-full animate-spin-slow"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-brain text-cyan-400 text-2xl animate-pulse"})})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"ë„ì „ ê³¼ì œ ìƒì„± ì¤‘"}),e.jsx("p",{className:"text-slate-400 text-xs font-mono max-w-xs h-10",children:t}),e.jsx("style",{children:`
        .animate-spin-slow {
          animation: spin 3s linear infinite;
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},Kr=({onStart:t,onShowRanking:r})=>{const[s,a]=Ye.useState(Ie.EASY);return e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center gap-8 animate-slide-up",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-block p-4 rounded-3xl bg-cyan-500/10 border border-cyan-500/30 mb-6 glow-cyan",children:e.jsx("i",{className:"fas fa-brain text-4xl text-cyan-400"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-tighter",children:"MATH PUZZLE"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"ë…¼ë¦¬ì  ì‚¬ê³ ì˜ í•œê³„ì— ë„ì „í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"w-full glass p-6 rounded-3xl flex flex-col gap-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest text-center",children:"ì‹œì‘ ë‚œì´ë„ ì„ íƒ"}),e.jsx("div",{className:"flex flex-col gap-2",children:Object.values(Ie).map(n=>e.jsx("button",{onClick:()=>a(n),className:`py-4 rounded-2xl font-bold transition-all border ${s===n?"bg-cyan-600 border-cyan-400 text-white glow-cyan":"bg-slate-800/50 border-white/10 text-slate-400 hover:bg-slate-800"}`,children:n},n))})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsx("button",{onClick:()=>t(s),className:"w-full py-5 bg-white text-slate-950 rounded-2xl font-bold text-lg hover:bg-cyan-400 transition-all transform active:scale-95 shadow-xl",children:"ê²Œì„ ì‹œì‘"}),e.jsxs("button",{onClick:r,className:"w-full py-4 glass text-white rounded-2xl font-bold border-white/20 hover:bg-white/5 transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-trophy text-amber-400"}),"ìˆœìœ„ ë³´ê¸°"]})]})]})},Jr=({rankings:t,onBack:r})=>e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col gap-6 animate-slide-up",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2 uppercase tracking-tight",children:"TOP AGENTS"}),e.jsx("p",{className:"text-slate-400 text-xs",children:"ì „ì²´ í•´ë… ì „ë¬¸ê°€ ìˆœìœ„"})]}),e.jsx("div",{className:"glass rounded-3xl overflow-hidden border border-white/10 shadow-2xl",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white/5 border-b border-white/10",children:[e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ìˆœìœ„"}),e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ì—ì´ì „íŠ¸"}),e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-right",children:"ì ìˆ˜"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-10 text-center text-slate-500 italic",children:"ì•„ì§ ê¸°ë¡ëœ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤."})}):t.map((s,a)=>e.jsxs("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"p-4 font-mono font-bold text-cyan-400",children:["#",a+1]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:s.name}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:["ìŠ¤í…Œì´ì§€ ",s.stage]})]})}),e.jsx("td",{className:"p-4 text-right font-mono font-bold text-white",children:s.score.toLocaleString()})]},a))})]})}),e.jsxs("button",{onClick:r,className:"w-full py-4 glass text-slate-400 rounded-2xl font-bold border-white/10 hover:text-white transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),"ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°"]})]}),Xr=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),Zr={type:W.OBJECT,properties:{story:{type:W.STRING,description:"íƒˆì¶œ ê²Œì„ ìŠ¤íƒ€ì¼ì˜ ì§§ì€ ì„œì‚¬ì  ë°°ê²½ (1-2ë¬¸ì¥, í•œêµ­ì–´ë¡œ ì‘ì„±)."},question:{type:W.STRING,description:"í•´ê²°í•´ì•¼ í•  ìˆ˜í•™ì  íŒ¨í„´ ë¬¸ì œ (í•œêµ­ì–´ë¡œ ì‘ì„±)."},options:{type:W.ARRAY,items:{type:W.STRING},description:"ì •í™•íˆ 4ê°œì˜ ê°ê´€ì‹ ì„ íƒì§€."},correctAnswer:{type:W.STRING,description:"options ë°°ì—´ ì¤‘ ì •í™•í•œ ì •ë‹µ."},hint:{type:W.STRING,description:"ì‚¬ìš©ìë¥¼ ë•ê¸° ìœ„í•œ ìµœì†Œí•œì˜ íŒíŠ¸ (í•œêµ­ì–´ë¡œ ì‘ì„±)."},explanation:{type:W.STRING,description:"íŒ¨í„´ì— ëŒ€í•œ ê°„ëµí•œ ë…¼ë¦¬ì  ì„¤ëª… (í•œêµ­ì–´ë¡œ ì‘ì„±)."}},required:["story","question","options","correctAnswer","hint","explanation"]};async function Qr(t,r){const s=`
    ë‹¹ì‹ ì€ "ìˆ˜í•™ í¼ì¦ íƒˆì¶œ"ì´ë¼ëŠ” ëª¨ë°”ì¼ ì•±ì˜ AI í¼ì¦ ë””ìì´ë„ˆì…ë‹ˆë‹¤.
    ${t} ë‚œì´ë„ì˜ ìˆ˜í•™ íŒ¨í„´ í¼ì¦ì„ ìƒì„±í•˜ì„¸ìš”. ëª¨ë“  í…ìŠ¤íŠ¸ëŠ” í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
    
    í˜„ì¬ ìŠ¤í…Œì´ì§€: ${r}
    
    ë‚œì´ë„ ê°€ì´ë“œë¼ì¸:
    - ì‰¬ì›€: ë‹¨ìˆœ ìˆ˜ì—´, ë”í•˜ê¸°/ë¹¼ê¸° íŒ¨í„´, ê¸°ë³¸ì ì¸ ì‹œê°ì  ë…¼ë¦¬.
    - ë³´í†µ: ë‹¤ë‹¨ê³„ ê·œì¹™, í˜¼í•© ì—°ì‚° (ì˜ˆ: ê³±í•˜ê¸° í›„ ë”í•˜ê¸°), ì œê³±ìˆ˜, ì†Œìˆ˜ ìˆ˜ì—´.
    - ì–´ë ¤ì›€: ì¶”ìƒì  ë…¼ë¦¬, ìˆ¨ê²¨ì§„ ì œì•½ ì¡°ê±´, ë³µì¡í•œ ìˆ˜ì—´ (í”¼ë³´ë‚˜ì¹˜ ìœ ì‚¬, ë‹¤ì¸µ ì°¨ì´), ëŒ€ìˆ˜ì  íŒ¨í„´ ì¸ì‹.
    
    ì´ì•¼ê¸° í…Œë§ˆ: íƒˆì¶œ ê²Œì„, ë¯¸ìŠ¤í„°ë¦¬, ì²¨ë‹¨ ê¸ˆê³ , ê³ ëŒ€ ì‚¬ì› ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.
    ì§ˆë¬¸: ëª…í™•í•˜ì§€ë§Œ ë„ì „ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
    
    ë°˜ë“œì‹œ ìˆ˜í•™ì ìœ¼ë¡œ ì •í™•í•´ì•¼ í•˜ë©° ì •ë‹µì€ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
  `;try{const a=await Xr.models.generateContent({model:"gemini-3-flash-preview",contents:s,config:{responseMimeType:"application/json",responseSchema:Zr,temperature:.9}});return JSON.parse(a.text.trim())}catch(a){return console.error("í¼ì¦ ìƒì„± ì‹¤íŒ¨:",a),{story:"ë²½ì— ì•Œ ìˆ˜ ì—†ëŠ” ìˆ«ìë“¤ì´ ì í˜€ ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ ìˆ«ìë¥¼ ì•Œì•„ë‚´ì•¼ ë¬¸ì´ ì—´ë¦´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.",question:"ë‹¤ìŒ ìˆ˜ì—´ì„ ì™„ì„±í•˜ì„¸ìš”: 2, 4, 8, 16, ?",options:["24","30","32","64"],correctAnswer:"32",hint:"ê° ìˆ«ìëŠ” ì´ì „ ìˆ«ìì˜ ë‘ ë°°ì…ë‹ˆë‹¤.",explanation:"ê³µë¹„ê°€ 2ì¸ ë“±ë¹„ìˆ˜ì—´ì…ë‹ˆë‹¤."}}}const It="math_puzzle_rankings",en=()=>{const[t,r]=m.useState({stage:1,difficulty:Ie.EASY,score:0,lives:3,status:"MENU"}),[s,a]=m.useState(null),[n,i]=m.useState(!1),[c,d]=m.useState(null),[o,x]=m.useState(null),[p,u]=m.useState(!1),[j,w]=m.useState([]);m.useEffect(()=>{const I=localStorage.getItem(It);I&&w(JSON.parse(I))},[]);const k=(I,T)=>{const A={name:prompt("ì¶•í•˜í•©ë‹ˆë‹¤! ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ë­í‚¹ ë“±ë¡):")||"ìµëª…ì˜ ì—ì´ì „íŠ¸",score:I,stage:T,date:new Date().toISOString()},_=[...j,A].sort((O,D)=>D.score-O.score).slice(0,10);w(_),localStorage.setItem(It,JSON.stringify(_))},b=m.useCallback(async(I,T)=>{i(!0),u(!1),d(null),x(null);try{const f=await Qr(I,T);a(f)}catch(f){console.error(f)}finally{i(!1)}},[]),E=I=>{r({stage:1,difficulty:I,score:0,lives:3,status:"PLAYING"}),b(I,1)},B=I=>{o||!s||(d(I),I===s.correctAnswer?(x({type:"success",message:"ì ê¸ˆ í•´ì œ ì„±ê³µ. ë‹¤ìŒ êµ¬ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤."}),setTimeout(()=>{const T=t.stage+1;let f=t.difficulty;t.difficulty===Ie.EASY&&T>5&&(f=Ie.MEDIUM),t.difficulty===Ie.MEDIUM&&T>10&&(f=Ie.HARD),r(A=>({...A,stage:T,difficulty:f,score:A.score+(t.difficulty===Ie.EASY?100:t.difficulty===Ie.MEDIUM?250:500)})),b(f,T)},1500)):(x({type:"error",message:"í•´ë… ì˜¤ë¥˜: ë³´ì•ˆ í”„ë¡œí† ì½œì´ ì‘ë™ë˜ì—ˆìŠµë‹ˆë‹¤."}),r(T=>{const f=T.lives-1;return f<=0?(setTimeout(()=>{k(T.score,T.stage),r(A=>({...A,status:"GAME_OVER"}))},1500),{...T,lives:0}):{...T,lives:f}}),setTimeout(()=>{t.lives>1&&(x(null),d(null))},1500)))},P=()=>{r(I=>({...I,status:"MENU"}))};return t.status==="MENU"?e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen pt-12 pb-12 px-4 flex flex-col items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:e.jsx(Kr,{onStart:E,onShowRanking:()=>r(I=>({...I,status:"RANKING"}))})})}):t.status==="RANKING"?e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen pt-12 pb-12 px-4 flex flex-col items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:e.jsx(Jr,{rankings:j,onBack:P})})}):t.status==="GAME_OVER"?e.jsx(ke,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-950",children:e.jsxs("div",{className:"glass p-10 rounded-3xl border border-rose-500/30 text-center max-w-sm w-full animate-slide-up shadow-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"fas fa-skull-crossbones text-rose-500 text-3xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2 uppercase tracking-tighter",children:"ì‘ì „ ì‹¤íŒ¨"}),e.jsxs("p",{className:"text-slate-400 mb-8 leading-relaxed",children:["ë³´ì•ˆë§ì„ ëš«ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",e.jsx("br",{}),"ìµœì¢… ìŠ¤í…Œì´ì§€: ",t.stage,e.jsx("br",{}),"ìµœì¢… ì ìˆ˜: ",t.score.toLocaleString()]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>E(t.difficulty),className:"w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-4 rounded-2xl transition-all shadow-lg hover:shadow-rose-600/20 transform active:scale-95",children:"ë‹¤ì‹œ ì‹œë„"}),e.jsx("button",{onClick:P,className:"w-full glass text-slate-400 font-bold py-3 rounded-2xl hover:text-white transition-all",children:"ë©”ë‰´ë¡œ"})]})]})})}):e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 flex flex-col items-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:[e.jsx(Wr,{stage:t.stage,difficulty:t.difficulty,score:t.score,lives:t.lives}),n&&e.jsx(zr,{}),!n&&s&&e.jsx(Yr,{puzzle:s,onSelectOption:B,selectedOption:c,isLocked:!!o,showHint:p,onToggleHint:()=>u(!p)}),o&&e.jsx("div",{className:"fixed bottom-12 left-0 right-0 z-50 px-4 animate-bounce",children:e.jsx("div",{className:`max-w-md mx-auto glass p-4 rounded-2xl text-center border-2 ${o.type==="success"?"border-emerald-500 bg-emerald-500/20":"border-rose-500 bg-rose-500/20"}`,children:e.jsxs("p",{className:`font-bold text-xs tracking-widest flex items-center justify-center gap-2 ${o.type==="success"?"text-emerald-400":"text-rose-400"}`,children:[e.jsx("i",{className:`fas ${o.type==="success"?"fa-check-circle":"fa-exclamation-triangle"}`}),o.message]})})}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full h-1/4 pointer-events-none bg-gradient-to-t from-cyan-500/5 to-transparent z-0 opacity-50"})]})})},Yt=()=>{const t="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new De({apiKey:t})},tn=async(t,r)=>{const s=Yt(),a=`Act as an expert English language tutor. 
  Recommend 6 high-quality English vocabulary words for a student at the ${t} level.
  Their interests include: ${r.join(", ")}.
  Provide the output in a structured JSON format. 
  Each word should include: 
  - word
  - phonetic (IPA)
  - definition (in simple English)
  - koreanTranslation (natural Korean translation)
  - exampleSentence (using the word in a relevant context)
  - synonyms (at least 2)
  - usageTip (a short note on how to use it naturally)`;try{const n=await s.models.generateContent({model:"gemini-3-flash-preview",contents:a,config:{responseMimeType:"application/json",responseSchema:{type:W.OBJECT,properties:{words:{type:W.ARRAY,items:{type:W.OBJECT,properties:{word:{type:W.STRING},phonetic:{type:W.STRING},definition:{type:W.STRING},koreanTranslation:{type:W.STRING},exampleSentence:{type:W.STRING},synonyms:{type:W.ARRAY,items:{type:W.STRING}},usageTip:{type:W.STRING}},required:["word","phonetic","definition","koreanTranslation","exampleSentence","synonyms","usageTip"]}}}}}});return JSON.parse(n.text||'{"words": []}').words}catch(n){throw console.error("Error fetching words:",n),n}},sn=async t=>{var s,a,n,i,c,d;const r=Yt();try{const x=(d=(c=(i=(n=(a=(s=(await r.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:`Say clearly: ${t}`}]}],config:{responseModalities:[Cs.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:s[0])==null?void 0:a.content)==null?void 0:n.parts)==null?void 0:i[0])==null?void 0:c.inlineData)==null?void 0:d.data;if(!x)throw new Error("No audio data received from Gemini TTS. Check your GEMINI_API_KEY and model availability.");const p=atob(x),u=new Uint8Array(p.length);for(let j=0;j<p.length;j++)u[j]=p.charCodeAt(j);return u.buffer}catch(o){throw console.error("Error generating speech:",o),o}},an=async(t,r,s=24e3,a=1)=>{const n=new Int16Array(t.buffer),i=n.length/a,c=r.createBuffer(a,i,s);for(let d=0;d<a;d++){const o=c.getChannelData(d);for(let x=0;x<i;x++)o[x]=n[x*a+d]/32768}return c},rn=({word:t})=>{const[r,s]=m.useState(!1),[a,n]=m.useState(!1),i=async()=>{if(!r){s(!0);try{const c=await sn(t.word),d=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),o=await an(new Uint8Array(c),d,24e3,1),x=d.createBufferSource();x.buffer=o,x.connect(d.destination),x.start(),x.onended=()=>{s(!1),d.close()}}catch(c){console.error("Audio error:",c),s(!1)}}};return e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col group",children:[e.jsxs("div",{className:"p-6 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 group-hover:text-indigo-600 transition-colors",children:t.word}),e.jsx("button",{onClick:i,disabled:r,className:`p-2 rounded-full transition-all ${r?"bg-slate-100":"bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white"}`,title:"Listen Pronunciation",children:r?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-indigo-500 border-t-transparent rounded-full"}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),e.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),e.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]})})]}),e.jsxs("p",{className:"text-slate-400 font-mono text-sm mb-3",children:["[",t.phonetic,"]"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-indigo-600 font-bold text-lg mb-1",children:t.koreanTranslation}),e.jsxs("p",{className:"text-slate-600 text-sm leading-relaxed italic",children:['"',t.definition,'"']})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:"Example"}),e.jsx("p",{className:"text-slate-800 text-sm font-medium",children:t.exampleSentence})]})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsxs("button",{onClick:()=>n(!a),className:"w-full py-2 text-xs font-bold text-slate-400 uppercase tracking-widest hover:text-indigo-500 transition-colors flex items-center justify-center gap-2",children:[a?"Hide Details":"View Synonyms & Tips",e.jsx("span",{className:`transition-transform duration-300 ${a?"rotate-180":""}`,children:"â–¼"})]}),a&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 space-y-4 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-2",children:"Synonyms"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.synonyms.map((c,d)=>e.jsx("span",{className:"bg-white border border-slate-200 text-slate-600 px-2 py-1 rounded-lg text-xs",children:c},d))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:"Usage Tip"}),e.jsx("p",{className:"text-slate-600 text-xs italic leading-snug bg-amber-50 p-2 rounded-lg border border-amber-100",children:t.usageTip})]})]})]})]})},nn=()=>{const[t,r]=m.useState(mt.INTERMEDIATE),[s,a]=m.useState(["Daily Life","Travel"]),[n,i]=m.useState(""),[c,d]=m.useState([]),[o,x]=m.useState(!1),[p,u]=m.useState(null),j=async()=>{x(!0),u(null);try{const b=await tn(t,s);d(b)}catch(b){u(b!=null&&b.message?`Error: ${b.message}`:"Failed to fetch words. Please try again."),console.error(b)}finally{x(!1)}};m.useEffect(()=>{j()},[t]);const w=b=>{b.preventDefault(),n.trim()&&!s.includes(n.trim())&&(a([...s,n.trim()]),i(""))},k=b=>{a(s.filter((E,B)=>B!==b))};return e.jsxs(ke,{className:"min-h-screen pb-20 px-4 pt-12 md:pt-20 max-w-6xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4 tracking-tight",children:["VocabVantage ",e.jsx("span",{className:"gradient-text",children:"AI"})]}),e.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto",children:"Personalized English vocabulary coaching powered by Gemini. Select your level and interests to get started."})]}),e.jsxs("section",{className:"bg-white rounded-3xl shadow-xl shadow-indigo-100 p-6 md:p-8 mb-10 border border-slate-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4",children:"Your Proficiency Level"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.values(mt).map(b=>e.jsx("button",{onClick:()=>r(b),className:`py-3 px-4 rounded-xl text-sm font-medium transition-all duration-200 border ${t===b?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200":"bg-slate-50 text-slate-600 border-slate-200 hover:border-indigo-300"}`,children:b},b))})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4",children:"Focus Interests"}),e.jsxs("form",{onSubmit:w,className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:n,onChange:b=>i(b.target.value),placeholder:"e.g. Finance, Nature, Coding...",className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"}),e.jsx("button",{type:"submit",className:"bg-indigo-100 text-indigo-700 px-4 py-2 rounded-xl text-sm font-bold hover:bg-indigo-200 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((b,E)=>e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 group",children:[b,e.jsx("button",{onClick:()=>k(E),className:"hover:text-indigo-800 font-bold opacity-60 hover:opacity-100",children:"Ã—"})]},E))})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("button",{onClick:j,disabled:o,className:"group flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-2xl font-semibold hover:bg-slate-800 transition-all disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Updating Vocabulary..."]}):e.jsxs(e.Fragment,{children:["Generate New Recommendations",e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"â†’"})]})})})]}),p&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl text-center mb-8 border border-red-100",children:p}),o&&!c.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-pulse",children:[1,2,3,4,5,6].map(b=>e.jsx("div",{className:"bg-slate-200 h-64 rounded-3xl"},b))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((b,E)=>e.jsx(rn,{word:b},`${b.word}-${E}`))})]})},Me=20,ot=150,ln=60,on=2,_e=600,Ue={SNAKE_HEAD:"#4ade80",SNAKE_BODY:"#22c55e",FOOD:"#f87171",GRID:"rgba(255, 255, 255, 0.05)"},cn=({score:t,highScore:r,level:s})=>e.jsxs("div",{className:"flex justify-between items-center w-full max-w-[600px] mb-4 px-4 py-3 bg-white/5 backdrop-blur-md rounded-xl border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"text-yellow-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"High Score"}),e.jsx("p",{className:"text-lg font-orbitron text-yellow-400 leading-none",children:r})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"text-blue-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"Level"}),e.jsx("p",{className:"text-lg font-orbitron text-blue-400 leading-none",children:s})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"text-green-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"Score"}),e.jsx("p",{className:"text-xl font-orbitron text-green-400 leading-none",children:t})]})]})]}),dn=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"});async function mn(t){try{const r=await dn.models.generateContent({model:"gemini-3-flash-preview",contents:`The player just finished a high-quality Snake game with a score of ${t}. Give them a witty, futuristic, and encouraging 1-sentence commentary in Korean and assign them a rank name (e.g., 'ë°ì´í„° ìˆ˜ì§‘ê°€', 'ë„¤ì˜¨ í¬ì‹ì', 'ì‚¬ì´ë²„ ì „ì„¤').`,config:{responseMimeType:"application/json",responseSchema:{type:W.OBJECT,properties:{message:{type:W.STRING},rank:{type:W.STRING}},required:["message","rank"]}}});return JSON.parse(r.text)}catch(r){return console.error("Gemini commentary failed",r),{message:`ê²Œì„ ì¢…ë£Œ! ë‹¹ì‹ ì˜ ì ìˆ˜ëŠ” ${t}ì ì…ë‹ˆë‹¤.`,rank:t>100?"ì—˜ë¦¬íŠ¸ ìŠ¤ë„¤ì´í¬":"ì´ˆë³´ ì›œ"}}}const xn=({score:t,onRestart:r})=>{const[s,a]=m.useState(null),[n,i]=m.useState(!0);return m.useEffect(()=>{(async()=>{const d=await mn(t);a(d),i(!1)})()},[t]),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-xl z-50 p-6 text-center animate-in fade-in duration-500",children:[e.jsx("h2",{className:"text-6xl font-orbitron font-bold text-red-500 mb-2 drop-shadow-[0_0_15px_rgba(239,68,68,0.5)]",children:"SYSTEM FAILURE"}),e.jsx("p",{className:"text-gray-400 mb-8 tracking-[0.2em] uppercase",children:"Snake Core Deinitialized"}),e.jsxs("div",{className:"mb-8 p-6 bg-white/5 rounded-2xl border border-white/10 w-full max-w-md",children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-widest mb-1",children:"Final Analysis"}),e.jsx("p",{className:"text-4xl font-orbitron text-white mb-4",children:t}),n?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-400 italic animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"AI ë¶„ì„ ì¤‘..."]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-block px-3 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-full text-xs font-semibold tracking-tighter",children:["RANK: ",s==null?void 0:s.rank]}),e.jsxs("p",{className:"text-lg text-gray-200 leading-relaxed font-light italic",children:['"',s==null?void 0:s.message,'"']})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{onClick:r,className:"group flex items-center gap-2 px-8 py-3 bg-green-500 hover:bg-green-400 text-black font-bold rounded-full transition-all hover:scale-105 active:scale-95 shadow-[0_0_20px_rgba(74,222,128,0.4)]",children:[e.jsx(vs,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"REBOOT SYSTEM"]})})]})},un=()=>{const t=m.useRef(null),[r,s]=m.useState({snake:[{x:10,y:10},{x:10,y:11},{x:10,y:12}],food:{x:5,y:5},direction:ge.UP,score:0,highScore:Number(localStorage.getItem("snakeHighScore"))||0,status:me.IDLE,speed:ot,level:1}),a=m.useRef(ge.UP),n=m.useCallback(d=>{let o;for(;o={x:Math.floor(Math.random()*(_e/Me)),y:Math.floor(Math.random()*(_e/Me))},!!d.some(p=>p.x===o.x&&p.y===o.y););return o},[]),i=()=>{const d=[{x:10,y:10},{x:10,y:11},{x:10,y:12}];a.current=ge.UP,s(o=>({...o,snake:d,food:n(d),direction:ge.UP,score:0,status:me.PLAYING,speed:ot,level:1}))},c=()=>{s(d=>({...d,status:d.status===me.PLAYING?me.PAUSED:me.PLAYING}))};return m.useEffect(()=>{const d=o=>{switch(o.key){case"ArrowUp":case"w":case"W":a.current!==ge.DOWN&&(a.current=ge.UP);break;case"ArrowDown":case"s":case"S":a.current!==ge.UP&&(a.current=ge.DOWN);break;case"ArrowLeft":case"a":case"A":a.current!==ge.RIGHT&&(a.current=ge.LEFT);break;case"ArrowRight":case"d":case"D":a.current!==ge.LEFT&&(a.current=ge.RIGHT);break;case" ":r.status===me.PLAYING||r.status===me.PAUSED?c():r.status===me.IDLE&&i();break}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[r.status]),m.useEffect(()=>{if(r.status!==me.PLAYING)return;const o=setInterval(()=>{s(x=>{const p={...x.snake[0]},u=a.current;switch(u){case ge.UP:p.y-=1;break;case ge.DOWN:p.y+=1;break;case ge.LEFT:p.x-=1;break;case ge.RIGHT:p.x+=1;break}const j=_e/Me;if(p.x<0||p.x>=j||p.y<0||p.y>=j)return x.score>x.highScore&&localStorage.setItem("snakeHighScore",String(x.score)),{...x,status:me.GAME_OVER,highScore:Math.max(x.score,x.highScore)};if(x.snake.some(k=>k.x===p.x&&k.y===p.y))return x.score>x.highScore&&localStorage.setItem("snakeHighScore",String(x.score)),{...x,status:me.GAME_OVER,highScore:Math.max(x.score,x.highScore)};const w=[p,...x.snake];if(p.x===x.food.x&&p.y===x.food.y){const k=x.score+10,b=Math.floor(k/50)+1,E=Math.max(ln,ot-b*on*2);return{...x,snake:w,food:n(w),score:k,level:b,speed:E}}return w.pop(),{...x,snake:w,direction:u}})},r.speed);return()=>clearInterval(o)},[r.status,r.speed,n]),m.useEffect(()=>{const d=t.current;if(!d)return;const o=d.getContext("2d");if(!o)return;o.clearRect(0,0,_e,_e),o.strokeStyle=Ue.GRID,o.lineWidth=.5;for(let u=0;u<=_e;u+=Me)o.beginPath(),o.moveTo(u,0),o.lineTo(u,_e),o.stroke(),o.beginPath(),o.moveTo(0,u),o.lineTo(_e,u),o.stroke();const{food:x,snake:p}=r;o.fillStyle=Ue.FOOD,o.shadowBlur=15,o.shadowColor=Ue.FOOD,o.beginPath(),o.arc(x.x*Me+Me/2,x.y*Me+Me/2,Me/2.5,0,Math.PI*2),o.fill(),o.shadowBlur=0,p.forEach((u,j)=>{const w=j===0;o.fillStyle=w?Ue.SNAKE_HEAD:Ue.SNAKE_BODY,w&&(o.shadowBlur=10,o.shadowColor=Ue.SNAKE_HEAD);const k=u.x*Me+2,b=u.y*Me+2,E=Me-4,B=4;o.beginPath(),o.moveTo(k+B,b),o.lineTo(k+E-B,b),o.quadraticCurveTo(k+E,b,k+E,b+B),o.lineTo(k+E,b+E-B),o.quadraticCurveTo(k+E,b+E,k+E-B,b+E),o.lineTo(k+B,b+E),o.quadraticCurveTo(k,b+E,k,b+E-B),o.lineTo(k,b+B),o.quadraticCurveTo(k,b,k+B,b),o.closePath(),o.fill(),o.shadowBlur=0})},[r]),e.jsxs(ke,{className:"min-h-screen bg-[#0a0a0c] flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-green-500/10 blur-[120px] rounded-full"})]}),e.jsxs("header",{className:"mb-8 text-center relative z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-orbitron font-bold tracking-tighter bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"NEON SNAKE"}),e.jsx("p",{className:"text-gray-500 text-xs tracking-[0.3em] uppercase mt-2",children:"Evolution Protocol 2.5"})]}),e.jsx(cn,{score:r.score,highScore:r.highScore,level:r.level}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-lg blur-lg opacity-75 group-hover:opacity-100 transition duration-1000"}),e.jsxs("div",{className:"relative bg-black border border-white/10 rounded-lg overflow-hidden shadow-2xl",children:[e.jsx("canvas",{ref:t,width:_e,height:_e,className:"max-w-full h-auto cursor-none"}),r.status===me.IDLE&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-40",children:[e.jsxs("button",{onClick:i,className:"group flex flex-col items-center gap-4 transition-transform hover:scale-105",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(74,222,128,0.5)]",children:e.jsx(dt,{className:"w-10 h-10 text-black fill-current ml-1"})}),e.jsx("span",{className:"text-white font-orbitron text-xl tracking-widest animate-pulse",children:"INITIATE GAME"})]}),e.jsxs("div",{className:"mt-12 flex gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:"Move"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"W"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"A"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"S"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"D"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:"Pause"}),e.jsx("kbd",{className:"px-4 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"SPACE"})]})]})]}),r.status===me.PAUSED&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px] flex items-center justify-center z-40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-4xl font-orbitron text-white mb-6",children:"PAUSED"}),e.jsx("button",{onClick:c,className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors",children:"RESUME"})]})}),r.status===me.GAME_OVER&&e.jsx(xn,{score:r.score,onRestart:i})]})]}),e.jsxs("div",{className:"mt-8 flex gap-4 z-10",children:[e.jsx("button",{onClick:c,disabled:r.status!==me.PLAYING&&r.status!==me.PAUSED,className:"p-4 bg-white/5 border border-white/10 rounded-full hover:bg-white/10 transition-colors disabled:opacity-20",children:r.status===me.PAUSED?e.jsx(dt,{className:"w-6 h-6"}):e.jsx(Ns,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>s(d=>({...d,status:me.GAME_OVER})),disabled:r.status!==me.PLAYING&&r.status!==me.PAUSED,className:"p-4 bg-white/5 border border-white/10 rounded-full hover:bg-red-500/20 transition-colors group disabled:opacity-20",children:e.jsx(Ss,{className:"w-6 h-6 group-hover:text-red-500"})})]}),e.jsx("footer",{className:"mt-12 text-gray-600 text-[10px] tracking-[0.2em] uppercase font-semibold",children:"Design by AI Evolution Lab â€¢ v2.5.0"})]})},Rt="/test_myReactProject";function hn(){const t=window.location.pathname.startsWith(Rt)?Rt:"/";return e.jsx(ks,{basename:t,children:e.jsxs(Es,{children:[e.jsxs(Se,{path:"/",element:e.jsx(Is,{}),children:[e.jsx(Se,{index:!0,element:e.jsx(Ps,{})}),e.jsx(Se,{path:"DilemmaSimulator",element:e.jsx(Hs,{})}),e.jsx(Se,{path:"myCard",element:e.jsx(Ws,{})}),e.jsx(Se,{path:"gacha",element:e.jsx(Oa,{})}),e.jsx(Se,{path:"Last_night",element:e.jsx(cr,{})}),e.jsx(Se,{path:"mordern",element:e.jsx(hr,{})}),e.jsx(Se,{path:"word",element:e.jsx(jr,{})}),e.jsx(Se,{path:"word2",element:e.jsx(Cr,{})}),e.jsx(Se,{path:"click_war",element:e.jsx(Br,{})}),e.jsx(Se,{path:"friend",element:e.jsx(Vr,{})}),e.jsx(Se,{path:"math",element:e.jsx(en,{})}),e.jsx(Se,{path:"AI_voca",element:e.jsx(nn,{})}),e.jsx(Se,{path:"snake_game",element:e.jsx(un,{})})]}),'path="trdder_coin" element=',e.jsx("trdder_coin",{})," />"]})})}const zt=document.getElementById("root");if(!zt)throw new Error("Could not find root element to mount to");const pn=Ts.createRoot(zt);pn.render(e.jsx(Ye.StrictMode,{children:e.jsx(hn,{})}));
