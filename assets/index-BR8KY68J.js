import{u as as,a as rs,r as m,j as e,O as ns,L as ls,b as is,X as os,K as cs,S as Ot,B as ds,c as ms,V as Ke,F as Dt,A as xs,U as Pt,d as hs,e as Ut,Z as xt,R as Ht,f as us,C as fs,T as bt,g as ps,H as gs,h as $t,i as bs,k as ys,l as ws,m as js,P as ht,n as vs,o as Ns,p as Ss,q as Je,s as ks,t as Es,v as Ts,w as Cs,x as As,y as Ms,z as ke,D as Is}from"./vendor_react-CT_-0Q0D.js";import{G as De,T as W,M as Bt}from"./vendor_ai-CSRnzdR-.js";import"./vendor-DnC4bF5A.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const Rs=({activeCategory:t,onCategoryChange:a})=>{const s=as(),r=rs(),[n,i]=m.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);m.useEffect(()=>{const h=window.document.documentElement;n?(h.classList.add("dark"),localStorage.setItem("theme","dark")):(h.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]);const c=()=>{i(!n)},d=typeof window<"u"&&window.history.length>1,o=typeof window<"u"&&r.pathname==="/"&&!d,x=["All","Game","MBTI"],f={All:"ì „ì²´",Game:"ê²Œìž„",MBTI:"MBTI"};return e.jsx("header",{className:"sticky top-0 z-10",style:{background:"linear-gradient(90deg, #a8d8a8 0%, #a8d4e8 100%)"},children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"py-6 flex justify-between items-center",role:"banner",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}),e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-md",children:"Website Builder"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors","aria-label":"í…Œë§ˆ ì „í™˜",children:n?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})})]}),e.jsxs("nav",{"aria-label":"ì¹´í…Œê³ ë¦¬ ë„¤ë¹„ê²Œì´ì…˜",className:"flex items-center border-t border-white border-opacity-20",children:[e.jsx("button",{onClick:()=>s(o?"/":-1),"aria-label":o?"í™ˆìœ¼ë¡œ ì´ë™":"ë’¤ë¡œê°€ê¸°",title:o?"í™ˆìœ¼ë¡œ ì´ë™":"ë’¤ë¡œê°€ê¸°",className:"p-2 mx-2 rounded-xl text-white hover:bg-white hover:bg-opacity-20 transition-colors",children:o?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9.5L12 4l9 5.5V21a1 1 0 0 1-1 1h-6v-6H10v6H4a1 1 0 0 1-1-1V9.5z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex-1 flex",children:x.map(h=>e.jsx("button",{onClick:()=>a(h),"aria-current":t===h?"page":void 0,className:`px-4 py-3 text-sm font-medium transition-all duration-200 rounded-t-xl ${t===h?"bg-white bg-opacity-30 text-white border-b-4 border-white":"text-white text-opacity-80 hover:text-opacity-100"}`,children:f[h]},h))})]})]})})},Ls=()=>e.jsx("footer",{className:"mt-20 rounded-t-3xl",style:{background:"linear-gradient(90deg, #a8d4e8 0%, #a8d8a8 100%)"},children:e.jsxs("div",{className:"container mx-auto px-4 py-10 text-center text-white",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Â© ",new Date().getFullYear()," Website Builder. All rights reserved."]}),e.jsx("p",{className:"text-xs mt-3 text-white text-opacity-90",children:"With âœ¨ Ghibli Charm âœ¨"})]})}),_s=()=>{const[t,a]=m.useState("All"),[s,r]=m.useState(!1);return m.useEffect(()=>{const n=()=>{const i=window.location.pathname.includes("/gacha")||window.location.pathname.includes("/click_war")||window.location.pathname.includes("/snake_game")||window.location.pathname.includes("/last_night")||window.location.pathname.includes("/mordern")||window.location.pathname.includes("/word")||window.location.pathname.includes("/word2")||window.location.pathname.includes("/friend")||window.location.pathname.includes("/math")||window.location.pathname.includes("/AI_voca")||window.location.pathname.includes("/myCard")||window.location.pathname.includes("/DilemmaSimulator");r(i),i?document.body.style.overflow="hidden":document.body.style.overflow=""};return window.addEventListener("popstate",n),n(),()=>{window.removeEventListener("popstate",n),document.body.style.overflow=""}},[]),e.jsxs("div",{className:"flex flex-col min-h-screen transition-colors duration-300",style:{position:s?"fixed":"relative",width:"100%",height:s?"100vh":"auto",overflow:s?"hidden":"auto"},children:[!s&&e.jsx(Rs,{activeCategory:t,onCategoryChange:a}),e.jsx("main",{className:"flex-grow",style:{width:"100%"},children:e.jsx(ns,{context:{activeCategory:t,setActiveCategory:a}})}),!s&&e.jsx(Ls,{})]})},Gs=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),Os=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Ds=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),yt=({website:t,onDelete:a})=>{const s=n=>{n.preventDefault(),n.stopPropagation(),a(t.id)},r=n=>{n.preventDefault(),n.stopPropagation()};return e.jsxs("div",{className:"rounded-3xl shadow-lg overflow-hidden transform hover:-translate-y-3 transition-all duration-300 ease-in-out flex flex-col",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(245,230,211,0.9) 100%)",border:"2px solid #d4c5b9"},children:[e.jsx("img",{src:t.thumbnailUrl,alt:t.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#4a4a4a"},children:t.name}),e.jsx("p",{className:"flex-grow mb-6",style:{color:"#6b6b6b"},children:t.description}),e.jsxs("div",{className:"mt-auto flex justify-end gap-3",children:[e.jsx("button",{className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Visit site",style:{color:"#a8d8a8"},children:e.jsx(Ds,{})}),e.jsx("button",{onClick:r,className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Edit site",style:{color:"#a8d4e8"},children:e.jsx(Gs,{})}),e.jsx("button",{onClick:s,className:"p-2 rounded-full transition-all hover:bg-white hover:shadow-md","aria-label":"Delete site",style:{color:"#e8b4a8"},children:e.jsx(Os,{})})]})]})]})},Ps=({website:t,onDelete:a})=>t.path?e.jsx(ls,{to:t.path,className:"block hover:scale-[1.01] transition-transform duration-150",children:e.jsx(yt,{website:t,onDelete:a})}):e.jsx(yt,{website:t,onDelete:a}),Us=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Hs=({isOpen:t,onClose:a,onCreate:s})=>{const[r,n]=m.useState(""),[i,c]=m.useState(""),[d,o]=m.useState("Game");m.useEffect(()=>{t&&(n(""),c(""),o("Game"))},[t]);const x=f=>{f.preventDefault(),r.trim()&&i.trim()&&s({name:r,description:i,category:d})};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex justify-center items-center p-4",onClick:a,children:[e.jsxs("div",{className:"rounded-3xl shadow-2xl p-8 w-full max-w-md transform transition-all duration-300 ease-in-out",onClick:f=>f.stopPropagation(),style:{background:"linear-gradient(135deg, #fefaf0 0%, #f5e6d3 100%)",border:"3px solid #d4c5b9",animation:"fade-in-scale 0.3s forwards"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#4a4a4a"},children:"âœ¨ Create New Website"}),e.jsx("button",{onClick:a,className:"p-2 rounded-full transition-colors","aria-label":"Close modal",style:{color:"#a8d4e8"},children:e.jsx(Us,{})})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"website-name",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Website Name"}),e.jsx("input",{type:"text",id:"website-name",value:r,onChange:f=>n(f.target.value),className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none focus:ring-4",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a",focusRingColor:"rgba(168, 216, 168, 0.3)"},placeholder:"e.g., My Awesome Project",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"website-description",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Description"}),e.jsx("textarea",{id:"website-description",value:i,onChange:f=>c(f.target.value),rows:3,className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none focus:ring-4",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a"},placeholder:"A brief description of what your website is about.",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"website-category",className:"block text-sm font-medium mb-1",style:{color:"#4a4a4a"},children:"Category"}),e.jsxs("select",{id:"website-category",value:d,onChange:f=>o(f.target.value),className:"w-full px-3 py-2 rounded-2xl shadow-sm focus:outline-none",style:{border:"2px solid #d4c5b9",background:"#fefaf0",color:"#4a4a4a"},children:[e.jsx("option",{value:"Game",children:"ê²Œìž„"}),e.jsx("option",{value:"MBTI",children:"MBTI"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-2xl font-medium transition-all hover:shadow-md",style:{background:"#f5d5b8",color:"#4a4a4a",border:"2px solid #d4c5b9"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white font-bold rounded-2xl transition-all hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},disabled:!r.trim()||!i.trim(),children:"Create Site"})]})]})]}),e.jsx("style",{children:`
        @keyframes fade-in-scale {
          from {
            transform: scale(0.95);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `})]}):null},wt=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),$s=()=>{const{activeCategory:t,setActiveCategory:a}=is(),[s,r]=m.useState([{id:1,name:"DilemmaSimulator",description:"A professional portfolio showcasing my projects and skills in software development.",thumbnailUrl:"https://picsum.photos/seed/portfolio/600/400",category:"MBTI",path:"/DilemmaSimulator"},{id:2,name:"card",description:"A fordddddscuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/myCard"},{id:3,name:"gacha",description:"A forum for gamerjjjjjjs to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/gacha"},{id:4,name:"last night",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/last_night"},{id:5,name:"mordern",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/mordern"},{id:6,name:"word",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/word"},{id:7,name:"word2",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/word2"},{id:8,name:"click war",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/click_war"},{id:9,name:"friend",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/friend"},{id:10,name:"math",description:"A forum for gaaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/math"},{id:11,name:"AI_voca",description:"A forum for gaaaaaamers to discuss strategies and new releases.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/AI_voca"},{id:12,name:"snake_game",description:"play snake game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"Game",path:"/snake_game"},,{id:12,name:"Dlab",description:"play dlab game.",thumbnailUrl:"https://picsum.photos/seed/gaming/600/400",category:"mbti",path:"/Dlab"}]),[n,i]=m.useState(!1),c=m.useCallback(x=>{r(f=>[...f,{...x,id:Date.now(),thumbnailUrl:`https://picsum.photos/seed/${Date.now()}/600/400`,path:`/${x.name.toLowerCase().replace(/\s+/g,"-")}`}]),i(!1)},[]),d=m.useCallback(x=>{r(f=>f.filter(h=>h.id!==x))},[]),o=m.useMemo(()=>t==="All"?s:s.filter(x=>x.category===t),[s,t]);return e.jsxs("div",{className:"container mx-auto p-4 md:p-8 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold",style:{color:"#4a4a4a",textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"âœ¨ My Sites âœ¨"}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 font-bold py-3 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-200 text-white",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:[e.jsx(wt,{}),"New Site"]})]}),o.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(x=>e.jsx(Ps,{website:x,onDelete:d},x.id))}):e.jsx("div",{className:"text-center py-16 px-6 rounded-3xl shadow-lg",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(245,230,211,0.9) 100%)",border:"2px solid #d4c5b9"},children:s.length===0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4",style:{color:"#4a4a4a"},children:"No Websites Yet! ðŸŒ¸"}),e.jsx("p",{className:"mb-6",style:{color:"#6b6b6b"},children:'It looks a bit empty here. Click the "New Site" button to start your first project.'}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-2 text-white font-bold py-3 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-200",style:{background:"linear-gradient(135deg, #a8d8a8 0%, #a8d4e8 100%)"},children:[e.jsx(wt,{}),"Create Your First Site"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",style:{color:"#4a4a4a"},children:"No Websites in this Category"}),e.jsxs("p",{style:{color:"#6b6b6b"},children:['There are no sites matching the category "',t,'".']})]})}),e.jsx(Hs,{isOpen:n,onClose:()=>i(!1),onCreate:c})]})},Bs={start:{title:"ì—„ë§ˆ íŽ¸? ì•„ë¹  íŽ¸?",description:"ë”œë ˆë§ˆë¡œ ì¸í•œ ê²°ê³¼ë¥¼ ì°¸í˜¹í•˜ê²Œ ë³´ì—¬ì¤„ ì˜ˆì •",isStart:!0,choices:[{text:"ì—„ë§ˆ íŽ¸",nextScene:"momRouteStart",color:"red"},{text:"ì•„ë¹  íŽ¸",nextScene:"dadRouteStart",color:"blue"}]},momRouteStart:{character:"ì•„ë¹ ",dialogue:"ê·¸ëž˜? ë„ˆ ì—„ë§ˆ íŽ¸ì´ì•¼? ê·¸ëŸ¼ ì•žìœ¼ë¡œ ê²Œìž„ì€ ì—†ë‹¤.",choices:[{text:"ë§ë¡œ ì„¤ë“í•˜ê¸°",nextScene:"momRoute_persuade"},{text:"ëª°ëž˜ ê²Œìž„í•˜ê¸°",nextScene:"momRoute_sneak"}]},momRoute_persuade:{character:"ì•„ë¹ ",dialogue:"ì‹œë„ëŸ½ë‹¤. ë‹¹ë¶„ê°„ ë„ˆëŠ” ê³µë¶€ ë¨¼ì €ë‹¤.",description:"ì•„ë¹ ê°€ ê²Œìž„ê¸° ì „ì›ì„ ë½‘ê³  ìˆ¨ê²¨ë²„ë¦°ë‹¤.",choices:[{text:"ê²Œìž„ê¸° ì°¾ê¸°",nextScene:"momRoute_findGame"},{text:"ìˆœìˆœížˆ ë”°ë¥´ê¸°",nextScene:"momRoute_obey"}]},momRoute_sneak:{character:"ë‚˜",dialogue:"ì•„ë¹ ê°€ ìž ë“¤ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ëª°ëž˜ ê²Œìž„ì„ í–ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒ ë‚  ì•„ì¹¨, ì•„ë¹ ì—ê²Œ ë“¤í‚¤ê³  ë§ì•˜ë‹¤.",description:"ì•„ë¹ ê°€ í™”ë¥¼ ë‚´ë©° íœ´ëŒ€í°ì„ ì••ìˆ˜í–ˆë‹¤.",choices:[{text:"ë¯¸ì•ˆí•˜ë‹¤ê³  ë§í•˜ê¸°",nextScene:"momRoute_apologize"},{text:"ë°˜í•­í•˜ê¸°",nextScene:"momRoute_rebel"}]},momRoute_findGame:{character:"ë‚˜",dialogue:"ì•„ë¹ ê°€ ê²Œìž„ê¸°ë¥¼ ì–´ë””ì— ìˆ¨ê²¼ì„ê¹Œ?",description:"ë°©, ê±°ì‹¤, ì°¨ ì•ˆì„ ë’¤ì ¸ë³´ì•˜ì§€ë§Œ ì°¾ì„ ìˆ˜ ì—†ì—ˆë‹¤. ê²°êµ­ ì•„ë¹ ì—ê²Œ ê²Œìž„ê¸°ë¥¼ ì°¾ìœ¼ë ¤ í•œ ê²ƒì„ ë“¤í‚¤ê³  íœ´ëŒ€í°ë„ ì••ìˆ˜ë‹¹í–ˆë‹¤.",choices:[{text:"ë¯¸ì•ˆí•˜ë‹¤ê³  ë§í•˜ê¸°",nextScene:"momRoute_apologize"},{text:"ë°˜í•­í•˜ê¸°",nextScene:"momRoute_rebel"}]},momRoute_obey:{isEnding:!0,endingTitle:"í˜„ëª…í•œ íƒ€í˜‘ ì—”ë”©",dialogue:"ë‚˜ëŠ” ì•„ë¹ ì˜ ë§ì„ ë”°ë¥´ê¸°ë¡œ í–ˆë‹¤. ê²Œìž„ ì—†ëŠ” ì‚¶ì€ ì§€ë£¨í–ˆì§€ë§Œ, ë” í° ê°ˆë“±ì€ í”¼í•  ìˆ˜ ìžˆì—ˆë‹¤.",description:"ì‹œê°„ì´ í˜ëŸ¬ ì•„ë¹ ì˜ í™”ê°€ ëˆ„ê·¸ëŸ¬ì¡Œê³ , ìš°ë¦¬ëŠ” ê²Œìž„ ì‹œê°„ì„ ì •í•˜ëŠ” ê²ƒìœ¼ë¡œ íƒ€í˜‘í–ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",nextScene:"start"}]},momRoute_apologize:{isEnding:!0,endingTitle:"ê²Œìž„ ìƒì‹¤ ì—”ë”©",dialogue:"ìž˜ëª»í–ˆì–´ìš”... ë‹¤ì‹œëŠ” ì•ˆ ê·¸ëŸ´ê²Œìš”.",description:"ë‚˜ì˜ ì‚¬ê³¼ì— ì•„ë¹ ì˜ ë§ˆìŒë„ ì¡°ê¸ˆì€ ëˆ„ê·¸ëŸ¬ì¡Œë‹¤. íœ´ëŒ€í°ì€ ëŒë ¤ë°›ì•˜ì§€ë§Œ, ê²Œìž„ê¸°ëŠ” ì˜ì˜ ëŒì•„ì˜¤ì§€ ì•Šì•˜ë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",nextScene:"start"}]},momRoute_rebel:{isEnding:!0,endingTitle:"ì™„ì „í•œ í†µì œ ì—”ë”©",dialogue:"ì•„ë¹ ê°€ ë­”ë°ìš”! ì´ê±´ ë‚´ ê±°ëž€ ë§ì´ì—ìš”!",description:"ë‚˜ì˜ ë°˜í•­ì— ì•„ë¹ ëŠ” ë”ìš± í™”ë¥¼ ëƒˆê³ , ì§‘ì•ˆì˜ ë¶„ìœ„ê¸°ëŠ” ìµœì•…ìœ¼ë¡œ ì¹˜ë‹¬ì•˜ë‹¤. ë‚˜ëŠ” ë°©ì— ê°‡í˜€ ì™¸ë¶€ì™€ì˜ ëª¨ë“  ì†Œí†µì´ ì°¨ë‹¨ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",nextScene:"start"}]},dadRouteStart:{character:"ì—„ë§ˆ",dialogue:"ë„¤ê°€â€¦ ì•„ë¹  íŽ¸ì„ ë“ ë‹¤ê³ ? ê·¸ëž˜. ê·¸ëŸ¼ ê³µë¶€ë§Œ í•´.",choices:[{text:"ì‚¬ê³¼í•˜ê¸°",nextScene:"dadRoute_apologize"},{text:"ê·¸ëƒ¥ ë°©ìœ¼ë¡œ ë“¤ì–´ê°€ê¸°",nextScene:"dadRoute_goRoom"}]},dadRoute_apologize:{character:"ë‚˜",dialogue:"ì—„ë§ˆ, ë¯¸ì•ˆí•´ìš”. ê·¸ëŸ° ëœ»ì´ ì•„ë‹ˆì—ˆëŠ”ë°...",description:"ì—„ë§ˆëŠ” ë‚´ ì‚¬ê³¼ë¥¼ ë°›ì•„ì£¼ì—ˆì§€ë§Œ, ì„œìš´í•œ ê°ì •ì€ ì‰½ê²Œ ê°€ì‹œì§€ ì•ŠëŠ” ë“¯ ë³´ì˜€ë‹¤. ì—„ë§ˆëŠ” í•œìˆ¨ì„ ì‰¬ë©° ë‚´ ì„±ì í‘œë¥¼ êº¼ë‚´ ë“¤ì—ˆë‹¤.",choices:[{text:"ëŒ€í™”ë¥¼ ì´ì–´ë‚˜ê°€ê¸°",nextScene:"dadRoute_talk"},{text:"ìžë¦¬ë¥¼ í”¼í•˜ê¸°",nextScene:"dadRoute_goRoom"}]},dadRoute_goRoom:{character:"ì—„ë§ˆ",dialogue:"ì–´ë”œ ë„ë§ê°€? ì•‰ì•„ë´. ìˆ˜í•™ í•™ì› í•˜ë‚˜ ë” ë“±ë¡í•˜ìž.",description:"ì—„ë§ˆê°€ ë‚´ ë°© ë¬¸ì„ ì—´ê³  ë“¤ì–´ì™€ ìž”ì†Œë¦¬ë¥¼ ì‹œìž‘í•œë‹¤.",choices:[{text:"ê±°ì ˆí•˜ê¸°",nextScene:"dadRoute_refuse"},{text:"ì–µì§€ë¡œ ë™ì˜í•˜ê¸°",nextScene:"dadRoute_agree"}]},dadRoute_talk:{isEnding:!0,endingTitle:"ê´€ê³„ íšŒë³µ ì—”ë”©",dialogue:"ì—„ë§ˆ, ì €ë„ ë…¸ë ¥í•˜ê³  ìžˆì–´ìš”. ì¡°ê¸ˆë§Œ ë¯¿ê³  ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",description:"ë‚˜ì˜ ì§„ì‹¬ ì–´ë¦° ë§ì— ì—„ë§ˆëŠ” ìž ì‹œ ìƒê°ì— ìž ê²¼ë‹¤. ìš°ë¦¬ëŠ” ì˜¤ëžœ ëŒ€í™” ëì— ì„œë¡œì˜ ìž…ìž¥ì„ ì´í•´í•˜ê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",nextScene:"start"}]},dadRoute_refuse:{character:"ë‚˜",dialogue:"ì‹«ì–´ìš”. ì§€ê¸ˆë„ ì¶©ë¶„ížˆ íž˜ë“¤ì–´ìš”.",description:"ë‚˜ì˜ ê±°ì ˆì— ì—„ë§ˆëŠ” í¬ê²Œ ì‹¤ë§í•œ ëˆˆì¹˜ì˜€ë‹¤. ê·¸ë‚  ì´í›„, ì—„ë§ˆì˜ ìž”ì†Œë¦¬ëŠ” ì „ë³´ë‹¤ í›¨ì”¬ ì‹¬í•´ì¡Œë‹¤.",choices:[{text:"ì•Œì•„ì„œ í• ê²Œë¼ê³  ë§í•˜ê¸°",nextScene:"dadRoute_byMyself"},{text:"í­ë°œí•´ì„œ ì†Œë¦¬ì¹˜ê¸°",nextScene:"dadRoute_explode"}]},dadRoute_agree:{character:"ë‚˜",dialogue:"ë„¤... ì•Œê² ì–´ìš”.",description:"í•™ì›ì´ í•˜ë‚˜ ë” ëŠ˜ì—ˆê³ , ì¹œêµ¬ë“¤ê³¼ ë§Œë‚  ì‹œê°„ì€ ì™„ì „ížˆ ì‚¬ë¼ì¡Œë‹¤. ì—„ë§ˆì˜ ê¸°ëŒ€ì¹˜ëŠ” ì ì  ë” ë†’ì•„ì ¸ë§Œ ê°„ë‹¤.",choices:[{text:"ì•Œì•„ì„œ í• ê²Œë¼ê³  ë§í•˜ê¸°",nextScene:"dadRoute_byMyself"},{text:"í­ë°œí•´ì„œ ì†Œë¦¬ì¹˜ê¸°",nextScene:"dadRoute_explode"}]},dadRoute_byMyself:{isEnding:!0,endingTitle:"ê³µë¶€ ì§€ì˜¥ ì—”ë”©",dialogue:"ì—„ë§ˆ, ì œë°œìš”. ì œê°€ ì•Œì•„ì„œ í• ê²Œìš”!",description:"ì—„ë§ˆëŠ” ë‚´ ë§ì„ ë¯¿ì§€ ì•Šì•˜ë‹¤. ê²°êµ­ ë‚˜ëŠ” ì—„ë§ˆê°€ ì§œì¤€ ë¹¡ë¹¡í•œ ìŠ¤ì¼€ì¤„ ì†ì—ì„œ ìˆ¨ ë§‰ížˆëŠ” í•˜ë£¨í•˜ë£¨ë¥¼ ë³´ë‚´ê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",nextScene:"start"}]},dadRoute_explode:{isEnding:!0,endingTitle:"ê´€ê³„ íŒŒíƒ„ ì—”ë”©",dialogue:"ì´ì œ ê·¸ë§Œ ì¢€ í•˜ì„¸ìš”! ìˆ¨ ë§‰í˜€ ì£½ì„ ê²ƒ ê°™ë‹¨ ë§ì´ì—ìš”!",description:"ë‚˜ì˜ í­ë°œì— ì—„ë§ˆëŠ” ì¶©ê²©ì„ ë°›ì€ ë“¯ ë³´ì˜€ë‹¤. ì§‘ì•ˆì€ ì–¼ìŒìž¥ì²˜ëŸ¼ ì°¨ê°€ì›Œì¡Œê³ , ì—„ë§ˆì™€ ë‚˜ëŠ” ì„œë¡œ ë§ì„ ì„žì§€ ì•Šê²Œ ë˜ì—ˆë‹¤.",choices:[{text:"ë‹¤ì‹œ ì‹œìž‘í•˜ê¸°",nextScene:"start"}]}},Fs=({scene:t,onChoice:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex flex-col items-center space-y-6 md:space-y-8 w-full max-w-2xl",children:[e.jsx("div",{className:"relative w-full aspect-[16/10] bg-black/30 rounded-xl border border-gray-700 overflow-hidden shadow-2xl",children:e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 250",preserveAspectRatio:"xMidYMid slice",children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"redGlow",cx:"15%",cy:"50%",r:"50%",fx:"15%",fy:"50%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(220, 38, 38, 0.5)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(220, 38, 38, 0)",stopOpacity:0}})]}),e.jsxs("radialGradient",{id:"blueGlow",cx:"85%",cy:"50%",r:"50%",fx:"85%",fy:"50%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(59, 130, 246, 0.5)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(59, 130, 246, 0)",stopOpacity:0}})]})]}),e.jsx("rect",{width:"400",height:"250",fill:"url(#redGlow)"}),e.jsx("rect",{width:"400",height:"250",fill:"url(#blueGlow)"}),e.jsx("g",{transform:"translate(60 160) scale(0.6)",children:e.jsx("path",{d:"M52.3,92.5c-2.4-5.3-4.5-10.7-6-16.3c-3.4-12.7-5.9-25.7-6.2-39.1c-0.2-8.3,0.5-16.6,1.9-24.7 c1.6-9.1,4.1-17.9,8-26.1c5.2-11,12.3-20.7,21.6-28.3c8.9-7.2,19.3-12.3,30.7-14.9c-8.9,13.1-13.4,28.2-12.9,43.4 c0.5,15.7,5.9,30.8,15.4,43.2C89.7,94.2,75.4,98.5,62.3,105.9C58.1,100.3,54.8,96.1,52.3,92.5z",fill:"black"})}),e.jsx("g",{transform:"translate(250 160) scale(0.6) scale(-1, 1) translate(-140, 0)",children:e.jsx("path",{d:"M52.3,92.5c-2.4-5.3-4.5-10.7-6-16.3c-3.4-12.7-5.9-25.7-6.2-39.1c-0.2-8.3,0.5-16.6,1.9-24.7 c1.6-9.1,4.1-17.9,8-26.1c5.2-11,12.3-20.7,21.6-28.3c8.9-7.2,19.3-12.3,30.7-14.9c-8.9,13.1-13.4,28.2-12.9,43.4 c0.5,15.7,5.9,30.8,15.4,43.2C89.7,94.2,75.4,98.5,62.3,105.9C58.1,100.3,54.8,96.1,52.3,92.5z",fill:"black"})}),e.jsx("g",{transform:"translate(198, 180) scale(0.4)",children:e.jsx("path",{d:"M49.5,82.7c-1.3-3-2.5-5.9-3.4-9c-1.9-7-3.3-14.2-3.4-21.6c-0.1-4.6,0.3-9.2,1-13.6c0.9-5,2.3-9.9,4.4-14.4 c2.9-6,6.8-11.4,11.9-15.6c4.9-3.9,10.7-6.8,16.9-8.2c-4.9,7.2-7.4,15.5-7.1,23.9c0.3,8.7,3.2,17,8.5,23.8 c-8.3,0.9-16.2,3.3-23.4,7.4C56,70,52.3,76,49.5,82.7z",fill:"black"})})]})}),e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-5xl md:text-6xl font-black text-white drop-shadow-lg",children:t.title}),e.jsx("p",{className:"text-red-500 font-bold mt-2 text-lg md:text-xl tracking-tight",children:t.description})]})]}),e.jsx("footer",{className:"w-full max-w-2xl pt-4 md:pt-8",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-around items-center gap-6",children:t.choices.map((s,r)=>e.jsx("button",{onClick:()=>a(s.nextScene),className:`w-full md:w-auto text-2xl md:text-3xl font-bold text-white rounded-lg px-12 py-4 md:px-16 md:py-5 transition-all duration-300 focus:outline-none 
              ${s.color==="red"?"bg-red-900/70 border-2 border-red-600 hover:bg-red-800/90 hover:shadow-[0_0_25px_rgba(239,68,68,0.7)] focus:ring-4 focus:ring-red-500/50":"bg-blue-900/70 border-2 border-blue-600 hover:bg-blue-800/90 hover:shadow-[0_0_25px_rgba(59,130,246,0.7)] focus:ring-4 focus:ring-blue-500/50"}`,children:s.text},r))})})]}),qs=({scene:t,onChoice:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"flex flex-col items-center space-y-8 w-full max-w-2xl bg-black/30 rounded-xl border border-gray-700 p-8 shadow-2xl",children:[t.isEnding&&e.jsx("h2",{className:"text-4xl font-black text-yellow-400 drop-shadow-lg",children:t.endingTitle}),t.character&&e.jsxs("p",{className:"text-2xl font-bold text-gray-300",children:[t.character,":"]}),e.jsxs("p",{className:"text-3xl text-center leading-relaxed",children:['"',t.dialogue,'"']}),t.description&&e.jsx("p",{className:"text-lg text-gray-400 text-center italic mt-4",children:t.description})]}),e.jsx("footer",{className:"w-full max-w-2xl pt-8",children:e.jsx("div",{className:"flex flex-col justify-around items-center gap-4",children:t.choices.map((s,r)=>e.jsx("button",{onClick:()=>a(s.nextScene),className:"w-full md:w-3/4 text-xl font-bold text-white bg-gray-800/70 border-2 border-gray-600 rounded-lg px-12 py-4 transition-all duration-300 hover:bg-gray-700/90 hover:border-gray-400 focus:outline-none focus:ring-4 focus:ring-gray-500/50",children:s.text},r))})})]}),Vs=()=>{const[t,a]=m.useState("start"),[s,r]=m.useState(!1),n=Bs[t],i=c=>{r(!0),setTimeout(()=>{a(c),r(!1)},300)};return e.jsxs("div",{className:"bg-gradient-to-b from-black to-gray-900 min-h-screen text-white flex flex-col items-center justify-center p-4 space-y-6 md:space-y-8 font-['Noto_Sans_KR']",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-wider",children:"DILEMMA SIMULATOR"}),e.jsx("p",{className:"text-gray-400 mt-2 text-md md:text-lg",children:"ë‹¹ì‹ ì˜ ì„ íƒì´ ëˆ„êµ°ê°€ì˜ ë§ˆì§€ë§‰ì´ ëœë‹¤."})]}),e.jsx("div",{className:`w-full flex flex-col items-center space-y-6 md:space-y-8 transition-opacity duration-300 ${s?"opacity-0":"opacity-100"}`,children:n.isStart?e.jsx(Fs,{scene:n,onChoice:i}):e.jsx(qs,{scene:n,onChoice:i})},t)]})},Ys=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),Ws=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3l-2 4zm8 0h3l2-4V7h-6v6h3l-2 4z"})}),zs=({name:t,likes:a,motto:s,imageUrl:r})=>e.jsx("div",{className:"max-w-sm w-full bg-white rounded-2xl shadow-xl transform transition-all hover:scale-105 duration-300 ease-in-out",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("img",{className:"w-32 h-32 rounded-full mx-auto shadow-lg border-4 border-slate-200",src:r,alt:`${t}ì˜ í”„ë¡œí•„ ì‚¬ì§„`}),e.jsx("h1",{className:"mt-6 text-3xl font-bold text-slate-800",children:t}),e.jsx("hr",{className:"my-6 border-t border-slate-200"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-700 flex items-center justify-center gap-2",children:[e.jsx(Ys,{className:"w-6 h-6 text-red-500"}),"ì¢‹ì•„í•˜ëŠ” ê²ƒ"]}),e.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:a.map((n,i)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:n},i))})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-700 flex items-center justify-center gap-2",children:[e.jsx(Ws,{className:"w-6 h-6 text-green-500"}),"ì¢Œìš°ëª…"]}),e.jsxs("blockquote",{className:"mt-4 text-slate-600 italic text-md leading-relaxed",children:['"',s,'"']})]})]})}),Ee=({children:t,className:a=""})=>{const[s,r]=m.useState(!1),n=m.useRef(null),i=async()=>{try{document.fullscreenElement?(await document.exitFullscreen(),r(!1),document.body.style.overflow=""):n.current&&(await n.current.requestFullscreen().catch(c=>{console.error(`ì „ì²´ í™”ë©´ ì˜¤ë¥˜: ${c.message}`)}),r(!0),document.body.style.overflow="hidden")}catch(c){console.error("Fullscreen ì „í™˜ ì˜¤ë¥˜:",c)}};return m.useEffect(()=>{const c=()=>{document.fullscreenElement||(r(!1),document.body.style.overflow="")};return document.addEventListener("fullscreenchange",c),()=>{document.removeEventListener("fullscreenchange",c)}},[]),m.useEffect(()=>()=>{document.fullscreenElement&&document.exitFullscreen(),document.body.style.overflow=""},[]),e.jsxs("div",{ref:n,className:`relative w-full h-full ${a}`,style:{position:s?"fixed":"relative",inset:s?0:"auto",zIndex:s?9999:"auto",backgroundColor:s?"#000":"transparent"},children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-50 p-3 rounded-2xl bg-white bg-opacity-20 hover:bg-opacity-30 text-white transition-all duration-200",title:s?"ì „ì²´ í™”ë©´ í•´ì œ":"ì „ì²´ í™”ë©´","aria-label":s?"ì „ì²´ í™”ë©´ í•´ì œ":"ì „ì²´ í™”ë©´",children:s?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4m-4 0l5 5m11-5v4m0 0h-4m4 0l-5 5M4 20v-4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 0l-5-5"})})}),e.jsx("div",{className:"w-full h-full",children:t})]})},Ks=()=>{const t={name:"Daniel",likes:["ìžë™ì°¨","ìžì „ê±°","ì „ìžê¸°ê¸°","ìž˜ ë†€ê¸°"],motto:"í˜ëŸ¬ê°€ëŠ” ëŒ€ë¡œ êµ¬ë¥´ëŠ” ëŒ€ë¡œ ë¶€ë”ªížˆëŠ” ëŒ€ë¡œ ë°€ë¦¬ëŠ” ëŒ€ë¡œ",imageUrl:"/image.png"};return e.jsx(Ee,{children:e.jsx("main",{className:"bg-slate-100 min-h-screen flex items-center justify-center p-4 font-sans",children:e.jsx(zs,{name:t.name,likes:t.likes,motto:t.motto,imageUrl:t.imageUrl})})})};var T=(t=>(t.N="N",t.R="R",t.SR="SR",t.SSR="SSR",t.Mythic="ì‹ í™”",t))(T||{}),oe=(t=>(t.Fire="ë¶ˆ",t.Water="ë¬¼",t.Wind="ë°”ëžŒ",t.Light="ë¹›",t.Dark="ì–´ë‘ ",t))(oe||{}),we=(t=>(t.R="R",t.SR="SR",t.SSR="SSR",t.Mythic="ì‹ í™”",t))(we||{}),ve=(t=>(t.SINGLE_TARGET_DAMAGE="ë‹¨ì¼ ëŒ€ìƒ ê³µê²©",t.AREA_OF_EFFECT_DAMAGE="ê´‘ì—­ ê³µê²©",t.HEAL_SELF="ìžê°€ ì¹˜ìœ ",t.HEAL_TEAM="íŒ€ ì¹˜ìœ ",t))(ve||{}),Me=(t=>(t.ENEMY_SINGLE="ì  ë‹¨ì¼",t.ENEMY_ALL="ì  ì „ì²´",t.ALLY_SELF="ìžì‹ ",t.ALLY_ALL="ì•„êµ° ì „ì²´",t))(Me||{}),X=(t=>(t.HOME="HOME",t.STUDY="STUDY",t.TEST="TEST",t.RESULT="RESULT",t.WRONG_REVIEW="WRONG_REVIEW",t))(X||{}),We=(t=>(t.BEST_FRIEND="ë² ìŠ¤íŠ¸ í”„ë Œë“œ",t.SCHOOL="í•™êµ ì¹œêµ¬",t.WORK="ì§ìž¥ ë™ë£Œ",t.HOBBY="ì·¨ë¯¸ í™œë™",t.OTHER="ê¸°íƒ€",t))(We||{}),_e=(t=>(t.EASY="ì‰¬ì›€",t.MEDIUM="ë³´í†µ",t.HARD="ì–´ë ¤ì›€",t))(_e||{}),ut=(t=>(t.BEGINNER="Beginner",t.INTERMEDIATE="Intermediate",t.ADVANCED="Advanced",t.EXPERT="Expert",t))(ut||{}),ye=(t=>(t.UP="UP",t.DOWN="DOWN",t.LEFT="LEFT",t.RIGHT="RIGHT",t))(ye||{}),he=(t=>(t.IDLE="IDLE",t.PLAYING="PLAYING",t.PAUSED="PAUSED",t.GAME_OVER="GAME_OVER",t))(he||{}),ee=(t=>(t.HOME="HOME",t.MODE_SELECT="MODE_SELECT",t.CLASSIC_LEVELS="CLASSIC_LEVELS",t.AI_CUSTOM_INPUT="AI_CUSTOM_INPUT",t.GAME="GAME",t.REPORT="REPORT",t.HISTORY="HISTORY",t.GUIDE="GUIDE",t))(ee||{}),Be=(t=>(t.CLASSIC="CLASSIC",t.AI_CUSTOM="AI_CUSTOM",t))(Be||{});const Fe=[{id:1,name:"ê¸°ë³¸ ì¼ê²©",description:"ì  í•˜ë‚˜ì—ê²Œ ê¸°ë³¸ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:we.R,level:1,effectType:ve.SINGLE_TARGET_DAMAGE,power:1.5,targetType:Me.ENEMY_SINGLE},{id:2,name:"ì¹˜ìœ ì˜ ë¹›",description:"ìžì‹ ì„ ì•½ê°„ íšŒë³µì‹œí‚µë‹ˆë‹¤.",rarity:we.R,level:1,effectType:ve.HEAL_SELF,power:500,targetType:Me.ALLY_SELF},{id:3,name:"íŒŒì´ì–´ë³¼",description:"ì  í•˜ë‚˜ì—ê²Œ ê°•ë ¥í•œ í™”ì—¼ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:we.SR,level:1,effectType:ve.SINGLE_TARGET_DAMAGE,power:2.5,targetType:Me.ENEMY_SINGLE},{id:4,name:"ëŒ€ì§€ ê°€ë¥´ê¸°",description:"ëª¨ë“  ì ì—ê²Œ í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:we.SR,level:1,effectType:ve.AREA_OF_EFFECT_DAMAGE,power:1.2,targetType:Me.ENEMY_ALL},{id:5,name:"ëŒ€ì²œì‚¬ì˜ ì¶•ë³µ",description:"ëª¨ë“  ì•„êµ°ì„ íšŒë³µì‹œí‚µë‹ˆë‹¤.",rarity:we.SSR,level:1,effectType:ve.HEAL_TEAM,power:1e3,targetType:Me.ALLY_ALL},{id:6,name:"ì²œë²Œ",description:"ì  í•˜ë‚˜ì—ê²Œ ì••ë„ì ì¸ ì‹ ì„± í”¼í•´ë¥¼ ì¤ë‹ˆë‹¤.",rarity:we.SSR,level:1,effectType:ve.SINGLE_TARGET_DAMAGE,power:5,targetType:Me.ENEMY_SINGLE},{id:7,name:"ì•„ë§ˆê²Ÿëˆ",description:"ëª¨ë“  ì ì—ê²Œ íŒŒê´´ì ì¸ í”¼í•´ë¥¼ ìž…íž™ë‹ˆë‹¤.",rarity:we.Mythic,level:1,effectType:ve.AREA_OF_EFFECT_DAMAGE,power:3.5,targetType:Me.ENEMY_ALL}],Xe=[{id:101,name:"í›ˆë ¨ìš© ëª©ê²€",rarity:T.N,level:1,cards:0,baseStats:{attack:10,hp:0,speed:0},specialEffect:"ê¸°ë³¸ ê³µê²©ë ¥ ì¦ê°€",description:"ì´ˆë³´ìžê°€ ì“°ê¸° ì¢‹ì€ ëª©ê²€."},{id:102,name:"ë‚¡ì€ ê°€ì£½ ê°‘ì˜·",rarity:T.N,level:1,cards:0,baseStats:{attack:0,hp:50,speed:0},specialEffect:"ê¸°ë³¸ ì²´ë ¥ ì¦ê°€",description:"ìµœì†Œí•œì˜ ë³´í˜¸ë¥¼ ì œê³µí•˜ëŠ” ê°‘ì˜·."},{id:103,name:"ê°•ì²  ê²€",rarity:T.R,level:1,cards:0,baseStats:{attack:30,hp:0,speed:2},specialEffect:"ê³µê²©ë ¥ ì†Œí­ ì¦ê°€",description:"ìž˜ ì œë ¨ëœ ê°•ì²  ê²€."},{id:104,name:"ì‚¬ëƒ¥ê¾¼ì˜ ìž¥í™”",rarity:T.R,level:1,cards:0,baseStats:{attack:5,hp:20,speed:10},specialEffect:"ì†ë„ ì†Œí­ ì¦ê°€",description:"ê°€ë³ê³  íŠ¼íŠ¼í•œ ìž¥í™”."},{id:105,name:"í™”ì—¼ì˜ ì§€íŒ¡ì´",rarity:T.SR,level:1,cards:0,baseStats:{attack:80,hp:0,speed:0},specialEffect:"í™”ì—¼ ì†ì„± ê³µê²©ë ¥ ê°•í™”",description:"ë¶ˆíƒ€ì˜¤ë¥´ëŠ” ë§ˆë ¥ì´ ê¹ƒë“  ì§€íŒ¡ì´."},{id:106,name:"ë¯¸ìŠ¤ë¦´ ê°‘ì˜·",rarity:T.SR,level:1,cards:0,baseStats:{attack:0,hp:300,speed:-5},specialEffect:"ì²´ë ¥ ëŒ€í­ ì¦ê°€",description:"ê°€ë³ì§€ë§Œ ë§¤ìš° ë‹¨ë‹¨í•œ ë¯¸ìŠ¤ë¦´ë¡œ ë§Œë“  ê°‘ì˜·."},{id:107,name:"ì—‘ìŠ¤ì¹¼ë¦¬ë²„",rarity:T.SSR,level:1,cards:0,baseStats:{attack:250,hp:100,speed:5},specialEffect:"ì„±ìŠ¤ëŸ¬ìš´ íž˜ìœ¼ë¡œ ì ì„ ì••ë„",description:"ì „ì„¤ ì†ì˜ ì™•ì´ ì‚¬ìš©í•˜ë˜ ê²€."},{id:108,name:"ë“œëž˜ê³¤ í•˜íŠ¸ ëª©ê±¸ì´",rarity:T.SSR,level:1,cards:0,baseStats:{attack:50,hp:800,speed:0},specialEffect:"ìƒëª…ë ¥ ìž¬ìƒ",description:"ìš©ì˜ ì‹¬ìž¥ ì¡°ê°ìœ¼ë¡œ ë§Œë“  ëª©ê±¸ì´."},{id:109,name:"ì‹  ì‚´í•´ìžì˜ ì°½",rarity:T.Mythic,level:1,cards:0,baseStats:{attack:800,hp:0,speed:20},specialEffect:"ì‹ ì—ê²Œë„ ìƒì²˜ë¥¼ ìž…ížˆëŠ” íž˜",description:"ì‹ í™”ë¥¼ ëë‚´ëŠ” ì°½."},{id:110,name:"ì•„ì´ê¸°ìŠ¤",rarity:T.Mythic,level:1,cards:0,baseStats:{attack:0,hp:2500,speed:0},specialEffect:"ëª¨ë“  ìƒíƒœì´ìƒ ì €í•­",description:"ì‹ ì˜ ê°€í˜¸ê°€ ê¹ƒë“  ì ˆëŒ€ ë°©íŒ¨."}],ue=[{id:1,name:"ë¸”ë ˆì´ì¦ˆ ë‚˜ì´íŠ¸",rarity:T.N,attribute:oe.Fire,imageUrl:"https://picsum.photos/seed/1/200",level:1,cards:0,description:"ìž‘ì€ ë¶ˆê½ƒì„ ë‹¤ë£¨ëŠ” ì´ˆë³´ ê¸°ì‚¬.",equippedUltimateId:1},{id:2,name:"ì•„ì¿ ì•„ ìŠ¤í”„ë¼ì´íŠ¸",rarity:T.N,attribute:oe.Water,imageUrl:"https://picsum.photos/seed/2/200",level:1,cards:0,description:"ìž¥ë‚œê¸° ë§Žì€ ë¬¼ì˜ ì •ë ¹.",equippedUltimateId:1},{id:3,name:"ê²Œì¼ ì•„ì²˜",rarity:T.R,attribute:oe.Wind,imageUrl:"https://picsum.photos/seed/3/200",level:1,cards:0,description:"ë°”ëžŒì„ ë‹¤ë£¨ëŠ” ëª…ì‚¬ìˆ˜.",equippedUltimateId:1},{id:4,name:"íƒœì–‘ì˜ ì‚¬ì œ",rarity:T.R,attribute:oe.Light,imageUrl:"https://picsum.photos/seed/4/200",level:1,cards:0,description:"ì„±ìŠ¤ëŸ¬ìš´ ë¹›ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ì œ.",equippedUltimateId:2},{id:5,name:"ê·¸ë¦¼ìž ì‹œë…¸ë¹„",rarity:T.R,attribute:oe.Dark,imageUrl:"https://picsum.photos/seed/5/200",level:1,cards:0,description:"ê·¸ë¦¼ìž ì†ì— ìˆ¨ì–´ë“œëŠ” ë‹Œìž.",equippedUltimateId:1},{id:6,name:"ì¸íŽ˜ë¥´ë…¸ ì†Œì„œëŸ¬",rarity:T.SR,attribute:oe.Fire,imageUrl:"https://picsum.photos/seed/6/200",level:1,cards:0,description:"í­ë°œì ì¸ í™”ì—¼ì„ ë‹¤ë£¨ëŠ” ê°•ë ¥í•œ ë§ˆë²•ì‚¬.",equippedUltimateId:3},{id:7,name:"íƒ€ì´ë‹¬ ê°€ë””ì–¸",rarity:T.SR,attribute:oe.Water,imageUrl:"https://picsum.photos/seed/7/200",level:1,cards:0,description:"ê¹Šì€ ë°”ë‹¤ì˜ ìˆ˜í˜¸ìž.",equippedUltimateId:4},{id:8,name:"ìŠ¤í†° ë“œë¼êµ°",rarity:T.SR,attribute:oe.Wind,imageUrl:"https://picsum.photos/seed/8/200",level:1,cards:0,description:"í­í’ì„ íƒ€ê³  ë‚˜ëŠ” ìš©ê¸°ì‚¬.",equippedUltimateId:1},{id:9,name:"ì²œìƒì˜ ë°œí‚¤ë¦¬",rarity:T.SSR,attribute:oe.Light,imageUrl:"https://picsum.photos/seed/9/200",level:1,cards:0,description:"ì²œìƒì—ì„œ ë‚´ë ¤ì˜¨ ì‹ ì„±í•œ ì „ì‚¬.",equippedUltimateId:5},{id:10,name:"ì‹¬ì—°ì˜ êµ°ì£¼",rarity:T.SSR,attribute:oe.Dark,imageUrl:"https://picsum.photos/seed/10/200",level:1,cards:0,description:"ì–´ë‘ìš´ ì‹¬ì—°ì˜ ì ˆëŒ€ ì§€ë°°ìž.",equippedUltimateId:6},{id:11,name:"ë¶ˆì‚¬ì¡°",rarity:T.SSR,attribute:oe.Fire,imageUrl:"https://picsum.photos/seed/11/200",level:1,cards:0,description:"ë¶€í™œê³¼ ë¶ˆì˜ ë¶ˆë©¸ì˜ ì¡´ìž¬.",equippedUltimateId:6},{id:12,name:"ë¦¬ë°”ì´ì–´ë˜ í˜„ìž",rarity:T.SSR,attribute:oe.Water,imageUrl:"https://picsum.photos/seed/12/200",level:1,cards:0,description:"ë°”ë‹¤ë¥¼ ë‹¤ìŠ¤ë¦¬ëŠ” ê³ ëŒ€ì˜ í˜„ìž.",equippedUltimateId:5},{id:13,name:"í…œíŽ˜ìŠ¤íŠ¸ ìœ™",rarity:T.SSR,attribute:oe.Wind,imageUrl:"https://picsum.photos/seed/13/200",level:1,cards:0,description:"íƒœí’ì˜ ëˆˆì—ì„œ íƒœì–´ë‚œ ë‚ ì¹´ë¡œìš´ ë°”ëžŒ.",equippedUltimateId:4},{id:14,name:"ë‚˜ì´íŠ¸ë©”ì–´ íŒ¬í…€",rarity:T.SSR,attribute:oe.Dark,imageUrl:"https://picsum.photos/seed/14/200",level:1,cards:0,description:"ì•…ëª½ì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ê³µí¬ì˜ í˜„ì‹ .",equippedUltimateId:6},{id:15,name:"ì°½ì„¸ì˜ ì•„í¬ì—”ì ¤",rarity:T.Mythic,attribute:oe.Light,imageUrl:"https://picsum.photos/seed/15/200",level:1,cards:0,description:"ì„¸ê³„ë¥¼ ì°½ì¡°í•œ ë¹›ì˜ ëŒ€ë¦¬ì¸.",equippedUltimateId:7},{id:16,name:"ì¢…ë§ì˜ ì´í”„ë¦¬íŠ¸",rarity:T.Mythic,attribute:oe.Fire,imageUrl:"https://picsum.photos/seed/16/200",level:1,cards:0,description:"ëª¨ë“  ê²ƒì„ ìž¬ë¡œ ëŒë¦¬ëŠ” íŒŒê´´ì˜ í™”ì‹ .",equippedUltimateId:7},{id:17,name:"ì„¸ê³„ìˆ˜ ìœ„ê·¸ë“œë¼ì‹¤",rarity:T.Mythic,attribute:oe.Water,imageUrl:"https://picsum.photos/seed/17/200",level:1,cards:0,description:"ìƒëª…ì˜ ê·¼ì›, ì„¸ê³„ë¥¼ í’ˆì€ ê±°ëŒ€í•œ ë‚˜ë¬´ ì •ë ¹.",equippedUltimateId:5}],ze={[T.N]:.5,[T.R]:.34,[T.SR]:.12,[T.SSR]:.03,[T.Mythic]:.01},jt={[we.R]:.6,[we.SR]:.3,[we.SSR]:.08,[we.Mythic]:.02},Js={name:"ê¸°ë³¸ íŒ€",characters:[ue[0],ue[1],null,null]},tt={name:"íƒ€ë½í•œ ê±°ì‹ ",imageUrl:"https://picsum.photos/seed/raidboss/400",hp:5e7,maxHp:5e7,reward:25e3},Ve={currency:1e3,characters:[{...ue[0],cards:0},{...ue[1],cards:0},{...ue[2],cards:0}],teams:[Js],achievements:[{id:1,name:"ì¼ì¼ ë¡œê·¸ì¸",description:"ì˜¤ëŠ˜ ë¡œê·¸ì¸í•˜ì„¸ìš”.",progress:1,target:1,reward:"ë³´ì„ 100ê°œ"},{id:2,name:"ì£¼ê°„ ê°€ì± ",description:"ì´ë²ˆ ì£¼ì— ê°€ì± ë¥¼ 10ë²ˆ ë½‘ìœ¼ì„¸ìš”.",progress:3,target:10,reward:"ê°€ì±  í‹°ì¼“ 1ìž¥"},{id:3,name:"ë¶ˆì˜ íž˜",description:"ë¶ˆ ì†ì„± ìºë¦­í„° 2ëª…ìœ¼ë¡œ íŒ€ì„ êµ¬ì„±í•˜ì„¸ìš”.",progress:1,target:2,reward:"ë³´ì„ 50ê°œ",requiredCharacterAttribute:oe.Fire}],friends:[{id:1,name:"AcePlayer",team:{name:"Vanguard",characters:[ue[8],ue[9],ue[10],ue[6]]},lastActive:"5ë¶„ ì „",lastRarePull:ue[11]},{id:2,name:"ShadowCat",team:{name:"Abyss",characters:[ue[4],ue[7],ue[9],ue[5]]},lastActive:"1ì‹œê°„ ì „"}],ultimateSkills:[{...Fe[0]},{...Fe[1]}],inventory:[{...Xe[0],id:1,cards:0},{...Xe[1],id:2,cards:0}],guildId:null},Xs=({onLogin:t})=>{const[a,s]=m.useState(""),r=n=>{n.preventDefault(),a.trim()&&t(a.trim())};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white p-4",children:e.jsxs("div",{className:"w-full max-w-sm text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-cyan-300 mb-2",children:"ê°€ì±  ë„ˆì§€"}),e.jsx("p",{className:"text-gray-400 mb-8",children:"ìƒˆ ê²Œìž„ì„ ì‹œìž‘í•˜ê±°ë‚˜ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì„¸ìš”."}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsx("input",{type:"text",value:a,onChange:n=>s(n.target.value),placeholder:"ì‚¬ìš©ìž ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”",className:"w-full px-4 py-3 bg-gray-800 border-2 border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500 transition-colors",maxLength:20}),e.jsx("button",{type:"submit",disabled:!a.trim(),className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:"ë¡œê·¸ì¸ / ì‹œìž‘í•˜ê¸°"})]})]})})},Zs={[T.N]:{border:"border-gray-500",text:"text-gray-300",shadow:"shadow-gray-500/50"},[T.R]:{border:"border-green-500",text:"text-green-400",shadow:"shadow-green-500/50"},[T.SR]:{border:"border-blue-500",text:"text-blue-400",shadow:"shadow-blue-500/50"},[T.SSR]:{border:"border-yellow-400",text:"text-yellow-400",shadow:"shadow-yellow-400/50"},[T.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400",shadow:"shadow-fuchsia-500/50"}},Pe=({character:t,onClick:a,isSelected:s})=>{const r=Zs[t.rarity];return e.jsxs("div",{className:`relative aspect-square rounded-lg overflow-hidden border-2 ${r.border} shadow-lg ${r.shadow} transition-transform hover:scale-105 ${a?"cursor-pointer":""} ${s?"ring-4 ring-cyan-400":""}`,onClick:a,children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),e.jsx("div",{className:`absolute top-1 left-1 bg-black/60 px-2 py-0.5 rounded-full text-xs font-bold ${r.text}`,children:t.rarity}),e.jsxs("div",{className:"absolute top-1 right-1 bg-black/60 px-2 py-0.5 rounded-full text-xs font-bold text-white",children:["Lv.",t.level]}),e.jsx("div",{className:"absolute bottom-1 left-0 right-0 px-2 text-center",children:e.jsx("p",{className:"text-white text-xs font-bold truncate drop-shadow-md",children:t.name})})]})},Qs=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 3.75 3.75 0 0 0-1.993-2.303A3.75 3.75 0 0 0 8.25 6.75a3.75 3.75 0 0 0-1.483 2.805 3.75 3.75 0 0 0-1.993 2.303A3.75 3.75 0 0 0 6 18a3.75 3.75 0 0 0 .495-7.468 3.75 3.75 0 0 0 5.01 0A3.75 3.75 0 0 0 12 18Z"})]}),qe=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),ea=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),ta=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})}),sa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),aa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),ra=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Ft=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.25a.75.75 0 0 1-.75-.75v-12a.75.75 0 0 1 .75-.75h19.5a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-.75.75h-4.5m-4.5 0h-3.75m3.75 0V11.25m5.25 2.25V11.25m0 0V9.75M18.75 11.25v-1.5m-16.5 0a3 3 0 0 1 3-3h10.5a3 3 0 0 1 3 3m-16.5 0c0 1.657 1.343 3 3 3h10.5c1.657 0 3-1.343 3-3m-12.75 0h9"})}),na=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.5-2.962c.51.056 1.02.086 1.5.086 1.032 0 2.033-.146 3-.418m-9.379-3.323c.345-.184.71-.343 1.086-.483A8.931 8.931 0 0 1 15 4.5c1.43 0 2.793.324 4.024.893m-15.024 4.885A4.5 4.5 0 0 0 7.5 10.5c1.196 0 2.285.42 3.12 1.121m-4.59 2.508A4.492 4.492 0 0 1 7.5 15c2.023 0 3.841.996 5.032 2.572M12 3v18"})}),la=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),ia=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-4.598m-1.5-6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Z"})}),oa=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),ca=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),vt=({playerState:t,currentUser:a,onLogout:s,onNavigate:r})=>{const n=t.teams[0],i=c=>t.characters.filter(d=>d.attribute===c).length;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{className:"text-center relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",title:"ë¡œê·¸ì•„ì›ƒ",children:e.jsx(aa,{className:"w-5 h-5"})})]}),e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ê°€ì±  ë„ˆì§€"}),e.jsx("p",{className:"text-gray-400",children:"ìµœê³ ê°€ ë˜ê¸° ìœ„í•œ ì—¬ì •ì´ ì—¬ê¸°ì„œ ì‹œìž‘ë©ë‹ˆë‹¤."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë‚˜ì˜ ë©”ì¸ íŒ€"}),e.jsx("div",{onClick:()=>r("team"),className:"grid grid-cols-4 gap-3 p-4 bg-gray-800/50 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:n.characters.map((c,d)=>c?e.jsx(Pe,{character:c},d):e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg flex items-center justify-center text-gray-500 text-3xl",children:"+"},d))})]}),e.jsx("section",{children:e.jsx("button",{onClick:()=>r("gacha"),className:"w-full p-4 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform duration-300 animate-pulse hover:animate-none",children:"âœ¨ ì¶”ì²œ ê°€ì±  ë“±ìž¥! âœ¨"})}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¼ì¼ & ì£¼ê°„ ì—…ì "}),e.jsx("div",{className:"space-y-3",children:t.achievements.map(c=>{const d=c.requiredCharacterAttribute&&i(c.requiredCharacterAttribute)<c.target;return e.jsxs("div",{className:`p-3 bg-gray-800 rounded-lg ${d?"border border-dashed border-yellow-500 animate-pulse":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[e.jsxs("p",{className:"font-semibold",children:[c.name," ",d&&e.jsxs("span",{className:"text-yellow-400 text-xs",children:[" (",c.requiredCharacterAttribute," ì†ì„± ìºë¦­í„° ë¶€ì¡±!)"]})]}),e.jsxs("p",{className:"text-gray-400",children:[c.progress,"/",c.target]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:"bg-cyan-500 h-2.5 rounded-full",style:{width:`${c.progress/c.target*100}%`}})})]},c.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¹œêµ¬ í™œë™"}),e.jsx("div",{className:"space-y-4",children:t.friends.map(c=>{var d;return e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex-shrink-0",children:e.jsx("img",{src:(d=c.team.characters[0])==null?void 0:d.imageUrl,alt:c.name,className:"w-full h-full object-cover rounded-full"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-bold",children:c.name}),c.lastRarePull&&e.jsxs("p",{className:"text-xs text-yellow-400 truncate",children:["ë°©ê¸ˆ ",e.jsx("span",{className:"font-bold",children:"SSR"})," ",c.lastRarePull.name," íšë“!"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["í™œë™: ",c.lastActive]})]}),e.jsx("button",{onClick:()=>r("social"),className:"bg-indigo-600 px-3 py-1 text-sm rounded-md hover:bg-indigo-500 transition-colors",children:"ë³´ê¸°"})]},c.id)})})]})]})};function Nt(t){return 10+t*2}function qt(t,a){const s=t.level||1;let r=(t.cards||0)+a,n=s;for(;r>=Nt(n);)r-=Nt(n),n+=1;return{level:n,cards:r}}const da=({results:t,onClose:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:a,children:e.jsxs("div",{className:"relative w-full max-w-2xl bg-gray-900/80 backdrop-blur-sm rounded-lg border-2 border-yellow-400 shadow-2xl p-6 space-y-4",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-yellow-300 drop-shadow-lg",children:"ì†Œí™˜ ê²°ê³¼"}),e.jsx("div",{className:`grid gap-3 ${t.length>1?"grid-cols-5":"grid-cols-1 place-items-center"}`,children:t.map((s,r)=>e.jsx("div",{className:"animate-reveal",style:{animationDelay:`${r*100}ms`},children:e.jsx(Pe,{character:s})},r))}),e.jsx("button",{onClick:a,className:"w-full mt-4 p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"í™•ì¸"})]})}),ma=[T.Mythic,T.SSR,T.SR,T.R,T.N],xa={[T.N]:"text-gray-300",[T.R]:"text-green-400",[T.SR]:"text-blue-400",[T.SSR]:"text-yellow-400",[T.Mythic]:"text-fuchsia-400"},ha=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300",children:"ì†Œí™˜ í™•ë¥ "}),e.jsx("div",{className:"space-y-2",children:ma.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-900/50 rounded-md",children:[e.jsx("span",{className:`font-bold ${xa[a]}`,children:a}),e.jsxs("span",{className:"text-white font-mono",children:[(ze[a]*100).toFixed(2),"%"]})]},a))}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"ê° ë“±ê¸‰ ë‚´ ìºë¦­í„°ëŠ” ë™ì¼í•œ í™•ë¥ ë¡œ ë“±ìž¥í•©ë‹ˆë‹¤."})]})}),st=30,at=300,rt=3e3,nt=5e4,lt=5e5,ua=()=>{const t=Math.random();let a=0;const s={};ue.forEach(r=>{s[r.rarity]||(s[r.rarity]=[]),s[r.rarity].push(r)});for(const r of Object.keys(ze))if(a+=ze[r],t<a){const n=s[r];if(n&&n.length>0)return{...n[Math.floor(Math.random()*n.length)],id:Date.now()+Math.random(),cards:0}}return{...s[T.N][0],id:Date.now()+Math.random(),cards:0}},fa=({playerState:t,setPlayerState:a})=>{const[s,r]=m.useState(null),[n,i]=m.useState(!1),[c,d]=m.useState(!1),o=(x,f)=>{if(!t||t.currency<f||c)return;d(!0);let h=Array.from({length:x},ua);if(x===10){if(!h.some(j=>[T.SR,T.SSR,T.Mythic].includes(j.rarity))){const j=ue.filter(k=>[T.SR,T.SSR,T.Mythic].includes(k.rarity));if(j.length>0){const k=j[Math.floor(Math.random()*j.length)];h[0]={...k,id:Date.now()+Math.random(),cards:0}}}}else if(x===100){if(!h.some(j=>[T.SSR,T.Mythic].includes(j.rarity))){const j=ue.filter(k=>[T.SSR,T.Mythic].includes(k.rarity));if(j.length>0){const k=j[Math.floor(Math.random()*j.length)];h[0]={...k,id:Date.now()+Math.random(),cards:0}}}}else if(x===1e3){if(!h.some(j=>j.rarity===T.Mythic)){const j=ue.filter(k=>k.rarity===T.Mythic);if(j.length>0){const k=j[Math.floor(Math.random()*j.length)];h[0]={...k,id:Date.now()+Math.random(),cards:0}}}}else if(x===1e4){const y=ue.filter(j=>j.rarity===T.Mythic);if(y.length>0){for(let j=0;j<10;j++){const k=y[Math.floor(Math.random()*y.length)];h[j]={...k,id:Date.now()+Math.random()+j,cards:0}}for(let j=h.length-1;j>0;j--){const k=Math.floor(Math.random()*(j+1));[h[j],h[k]]=[h[k],h[j]]}}}setTimeout(()=>{a(y=>{if(!y)return null;const j=new Map;y.characters.forEach(g=>j.set(g.name,{...g})),h.forEach(g=>{if(j.has(g.name)){const E=j.get(g.name),{level:H,cards:U}=qt(E,1);E.level=H,E.cards=U}else j.set(g.name,{...g,level:1,cards:0})});const k=Array.from(j.values());return{...y,currency:y.currency-f,characters:k}}),r(h),d(!1)},1e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì†Œí™˜"}),e.jsx("p",{className:"text-gray-400",children:"ìƒˆë¡œìš´ ë™ë£Œë¥¼ ë§Œë‚˜ ìš´ëª…ì„ ê°œì²™í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg flex justify-between items-center sticky top-4 z-10",children:[e.jsx("span",{className:"font-semibold text-lg",children:"ë³´ìœ  ë³´ì„"}),e.jsx("span",{className:"font-bold text-2xl text-yellow-300",children:t==null?void 0:t.currency.toLocaleString()}),e.jsxs("button",{onClick:()=>i(!0),className:"text-sm text-cyan-400 hover:text-cyan-300 flex items-center gap-1",children:[e.jsx(ra,{className:"w-4 h-4"}),"ì†Œí™˜ í™•ë¥ "]})]}),e.jsxs("div",{className:"relative aspect-video w-full max-w-lg mx-auto flex items-center justify-center rounded-lg overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-purple-900/50 via-black to-indigo-900/50 opacity-70"}),e.jsx("div",{className:"absolute w-full h-full animate-spin-slow",style:{background:"radial-gradient(circle, rgba(167, 139, 250, 0.3) 10%, transparent 70%)"}}),e.jsx("p",{className:"text-2xl font-bold text-white z-10 drop-shadow-lg",children:"ì†Œí™˜ì§„"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>o(1,st),disabled:!t||t.currency<st||c,className:"w-full p-3 rounded-lg bg-gradient-to-r from-gray-600 to-gray-700 text-white font-bold shadow-lg hover:from-gray-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"1íšŒ ì†Œí™˜"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",st]})]}),e.jsxs("button",{onClick:()=>o(10,at),disabled:!t||t.currency<at||c,className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold shadow-lg hover:from-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"10íšŒ ì†Œí™˜"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",at]})]}),e.jsxs("button",{onClick:()=>o(100,rt),disabled:!t||t.currency<rt||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-cyan-600 to-blue-600 text-white font-bold shadow-lg hover:from-cyan-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"100íšŒ ì†Œí™˜ (SSR+ 1ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",rt]})]}),e.jsxs("button",{onClick:()=>o(1e3,nt),disabled:!t||t.currency<nt||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-yellow-500 to-red-500 text-white font-bold shadow-lg hover:from-yellow-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"1000íšŒ ì†Œí™˜ (ì‹ í™” 1ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",nt]})]}),e.jsxs("button",{onClick:()=>o(1e4,lt),disabled:!t||t.currency<lt||c,className:"col-span-2 w-full p-3 rounded-lg bg-gradient-to-r from-fuchsia-600 to-yellow-500 text-white font-bold shadow-lg hover:from-fuchsia-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("p",{className:"text-lg",children:"10000íšŒ ì†Œí™˜ (ì‹ í™” 10ëª… í™•ì •)"}),e.jsxs("p",{className:"text-sm font-normal",children:["ë³´ì„ ",lt.toLocaleString()]})]})]}),s&&e.jsx(da,{results:s,onClose:()=>r(null)}),n&&e.jsx(ha,{onClose:()=>i(!1)})]})};function Vt(t){if(!t)return{attack:0,hp:0,speed:0};const a=1+t.level*.05,s=1+t.cards*.01,r=a*s,n=Math.round(t.baseStats.attack*r),i=Math.round(t.baseStats.hp*r),c=Math.round(t.baseStats.speed*r);return{attack:n,hp:i,speed:c}}function pt(t,a){const r={[T.N]:1,[T.R]:1.15,[T.SR]:1.35,[T.SSR]:1.6,[T.Mythic]:2}[t.rarity]??1,n=Math.round((t.level*4+10)*r),i=Math.round((t.level*20+100)*r),c=Math.round(10+t.level*.4+(t.level>50?2:0));let d={attack:0,hp:0,speed:0};return a&&(d=Vt(a)),{attack:n+d.attack,hp:i+d.hp,speed:Math.max(1,c+d.speed)}}const pa={[T.N]:{border:"border-gray-500",text:"text-gray-300",bg:"bg-gray-700"},[T.R]:{border:"border-green-500",text:"text-green-400",bg:"bg-green-600"},[T.SR]:{border:"border-blue-500",text:"text-blue-400",bg:"bg-blue-600"},[T.SSR]:{border:"border-yellow-400",text:"text-yellow-400",bg:"bg-yellow-500"},[T.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400",bg:"bg-fuchsia-600"}},ga={[oe.Fire]:"text-red-400",[oe.Water]:"text-blue-400",[oe.Wind]:"text-green-400",[oe.Light]:"text-yellow-300",[oe.Dark]:"text-purple-400"},it=({label:t,value:a})=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-900/50 p-2 rounded-md text-sm",children:[e.jsx("span",{className:"text-gray-400",children:t}),e.jsx("span",{className:"font-bold text-white",children:a})]}),ba=({character:t,equippedUltimate:a,equippedEquipment:s,isCharacterInTeam:r,onAddToTeam:n,onRemoveFromTeam:i,onChangeUltimate:c,onChangeEquipment:d,onClose:o})=>{const x=pt(t,s),f=pa[t.rarity],h=ga[t.attribute],y=Math.floor((t.level-1)/10)+1;return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:o,children:e.jsxs("div",{className:`relative w-full max-w-sm bg-gray-800 rounded-lg border-2 ${f.border} shadow-2xl p-6 space-y-4 max-h-[90vh] overflow-y-auto`,onClick:j=>j.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-24 h-24 rounded-lg overflow-hidden border-2 ${f.border} flex-shrink-0`,children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-bold ${f.text}`,children:t.rarity}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-sm font-semibold",children:["Level ",t.level," ",e.jsxs("span",{className:h,children:[t.attribute," ì†ì„±"]})]})]})]}),e.jsxs("p",{className:"text-gray-300 text-sm italic",children:['"',t.description,'"']}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"ë ˆë²¨ì—… ì§„í–‰ë„"}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative overflow-hidden",children:[e.jsx("div",{className:"bg-yellow-400 h-4 rounded-full transition-all duration-500",style:{width:`${t.cards/y*100}%`}}),e.jsxs("span",{className:"absolute inset-0 text-center text-xs font-bold text-black flex items-center justify-center",children:[t.cards," / ",y]})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ í•„ìš”í•œ ì¹´ë“œ"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"ëŠ¥ë ¥ì¹˜ (ìž¥ë¹„ í¬í•¨)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(it,{label:"HP",value:x.hp}),e.jsx(it,{label:"ê³µê²©ë ¥",value:x.attack}),e.jsx(it,{label:"ì†ë„",value:x.speed})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-purple-400",children:"ê¶ê·¹ê¸°"}),a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Lv.",a.level]})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"ì—†ìŒ"}),e.jsx("button",{onClick:c,className:"w-full mt-2 p-1 rounded-md text-xs bg-gray-700 hover:bg-gray-600 transition-colors",children:"ë³€ê²½"})]}),e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-md",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2 text-green-400",children:"ìž¥ë¹„"}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Lv.",s.level," ",s.rarity]}),e.jsx("p",{className:"text-[10px] text-cyan-300 mt-1",children:s.specialEffect})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"ì—†ìŒ"}),e.jsx("button",{onClick:d,className:"w-full mt-2 p-1 rounded-md text-xs bg-gray-700 hover:bg-gray-600 transition-colors",children:"ë³€ê²½"})]})]}),r?e.jsx("button",{onClick:i,className:"w-full p-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-500 transition-colors",children:"íŒ€ì—ì„œ ì œê±°"}):e.jsx("button",{onClick:n,className:"w-full p-2 rounded-lg bg-cyan-600 text-white font-semibold hover:bg-cyan-500 transition-colors",children:"íŒ€ì— ì¶”ê°€"})]})})},ya=async t=>{try{const a=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),r=`
      ë‹¹ì‹ ì€ ë›°ì–´ë‚œ RPG ì „ëžµê°€ìž…ë‹ˆë‹¤. ì•„ëž˜ì˜ ë³´ìœ  ìºë¦­í„° ëª©ë¡ì„ ë³´ê³ , ê· í˜• ìž¡ížˆê³  ê°•ë ¥í•œ 4ì¸ íŒ€ì„ ì¶”ì²œí•´ ì£¼ì„¸ìš”.
      ì„ íƒëœ ìºë¦­í„°ë“¤ ê°„ì˜ ì „ëžµê³¼ ì‹œë„ˆì§€ì— ëŒ€í•´ ì„¤ëª…í•´ ì£¼ì„¸ìš”. ì‘ë‹µì€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ìž‘ì„±í•´ ì£¼ì„¸ìš”.

      ë³´ìœ  ìºë¦­í„° ëª©ë¡:
      ${t.map(i=>`- ${i.name} (${i.rarity}, ${i.attribute})`).join(`
`)}
    `;return(await a.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}catch(a){return console.error("Error calling Gemini API:",a),"ì£„ì†¡í•©ë‹ˆë‹¤, ì§€ê¸ˆì€ ì¡°ì–¸ì„ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."}},St={[we.R]:{border:"border-green-500",text:"text-green-400"},[we.SR]:{border:"border-blue-500",text:"text-blue-400"},[we.SSR]:{border:"border-yellow-400",text:"text-yellow-400"},[we.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400"}},wa=({ownedUltimates:t,onSelect:a,onClose:s})=>{const r=n=>{const i=(n.level-1)*.25+1,c=(n.power*i).toFixed(1);switch(n.effectType){case ve.SINGLE_TARGET_DAMAGE:case ve.AREA_OF_EFFECT_DAMAGE:return`ê³µê²©ë ¥ì˜ ${c}ë°° í”¼í•´`;case ve.HEAL_SELF:case ve.HEAL_TEAM:return`ê¸°ë³¸ íšŒë³µëŸ‰ ${(n.power*i).toFixed(0)}`;default:return""}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-lg bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300 mb-4",children:"ê¶ê·¹ê¸° ì„ íƒ"}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:t.map(n=>e.jsxs("div",{onClick:()=>a(n.id),className:`p-3 bg-gray-900/50 rounded-lg border-2 ${St[n.rarity].border} cursor-pointer hover:bg-gray-700 transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:`font-bold text-lg ${St[n.rarity].text}`,children:n.name}),e.jsxs("span",{className:"text-sm font-semibold text-white",children:["Lv.",n.level]})]}),e.jsx("p",{className:"text-sm text-yellow-300 font-semibold",children:r(n)}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:n.description})]},n.id))})]})})},kt={[T.N]:{border:"border-gray-500",text:"text-gray-300"},[T.R]:{border:"border-green-500",text:"text-green-400"},[T.SR]:{border:"border-blue-500",text:"text-blue-400"},[T.SSR]:{border:"border-yellow-400",text:"text-yellow-400"},[T.Mythic]:{border:"border-fuchsia-500",text:"text-fuchsia-400"}},ja=({inventory:t,onSelect:a,onClose:s})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-lg bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-cyan-300 mb-4",children:"ìž¥ë¹„ ì„ íƒ"}),t.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"ìž¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤. ìƒì ì—ì„œ íšë“í•˜ì„¸ìš”."}):e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:t.map(r=>{const n=Vt(r);return e.jsxs("div",{onClick:()=>a(r.id),className:`p-3 bg-gray-900/50 rounded-lg border-2 ${kt[r.rarity].border} cursor-pointer hover:bg-gray-700 transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg ${kt[r.rarity].text}`,children:r.name}),e.jsxs("p",{className:"text-sm font-semibold text-white",children:["Lv.",r.level," ",e.jsxs("span",{className:"text-xs text-gray-400",children:["(",r.cards," ê°•í™”)"]})]})]}),e.jsxs("div",{className:"text-right text-xs text-gray-300",children:[n.attack>0&&e.jsxs("p",{children:["ê³µê²© +",n.attack.toLocaleString()]}),n.hp>0&&e.jsxs("p",{children:["ì²´ë ¥ +",n.hp.toLocaleString()]}),n.speed>0&&e.jsxs("p",{children:["ì†ë„ +",n.speed.toLocaleString()]})]})]}),e.jsx("p",{className:"text-xs text-cyan-400 mt-1 font-bold",children:r.specialEffect}),e.jsx("p",{className:"text-xs text-gray-500",children:r.description})]},r.id)})})]})}),va=({playerState:t,setPlayerState:a,onEquipUltimate:s,onEquipEquipment:r})=>{const[n,i]=m.useState(null),[c,d]=m.useState(!1),[o,x]=m.useState(!1),[f,h]=m.useState(""),[y,j]=m.useState(!1),k=t.teams[0],g=new Set(k.characters.filter(Boolean).map(b=>b.id)),E=new Map(Fe.map(b=>[b.id,b])),H=new Map(t.ultimateSkills.map(b=>[b.id,b])),U=b=>H.get(b)||E.get(b),I=b=>b?t.inventory.find(C=>C.id===b):void 0,S=b=>{i(b)},p=()=>{i(null),d(!1),x(!1)},A=b=>{const C=k.characters.findIndex($=>$===null);if(C!==-1&&!g.has(b.id)){const $=[...k.characters];$[C]=b,a(q=>q?{...q,teams:[{...q.teams[0],characters:$}]}:null)}p()},R=b=>{const C=k.characters.map($=>$&&$.id===b?null:$);a($=>$?{...$,teams:[{...$.teams[0],characters:C}]}:null),p()},O=async()=>{j(!0),h("");const b=await ya(t.characters);h(b),j(!1)},P=b=>{n&&s(n.id,b),d(!1),i(null)},N=b=>{n&&r(n.id,b),x(!1),i(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ìºë¦­í„° ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-400",children:"ë³´ìœ  ìºë¦­í„°ë¥¼ í™•ì¸í•˜ê³  ìµœê°•ì˜ íŒ€ì„ êµ¬ì„±í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë©”ì¸ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:k.characters.map((b,C)=>e.jsx("div",{className:"relative",children:b?e.jsx(Pe,{character:b,onClick:()=>S(b)}):e.jsx("div",{className:"aspect-square w-full h-full bg-gray-700/50 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center text-gray-500 text-4xl",children:"+"})},C))})]}),e.jsxs("section",{children:[e.jsxs("button",{onClick:O,disabled:y,className:"w-full p-3 rounded-lg bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(la,{className:"w-6 h-6"}),y?"ë¶„ì„ ì¤‘...":"AI íŒ€ ì¡°í•© ì¶”ì²œë°›ê¸°"]}),f&&e.jsx("div",{className:"prose prose-invert mt-4 p-4 bg-gray-800/50 rounded-lg max-w-none",dangerouslySetInnerHTML:{__html:f.replace(/\n/g,"<br />")}})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë³´ìœ  ìºë¦­í„° ëª©ë¡"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 gap-3",children:t.characters.map(b=>e.jsx(Pe,{character:b,onClick:()=>S(b)},b.id))})]}),n&&!c&&!o&&e.jsx(ba,{character:n,equippedUltimate:U(n.equippedUltimateId),equippedEquipment:I(n.equippedEquipmentId),isCharacterInTeam:g.has(n.id),onAddToTeam:()=>A(n),onRemoveFromTeam:()=>R(n.id),onChangeUltimate:()=>d(!0),onChangeEquipment:()=>x(!0),onClose:p}),c&&n&&e.jsx(wa,{ownedUltimates:t.ultimateSkills,onSelect:P,onClose:()=>d(!1)}),o&&n&&e.jsx(ja,{inventory:t.inventory,onSelect:N,onClose:()=>x(!1)})]})},Na={very_easy:{count:1,rarities:[T.N],levelRange:[1,3]},easy:{count:2,rarities:[T.N,T.R],levelRange:[3,8]},normal:{count:3,rarities:[T.R,T.SR],levelRange:[10,15]},hard:{count:4,rarities:[T.SR,T.SSR],levelRange:[20,25]},very_hard:{count:4,rarities:[T.SR,T.SSR],levelRange:[30,40]},hell:{count:4,rarities:[T.SSR,T.Mythic],levelRange:[45,55]},hardcore:{count:4,rarities:[T.Mythic],levelRange:[60,70]},boss:{count:1,rarities:[T.Mythic],levelRange:[100,100]}};let Sa=-1;const ka=t=>{const a=Na[t],s=[],r=ue.filter(n=>a.rarities.includes(n.rarity));if(r.length===0){console.error(`No characters available for rarities: ${a.rarities.join(", ")}`);const n=ue.filter(i=>i.rarity===T.N);if(n.length>0)r.push(...n);else return[]}for(let n=0;n<a.count;n++){const i=r[Math.floor(Math.random()*r.length)],c=Math.floor(Math.random()*(a.levelRange[1]-a.levelRange[0]+1))+a.levelRange[0],d={...i,id:Sa--,level:c,name:`${i.name} (ì )`};s.push(d)}return s},ot={very_easy:{label:"ë§¤ìš° ì‰¬ì›€",color:"bg-teal-700 hover:bg-teal-600"},easy:{label:"ì‰¬ì›€",color:"bg-green-600 hover:bg-green-500"},normal:{label:"ë³´í†µ",color:"bg-yellow-600 hover:bg-yellow-500"},hard:{label:"ì–´ë ¤ì›€",color:"bg-orange-600 hover:bg-orange-500"},very_hard:{label:"ë§¤ìš° ì–´ë ¤ì›€",color:"bg-red-600 hover:bg-red-500"},hell:{label:"ì§€ì˜¥",color:"bg-purple-700 hover:bg-purple-600"},hardcore:{label:"í•˜ë“œì½”ì–´",color:"bg-gray-700 hover:bg-gray-600"},boss:{label:"ë³´ìŠ¤",color:"bg-black border border-red-500 hover:bg-gray-900"}},Ea=({playerState:t,onStartCombat:a})=>{var d;const s=(d=t.teams[0])==null?void 0:d.characters.filter(o=>o!==null),[r,n]=m.useState("normal"),[i,c]=m.useState([]);return m.useEffect(()=>{c(ka(r))},[r]),e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì „íˆ¬ ì¤€ë¹„"}),e.jsx("p",{className:"text-gray-400",children:"ë„ì „í•  ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"ë‚œì´ë„ ì„ íƒ"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Object.keys(ot).map(o=>e.jsx("button",{onClick:()=>n(o),className:`px-3 py-2 rounded-md font-bold transition-all text-sm ${r===o?`${ot[o].color} text-white ring-2 ring-white shadow-lg`:"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:ot[o].label},o))})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-400",children:"ì  íŒ€ (ë¯¸ë¦¬ë³´ê¸°)"}),i.length>0?e.jsx("div",{className:"flex justify-center gap-4",children:i.map((o,x)=>e.jsx("div",{className:"w-24",children:e.jsx(Pe,{character:o})},x))}):e.jsx("p",{className:"text-gray-500",children:"ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì—¬ ì ì„ ìƒì„±í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-400",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"flex justify-center gap-4",children:s.map((o,x)=>e.jsx("div",{className:"w-24",children:e.jsx(Pe,{character:o})},x))})]}),e.jsx("button",{onClick:()=>a(i,r),disabled:s.length===0||i.length===0,className:"w-full p-4 rounded-lg bg-gradient-to-r from-red-600 to-orange-600 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:"ì „íˆ¬ ì‹œìž‘!"})]})},Ta=({friends:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ì»¤ë®¤ë‹ˆí‹°"}),e.jsx("p",{className:"text-gray-400",children:"ì¹œêµ¬ ë° ë¼ì´ë²Œê³¼ êµë¥˜í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gradient-to-br from-green-900 to-teal-900 rounded-lg border-2 border-green-500 shadow-lg text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-green-300",children:"í˜‘ë™ ë ˆì´ë“œ ê°€ëŠ¥!"}),e.jsx("p",{className:"text-sm text-gray-200 mt-1 mb-3",children:"ì¹œêµ¬ì™€ íŒ€ì„ ì´ë£¨ì–´ ì›”ë“œ ë³´ìŠ¤ë¥¼ ë¬¼ë¦¬ì¹˜ê³  ë‘ ë°°ì˜ ë³´ìƒì„ íšë“í•˜ì„¸ìš”!"}),e.jsx("button",{className:"px-6 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-500 transition-colors",children:"íŒŒí‹° ì°¾ê¸°"})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ì¹œêµ¬ ëª©ë¡"}),e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["í™œë™: ",a.lastActive]})]}),a.lastRarePull&&e.jsxs("div",{className:"text-right text-xs bg-yellow-900/50 border border-yellow-600 p-2 rounded-md",children:[e.jsx("p",{className:"text-yellow-300",children:"ìµœê·¼ íšë“:"}),e.jsxs("p",{className:"font-semibold",children:[a.lastRarePull.rarity," ",a.lastRarePull.name]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2",children:[a.name,"ì˜ íŒ€"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.team.characters.map((s,r)=>s?e.jsx(Pe,{character:s},r):e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg"},r))})]})]},a.id))})]})]}),Ca=({pack:t,onConfirm:a,onClose:s})=>{const[r,n]=m.useState("idle"),i=()=>{n("processing"),setTimeout(()=>{n("success"),setTimeout(()=>{a()},1e3)},1500)};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:s,children:e.jsxs("div",{className:"relative w-full max-w-md bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:c=>c.stopPropagation(),children:[r==="idle"&&e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(ea,{className:"w-12 h-12 mx-auto text-cyan-400 mb-2"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"êµ¬ë§¤ í™•ì¸"})]}),r==="idle"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"ìƒí’ˆ"}),e.jsxs("span",{className:"font-semibold text-white",children:[t.name," (",t.amount.toLocaleString()," ë³´ì„)"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{className:"text-gray-400",children:"ì´ ê²°ì œ ê¸ˆì•¡"}),e.jsx("span",{className:"font-bold text-cyan-300",children:t.price})]})]}),e.jsx("div",{className:"text-center p-3 bg-yellow-900/50 border border-yellow-700 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-300",children:["ì´ê²ƒì€ ì‹œë®¬ë ˆì´ì…˜ìž…ë‹ˆë‹¤.",e.jsx("br",{}),"ì‹¤ì œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šìœ¼ë©°, ì •ë³´ë¥¼ ìž…ë ¥í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤."]})}),e.jsx("button",{onClick:i,className:"w-full mt-4 p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"ê²°ì œ í™•ì •"})]}),r==="processing"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-t-cyan-400 border-gray-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"ê²°ì œ ì²˜ë¦¬ ì¤‘..."})]}),r==="success"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-green-400 font-bold text-xl",children:"êµ¬ë§¤ ì„±ê³µ!"}),e.jsxs("p",{className:"text-gray-300",children:[t.amount.toLocaleString(),"ê°œì˜ ë³´ì„ì´ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤."]})]})]})})},Aa=({onConfirm:t,onClose:a})=>{const[s,r]=m.useState(""),[n,i]=m.useState(""),c=d=>{d.preventDefault(),t(s)||(i("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤."),r(""))};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:a,children:e.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-lg border border-gray-700 shadow-2xl p-6 space-y-4",onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(qe,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(ca,{className:"w-12 h-12 mx-auto text-cyan-400 mb-2"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"ë¹„ë°€ë²ˆí˜¸ í™•ì¸"}),e.jsx("p",{className:"text-sm text-gray-400",children:"êµ¬ë§¤ë¥¼ ê³„ì†í•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”."})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("input",{type:"password",value:s,onChange:d=>{r(d.target.value),i("")},placeholder:"ë¹„ë°€ë²ˆí˜¸",className:`w-full px-4 py-3 bg-gray-700 border-2 rounded-lg text-white placeholder-gray-500 focus:outline-none transition-colors ${n?"border-red-500":"border-gray-600 focus:border-cyan-500"}`,autoFocus:!0}),n&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:n}),e.jsx("button",{type:"submit",disabled:!s,className:"w-full p-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors disabled:opacity-50",children:"í™•ì¸"})]})]})})},Ma=[{name:"ìŠ¤íƒ€í„° íŒ©",amount:500,price:"â‚©1,200",color:"from-green-500 to-teal-500"},{name:"ê°€ì„±ë¹„ íŒ©",amount:1200,price:"â‚©2,500",color:"from-blue-500 to-cyan-500"},{name:"í”„ë¡œ íŒ©",amount:3e3,price:"â‚©5,900",color:"from-purple-500 to-indigo-500"},{name:"ê³ ëž˜ íŒ©",amount:1e4,price:"â‚©15,000",color:"from-yellow-500 to-orange-500"},{name:"ì§€ë°°ìž íŒ©",amount:5e4,price:"â‚©55,000",color:"from-red-500 to-rose-500"},{name:"ì‹ ë“¤ì˜ ì¶•ë³µ",amount:1e7,price:"â‚©119,000",color:"from-fuchsia-600 via-purple-600 to-indigo-700",bestValue:!0}],Ia=()=>{const t=Math.random();let a=0;const s={};Fe.forEach(r=>{s[r.rarity]||(s[r.rarity]=[]),s[r.rarity].push(r)});for(const r of Object.keys(jt))if(a+=jt[r],t<a){const n=s[r];if(n&&n.length>0)return{...n[Math.floor(Math.random()*n.length)]}}return{...s[we.R][0]}},Et=()=>{const t=Math.random();let a=0;const s={};Xe.forEach(r=>{s[r.rarity]||(s[r.rarity]=[]),s[r.rarity].push(r)});for(const r of Object.keys(ze))if(a+=ze[r],t<a){const n=s[r];if(n&&n.length>0)return{...n[Math.floor(Math.random()*n.length)],cards:0}}return{...s[T.N][0],cards:0}},Ra=({playerState:t,setPlayerState:a})=>{const[s,r]=m.useState(null),[n,i]=m.useState(null),[c,d]=m.useState(!1),[o,x]=m.useState(null),[f,h]=m.useState(null),y=150,j=100,k=1e6,g=p=>{i(p),d(!0)},E=p=>p.trim()==="12121212"?(d(!1),r(n),i(null),!0):!1,H=p=>{a(A=>A?{...A,currency:A.currency+p}:null),r(null)},U=p=>{const A=y*p;if(!t||t.currency<A)return;const R=Array.from({length:p},Ia);a(O=>{if(!O)return null;const P=new Map;return O.ultimateSkills.forEach(N=>P.set(N.id,{...N})),R.forEach(N=>{if(P.has(N.id)){const b=P.get(N.id);b.level+=1}else P.set(N.id,{...N,level:1})}),{...O,currency:O.currency-A,ultimateSkills:Array.from(P.values())}}),x(R)},I=p=>{let A=j*p;if(p===1e4&&(A=k),!t||t.currency<A)return;let R=[];if(p===1e4){const O=Xe.filter(P=>P.rarity===T.Mythic);if(O.length>0)for(let P=0;P<10;P++){const N=O[Math.floor(Math.random()*O.length)];R.push({...N,cards:0})}for(let P=R.length;P<p;P++)R.push(Et());for(let P=R.length-1;P>0;P--){const N=Math.floor(Math.random()*(P+1));[R[P],R[N]]=[R[N],R[P]]}}else R=Array.from({length:p},Et);a(O=>{if(!O)return null;const P=new Map;return O.inventory.forEach(N=>P.set(N.id,{...N})),R.forEach(N=>{if(P.has(N.id)){const b=P.get(N.id),{level:C,cards:$}=qt(b,1);b.level=C,b.cards=$}else P.set(N.id,{...N,level:1,cards:0})}),{...O,currency:O.currency-A,inventory:Array.from(P.values())}}),h(R)},S=()=>f?[...f].sort((A,R)=>{const O={[T.Mythic]:5,[T.SSR]:4,[T.SR]:3,[T.R]:2,[T.N]:1};return(O[R.rarity]||0)-(O[A.rarity]||0)}).slice(0,60):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ìƒì "}),e.jsx("p",{className:"text-gray-400",children:"ë³´ì„ì„ êµ¬ë§¤í•˜ì—¬ ëª¨í—˜ì„ ê³„ì†í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-purple-400",children:"ê¶ê·¹ê¸° ë½‘ê¸°"}),e.jsxs("div",{className:"flex justify-around items-center gap-2",children:[e.jsxs("button",{onClick:()=>U(1),disabled:!t||t.currency<y,className:"flex-1 px-4 py-2 rounded-lg bg-purple-600 text-white font-bold hover:bg-purple-500 transition-colors disabled:opacity-50 text-sm",children:["1íšŒ (",y,")"]}),e.jsxs("button",{onClick:()=>U(10),disabled:!t||t.currency<y*10,className:"flex-1 px-4 py-2 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-colors disabled:opacity-50 text-sm",children:["10íšŒ (",y*10,")"]})]})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-green-400",children:"ìž¥ë¹„ ë½‘ê¸°"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>I(1),disabled:!t||t.currency<j,className:"px-4 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-500 transition-colors disabled:opacity-50 text-sm",children:["1íšŒ (",j,")"]}),e.jsxs("button",{onClick:()=>I(10),disabled:!t||t.currency<j*10,className:"px-4 py-2 rounded-lg bg-teal-600 text-white font-bold hover:bg-teal-500 transition-colors disabled:opacity-50 text-sm",children:["10íšŒ (",j*10,")"]}),e.jsx("button",{onClick:()=>I(1e4),disabled:!t||t.currency<k,className:"col-span-2 px-4 py-2 rounded-lg bg-gradient-to-r from-emerald-600 to-green-700 text-white font-bold hover:from-emerald-500 transition-colors disabled:opacity-50 text-sm border border-green-400",children:"10000íšŒ (ì‹ í™” 10ê°œ í™•ì •)"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ë³´ì„ íŒ©"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Ma.map(p=>e.jsxs("div",{className:`relative p-4 rounded-lg bg-gradient-to-br ${p.color} text-white shadow-lg text-center flex flex-col justify-between`,children:[p.bestValue&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"BEST VALUE"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:p.name}),e.jsxs("p",{className:"text-2xl font-extrabold my-2",children:[p.amount.toLocaleString()," ë³´ì„"]}),e.jsx("p",{className:"text-sm font-semibold",children:p.price})]}),e.jsxs("button",{onClick:()=>g(p),className:"mt-3 w-full p-2 rounded-md bg-white/20 font-semibold hover:bg-white/30 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ft,{className:"w-5 h-5"})," êµ¬ë§¤"]})]},p.amount))})]}),c&&e.jsx(Aa,{onConfirm:E,onClose:()=>d(!1)}),s&&e.jsx(Ca,{pack:s,onConfirm:()=>H(s.amount),onClose:()=>r(null)}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg max-w-lg w-full",onClick:p=>p.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-4 text-purple-300",children:"ê¶ê·¹ê¸° íšë“!"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map((p,A)=>e.jsxs("div",{className:"bg-gray-900 p-2 rounded border border-gray-700",children:[e.jsx("p",{className:"font-bold text-sm",children:p.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[p.rarity," ë“±ê¸‰"]})]},A))}),e.jsx("button",{onClick:()=>x(null),className:"w-full mt-4 p-2 bg-cyan-600 rounded",children:"í™•ì¸"})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:()=>h(null),children:e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",onClick:p=>p.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl text-center font-bold mb-4 text-green-300",children:"ìž¥ë¹„ íšë“!"}),e.jsxs("div",{className:"text-center text-gray-400 mb-2",children:[f.length,"ê°œì˜ ìž¥ë¹„ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤."]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:S().map((p,A)=>e.jsxs("div",{className:`bg-gray-900 p-2 rounded border ${p.rarity===T.Mythic?"border-fuchsia-500":p.rarity===T.SSR?"border-yellow-400":"border-gray-700"}`,children:[e.jsx("p",{className:"font-bold text-sm truncate",children:p.name}),e.jsx("p",{className:`text-xs ${p.rarity===T.Mythic?"text-fuchsia-400":p.rarity===T.SSR?"text-yellow-400":"text-gray-400"}`,children:p.rarity})]},A))}),f.length>60&&e.jsxs("p",{className:"text-center text-gray-500 mt-2 italic",children:["...ë° ê¸°íƒ€ ",f.length-60,"ê°œ ì•„ì´í…œ (ì¸ë²¤í† ë¦¬ë¡œ ì§€ê¸‰ë¨)"]}),e.jsx("button",{onClick:()=>h(null),className:"w-full mt-4 p-2 bg-cyan-600 rounded",children:"í™•ì¸"})]})})]})},La=({guilds:t,onCreateGuild:a,onJoinGuild:s})=>{const[r,n]=m.useState(""),i=c=>{c.preventDefault(),r.trim()&&(a(r.trim()),n(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:"ê¸¸ë“œ ì°¾ê¸°"}),e.jsx("p",{className:"text-gray-400",children:"ë™ë£Œë“¤ê³¼ í•¨ê»˜í•˜ê¸° ìœ„í•œ ì—¬ì •ì„ ì‹œìž‘í•˜ì„¸ìš”."})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ìƒì„±"}),e.jsxs("form",{onSubmit:i,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:c=>n(c.target.value),placeholder:"ìƒˆ ê¸¸ë“œ ì´ë¦„",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:border-cyan-500",maxLength:20}),e.jsx("button",{type:"submit",disabled:!r.trim(),className:"px-4 py-2 bg-indigo-600 font-semibold rounded-md hover:bg-indigo-500 disabled:opacity-50",children:"ìƒì„±"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ëª©ë¡"}),e.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto pr-2",children:t.length>0?t.map(c=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["ê¸¸ë“œìž¥: ",c.creator," | ë©¤ë²„: ",c.members.length,"ëª…"]})]}),e.jsx("button",{onClick:()=>s(c.id),className:"px-4 py-2 bg-cyan-600 font-semibold rounded-md hover:bg-cyan-500",children:"ê°€ìž…"})]},c.id)):e.jsx("p",{className:"text-center text-gray-500",children:"ìƒì„±ëœ ê¸¸ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸¸ë“œë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”!"})})]})]})},_a=({guild:t,currentUser:a,playerState:s,onLeaveGuild:r,onSendMessage:n,onAttackRaid:i})=>{const[c,d]=m.useState(""),o=m.useRef(null);m.useEffect(()=>{var h;(h=o.current)==null||h.scrollIntoView({behavior:"smooth"})},[t.chat]);const x=h=>{h.preventDefault(),c.trim()&&(n(c.trim()),d(""))},f=t.raidBoss.hp/t.raidBoss.maxHp*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"text-center relative",children:[e.jsx("h1",{className:"text-3xl font-bold text-cyan-300",children:t.name}),e.jsxs("p",{className:"text-gray-400",children:["ê¸¸ë“œìž¥: ",t.creator]}),e.jsx("button",{onClick:r,className:"absolute top-0 right-0 text-sm bg-red-600 px-3 py-1 rounded-md hover:bg-red-500",children:"ê¸¸ë“œ íƒˆí‡´"})]}),e.jsxs("section",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3 text-center text-red-400",children:"ê¸¸ë“œ ë ˆì´ë“œ"}),e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:t.raidBoss.imageUrl,alt:t.raidBoss.name,className:"w-48 h-48 mx-auto rounded-lg object-cover border-4 border-red-800"}),e.jsx("h3",{className:"text-2xl font-bold mt-2",children:t.raidBoss.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["ìµœê·¼ ê³µê²©ìž: ",t.raidBoss.lastAttackedBy||"ì—†ìŒ"]}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-6 mt-4 relative overflow-hidden border-2 border-black/50",children:[e.jsx("div",{className:"bg-red-600 h-full transition-all duration-500",style:{width:`${f}%`}}),e.jsxs("span",{className:"absolute inset-0 text-center text-sm font-bold text-white flex items-center justify-center",children:[t.raidBoss.hp.toLocaleString()," / ",t.raidBoss.maxHp.toLocaleString()]})]}),e.jsx("button",{onClick:i,disabled:t.raidBoss.hp<=0,className:"mt-4 px-8 py-3 rounded-lg bg-gradient-to-r from-red-600 to-orange-500 text-white font-bold text-lg shadow-lg hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:t.raidBoss.hp>0?"ê³µê²©!":"ë³´ìŠ¤ ì²˜ì¹˜ ì™„ë£Œ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 p-4 bg-gray-800/50 rounded-lg flex flex-col",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"ê¸¸ë“œ ì±„íŒ…"}),e.jsxs("div",{className:"flex-grow bg-gray-900/50 p-2 rounded-md h-64 overflow-y-auto",children:[t.chat.map((h,y)=>e.jsx("div",{className:"mb-2 text-sm",children:h.username==="System"?e.jsxs("p",{className:"text-cyan-400 italic",children:["-- ",h.message," --"]}):e.jsxs("p",{children:[e.jsxs("span",{className:"font-semibold",style:{color:h.username===a?"#FBBF24":"white"},children:[h.username,":"]})," ",h.message]})},y)),e.jsx("div",{ref:o})]}),e.jsxs("form",{onSubmit:x,className:"flex gap-2 mt-3",children:[e.jsx("input",{type:"text",value:c,onChange:h=>d(h.target.value),placeholder:"ë©”ì‹œì§€ ìž…ë ¥...",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:border-cyan-500"}),e.jsx("button",{type:"submit",className:"p-2 bg-cyan-600 rounded-md hover:bg-cyan-500",children:e.jsx(oa,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-3",children:["ê¸¸ë“œì› (",t.members.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:t.members.map(h=>e.jsx("div",{className:"p-2 bg-gray-700/50 rounded",children:e.jsx("p",{className:"font-semibold",children:h.username})},h.username))})]})]})]})},Ga=t=>{const{playerState:a,allGuilds:s,currentUser:r}=t,n=s.find(i=>i.id===a.guildId);return n?e.jsx(_a,{guild:n,currentUser:r,...t}):e.jsx(La,{guilds:s,...t})},Tt=({character:t,onClick:a,canAct:s,isAttacker:r,isTargetable:n})=>{const i=t.currentHp/t.hp*100,c=t.ultimateGauge/t.maxUltimateGauge*100,d=t.currentHp<=0,o=r?"ring-4 ring-yellow-400 scale-110":n?"ring-4 ring-red-500 cursor-pointer hover:ring-red-400":s?"ring-4 ring-green-500 cursor-pointer hover:ring-green-400":"";return e.jsxs("div",{className:`relative transition-all duration-300 ${r?"z-10":""}`,onClick:a,children:[e.jsx("div",{className:`${o} rounded-lg ${d?"opacity-50 grayscale":""}`,children:e.jsx(Pe,{character:t})}),e.jsxs("div",{className:`absolute -bottom-7 left-1 right-1 transition-opacity ${d?"opacity-50":""}`,children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 border-2 border-black/50 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${i}%`}})}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 border border-black/50 mt-1 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full",style:{width:`${c}%`}})})]})]})},Oa=({playerTeam:t,enemyTeam:a,onCombatEnd:s,difficulty:r,ultimateSkills:n,inventory:i,reward:c})=>{const[d,o]=m.useState([]),[x,f]=m.useState("INITIALIZING"),[h,y]=m.useState("SELECT_ATTACKER"),[j,k]=m.useState(null),[g,E]=m.useState(new Set),[H,U]=m.useState([]),[I,S]=m.useState("ì „íˆ¬ë¥¼ ì¤€ë¹„ ì¤‘ìž…ë‹ˆë‹¤..."),[p,A]=m.useState(null),R=new Map(Fe.map(_=>[_.id,_])),O=new Map(n.map(_=>[_.id,_]));m.useEffect(()=>{const _=(u,v)=>{const w=v&&u.equippedEquipmentId?i.find(G=>G.id===u.equippedEquipmentId):void 0,M=pt(u,w),L=v?O.get(u.equippedUltimateId)||R.get(u.equippedUltimateId)||R.get(1):R.get(u.equippedUltimateId)||R.get(1);return{...u,...M,currentHp:M.hp,isPlayer:v,uniqueId:`${u.id}-${Math.random()}`,ultimateGauge:0,maxUltimateGauge:100,ultimateSkill:L}},z=t.map(u=>_(u,!0)),F=a.map(u=>_(u,!1)),D=z.reduce((u,v)=>u+v.speed,0),l=F.reduce((u,v)=>u+v.speed,0);o([...z,...F]),D>=l?(f("player"),S("ë‹¹ì‹ ì˜ í„´ìž…ë‹ˆë‹¤! í–‰ë™í•  ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”.")):(f("enemy"),S("ì ì˜ í„´ìž…ë‹ˆë‹¤...")),U(["ì „íˆ¬ ì‹œìž‘!"])},[t,a,n,i]);const P=_=>{U(z=>[_,...z.slice(0,4)])},N=(_,z)=>{let F=!1;return o(D=>D.map(l=>{if(l.uniqueId===_){const u=Math.max(0,l.currentHp-z);return u===0&&(F=!0),{...l,currentHp:u,ultimateGauge:Math.min(l.maxUltimateGauge,l.ultimateGauge+30)}}return l})),F},b=_=>{const z=new Set(g).add(_.uniqueId);E(z),k(null),d.filter(D=>D.isPlayer&&D.currentHp>0&&!z.has(D.uniqueId)).length===0?(f("enemy"),S("ì ì˜ í„´ìž…ë‹ˆë‹¤..."),E(new Set)):(y("SELECT_ATTACKER"),S("í–‰ë™í•  ë‹¤ë¥¸ ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”."))},C=m.useCallback((_,z)=>{const F=_.attack;P(`${_.name}ì´(ê°€) ${z.name}ì—ê²Œ ${F}ì˜ í”¼í•´ë¥¼ ìž…í˜”ìŠµë‹ˆë‹¤!`),N(z.uniqueId,F),o(D=>D.map(l=>l.uniqueId===_.uniqueId?{...l,ultimateGauge:Math.min(l.maxUltimateGauge,l.ultimateGauge+40)}:l)),b(_)},[d,g]),$=(_,z)=>{const F=_.ultimateSkill;let D=`${_.name}ì´(ê°€) ê¶ê·¹ê¸° [${F.name}] (ì„)ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!`;P(D);const l=(F.level-1)*.25+1;z.forEach(u=>{switch(F.effectType){case ve.SINGLE_TARGET_DAMAGE:case ve.AREA_OF_EFFECT_DAMAGE:const v=Math.floor(_.attack*F.power*l);N(u.uniqueId,v);break;case ve.HEAL_SELF:case ve.HEAL_TEAM:o(w=>w.map(M=>{if(M.uniqueId===u.uniqueId){const L=Math.min(M.hp,M.currentHp+F.power*l);return{...M,currentHp:L}}return M}));break}}),o(u=>u.map(v=>v.uniqueId===_.uniqueId?{...v,ultimateGauge:0}:v)),b(_)};m.useEffect(()=>{const _=d.filter(F=>!F.isPlayer&&F.currentHp>0),z=d.filter(F=>F.isPlayer&&F.currentHp>0);_.length===0&&d.length>0?(A("win"),S("ìŠ¹ë¦¬!")):z.length===0&&d.length>0&&(A("lose"),S("íŒ¨ë°°..."))},[d]),m.useEffect(()=>{if(x!=="enemy"||p)return;(async()=>{const z=d.filter(F=>!F.isPlayer&&F.currentHp>0);for(const F of z){if(await new Promise(v=>setTimeout(v,1200)),p)break;const D=d.filter(v=>v.isPlayer&&v.currentHp>0);if(D.length===0)break;const l=D[Math.floor(Math.random()*D.length)],u=F.attack;P(`${F.name}ì´(ê°€) ${l.name}ì—ê²Œ ${u}ì˜ í”¼í•´ë¥¼ ìž…í˜”ìŠµë‹ˆë‹¤!`),N(l.uniqueId,u),o(v=>v.map(w=>w.uniqueId===F.uniqueId?{...w,ultimateGauge:Math.min(w.maxUltimateGauge,w.ultimateGauge+40)}:w))}await new Promise(F=>setTimeout(F,1e3)),p||(f("player"),S("ë‹¹ì‹ ì˜ í„´ìž…ë‹ˆë‹¤! í–‰ë™í•  ì•„êµ°ì„ ì„ íƒí•˜ì„¸ìš”."),y("SELECT_ATTACKER"),E(new Set))})()},[x,p]);const q=_=>{x!=="player"||p||g.has(_.uniqueId)||(k(_.uniqueId),y("SELECT_ACTION"),S(`${_.name}ì˜ í–‰ë™ì„ ì„ íƒí•˜ì„¸ìš”.`))},Q=_=>{if(h!=="SELECT_TARGET"||!j||p||_.currentHp<=0)return;const z=d.find(F=>F.uniqueId===j);z&&C(z,_)},de=_=>{if(h!=="SELECT_ACTION"||!j)return;const z=d.find(F=>F.uniqueId===j);if(_==="attack")y("SELECT_TARGET"),S(`${z.name}(ìœ¼)ë¡œ ê³µê²©í•  ì ì„ ì„ íƒí•˜ì„¸ìš”.`);else{const F=z.ultimateSkill;let D=[];switch(F.targetType){case Me.ENEMY_SINGLE:y("SELECT_TARGET"),S("ê¶ê·¹ê¸°ë¡œ ê³µê²©í•  ì ì„ ì„ íƒí•˜ì„¸ìš”.");return;case Me.ENEMY_ALL:D=d.filter(l=>!l.isPlayer&&l.currentHp>0);break;case Me.ALLY_SELF:D=[z];break;case Me.ALLY_ALL:D=d.filter(l=>l.isPlayer&&l.currentHp>0);break}$(z,D)}},Ie=()=>{window.confirm("ì •ë§ ë„ë§ì¹˜ì‹œê² ìŠµë‹ˆê¹Œ? (íŒ¨ë°°ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤)")&&s("lose")},be=d.find(_=>_.uniqueId===j);return e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 space-y-4 relative",children:[e.jsxs("button",{onClick:Ie,className:"absolute top-4 right-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg border border-gray-500 shadow-lg text-sm font-bold z-50 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸƒ"})," ë„ë§ê°€ê¸°"]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-red-400 mb-8",children:"ì  íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:d.filter(_=>!_.isPlayer).map(_=>e.jsx(Tt,{character:_,isTargetable:h==="SELECT_TARGET"&&_.currentHp>0,onClick:_.currentHp>0?()=>{h==="SELECT_TARGET"&&be&&(be.ultimateSkill.targetType===Me.ENEMY_SINGLE&&be.ultimateGauge===be.maxUltimateGauge?$(be,[_]):Q(_))}:void 0},_.uniqueId))})]}),e.jsxs("div",{className:"w-full max-w-lg min-h-[14rem] bg-black/50 p-3 rounded-lg border border-gray-700 text-center flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-cyan-300 mb-2",children:I}),H.map((_,z)=>e.jsx("p",{className:`transition-opacity duration-300 ${z===0?"text-white":"text-gray-400 text-xs"}`,children:_},z))]}),h==="SELECT_ACTION"&&be&&e.jsxs("div",{className:"flex gap-4 justify-center mt-4",children:[e.jsx("button",{onClick:()=>de("attack"),className:"px-4 py-2 bg-red-600 rounded hover:bg-red-500",children:"ì¼ë°˜ ê³µê²©"}),e.jsx("button",{onClick:()=>de("ultimate"),disabled:be.ultimateGauge<be.maxUltimateGauge,className:"px-4 py-2 bg-purple-600 rounded hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed",children:"ê¶ê·¹ê¸° ì‚¬ìš©"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-green-400 mb-8",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:d.filter(_=>_.isPlayer).map(_=>e.jsx(Tt,{character:_,canAct:x==="player"&&!g.has(_.uniqueId)&&h==="SELECT_ATTACKER"&&_.currentHp>0,isAttacker:j===_.uniqueId,onClick:_.currentHp>0?()=>q(_):void 0},_.uniqueId))})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg text-center shadow-2xl border-2 border-cyan-400",children:[e.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-yellow-400",children:p==="win"?"ìŠ¹ë¦¬!":"íŒ¨ë°°..."}),e.jsx("p",{className:"text-gray-300 mb-6",children:p==="win"?`${c} ë‹¤ì´ì•„ íšë“!`:"íŒ€ì´ ì „ë©¸í–ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>s(p),className:"px-8 py-3 rounded-lg bg-cyan-600 text-white font-bold text-lg hover:bg-cyan-500 transition-colors",children:"í™•ì¸"})]})})]})};function Da(t){const a=t.hp??t.maxHp??1e5,s=Math.max(100,Math.round(a*.02)),r=5+Math.round(a/1e5*10);return{name:t.name,imageUrl:t.imageUrl,hp:a,attack:s,speed:r,currentHp:a}}const Ct=({character:t,isAttacker:a})=>{const s=t.currentHp/t.hp*100,r=t.currentHp<=0,n=a?"ring-4 ring-yellow-400 scale-110":"";return e.jsxs("div",{className:`relative transition-all duration-300 ${a?"z-10":""}`,children:[e.jsx("div",{className:`${n} rounded-lg ${r?"opacity-50 grayscale":""}`,children:e.jsx(Pe,{character:t})}),e.jsxs("div",{className:`absolute -bottom-5 left-1 right-1 transition-opacity ${r?"opacity-50":""}`,children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 border-2 border-black/50 overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${s}%`}})}),"ultimateGauge"in t&&e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 border border-black/50 mt-1 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full",style:{width:`${t.ultimateGauge/t.maxUltimateGauge*100}%`}})})]})]})},Pa=({playerTeam:t,boss:a,ultimateSkills:s,inventory:r,onCombatEnd:n})=>{const[i,c]=m.useState([]),[d,o]=m.useState(null),[x,f]=m.useState(0),[h]=m.useState(10),[y,j]=m.useState([]),[k,g]=m.useState(!0),E=new Map(Fe.map(S=>[S.id,S])),H=new Map(s.map(S=>[S.id,S]));m.useEffect(()=>{const S=p=>{const A=p.equippedEquipmentId?r.find(P=>P.id===p.equippedEquipmentId):void 0,R=pt(p,A),O=H.get(p.equippedUltimateId)||E.get(p.equippedUltimateId)||E.get(1);return{...p,...R,currentHp:R.hp,isPlayer:!0,uniqueId:`${p.id}-${Math.random()}`,ultimateGauge:0,maxUltimateGauge:100,ultimateSkill:O}};c(t.map(S)),o(Da(a)),j(["ë ˆì´ë“œ ë³´ìŠ¤ ì¶œí˜„!"]),g(!1)},[t,a,s,r]);const U=S=>{j(p=>[S,...p.slice(0,4)])},I=()=>{if(!d)return;const S=a.hp-d.currentHp;U(`ì „íˆ¬ ì¢…ë£Œ! ì´ ${S.toLocaleString()}ì˜ í”¼í•´ë¥¼ ìž…í˜”ìŠµë‹ˆë‹¤.`),setTimeout(()=>{n(S)},2e3)};return m.useEffect(()=>{if(k||!d)return;const S=i.filter(O=>O.currentHp>0);if(x>=h||S.length===0||d.currentHp<=0){I();return}const R=setTimeout(async()=>{g(!0),f(O=>O+1);for(const O of S){if(d.currentHp<=0)break;if(await new Promise(P=>setTimeout(P,600)),O.ultimateGauge>=O.maxUltimateGauge){const P=O.ultimateSkill;U(`${O.name}ì´(ê°€) ê¶ê·¹ê¸° [${P.name}] (ì„)ë¥¼ ì‚¬ìš©!`);const N=(P.level-1)*.25+1,b=Math.floor(O.attack*P.power*N);o(C=>{if(!C)return null;const $=Math.max(0,C.currentHp-b);return{...C,currentHp:$}}),c(C=>C.map($=>$.uniqueId===O.uniqueId?{...$,ultimateGauge:0}:$))}else{const P=O.attack;U(`${O.name}ì´(ê°€) ë³´ìŠ¤ë¥¼ ê³µê²©! ${P} í”¼í•´!`),o(N=>{if(!N)return null;const b=Math.max(0,N.currentHp-P);return{...N,currentHp:b}}),c(N=>N.map(b=>b.uniqueId===O.uniqueId?{...b,ultimateGauge:Math.min(b.maxUltimateGauge,b.ultimateGauge+40)}:b))}}if(d.currentHp>0){await new Promise(P=>setTimeout(P,1e3));const O=i.filter(P=>P.currentHp>0);if(O.length>0){const P=O[Math.floor(Math.random()*O.length)],N=d.attack;U(`ë³´ìŠ¤ê°€ ${P.name}ì—ê²Œ ${N} í”¼í•´ë¥¼ ìž…í˜”ìŠµë‹ˆë‹¤!`),c(b=>b.map(C=>{if(C.uniqueId===P.uniqueId){const $=Math.max(0,C.currentHp-N);return{...C,currentHp:$,ultimateGauge:Math.min(C.maxUltimateGauge,C.ultimateGauge+30)}}return C}))}}g(!1)},1e3);return()=>clearTimeout(R)},[x,k,d,i]),d?e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-4 space-y-4",children:[e.jsxs("div",{className:"w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-400 mb-8",children:"ë ˆì´ë“œ ë³´ìŠ¤"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-48",children:e.jsx(Ct,{character:d})})})]}),e.jsx("div",{className:"w-full max-w-lg min-h-[14rem] bg-black/50 p-3 rounded-lg border border-gray-700 text-center flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xl font-bold text-cyan-300 mb-2",children:["Turn ",x," / ",h]}),y.map((S,p)=>e.jsx("p",{className:`transition-opacity duration-300 ${p===0?"text-white":"text-gray-400 text-xs"}`,children:S},p))]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-xl font-bold text-center text-green-400 mb-8",children:"ë‚˜ì˜ íŒ€"}),e.jsx("div",{className:"grid grid-cols-4 gap-x-4 gap-y-10 justify-items-center",children:i.map(S=>e.jsx(Ct,{character:S},S.uniqueId))})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})},Ua=()=>{const[t,a]=m.useState(null),[s,r]=m.useState(null),[n,i]=m.useState("login"),[c,d]=m.useState(null),[o,x]=m.useState(null),[f,h]=m.useState([]);m.useEffect(()=>{t&&f.length===0&&h([{id:"guild-1",name:"ìµœê°•ìš©ë³‘ë‹¨",creator:"AcePlayer",members:[{username:"AcePlayer",joinedAt:new Date().toISOString()}],chat:[{username:"System",message:"ìµœê°•ìš©ë³‘ë‹¨ ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString()}],raidBoss:{...tt}},{id:"guild-2",name:"ì–´ë‘ ì˜ìžì†ë“¤",creator:"ShadowCat",members:[{username:"ShadowCat",joinedAt:new Date().toISOString()}],chat:[{username:"System",message:"ì–´ë‘ ì˜ìžì†ë“¤ ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",timestamp:new Date().toISOString()}],raidBoss:{...tt,name:"ì‹¬ì—°ì˜ ê°ì‹œìž",hp:75e6,maxHp:75e6}}])},[t]),m.useEffect(()=>{if(t){const N=localStorage.getItem(`playerState_${t}`);if(N)try{const b=JSON.parse(N);r({...Ve,...b,inventory:b.inventory||Ve.inventory,ultimateSkills:b.ultimateSkills||Ve.ultimateSkills})}catch(b){console.error("Failed to parse save state",b),r(Ve)}else r(Ve)}else r(null),i("login")},[t]),m.useEffect(()=>{s&&t&&localStorage.setItem(`playerState_${t}`,JSON.stringify(s))},[s,t]);const y=N=>{a(N),i("main")},j=()=>{a(null)},k=N=>{i(N)},g=(N,b)=>{const $={very_easy:100,easy:300,normal:800,hard:2e3,very_hard:5e3,hell:15e3,hardcore:5e4,boss:1e5}[b];d({opponents:N,difficulty:b,reward:$})},E=N=>{N==="win"&&s&&c&&r({...s,currency:s.currency+c.reward}),d(null)},H=(N,b)=>{r(C=>{if(!C)return null;const $=C.characters.map(Q=>Q.id===N?{...Q,equippedUltimateId:b}:Q),q=C.teams.map(Q=>({...Q,characters:Q.characters.map(de=>de&&de.id===N?{...de,equippedUltimateId:b}:de)}));return{...C,characters:$,teams:q}})},U=(N,b)=>{r(C=>{if(!C)return null;const $=C.characters.map(Q=>Q.id===N?{...Q,equippedEquipmentId:b}:Q),q=C.teams.map(Q=>({...Q,characters:Q.characters.map(de=>de&&de.id===N?{...de,equippedEquipmentId:b}:de)}));return{...C,characters:$,teams:q}})},I=N=>{if(!t||!s||s.guildId)return;const b={id:`guild-${Date.now()}`,name:N,creator:t,members:[{username:t,joinedAt:new Date().toISOString()}],chat:[{username:"System",message:`${N} ê¸¸ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}],raidBoss:{...tt}};h(C=>[...C,b]),r(C=>C?{...C,guildId:b.id}:null)},S=N=>{!t||!s||s.guildId||(h(b=>b.map(C=>C.id===N?{...C,members:[...C.members,{username:t,joinedAt:new Date().toISOString()}],chat:[...C.chat,{username:"System",message:`${t}ë‹˜ì´ ê°€ìž…í–ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}]}:C)),r(b=>b?{...b,guildId:N}:null))},p=()=>{if(!t||!s||!s.guildId)return;const N=s.guildId;h(b=>b.map(C=>C.id===N?{...C,members:C.members.filter($=>$.username!==t),chat:[...C.chat,{username:"System",message:`${t}ë‹˜ì´ íƒˆí‡´í–ˆìŠµë‹ˆë‹¤.`,timestamp:new Date().toISOString()}]}:C)),r(b=>b?{...b,guildId:null}:null)},A=N=>{if(!t||!s||!s.guildId)return;const b=s.guildId,C={username:t,message:N,timestamp:new Date().toISOString()};h($=>$.map(q=>q.id===b?{...q,chat:[...q.chat,C]}:q))},R=()=>{if(!s||!s.guildId)return;const N=f.find(b=>b.id===s.guildId);N&&N.raidBoss.hp>0&&x({raidBoss:N.raidBoss})},O=N=>{if(!t||!s||!s.guildId)return;const b=s.guildId;let C=!1;if(h($=>$.map(q=>{if(q.id===b){const Q=Math.max(0,q.raidBoss.hp-N);Q===0&&q.raidBoss.hp>0&&(C=!0);const de=C?[...q.chat,{username:"System",message:`${t}ë‹˜ì´ ë ˆì´ë“œ ë³´ìŠ¤ì—ê²Œ ìµœí›„ì˜ ì¼ê²©ì„ ê°€í–ˆìŠµë‹ˆë‹¤!`,timestamp:new Date().toISOString()}]:q.chat;return{...q,raidBoss:{...q.raidBoss,hp:Q,lastAttackedBy:t},chat:de}}return q})),C){const $=f.find(q=>q.id===b);$&&r(q=>q?{...q,currency:q.currency+$.raidBoss.reward}:null)}x(null)},P=()=>{var N,b;if(!t||!s)return e.jsx(Xs,{onLogin:y});if(c){const C=((N=s.teams[0])==null?void 0:N.characters.filter($=>$!==null))||[];return e.jsx(Oa,{playerTeam:C,enemyTeam:c.opponents,difficulty:c.difficulty,reward:c.reward,ultimateSkills:s.ultimateSkills||[],inventory:s.inventory||[],onCombatEnd:E})}if(o){const C=((b=s.teams[0])==null?void 0:b.characters.filter($=>$!==null))||[];return e.jsx(Pa,{playerTeam:C,boss:o.raidBoss,ultimateSkills:s.ultimateSkills||[],inventory:s.inventory||[],onCombatEnd:O})}switch(n){case"main":return e.jsx(vt,{playerState:s,currentUser:t,onLogout:j,onNavigate:k});case"gacha":return e.jsx(fa,{playerState:s,setPlayerState:r});case"team":return e.jsx(va,{playerState:s,setPlayerState:r,onEquipUltimate:H,onEquipEquipment:U});case"battle":return e.jsx(Ea,{playerState:s,onStartCombat:g});case"social":return e.jsx(Ta,{friends:s.friends});case"shop":return e.jsx(Ra,{playerState:s,setPlayerState:r});case"guild":return e.jsx(Ga,{playerState:s,allGuilds:f,currentUser:t,onCreateGuild:I,onJoinGuild:S,onLeaveGuild:p,onSendMessage:A,onAttackRaid:R});default:return e.jsx(vt,{playerState:s,currentUser:t,onLogout:j,onNavigate:k})}};return e.jsx(Ee,{className:"min-h-screen bg-gray-900 text-white font-sans selection:bg-cyan-500 selection:text-white pb-20 md:pb-0",children:e.jsxs("div",{className:"max-w-2xl mx-auto min-h-screen bg-gray-900 shadow-2xl overflow-hidden relative",children:[e.jsx("main",{className:"p-4 pb-24",children:P()}),t&&!c&&!o&&e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-2 flex justify-around items-center max-w-2xl mx-auto z-50",children:[e.jsx("button",{onClick:()=>i("main"),className:`p-2 rounded-lg ${n==="main"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(sa,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("team"),className:`p-2 rounded-lg ${n==="team"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(ia,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("battle"),className:`p-2 rounded-lg ${n==="battle"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Qs,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("guild"),className:`p-2 rounded-lg ${n==="guild"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(ta,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("shop"),className:`p-2 rounded-lg ${n==="shop"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(Ft,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>i("social"),className:`p-2 rounded-lg ${n==="social"?"text-cyan-400 bg-gray-700":"text-gray-400"}`,children:e.jsx(na,{className:"w-6 h-6"})})]})]})})},Z=40,ct=10,At=30,Mt=3,Ha=6,$a=1.5,Ba=1,Fa=1.5,qa=1.2,Ye=60*(Math.PI/180),He=640,Va=.0037,Ya=40,Wa=600,za=90,Ka=Math.PI/2,Ja=.1,Xa=.3,Za=1,Qa=0,er=.6,tr=2e4,sr=60,ar=300,rr=600,nr={MOVE_FORWARD:"KeyW",MOVE_BACKWARD:"KeyS",MOVE_LEFT:"KeyA",MOVE_RIGHT:"KeyD",RUN:"ShiftLeft",SNEAK:"ControlLeft",INTERACT:"KeyE",FLASHLIGHT:"KeyF"},re=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,9,0,4,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,8,8,8,8,8,8,8,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,5,5,0,0,0,0,0,0,1,8,8,8,8,8,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,10,10,10,2,1],[1,5,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,6,0,1,0,0,7,7,1,0,0,1,7,7,7,1,0,0,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,1,0,0,7,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1],[1,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,1],[1,0,7,7,7,0,0,0,0,1,7,7,1,0,0,1,10,0,1,1,0,0,1,10,10,1,1,0,0,1,10,10,1,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,7,7,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,0,6,0,0,1,0,0,1,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,0,7,7,7,0,0,0,0,1,10,10,1,0,0,1,2,0,0,1,0,0,1,0,0,0,1,0,0,1,5,5,5,1,2,0,6,0,1],[1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,7,7,7,7,7,0,0,0,0,7,7,0,0,7,7,0,0,7,7,0,0,7,7,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,0,7,7,7,7,7,0,0,1,0,7,7,0,0,7,7,0,0,7,7,0,0,7,7,0,0,0,2,0,0,0,0,1,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],[1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1],[1,5,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1],[1,5,0,6,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,2,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1,0,0,5,5,5,0,0,0,0,0,0,1,0,1,1,1,1,0,0,1,0,1,0,0,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1],[1,2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1]],lr=re[0].length*Z,ir=re.length*Z;class te{constructor(){this.ctx=null,this.masterGain=null,this.windNode=null,this.windGain=null,this.lastBreathTime=0}static getInstance(){return te.instance||(te.instance=new te),te.instance}init(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=.5,this.masterGain.connect(this.ctx.destination)),this.ctx.state==="suspended"&&this.ctx.resume()}resume(){this.ctx&&this.ctx.state==="suspended"?this.ctx.resume():this.ctx||this.init()}createNoiseBuffer(){if(!this.ctx)throw new Error("AudioContext not initialized");const a=this.ctx.sampleRate*2,s=this.ctx.createBuffer(1,a,this.ctx.sampleRate),r=s.getChannelData(0);for(let n=0;n<a;n++)r[n]=Math.random()*2-1;return s}startWind(){if(!this.ctx||!this.masterGain||this.windNode)return;const a=this.createNoiseBuffer();this.windNode=this.ctx.createBufferSource(),this.windNode.buffer=a,this.windNode.loop=!0;const s=this.ctx.createBiquadFilter();s.type="lowpass",s.frequency.value=400,s.Q.value=1,this.windGain=this.ctx.createGain(),this.windGain.gain.value=.05;const r=this.ctx.createOscillator();r.frequency.value=.1;const n=this.ctx.createGain();n.gain.value=.02,r.connect(n),n.connect(this.windGain.gain),r.start(),this.windNode.connect(s),s.connect(this.windGain),this.windGain.connect(this.masterGain),this.windNode.start()}stopWind(){this.windNode&&(this.windNode.stop(),this.windNode=null)}playCrow(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=this.ctx.createOscillator();s.type="sawtooth",s.frequency.setValueAtTime(600,a),s.frequency.exponentialRampToValueAtTime(400,a+.4);const r=this.ctx.createGain();r.gain.setValueAtTime(0,a),r.gain.linearRampToValueAtTime(.1,a+.05),r.gain.exponentialRampToValueAtTime(.001,a+.5);const n=this.ctx.createOscillator();n.frequency.value=30;const i=this.ctx.createGain();i.gain.value=200,n.connect(i),i.connect(s.frequency),s.connect(r),r.connect(this.masterGain),s.start(a),n.start(a),s.stop(a+.6),n.stop(a+.6)}playCarCooling(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=3+Math.floor(Math.random()*3);for(let r=0;r<s;r++){const n=a+Math.random()*2,i=this.ctx.createOscillator();i.type="triangle",i.frequency.value=2e3+Math.random()*500;const c=this.ctx.createGain();c.gain.setValueAtTime(.05,n),c.gain.exponentialRampToValueAtTime(.001,n+.05),i.connect(c),c.connect(this.masterGain),i.start(n),i.stop(n+.1)}}playFlashlightRoll(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime;[0,.2,.35,.45].forEach((r,n)=>{const i=a+r,c=this.createNoiseBuffer(),d=this.ctx.createBufferSource();d.buffer=c;const o=this.ctx.createBiquadFilter();o.type="lowpass",o.frequency.value=600-n*100;const x=this.ctx.createGain();x.gain.setValueAtTime(.2/(n+1),i),x.gain.exponentialRampToValueAtTime(.001,i+.1),d.connect(o),o.connect(x),x.connect(this.masterGain),d.start(i)}),setTimeout(()=>{if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,n=this.ctx.createOscillator();n.frequency.setValueAtTime(80,r),n.frequency.exponentialRampToValueAtTime(40,r+.1);const i=this.ctx.createGain();i.gain.setValueAtTime(.3,r),i.gain.exponentialRampToValueAtTime(.001,r+.2),n.connect(i),i.connect(this.masterGain),n.start(r),n.stop(r+.2)},600)}playBell(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime;[220,440,660,880].forEach((s,r)=>{const n=this.ctx.createOscillator(),i=this.ctx.createGain();n.frequency.value=s,n.detune.value=Math.random()*20-10,i.gain.setValueAtTime(0,a),i.gain.linearRampToValueAtTime(.1/(r+1),a+.1),i.gain.exponentialRampToValueAtTime(.001,a+4),n.connect(i),i.connect(this.masterGain),n.start(a),n.stop(a+4)})}playBreathing(){if(!this.ctx||!this.masterGain)return;const a=Date.now();if(a-this.lastBreathTime<2500)return;this.lastBreathTime=a;const s=this.ctx.currentTime,r=this.createNoiseBuffer(),n=this.ctx.createBufferSource();n.buffer=r;const i=this.ctx.createBiquadFilter();i.type="lowpass",i.frequency.value=400;const c=this.ctx.createGain();c.gain.setValueAtTime(0,s),c.gain.linearRampToValueAtTime(.05,s+1),c.gain.linearRampToValueAtTime(0,s+2),n.connect(i),i.connect(c),c.connect(this.masterGain),n.start(s),n.stop(s+2.5)}playFootstep(a,s=1){if(!this.ctx||!this.masterGain)return;const r=this.ctx.currentTime,n=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=n;const c=this.ctx.createBiquadFilter();c.type="lowpass",a==="DIRT"?c.frequency.value=200:a==="WOOD"?c.frequency.value=800:a==="WATER"&&(c.frequency.value=1e3,c.Q.value=5);const d=this.ctx.createGain();d.gain.setValueAtTime(.15*s,r),d.gain.exponentialRampToValueAtTime(.001,r+.1),i.connect(c),c.connect(d),d.connect(this.masterGain),i.start(r),i.stop(r+.1)}playGhostFootstep(a){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,r=this.createNoiseBuffer(),n=this.ctx.createBufferSource();n.buffer=r;const i=this.ctx.createBiquadFilter();i.type="lowpass";let c=.1,d=.1;if(a==="SOFT")i.frequency.value=150,c=.05;else if(a==="NORMAL")i.frequency.value=300,c=.15;else{i.frequency.value=500,c=.4,d=.15;const x=this.ctx.createOscillator();x.frequency.value=60;const f=this.ctx.createGain();f.gain.setValueAtTime(.2,s),f.gain.exponentialRampToValueAtTime(.001,s+d),x.connect(f),f.connect(this.masterGain),x.start(s),x.stop(s+d)}const o=this.ctx.createGain();o.gain.setValueAtTime(c,s),o.gain.exponentialRampToValueAtTime(.001,s+d),n.connect(i),i.connect(o),o.connect(this.masterGain),n.start(s),n.stop(s+d)}playJumpScare(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=this.ctx.createOscillator();s.type="sawtooth",s.frequency.setValueAtTime(1500,a),s.frequency.linearRampToValueAtTime(400,a+.3);const r=this.ctx.createGain();r.gain.setValueAtTime(.8,a),r.gain.exponentialRampToValueAtTime(.001,a+.4);const n=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=n;const c=this.ctx.createBiquadFilter();c.type="bandpass",c.frequency.value=2e3,c.Q.value=5;const d=this.ctx.createGain();d.gain.setValueAtTime(.8,a),d.gain.exponentialRampToValueAtTime(.001,a+.5),s.connect(r),r.connect(this.masterGain),i.connect(c),c.connect(d),d.connect(this.masterGain),s.start(a),s.stop(a+.4),i.start(a),i.stop(a+.5)}playClick(a){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,r=this.ctx.createOscillator();r.type="square",r.frequency.setValueAtTime(a?1200:800,s);const n=this.ctx.createGain();n.gain.setValueAtTime(.1,s),n.gain.exponentialRampToValueAtTime(.001,s+.05),r.connect(n),n.connect(this.masterGain),r.start(s),r.stop(s+.05)}playBuzz(a=.5){if(!this.ctx||!this.masterGain)return;const s=this.ctx.currentTime,r=this.ctx.createOscillator();r.type="sawtooth",r.frequency.value=50+Math.random()*10;const n=this.createNoiseBuffer(),i=this.ctx.createBufferSource();i.buffer=n;const c=this.ctx.createBiquadFilter();c.type="highpass",c.frequency.value=2e3;const d=this.ctx.createGain();d.gain.value=.05;const o=this.ctx.createGain();o.gain.setValueAtTime(.05,s),o.gain.linearRampToValueAtTime(.08,s+a*.2),o.gain.linearRampToValueAtTime(.02,s+a*.5),o.gain.linearRampToValueAtTime(0,s+a),r.connect(o),i.connect(c),c.connect(d),d.connect(o),o.connect(this.masterGain),r.start(s),r.stop(s+a),i.start(s),i.stop(s+a)}playDrone(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=this.ctx.createOscillator();s.frequency.value=60;const r=this.ctx.createGain();r.gain.setValueAtTime(0,a),r.gain.linearRampToValueAtTime(.05,a+.5),r.gain.linearRampToValueAtTime(0,a+2),s.connect(r),r.connect(this.masterGain),s.start(a),s.stop(a+2)}playItemDrop(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=this.createNoiseBuffer(),r=this.ctx.createBufferSource();r.buffer=s;const n=this.ctx.createBiquadFilter();n.type="highpass",n.frequency.value=1e3;const i=this.ctx.createGain();i.gain.setValueAtTime(.2,a),i.gain.exponentialRampToValueAtTime(.001,a+.1),r.connect(n),n.connect(i),i.connect(this.masterGain),r.start(a)}playSwing(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=this.createNoiseBuffer(),r=this.ctx.createBufferSource();r.buffer=s;const n=this.ctx.createBiquadFilter();n.type="bandpass",n.frequency.setValueAtTime(300,a),n.frequency.linearRampToValueAtTime(1e3,a+.2);const i=this.ctx.createGain();i.gain.setValueAtTime(.2,a),i.gain.linearRampToValueAtTime(0,a+.2),r.connect(n),n.connect(i),i.connect(this.masterGain),r.start(a),r.stop(a+.2)}playHit(){if(!this.ctx||!this.masterGain)return;const a=this.ctx.currentTime,s=this.ctx.createOscillator();s.frequency.setValueAtTime(150,a),s.frequency.exponentialRampToValueAtTime(40,a+.1);const r=this.ctx.createGain();r.gain.setValueAtTime(.5,a),r.gain.exponentialRampToValueAtTime(.001,a+.15),s.connect(r),r.connect(this.masterGain),s.start(a),s.stop(a+.15)}}const It=["NOTE 1: The camera is the only thing that works here. I don't know why, but seeing them through the lens keeps them at bay... for a while.","NOTE 2: The batteries drain so fast. It's like the darkness eats the power. If the camera dies, I die.","NOTE 3: I saw him in the viewfinder. He wasn't there when I looked with my own eyes. Trust the camera.","NOTE 4: The Janitor took the master keys to the basement boiler room. He said the heat keeps them away. I hope he's right.","NOTE 5: DO NOT LET THE CAMERA DIE. It's your only connection to the living world.","NOTE 6: Find the keys. Leave this cursed place. Do not look back.","NOTE 7: Static... so much static. It means he's getting closer."],or={bed:"https://m.media-amazon.com/images/I/71Wp3-gZlGL._AC_SL1500_.jpg",note:"https://i.stack.imgur.com/tL80j.jpg",ghost:"https://i.imgur.com/W2C2x2s.jpeg"},cr=({gameState:t,setGameState:a,onStatsUpdate:s,keyBindings:r})=>{const n=m.useRef(null),i=m.useRef(0),[c,d]=m.useState(null),o=m.useRef({id:"player",type:"PLAYER",x:100,y:100,width:ct,height:ct,active:!0,speed:Mt,battery:100,keys:0,noise:0,flashlightOn:!0,hasFlashlight:!0,direction:{x:1,y:0},isFlickering:!1,isCrouching:!1,yaw:-Math.PI/2,pitch:0,lastJumpScareTime:0,sanity:0,isHidden:!1,hasBat:!1,attackTimer:0,lastAttackTime:0}),x=m.useRef({id:"enemy",type:"ENEMY",x:600,y:300,width:At,height:At,active:!0,state:"IDLE",speed:Ba,lastKnownPlayerPos:null,patrolPoints:[],currentPatrolIndex:0,invisible:!1,stareTimer:0,footstepTimer:0,teleportCooldown:0}),f=m.useRef([]),h=m.useRef({}),y=m.useRef(0),j=m.useRef({}),k=m.useRef([]),g=m.useRef(0),E=m.useRef(!1),H=m.useRef(0),U=m.useRef(0),I=m.useRef(0),S=m.useRef({active:!1,timer:0}),p=m.useRef({active:!1,startTime:0}),A=m.useRef(new Array(He).fill(0)),R=m.useCallback(()=>{f.current=[],E.current=!1,H.current=0,U.current=0,S.current={active:!1,timer:0},p.current={active:!1,startTime:0},o.current.battery=100;const l=te.getInstance();l.startWind(),l.playCrow(),Object.entries(or).forEach(([w,M])=>{const L=new Image;L.crossOrigin="Anonymous",L.src=M,j.current[w]=L}),k.current=Array.from({length:150},()=>({x:Math.random()*1280,y:Math.random()*720,length:10+Math.random()*20,speed:15+Math.random()*10}));let u=[],v=0;for(let w=0;w<re.length;w++)for(let M=0;M<re[0].length;M++){const L=re[w][M],G=M*Z+Z/2,B=w*Z+Z/2;if(L===9)o.current.x=G,o.current.y=B,o.current.keys=0,o.current.noise=0,o.current.hasFlashlight=!0,o.current.flashlightOn=!0,o.current.isFlickering=!1,o.current.yaw=-Math.PI/2,o.current.pitch=0,o.current.lastJumpScareTime=0,o.current.isHidden=!1,o.current.hasBat=!1,o.current.attackTimer=0;else if(L===2)f.current.push({id:`key_${w}_${M}`,type:"KEY",x:G,y:B,width:20,height:20,active:!0});else if(L===4)f.current.push({id:`car_${w}_${M}`,type:"CAR",x:G,y:B,width:60,height:40,active:!0});else if(L===5){const le={id:`locker_${w}_${M}`,type:"LOCKER",x:G,y:B,width:30,height:30,active:!0,isOpen:!1,content:"EMPTY"};u.push(le),f.current.push(le)}else L===10?f.current.push({id:`bed_${w}_${M}`,type:"BED",x:G,y:B,width:32,height:38,active:!0}):L===6&&(f.current.push({id:`note_${w}_${M}`,type:"NOTE",x:G,y:B,width:25,height:25,active:!0,text:It[v%It.length]}),v++)}if(f.current.push({id:"weapon_bat",type:"BAT",x:200,y:100,width:30,height:8,active:!0}),u.length>0){const w=Math.floor(Math.random()*u.length);let M=Math.floor(Math.random()*u.length);for(;M===w;)M=Math.floor(Math.random()*u.length);u[w].content="KEY",u[M].content="KEY",u.forEach((L,G)=>{G!==w&&G!==M&&Math.random()<.6&&(L.content="BATTERY")})}x.current.x=lr-200,x.current.y=ir-200,x.current.state="IDLE",x.current.active=!1,x.current.invisible=!1,x.current.stareTimer=0,h.current={}},[]);m.useEffect(()=>{t==="PLAYING"?R():(te.getInstance().stopWind(),document.pointerLockElement===n.current&&document.exitPointerLock())},[t,R]);const O=()=>{const l=Date.now();l-o.current.lastJumpScareTime>tr&&(S.current={active:!0,timer:l},o.current.lastJumpScareTime=l,o.current.noise=1,te.getInstance().playJumpScare(),o.current.isHidden&&(o.current.isHidden=!1))};m.useEffect(()=>{const l=L=>{h.current[L.code]=!0,L.code===r.INTERACT&&N(),(L.code==="Escape"||L.code===r.INTERACT)&&c&&d(null)},u=L=>{h.current[L.code]=!1},v=L=>{document.pointerLockElement===n.current&&!S.current.active&&!p.current.active&&(o.current.yaw+=L.movementX*.002,o.current.pitch-=L.movementY*.002,o.current.pitch=Math.max(-.5,Math.min(.5,o.current.pitch)),o.current.direction={x:Math.cos(o.current.yaw),y:Math.sin(o.current.yaw)})},w=L=>{var G;t==="PLAYING"&&!p.current.active&&(!c&&document.pointerLockElement!==n.current?(G=n.current)==null||G.requestPointerLock():o.current.hasBat&&!o.current.isHidden&&L.button===0&&P())};window.addEventListener("keydown",l),window.addEventListener("keyup",u),document.addEventListener("mousemove",v);const M=n.current;return M&&M.addEventListener("mousedown",w),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",u),document.removeEventListener("mousemove",v),M&&M.removeEventListener("mousedown",w)}},[t,c,r]);const P=()=>{const l=o.current,u=Date.now();if(u-l.lastAttackTime<Wa)return;l.attackTimer=200,l.lastAttackTime=u,te.getInstance().playSwing();const v=x.current;if(v.active&&Math.hypot(v.x-l.x,v.y-l.y)<za){let L=Math.atan2(v.y-l.y,v.x-l.x)-l.yaw;for(;L>Math.PI;)L-=2*Math.PI;for(;L<-Math.PI;)L+=2*Math.PI;Math.abs(L)<Ka/2&&(te.getInstance().playHit(),s(G=>({...G,message:"BANISHED!"})),v.state="IDLE",v.x=-2e3,v.y=-2e3,v.teleportCooldown=500,v.invisible=!0)}},N=()=>{if(c){d(null);return}const l=o.current;if(l.isHidden){l.isHidden=!1,s(w=>({...w,message:""}));return}let u=null,v=70;if(f.current.forEach(w=>{if(!w.active)return;const M=Math.hypot(w.x-l.x,w.y-l.y);M<v&&(u=w,v=M)}),u){const w=u;w.type==="CAR"&&!l.hasFlashlight?(l.hasFlashlight=!0,l.flashlightOn=!0,l.battery=100,te.getInstance().playClick(!0),te.getInstance().playBuzz(.5),te.getInstance().playDrone(),I.current=Date.now(),s(M=>({...M,message:"BATTERY RECHARGED"}))):w.type==="BAT"?(l.hasBat=!0,w.active=!1,te.getInstance().playItemDrop(),s(M=>({...M,message:"BASEBALL BAT ACQUIRED"}))):w.type==="NOTE"?(d(w.text||"..."),w.active=!1,te.getInstance().playClick(!0),s(M=>({...M,message:"STORY NOTE FOUND"}))):w.type==="BED"?(l.isHidden=!0,l.hidingType="BED",te.getInstance().playItemDrop(),s(M=>({...M,message:"HIDING UNDER BED..."}))):w.type==="LOCKER"&&(w.isOpen?(l.isHidden=!0,l.hidingType="LOCKER",s(M=>({...M,message:"HIDING IN LOCKER..."}))):(w.isOpen=!0,l.noise=1,te.getInstance().playItemDrop(),Math.random()<.2&&O(),w.content==="BATTERY"?(l.battery=Math.min(100,l.battery+Ya),s(M=>({...M,message:"REPLACED BATTERY"})),w.content="EMPTY"):w.content==="KEY"?(l.keys++,s(M=>({...M,message:"FOUND KEY"})),w.content="EMPTY"):s(M=>({...M,message:"EMPTY"}))))}},b=(l,u,v,w=!1)=>{const M=Math.floor((l-v/2)/Z),L=Math.floor((l+v/2)/Z),G=Math.floor((u-v/2)/Z),B=Math.floor((u+v/2)/Z);if(M<0||L>=re[0].length||G<0||B>=re.length||re[G][M]===1||re[G][M]===7||re[G][L]===1||re[G][L]===7||re[B][M]===1||re[B][M]===7||re[B][L]===1||re[B][L]===7)return!0;const le=["CAR","LOCKER","BED"];for(const J of f.current)if(J.active&&le.includes(J.type)&&Math.hypot(l-J.x,u-J.y)<v/2+J.width/2)return!0;return!w&&(re[G][M]===3||re[G][L]===3||re[B][M]===3||re[B][L]===3)?o.current.keys>=12?(a("VICTORY"),!1):(s(K=>({...K,message:"NEED 12 KEYS"})),!0):!1},C=()=>{const l=o.current;if(l.battery=Math.max(0,l.battery-Va),l.battery<=0){a("GAME_OVER");return}if(l.battery<20&&Math.random()<.05?(l.isFlickering=!0,te.getInstance().playBuzz(.1)):Date.now()-I.current<200?l.isFlickering=Math.random()<.5:l.isFlickering=!1,Math.random()<.001&&l.noise>.1&&!l.isHidden){const v=l.x-Math.cos(l.yaw)*60,w=l.y-Math.sin(l.yaw)*60;f.current.push({id:`ghost_${Date.now()}`,type:"SHADOW",x:v,y:w,width:30,height:60,active:!0}),setTimeout(()=>{const M=f.current.findIndex(L=>L.type==="SHADOW"&&L.id.startsWith("ghost"));M!==-1&&f.current.splice(M,1)},200)}},$=()=>{const l=o.current;if(l.attackTimer>0&&(l.attackTimer-=1e3/60),U.current<2||S.current.active)return;if(l.isHidden){l.noise=0;return}const u=l.yaw,v=Math.cos(u),w=Math.sin(u),M=Math.cos(u+Math.PI/2),L=Math.sin(u+Math.PI/2);let G=0,B=0;const le=h.current[r.RUN],J=h.current[r.SNEAK];l.isCrouching=!!J;let K=Mt;le&&(K=Ha),J&&(K=$a),(h.current[r.MOVE_FORWARD]||h.current.ArrowUp)&&(G+=v*K,B+=w*K),(h.current[r.MOVE_BACKWARD]||h.current.ArrowDown)&&(G-=v*K,B-=w*K),(h.current[r.MOVE_LEFT]||h.current.ArrowLeft)&&(G-=M*K,B-=L*K),(h.current[r.MOVE_RIGHT]||h.current.ArrowRight)&&(G+=M*K,B+=L*K),b(l.x+G,l.y,l.width)||(l.x+=G),b(l.x,l.y+B,l.width)||(l.y+=B);const pe=Math.abs(G)+Math.abs(B)>.1;let se=0;if(pe&&(le?se=Za:J?se=Qa:se=Xa),l.noise=Math.max(0,l.noise-Ja),l.noise=Math.max(l.noise,se),pe){J&&te.getInstance().playBreathing();const V=le?300:J?700:500;if(Date.now()-y.current>V){let Ne=l.y>360?"WOOD":"DIRT";Ne==="DIRT"&&Math.random()<.3&&(Ne="WATER");const me=J?.2:1;te.getInstance().playFootstep(Ne,me),y.current=Date.now()}}!E.current&&l.y>340&&l.y<450&&(E.current=!0,f.current.push({id:"shadow_event",type:"SHADOW",x:350,y:380,width:30,height:60,active:!0}),x.current.active=!0,x.current.x=800,x.current.y=800,x.current.state="IDLE"),f.current.forEach(V=>{V.active&&V.type==="KEY"&&Math.hypot(V.x-l.x,V.y-l.y)<ct+V.width&&(V.active=!1,l.keys++,te.getInstance().playItemDrop(),s(me=>({...me,message:"KEY FOUND"})))})},q=()=>{const l=x.current;if(!l.active||S.current.active||p.current.active)return;if(o.current.isHidden){l.state="IDLE";return}const u=o.current,v=Math.hypot(u.x-l.x,u.y-l.y),w=te.getInstance();l.footstepTimer++;const M=l.x-u.x,L=l.y-u.y;let B=Math.atan2(L,M)-u.yaw;for(;B>Math.PI;)B-=2*Math.PI;for(;B<-Math.PI;)B+=2*Math.PI;const le=Math.abs(B)<Ye/1.5;if(u.flashlightOn&&le&&v<400){if(l.stareTimer++,l.stareTimer>sr&&l.state==="STALKING"){l.state="IDLE",l.x=-1e3,l.y=-1e3,l.invisible=!0,l.stareTimer=0,s(V=>({...V,message:"IT FLED"}));return}}else l.stareTimer=Math.max(0,l.stareTimer-1);let K=l.x,pe=l.y,se=0;if(l.state==="IDLE")Math.random()<.01&&(l.state="STALKING"),u.noise>er&&v<600&&(l.state="HUNTING",l.invisible=!1);else if(l.state==="STALKING"){if(l.invisible=!0,l.teleportCooldown--,l.teleportCooldown<=0&&!le&&v>rr){const Ne=u.yaw+Math.PI+(Math.random()-.5),me=ar+Math.random()*100;l.x=u.x+Math.cos(Ne)*me,l.y=u.y+Math.sin(Ne)*me,l.teleportCooldown=200,w.playDrone()}se=qa;const V=Math.atan2(u.y-l.y,u.x-l.x);K=l.x+Math.cos(V)*se,pe=l.y+Math.sin(V)*se,v<200?(l.footstepTimer>60&&(w.playGhostFootstep("SOFT"),l.footstepTimer=0),Math.random()<.02&&(l.state="HUNTING",l.invisible=!1)):v<400&&l.footstepTimer>100&&(w.playGhostFootstep("SOFT"),l.footstepTimer=0)}else if(l.state==="HUNTING"){l.invisible=!1,se=Fa;const V=Math.atan2(u.y-l.y,u.x-l.x);K=l.x+Math.cos(V)*se,pe=l.y+Math.sin(V)*se,l.footstepTimer>25&&(w.playGhostFootstep("HEAVY"),l.footstepTimer=0),v>700&&(l.state="IDLE")}if(se>0){if(!b(K,l.y,l.width,!0))l.x=K;else{const V=l.y+(u.y>l.y?se:-se);b(l.x,V,l.width,!0)||(l.y=V)}if(!b(l.x,pe,l.width,!0))l.y=pe;else{const V=l.x+(u.x>l.x?se:-se);b(V,l.y,l.width,!0)||(l.x=V)}}!l.invisible&&v<25&&(p.current.active||(p.current={active:!0,startTime:Date.now()},te.getInstance().playJumpScare()))},Q=()=>{H.current++,U.current===0&&H.current>120&&(U.current=1,te.getInstance().playBell()),U.current===1&&H.current>180&&(U.current=2,te.getInstance().playCarCooling(),te.getInstance().playFlashlightRoll()),U.current===3&&g.current%300===0&&Math.random()<.3&&te.getInstance().playCarCooling();const l=f.current.findIndex(u=>u.type==="SHADOW"&&u.id==="shadow_event");if(l!==-1){const u=f.current[l];u.x+=12,u.x>800&&(u.active=!1,f.current.splice(l,1))}S.current.active&&Date.now()-S.current.timer>500&&(S.current.active=!1)},de=()=>{k.current.forEach(l=>{l.y+=l.speed,l.y>720&&(l.y=-20,l.x=Math.random()*1280)})},Ie=l=>!!(l&&l.complete&&l.naturalWidth>0),be=(l,u,v,w,M,L)=>{if(l.save(),L){const le=(Math.random()-.5)*20,J=(Math.random()-.5)*20;l.translate(le,J)}l.fillStyle="#111",l.beginPath(),l.ellipse(u+w/2,v+M/2,w/2,M/1.5,0,0,Math.PI*2),l.fill();const G=w/5,B=w/4;l.fillStyle="#ff0000",l.shadowBlur=L?50:10,l.shadowColor="red",l.beginPath(),l.ellipse(u+w/2-B,v+M/3,G,G*.7,Math.PI/6,0,Math.PI*2),l.fill(),l.beginPath(),l.ellipse(u+w/2+B,v+M/3,G,G*.7,-Math.PI/6,0,Math.PI*2),l.fill(),l.fillStyle="#300",l.shadowBlur=0,l.beginPath(),l.moveTo(u+w/2-G,v+M*.65),l.quadraticCurveTo(u+w/2,v+M*.85,u+w/2+G,v+M*.65),l.quadraticCurveTo(u+w/2,v+M*.55,u+w/2-G,v+M*.65),l.fill(),l.restore()},_=(l,u,v,w)=>{l.fillStyle="#111",l.fillRect(0,0,v,w/2+u.pitch*w);const M=l.createLinearGradient(0,w/2+u.pitch*w,0,w);M.addColorStop(0,"#0a0a0a"),M.addColorStop(1,"#2a2a2a"),l.fillStyle=M,l.fillRect(0,w/2+u.pitch*w,v,w/2-u.pitch*w);for(let L=0;L<He;L++){const G=2*L/He-1,B=Math.cos(u.yaw)+Math.cos(u.yaw+Math.PI/2)*Math.tan(Ye/2)*G,le=Math.sin(u.yaw)+Math.sin(u.yaw+Math.PI/2)*Math.tan(Ye/2)*G;let J=Math.floor(u.x/Z),K=Math.floor(u.y/Z),pe,se;const V=Math.abs(1/B),Ne=Math.abs(1/le);let me,Ge,ne,Y=0,xe=0;B<0?(Ge=-1,pe=(u.x/Z-J)*V):(Ge=1,pe=(J+1-u.x/Z)*V),le<0?(ne=-1,se=(u.y/Z-K)*Ne):(ne=1,se=(K+1-u.y/Z)*Ne);let ae=0;for(;Y===0;)pe<se?(pe+=V,J+=Ge,xe=0):(se+=Ne,K+=ne,xe=1),K>=0&&K<re.length&&J>=0&&J<re[0].length?(re[K][J]===1||re[K][J]===7)&&(Y=1,ae=re[K][J]):Y=1;xe===0?me=(J-u.x/Z+(1-Ge)/2)/B:me=(K-u.y/Z+(1-ne)/2)/le,A.current[L]=me;const ce=Math.floor(w*2/me),Te=w/2+u.pitch*w,Ce=-ce/2+Te,ie=ce/2+Te;let je=150;ae===7&&(je=100),xe===1&&(je*=.75);const et=Math.min(1,4/me),Qt=Math.floor(je*et),es=Math.floor(je*et),ts=Math.floor(je*et),gt=Math.ceil(v/He),ss=L*gt;l.fillStyle=`rgb(${Qt},${es},${ts})`,l.fillRect(ss,Ce,gt,ie-Ce+1)}},z=(l,u,v,w)=>{const M=f.current.filter(G=>G.active).map(G=>({...G,dist:Math.hypot(u.x-G.x,u.y-G.y)})).sort((G,B)=>B.dist-G.dist),L=x.current;L.active&&(!L.invisible||L.invisible&&L.state==="STALKING"&&Math.random()<.2)&&(M.push({...L,dist:Math.hypot(u.x-L.x,u.y-L.y)}),M.sort((G,B)=>B.dist-G.dist)),M.forEach(G=>{const B=G.x-u.x,le=G.y-u.y,J=Math.cos(u.yaw+Math.PI/2)*Math.tan(Ye/2),K=Math.sin(u.yaw+Math.PI/2)*Math.tan(Ye/2),pe=Math.cos(u.yaw),se=Math.sin(u.yaw),V=1/(J*se-pe*K),Ne=V*(se*B-pe*le),me=V*(-K*B+J*le);if(me<=0)return;const Ge=Math.floor(v/2*(1+Ne/me));let ne=Math.abs(Math.floor(w/(me/Z)));const Y=Math.abs(Math.floor(w/(me/Z)));G.type==="ENEMY"&&(ne*=1.6);const xe=w/2+u.pitch*w,ae=-ne/2+xe,Se=Math.ceil(v/He),ce=Math.floor(-Y/2+Ge),Te=Math.floor(Ge/Se);if(Te>=0&&Te<He){const Ce=A.current[Te];if(me/Z<Ce){const ie=Math.min(1,5/(me/Z));if(l.save(),l.globalAlpha=ie,G.type==="ENEMY"){const je=j.current.ghost;Ie(je)?(l.globalAlpha=L.invisible?.1:ie,l.drawImage(je,ce,ae,Y,ne)):(l.fillStyle=L.invisible?"rgba(0,0,0,0.1)":`rgba(0,0,0,${ie})`,be(l,ce,ae,Y,ne,!1))}else if(G.type==="KEY")l.fillStyle=`rgb(${255*ie},${215*ie},0)`,l.beginPath(),l.arc(Ge,ae+ne/2,Y/3,0,Math.PI*2),l.fill();else if(G.type==="BAT")l.fillStyle=`rgb(${150*ie},${150*ie},${150*ie})`,l.fillRect(ce,ae,Y,ne),l.fillStyle=`rgb(${100*ie},${50*ie},0)`,l.fillRect(ce,ae+ne*.7,Y,ne*.3);else if(G.type==="LOCKER"){const je=G;l.fillStyle=je.isOpen?"#444":"#666",l.fillRect(ce,ae-ne/2,Y,ne*1.5)}else if(G.type==="BED"){const je=j.current.bed;Ie(je)?l.drawImage(je,ce,ae+ne/2,Y,ne/2):(l.fillStyle="#ccc",l.fillRect(ce,ae+ne/2,Y,ne/2))}else if(G.type==="CAR")l.fillStyle="#557",l.fillRect(ce-Y,ae,Y*3,ne/2);else if(G.type==="NOTE"){const je=j.current.note;Ie(je)?l.drawImage(je,ce,ae+ne*.8,Y/2,ne/4):(l.fillStyle="#fff",l.fillRect(ce,ae+ne*.8,Y/2,ne/4))}l.restore()}}})},F=l=>{const u=l.canvas.width,v=l.canvas.height,w=o.current;if(p.current.active){l.fillStyle="#000",l.fillRect(0,0,u,v);const Y=(Math.random()-.5)*50,xe=(Math.random()-.5)*50,ae=1+Math.sin(Date.now()/50)*.05;l.save(),l.translate(u/2+Y,v/2+xe),l.scale(ae,ae);const Se=j.current.ghost;if(Ie(Se)){const ce=Se.width/Se.height,Te=u/v;let Ce,ie;Te>ce?(Ce=u,ie=u/ce):(ie=v,Ce=v*ce),l.drawImage(Se,-Ce/2,-ie/2,Ce,ie)}else be(l,-u/2,-v/2,u,v,!0);l.restore(),Math.random()>.7&&(l.fillStyle="rgba(255, 0, 0, 0.2)",l.fillRect(0,0,u,v));return}_(l,w,u,v),z(l,w,u,v);const M=Math.max(.2,w.battery/100),L=w.battery<20||w.isFlickering?Math.random()*.2:0,G=l.createRadialGradient(u/2,v/2,v/4*M,u/2,v/2,v*(.8+L));if(G.addColorStop(0,"rgba(0,0,0,0)"),G.addColorStop(.5,"rgba(0,0,0,0.3)"),G.addColorStop(1,"rgba(0,0,0,0.95)"),l.fillStyle=G,l.fillRect(0,0,u,v),w.hasBat&&!w.isHidden){l.save();const Y=w.attackTimer>0?Math.sin(w.attackTimer/200*Math.PI)*200:0,xe=w.attackTimer>0?-Math.PI/4:0;l.translate(u*.7+Y,v),l.rotate(-Math.PI/6+xe),l.fillStyle="#5d4037",l.fillRect(-20,-200,40,200),l.fillStyle="#9ca3af",l.fillRect(-25,-500,50,300),l.restore()}const B=150,le=.15,J=30,K=150;l.save(),l.translate(J,K),l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,0,B,B),l.strokeStyle="rgba(255, 255, 255, 0.3)",l.lineWidth=2,l.strokeRect(0,0,B,B),l.beginPath(),l.rect(0,0,B,B),l.clip();const pe=B/2,se=B/2,V=B/2/le,Ne=Math.max(0,Math.floor((w.y-V)/Z)),me=Math.min(re.length,Math.ceil((w.y+V)/Z)),Ge=Math.max(0,Math.floor((w.x-V)/Z)),ne=Math.min(re[0].length,Math.ceil((w.x+V)/Z));for(let Y=Ne;Y<me;Y++)for(let xe=Ge;xe<ne;xe++){const ae=re[Y][xe];if(ae===0)continue;const Se=xe*Z,ce=Y*Z,Te=pe+(Se-w.x)*le,Ce=se+(ce-w.y)*le,ie=Math.max(1,Z*le);ae===1||ae===7?(l.fillStyle="#94a3b8",l.fillRect(Te,Ce,ie,ie)):ae===3?(l.fillStyle="#ef4444",l.fillRect(Te,Ce,ie,ie)):ae===4&&(l.fillStyle="#f59e0b",l.fillRect(Te,Ce,ie,ie))}if(l.save(),l.translate(pe,se),l.rotate(w.yaw),l.fillStyle="#22c55e",l.beginPath(),l.moveTo(5,0),l.lineTo(-4,-4),l.lineTo(-4,4),l.fill(),l.restore(),l.restore(),w.isHidden&&(l.fillStyle="rgba(0,0,0,0.95)",l.fillRect(0,0,u,v),l.fillStyle="#fff",l.font="20px monospace",l.textAlign="center",l.fillText(w.hidingType==="BED"?"UNDER BED":"IN LOCKER",u/2,v/2)),S.current.active){const Y=(Date.now()-S.current.timer)/200;Y<1&&(l.fillStyle="black",l.fillRect(0,0,u,v),l.save(),l.translate(u/2+(Math.random()-.5)*20,v/2+(Math.random()-.5)*20),l.scale(2+Y,2+Y),l.fillStyle="#1a0000",l.beginPath(),l.ellipse(0,0,100,140,0,0,Math.PI*2),l.fill(),l.fillStyle="white",l.beginPath(),l.arc(-40,-20,15,0,Math.PI*2),l.arc(40,-20,15,0,Math.PI*2),l.fill(),l.fillStyle="black",l.beginPath(),l.arc(-40,-20,5,0,Math.PI*2),l.arc(40,-20,5,0,Math.PI*2),l.fill(),l.restore())}if(c){l.fillStyle="rgba(0,0,0,0.8)",l.fillRect(0,0,u,v),l.fillStyle="#fef3c7",l.fillRect(u/2-200,v/2-150,400,300),l.fillStyle="#000",l.font='20px "Special Elite", monospace',l.textAlign="center",l.textBaseline="middle";const Y=c.split(" ");let xe="",ae=v/2-100;for(let Se=0;Se<Y.length;Se++){const ce=xe+Y[Se]+" ";l.measureText(ce).width>360&&Se>0?(l.fillText(xe,u/2,ae),xe=Y[Se]+" ",ae+=30):xe=ce}l.fillText(xe,u/2,ae),l.font="14px monospace",l.fillStyle="#666",l.fillText("[PRESS E or ESC TO CLOSE]",u/2,v/2+130)}},D=m.useCallback(()=>{if(t!=="PLAYING")return;if(c){const u=n.current;if(u){const v=u.getContext("2d");v&&F(v)}i.current=requestAnimationFrame(D);return}if(p.current.active){if(Date.now()-p.current.startTime>3e3){a("GAME_OVER"),p.current.active=!1;return}const v=n.current;if(v){const w=v.getContext("2d");w&&F(w)}i.current=requestAnimationFrame(D);return}Q(),$(),q(),de(),C();const l=n.current;if(l){const u=l.getContext("2d");u.imageSmoothingEnabled=!1,u&&F(u)}s({battery:o.current.battery,keysFound:o.current.keys,totalKeys:12,soundLevel:o.current.noise,message:""}),i.current=requestAnimationFrame(D)},[t,c,r]);return m.useEffect(()=>(t==="PLAYING"&&(i.current=requestAnimationFrame(D)),()=>cancelAnimationFrame(i.current)),[D,t]),e.jsx("canvas",{ref:n,width:1280,height:720,className:"block w-full h-full bg-black cursor-none"})},dr={MOVE_FORWARD:"Move Forward",MOVE_BACKWARD:"Move Backward",MOVE_LEFT:"Move Left",MOVE_RIGHT:"Move Right",RUN:"Sprint",SNEAK:"Sneak",INTERACT:"Interact",FLASHLIGHT:"Toggle Camera Light"},mr=({gameState:t,stats:a,onStart:s,onRestart:r,keyBindings:n,setKeyBindings:i})=>{const[c,d]=m.useState(!1),[o,x]=m.useState(null),[f,h]=m.useState(0);m.useEffect(()=>{let g;return t==="PLAYING"&&(g=setInterval(()=>{h(E=>E+1)},1e3)),()=>clearInterval(g)},[t]);const y=g=>{const E=Math.floor(g/3600).toString().padStart(2,"0"),H=Math.floor(g%3600/60).toString().padStart(2,"0"),U=(g%60).toString().padStart(2,"0");return`${E}:${H}:${U}`},j=()=>{te.getInstance().resume(),s()};m.useEffect(()=>{if(!o)return;const g=E=>{if(E.preventDefault(),E.stopPropagation(),E.key==="Escape"){x(null);return}i({...n,[o]:E.code}),x(null)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[o,n,i]);const k=g=>g.replace("Key","").replace("Left","").replace("Right","").replace("Control","Ctrl");return t==="MENU"?c?e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/95 text-slate-100 z-[100] p-8 pointer-events-auto",children:e.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-lg p-6 shadow-2xl relative",children:[e.jsx("button",{onClick:()=>{d(!1),x(null)},className:"absolute top-4 right-4 text-slate-400 hover:text-white",children:e.jsx(os,{size:32})}),e.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3 text-red-500",style:{fontFamily:"Special Elite"},children:[e.jsx(cs,{size:32})," CONTROLS"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(n).map(g=>e.jsxs("div",{className:"flex items-center justify-between bg-black/50 p-3 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-300 font-mono text-sm uppercase",children:dr[g]}),e.jsx("button",{onClick:()=>x(g),className:`px-4 py-1 rounded font-bold min-w-[100px] text-center transition-colors border ${o===g?"bg-red-600 border-red-400 text-white animate-pulse":"bg-slate-800 border-slate-600 text-slate-200 hover:bg-slate-700"}`,children:o===g?"PRESS KEY...":k(n[g])})]},g))}),e.jsx("div",{className:"mt-8 text-center text-slate-500 text-sm",children:"Click a button to rebind. Press ESC to cancel."})]})}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/90 text-slate-100 z-[100] pointer-events-auto",children:[e.jsx("h1",{className:"text-8xl font-bold tracking-widest text-red-600 mb-4 animate-pulse",style:{fontFamily:"Special Elite"},children:"LAST LIGHT"}),e.jsx("p",{className:"text-xl mb-8 max-w-md text-center text-slate-400",children:"Find 12 keys to escape. Keep your flashlight charged. Don't look at it."}),e.jsxs("div",{className:"flex flex-col gap-4 w-64",children:[e.jsx("button",{onClick:j,className:"bg-red-900/50 border-2 border-red-600 hover:bg-red-800 text-white py-3 rounded text-xl font-bold transition-all hover:scale-105",children:"ENTER DARKNESS"}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-slate-800 border border-slate-600 hover:bg-slate-700 text-slate-300 py-2 rounded flex items-center justify-center gap-2",children:[e.jsx(Ot,{size:18})," CONTROLS"]})]})]}):t==="GAME_OVER"?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black z-[100] pointer-events-auto animate-in fade-in duration-1000",children:[e.jsx("div",{className:"scale-150 mb-12",children:e.jsx("h1",{className:"text-9xl font-serif text-red-900 tracking-widest opacity-80",style:{textShadow:"0 0 20px rgba(255,0,0,0.5)"},children:"YOU DIED"})}),e.jsx("button",{onClick:r,className:"mt-8 text-slate-400 hover:text-white border-b border-transparent hover:border-white transition-colors text-xl",children:"TRY AGAIN"})]}):t==="VICTORY"?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white text-black z-[100] pointer-events-auto animate-in fade-in duration-[3000ms]",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4",children:"ESCAPED"}),e.jsx("p",{className:"text-2xl mb-8",children:"You found the light."}),e.jsx("button",{onClick:r,className:"bg-black text-white px-8 py-3 rounded hover:scale-105 transition-transform",children:"PLAY AGAIN"})]}):e.jsxs("div",{className:"absolute inset-0 pointer-events-none p-6 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-500 text-2xl drop-shadow-md",children:[e.jsx(ds,{size:32}),e.jsxs("span",{className:"font-mono font-bold",children:[Math.ceil(a.battery),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-yellow-500 text-2xl drop-shadow-md",children:[e.jsx(ms,{size:32}),e.jsxs("span",{className:"font-mono font-bold",children:[a.keysFound,"/",a.totalKeys]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("div",{className:"text-slate-500 font-mono text-xl",children:y(f)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{size:20,className:a.soundLevel>.5?"text-red-500":"text-slate-600"}),e.jsx("div",{className:"w-32 h-2 bg-slate-900 border border-slate-700",children:e.jsx("div",{className:"h-full bg-slate-200 transition-all duration-100",style:{width:`${Math.min(100,a.soundLevel*100)}%`}})})]})]})]}),a.message&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx("div",{className:"text-white font-mono text-xl bg-black/50 px-4 py-2 rounded border border-slate-700 animate-pulse",children:a.message})}),e.jsxs("div",{className:"text-slate-600 font-mono text-sm opacity-50",children:[k(n.FLASHLIGHT),": LIGHT | ",k(n.INTERACT),": INTERACT"]})]})};function xr(){const[t,a]=m.useState("MENU"),[s,r]=m.useState(()=>{const o=localStorage.getItem("last_light_keys");return o?JSON.parse(o):nr});m.useEffect(()=>{localStorage.setItem("last_light_keys",JSON.stringify(s))},[s]);const[n,i]=m.useState({battery:100,keysFound:0,totalKeys:12,soundLevel:0,message:""}),c=()=>a("PLAYING"),d=()=>a("PLAYING");return e.jsx(Ee,{children:e.jsxs("div",{className:"relative w-screen h-screen bg-slate-950 flex items-center justify-center overflow-hidden select-none",children:[e.jsx("div",{className:"scanlines mix-blend-overlay opacity-20 pointer-events-none w-full h-full absolute inset-0 z-50"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#000000_100%)] pointer-events-none z-40"}),e.jsxs("div",{className:"relative w-full max-w-[1280px] aspect-video bg-black shadow-2xl border border-slate-900 overflow-hidden",children:[e.jsx(cr,{gameState:t,setGameState:a,onStatsUpdate:i,keyBindings:s}),e.jsx(mr,{gameState:t,stats:n,onStart:c,onRestart:d,keyBindings:s,setKeyBindings:r})]})]})})}const hr=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),ur=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),fr=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8z"})]}),pr=({name:t,status:a,age:s,motto:r})=>e.jsxs("div",{className:"w-96 h-60 bg-white rounded-2xl shadow-lg p-8 flex flex-col justify-between transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:t}),e.jsx("div",{className:"w-20 h-1 bg-slate-400 my-4 rounded-full"}),e.jsx("p",{className:"text-lg text-slate-600",children:a})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-slate-500",children:[e.jsx(fr,{className:"w-5 h-5 text-slate-400 flex-shrink-0"}),e.jsxs("p",{className:"text-sm italic",children:['"',r,'"']})]}),e.jsxs("footer",{className:"flex items-center space-x-6 text-slate-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ur,{className:"w-5 h-5 text-slate-400"}),e.jsxs("span",{className:"text-sm font-medium",children:[s," Years Old"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hr,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium",children:"Student"})]})]})]}),gr=()=>{const t={name:"Derek Jang",status:"Student at WMS",age:15,motto:"ì˜¤ëŠ˜ë„ ë‚´ì¼ì²˜ëŸ¼ ë‚´ì¼ë„ ì˜¤ëŠ˜ì²˜ëŸ¼"};return e.jsx(Ee,{children:e.jsx("main",{className:"min-h-screen bg-slate-100 flex items-center justify-center font-sans p-4",children:e.jsx(pr,{name:t.name,status:t.status,age:t.age,motto:t.motto})})})};let Ae=null;const br=()=>{Ae||(Ae=new(window.AudioContext||window.webkitAudioContext)),Ae.state==="suspended"&&Ae.resume()},Ue=(t,a,s)=>{if(br(),!Ae)return;const r=Ae.createOscillator(),n=Ae.createGain();r.type=a,r.frequency.setValueAtTime(t,Ae.currentTime),n.gain.setValueAtTime(0,Ae.currentTime),n.gain.linearRampToValueAtTime(.1,Ae.currentTime+.01),n.gain.exponentialRampToValueAtTime(.001,Ae.currentTime+s),r.connect(n),n.connect(Ae.destination),r.start(),r.stop(Ae.currentTime+s)},ge={playSuccess:()=>{setTimeout(()=>Ue(523.25,"sine",.15),0),setTimeout(()=>Ue(659.25,"sine",.15),80),setTimeout(()=>Ue(783.99,"sine",.3),160)},playError:()=>{Ue(150,"sawtooth",.3),setTimeout(()=>Ue(140,"sawtooth",.3),50)},playClick:()=>{Ue(800,"triangle",.05)},playTick:()=>{Ue(1200,"sine",.03)},speak:(t,a=1)=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const s=new SpeechSynthesisUtterance(t);s.lang="en-US",s.rate=a;const n=window.speechSynthesis.getVoices().find(i=>i.name.includes("Google US English")||i.lang==="en-US"&&i.name.includes("Samantha"));n&&(s.voice=n),window.speechSynthesis.speak(s)}}},yr=()=>{const t="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new De({apiKey:t})},wr=async()=>{const t=yr(),a="Generate a list of 10 English vocabulary words for a middle school student. For each word, provide: 1. The English term. 2. A Korean definition. 3. A short, simple English example sentence. 4. A 'mnemonic' (story) in Korean that helps memorize the word using pronunciation associations or logic (e.g. 'Stalactite' -> 'C' for Ceiling -> ì²œìž¥ì— ë¶™ì€ ì¢…ìœ ì„).";try{const s=await t.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{responseMimeType:"application/json",responseSchema:{type:W.ARRAY,items:{type:W.OBJECT,properties:{term:{type:W.STRING},definition:{type:W.STRING},example:{type:W.STRING},mnemonic:{type:W.STRING}},required:["term","definition","example","mnemonic"]}}}});return JSON.parse(s.text||"[]").map((n,i)=>({id:`gen-${Date.now()}-${i}`,term:n.term,definition:n.definition,example:n.example,mnemonic:n.mnemonic,status:"new"}))}catch(s){return console.error("Error generating words:",s),[]}},jr=({onWordsLoaded:t,onStartWrongReview:a,wrongWordsCount:s,isReverse:r,onToggleReverse:n})=>{const[i,c]=m.useState(!1),[d,o]=m.useState(!1),[x,f]=m.useState(""),h=()=>{const E="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new De({apiKey:E})},y=async E=>{const H=h();if(!H)return E.map(I=>({...I,definition:"???"}));const U=`Translate these English words to Korean definitions. Return JSON array of strings. Words: ${E.map(I=>I.term).join(", ")}`;try{const I=await H.models.generateContent({model:"gemini-2.5-flash",contents:U,config:{responseMimeType:"application/json",responseSchema:{type:W.ARRAY,items:{type:W.STRING}}}}),S=JSON.parse(I.text||"[]");return E.map((p,A)=>({term:p.term,definition:S[A]||"ëœ» ê²€ìƒ‰ ì‹¤íŒ¨"}))}catch(I){return console.error(I),E.map(S=>({...S,definition:"ìžë™ ë²ˆì—­ ì‹¤íŒ¨"}))}},j=async E=>{const H=E.split(`
`);let U=[];if(H.forEach(S=>{let p=S.trim();if(!p||(p=p.replace(/^\d+[\.\)\s]+\s*/,""),!p))return;let A=[],R=!1,O="",P=!1;for(let b=0;b<p.length;b++){const C=p[b];if(C==='"'){R=!R;continue}!R&&(C===","||C==="	"||C==="|"||C===":"&&!O.match(/^\d/))||!R&&(C==="-"||C==="=")&&A.length===0&&O.length>0?(A.push(O.trim()),O="",P=!0):O+=C}if(A.push(O.trim()),A=A.filter(b=>b!==""),!P&&A.length===1){const C=A[0].match(/^([a-zA-Z0-9\s\-\(\)\?]+)\s+([ê°€-íž£].*)$/);C&&(A=[C[1].trim(),C[2].trim()])}if(A.length===0)return;const N=A[0];N&&(A.length>=2?U.push({term:N,definition:A[1],mnemonic:A[2]||void 0,example:A[3]||void 0}):U.push({term:N}))}),U.length===0){ge.playError(),alert("ìœ íš¨í•œ ë‹¨ì–´ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");return}const I=U.filter(S=>!S.definition);if(I.length>0&&I.length===U.length){o(!0);try{const p=(await y(I)).map((A,R)=>({id:`uploaded-${R}-${Date.now()}`,term:A.term,definition:A.definition||"???",status:"new"}));ge.playSuccess(),t(p)}catch{alert("ë‹¨ì–´ ëœ»ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}}else{const S=U.map((p,A)=>({id:`uploaded-${A}-${Date.now()}`,term:p.term,definition:p.definition||"???",mnemonic:p.mnemonic,example:p.example,status:"new"}));ge.playSuccess(),t(S)}},k=E=>{var U;const H=(U=E.target.files)==null?void 0:U[0];if(H){const I=new FileReader;I.onload=S=>{var A;const p=(A=S.target)==null?void 0:A.result;j(p)},I.readAsText(H)}},g=async()=>{o(!0),ge.playClick();try{const E=await wr();E.length>0&&(ge.playSuccess(),t(E))}catch{ge.playError(),alert("AI ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{o(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 tracking-tighter filter drop-shadow-sm",children:"WORD SPARK"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"ë‡Œê³µí•™ì  ì›ë¦¬ë¡œ ë‹¨ì–´ë¥¼ ê°ì¸ì‹œí‚¤ì„¸ìš”"})]}),s>0&&e.jsxs("button",{onClick:a,className:"w-full bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-100 p-5 rounded-2xl flex items-center justify-between hover:shadow-md hover:border-red-200 transition group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"flex items-center gap-4 z-10",children:[e.jsx("div",{className:"bg-white p-3 rounded-full shadow-sm text-red-500 animate-pulse ring-2 ring-red-100",children:e.jsx(Dt,{size:24,fill:"currentColor"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"ì˜¤ë‹µ ê°ì˜¥ (Prison)"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[e.jsx("span",{className:"font-bold text-red-600 text-lg",children:s}),"ê°œì˜ ë‹¨ì–´ê°€ íƒˆì¶œì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤."]})]})]}),e.jsx("div",{className:"bg-white text-red-500 px-5 py-2 rounded-xl font-bold text-sm shadow-sm group-hover:scale-105 transition z-10 border border-red-100",children:"êµ¬ì¶œí•˜ê¸° â†’"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>{ge.playClick(),n()},className:`flex items-center gap-3 px-8 py-3 rounded-full text-sm font-bold transition-all shadow-sm active:scale-95 ${r?"bg-purple-600 text-white ring-4 ring-purple-100 scale-105":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:[e.jsx(xs,{size:16}),r?"ëª¨ë“œ: ëœ» ë³´ê³  ì˜ì–´ ë§í•˜ê¸° (Hard)":"ëª¨ë“œ: ì˜ì–´ ë³´ê³  ëœ» ë§í•˜ê¸° (Normal)"]})}),e.jsxs("div",{className:`relative border-4 border-dashed rounded-3xl p-10 text-center transition-all duration-300 cursor-pointer group ${i?"border-indigo-500 bg-indigo-50 scale-[1.02]":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"}`,onDragOver:E=>{E.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:E=>{E.preventDefault(),c(!1);const H=E.dataTransfer.files[0];if(H){const U=new FileReader;U.onload=I=>{var S;return j((S=I.target)==null?void 0:S.result)},U.readAsText(H)}},children:[e.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",accept:".txt,.csv",onChange:k}),e.jsxs("div",{className:"flex flex-col items-center gap-4 relative z-10 pointer-events-none",children:[e.jsx("div",{className:"bg-indigo-100 p-5 rounded-full text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Pt,{size:40})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:".txt, .csv, ì—‘ì…€ íŒŒì¼ ë“±"}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 justify-center",children:[e.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200",children:"1. apple ì‚¬ê³¼"}),e.jsx("span",{className:"text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded border border-slate-200",children:"apple, ì‚¬ê³¼"}),e.jsx("span",{className:"text-xs bg-purple-50 text-purple-600 px-2 py-1 rounded border border-purple-100 font-medium",children:"1. apple (ìžë™ë²ˆì—­)"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"text-sm font-bold text-slate-600 flex items-center gap-2",children:[e.jsx(hs,{size:16})," ì§ì ‘ ìž…ë ¥ / ë¶™ì—¬ë„£ê¸°"]}),e.jsxs("button",{onClick:g,disabled:d,className:"flex items-center gap-2 text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full hover:opacity-90 transition shadow-md active:scale-95 disabled:opacity-50",children:[d?e.jsx("span",{className:"animate-spin",children:"â³"}):e.jsx(Ut,{size:14}),d?"AIê°€ ìƒê° ì¤‘...":"AI ìžë™ ìƒì„±"]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("textarea",{className:"w-full h-40 p-5 rounded-2xl border border-slate-700 bg-slate-800 text-white placeholder:text-slate-500 focus:ring-4 focus:ring-indigo-500/30 focus:border-indigo-500 focus:outline-none resize-none text-base font-mono leading-relaxed transition-all shadow-inner",placeholder:`1. apple ì‚¬ê³¼
2. banana ë°”ë‚˜ë‚˜
3. spark
(ë³µì‚¬ ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ë©´ ì•Œì•„ì„œ ì •ë¦¬í•´ë“œë¦½ë‹ˆë‹¤)`,value:x,onChange:E=>f(E.target.value)}),d&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsxs("div",{className:"text-white font-bold animate-pulse flex items-center gap-2",children:[e.jsx(xt,{className:"text-yellow-400"})," ë‹¨ì–´ ë¶„ì„ ë° ìƒì„± ì¤‘..."]})})]}),e.jsxs("button",{onClick:()=>{ge.playClick(),j(x)},disabled:d,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg hover:bg-slate-800 transition active:scale-[0.98] shadow-lg hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(xt,{size:20,className:"text-yellow-400"})," í•™ìŠµ ì‹œìž‘í•˜ê¸°"]})]})]})},vr=({words:t,onComplete:a,isReverse:s,startIndex:r})=>{const[n,i]=m.useState(0),[c,d]=m.useState(!1),o=t[n],x=n/t.length*100,f=r+n,h=()=>{ge.playClick(),d(!c)},y=()=>{ge.playClick(),n<t.length-1?(d(!1),setTimeout(()=>i(E=>E+1),200)):a()},j=E=>{E.stopPropagation(),ge.speak(o.term)},k=s?o.definition:o.term,g=s?o.term:o.definition;return e.jsxs("div",{className:"flex flex-col h-full pt-6 pb-6 px-6 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[e.jsx("span",{children:"PROGRESS"}),e.jsxs("span",{children:[n+1," / ",t.length]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${x}%`}})})]}),e.jsx("div",{className:"flex-1 relative perspective-1000 mb-6 group cursor-pointer",onClick:h,children:e.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${c?"rotate-y-180":""}`,children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full bg-white rounded-[2rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.1)] border border-slate-100 backface-hidden flex flex-col items-center justify-center p-8",children:[e.jsxs("div",{className:"text-center w-full",children:[e.jsxs("div",{className:"inline-block bg-slate-100 text-slate-500 font-black text-sm px-3 py-1 rounded-full mb-6",children:["#",f]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight break-words leading-tight",children:k}),!s&&e.jsx("button",{onClick:j,className:"mt-2 p-4 bg-indigo-50 rounded-full text-indigo-600 hover:bg-indigo-100 transition-colors inline-flex items-center justify-center group-hover:scale-110 transform duration-300",children:e.jsx(Ke,{size:28})})]}),e.jsxs("div",{className:"absolute bottom-8 text-slate-400 text-sm font-bold flex items-center gap-2 animate-pulse",children:[e.jsx(Ht,{size:16})," íƒ­í•´ì„œ ëœ» ë³´ê¸°"]})]}),e.jsx("div",{className:"absolute inset-0 w-full h-full bg-slate-900 text-white rounded-[2rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.25)] backface-hidden rotate-y-180 flex flex-col items-center justify-center p-8",children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("div",{className:"inline-block bg-white/10 text-white/60 font-bold text-xs px-3 py-1 rounded-full mb-6 uppercase tracking-widest",children:"Answer"}),e.jsx("h2",{className:"text-3xl font-bold mb-6 break-words leading-snug",children:g}),s&&e.jsx("button",{onClick:j,className:"mb-6 p-3 bg-white/10 rounded-full text-white hover:bg-white/20 transition-colors inline-flex items-center justify-center",children:e.jsx(Ke,{size:24})}),e.jsxs("div",{className:"w-full bg-white/10 rounded-xl p-4 backdrop-blur-sm text-left mt-2",children:[o.mnemonic&&e.jsxs("div",{className:"mb-3 pb-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-xs font-bold mb-1",children:[e.jsx(us,{size:14})," MEMORY STORY"]}),e.jsx("p",{className:"text-sm leading-relaxed opacity-90 font-medium",children:o.mnemonic})]}),o.example?e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 font-bold mb-1",children:"EXAMPLE"}),e.jsxs("p",{className:"text-sm italic opacity-80 leading-relaxed",children:['"',o.example,'"']})]}):e.jsx("div",{className:"text-center text-xs text-slate-500 py-1",children:"No example available"})]})]})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:E=>{E.stopPropagation(),y()},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition-transform active:scale-95 flex items-center justify-center gap-2",children:["ë‹¤ìŒ ì¹´ë“œ ",e.jsx(fs,{size:20})]})})]})},Nr=({words:t,onFinish:a,isReverse:s,startIndex:r})=>{const[n,i]=m.useState(0),[c,d]=m.useState(3),[o,x]=m.useState("ready"),[f,h]=m.useState([]),[y,j]=m.useState([]),k=m.useRef(null),g=t[n],E=r+n;m.useEffect(()=>(o==="playing"&&(d(3),k.current=setInterval(()=>{d(R=>R<=1?(k.current&&clearInterval(k.current),H(),0):(ge.playTick(),R-1))},1e3)),()=>{k.current&&clearInterval(k.current)}),[n,o]);const H=()=>{x("revealed"),ge.playError()},U=R=>{k.current&&clearInterval(k.current),R?(ge.playSuccess(),h([...f,g]),S()):(ge.playError(),x("revealed"))},I=()=>{j([...y,g]),S()},S=()=>{n<t.length-1?(x("playing"),i(R=>R+1)):a({correct:f,wrong:y})},p=s?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-slate-400 font-bold text-xl mb-4",children:["#",E]}),e.jsx("h2",{className:"text-4xl font-bold text-slate-800 mb-6 tracking-tight leading-tight text-center",children:g.definition})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-slate-400 font-bold text-xl mb-4",children:["#",E]}),e.jsx("h2",{className:"text-5xl font-black text-slate-800 mb-6 tracking-tight leading-tight text-center",children:g.term})]}),A=s?e.jsxs("div",{className:"animate-fade-in-up text-center",children:[e.jsx("div",{className:"h-px w-12 bg-slate-200 mx-auto mb-6"}),e.jsx("p",{className:"text-3xl font-black text-indigo-600",children:g.term})]}):e.jsxs("div",{className:"animate-fade-in-up text-center",children:[e.jsx("div",{className:"h-px w-12 bg-slate-200 mx-auto mb-6"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:g.definition}),g.mnemonic&&e.jsxs("p",{className:"text-slate-500 mt-2 text-sm",children:['"',g.mnemonic,'"']})]});return o==="ready"?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"mb-6 bg-indigo-100 p-6 rounded-full text-indigo-600 animate-bounce",children:e.jsx(bt,{size:48})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"3ì´ˆ íšŒìƒ í…ŒìŠ¤íŠ¸"}),e.jsx("p",{className:"text-slate-500 mb-2",children:s?"ëœ»ì„ ë³´ê³  3ì´ˆ ì•ˆì— ì˜ë‹¨ì–´ë¥¼ ë– ì˜¬ë¦¬ì„¸ìš”!":"ì˜ë‹¨ì–´ë¥¼ ë³´ê³  3ì´ˆ ì•ˆì— ëœ»ì„ ë– ì˜¬ë¦¬ì„¸ìš”!"}),e.jsx("button",{onClick:()=>{ge.playClick(),x("playing")},className:"w-full mt-6 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-indigo-700 transition",children:"START!"})]}):e.jsxs("div",{className:"flex flex-col h-full pt-10 pb-6 px-6 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{className:"text-slate-400 font-medium text-sm",children:[n+1," / ",t.length]}),e.jsxs("div",{className:`flex items-center gap-2 font-mono font-bold text-xl ${c<=1?"text-red-500":"text-slate-700"}`,children:[e.jsx(bt,{size:20})," ",c,"s"]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"w-full px-4",children:[p,o==="revealed"&&A]})}),e.jsx("div",{className:"mt-10 grid grid-cols-2 gap-4",children:o==="playing"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>U(!1),className:"bg-slate-100 text-slate-600 py-4 rounded-2xl font-bold hover:bg-slate-200 transition active:scale-95",children:"ëª¨ë¥´ê² ì–´ìš”"}),e.jsx("button",{onClick:()=>U(!0),className:"bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-lg hover:bg-indigo-700 transition active:scale-95",children:"ì•Œì•„ìš”!"})]}):e.jsxs("button",{onClick:I,className:"col-span-2 bg-slate-900 text-white py-4 rounded-2xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:["ì˜¤ë‹µ í™•ì¸í•˜ê³  ê³„ì†í•˜ê¸° ",e.jsx(ps,{size:18})]})})]})},Rt=10,Sr=()=>{const[t,a]=m.useState([]),[s,r]=m.useState(0),[n,i]=m.useState(X.HOME),[c,d]=m.useState(null),[o,x]=m.useState([]),[f,h]=m.useState(!1),y=p=>{const A=[];for(let R=0;R<p.length;R+=Rt)A.push({id:R,words:p.slice(R,R+Rt),isUnlocked:R===0});a(A),r(0),i(X.STUDY)},j=()=>{if(o.length===0)return;const p={id:999,words:[...o],isUnlocked:!0};a([p]),r(0),i(X.WRONG_REVIEW)},k=()=>{i(X.TEST)},g=p=>{d(p),x(A=>{const R=[...A,...p.wrong];return Array.from(new Map(R.map(O=>[O.id,O])).values())}),(n===X.WRONG_REVIEW||n===X.TEST)&&p.correct.length>0&&x(A=>A.filter(R=>!p.correct.some(O=>O.id===R.id))),ge.playSuccess(),i(X.RESULT)},E=()=>{const p=s+1;if(p<t.length){const A=[...t];A[p].isUnlocked=!0,a(A),r(p),d(null),i(X.STUDY)}else alert("ëª¨ë“  ë‹¨ì–´ í•™ìŠµì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! í›Œë¥­í•´ìš”!"),i(X.HOME)},H=()=>{if(c&&c.wrong.length>0){const p={id:(I==null?void 0:I.id)||0,words:c.wrong,isUnlocked:!0};a([p]),r(0),ge.playClick(),i(X.STUDY)}},U=()=>{confirm("í™ˆìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ìž¬ ì§„í–‰ ìƒí™©ì´ ì´ˆê¸°í™”ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.")&&i(X.HOME)},I=t[s],S=(I==null?void 0:I.id)===999?1:((I==null?void 0:I.id)||0)+1;return e.jsx(Ee,{children:e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"w-full max-w-lg h-screen md:h-[850px] bg-white md:rounded-[2.5rem] shadow-2xl overflow-hidden relative flex flex-col",children:[n!==X.HOME&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-md z-10 p-4 flex justify-between items-center border-b border-slate-100",children:[e.jsx("button",{onClick:U,className:"p-2 text-slate-400 hover:text-slate-600",children:e.jsx(gs,{size:20})}),e.jsx("span",{className:"font-bold text-indigo-600 flex items-center gap-1",children:n===X.WRONG_REVIEW?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{size:18})," PRISON BREAK"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:18})," SET ",s+1]})}),e.jsx("div",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:n===X.STUDY||n===X.WRONG_REVIEW?"LEARNING":n===X.TEST?"TESTING":"RESULT"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n===X.HOME&&e.jsx(jr,{onWordsLoaded:y,onStartWrongReview:j,wrongWordsCount:o.length,isReverse:f,onToggleReverse:()=>h(!f)}),(n===X.STUDY||n===X.WRONG_REVIEW)&&I&&e.jsx(vr,{words:I.words,onComplete:k,isReverse:f,startIndex:S}),n===X.TEST&&I&&e.jsx(Nr,{words:I.words,onFinish:g,isReverse:f,startIndex:S}),n===X.RESULT&&c&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"bg-yellow-100 p-6 rounded-full text-yellow-500 mb-6 animate-bounce",children:e.jsx($t,{size:64})}),e.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-2",children:"í•™ìŠµ ì™„ë£Œ!"}),e.jsxs("p",{className:"text-slate-500 mb-8",children:[c.correct.length,"ê°œ ê¸°ì–µí•¨ / ",c.wrong.length,"ê°œ ë†“ì¹¨"]}),e.jsxs("div",{className:"w-full space-y-3",children:[c.wrong.length>0?e.jsxs("button",{onClick:H,className:"w-full py-4 bg-red-50 text-red-600 rounded-2xl font-bold text-lg hover:bg-red-100 transition flex items-center justify-center gap-2",children:[e.jsx(bs,{size:20})," í‹€ë¦° ë‹¨ì–´ ë°”ë¡œ ìž¬ì‹œí—˜"]}):e.jsx("div",{className:"text-indigo-600 font-bold py-2",children:"ì™„ë²½í•´ìš”! ìŠ¤íŒŒí¬ê°€ íŠ€ì—ˆë„¤ìš”! ðŸŽ‰"}),n!==X.WRONG_REVIEW&&s<t.length-1&&e.jsxs("button",{onClick:E,className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-slate-800 transition",children:["ë‹¤ìŒ ì„¸íŠ¸ ì—´ê¸° (",s+2," SET)"]}),e.jsx("button",{onClick:()=>i(X.HOME),className:"w-full py-4 text-slate-400 font-bold hover:text-slate-600 transition",children:"í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°"})]})]})]})]})})})},fe=new(window.AudioContext||window.webkitAudioContext),Ze=()=>{fe.state==="suspended"&&fe.resume();const t=fe.createOscillator(),a=fe.createGain();t.type="sine",t.frequency.setValueAtTime(800,fe.currentTime),t.frequency.exponentialRampToValueAtTime(400,fe.currentTime+.1),a.gain.setValueAtTime(.1,fe.currentTime),a.gain.exponentialRampToValueAtTime(.01,fe.currentTime+.1),t.connect(a),a.connect(fe.destination),t.start(),t.stop(fe.currentTime+.1)},kr=()=>{fe.state==="suspended"&&fe.resume();const t=fe.createOscillator(),a=fe.createGain();t.type="triangle",t.frequency.setValueAtTime(300,fe.currentTime),a.gain.setValueAtTime(.05,fe.currentTime),a.gain.linearRampToValueAtTime(0,fe.currentTime+.15),t.connect(a),a.connect(fe.destination),t.start(),t.stop(fe.currentTime+.15)},Er=t=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(t);a.lang="en-US",a.rate=.9,window.speechSynthesis.speak(a)}},Tr=({onWordsLoaded:t})=>{const a=m.useCallback(s=>{var i;Ze();const r=(i=s.target.files)==null?void 0:i[0];if(!r)return;const n=new FileReader;n.onload=c=>{var f;let d=(f=c.target)==null?void 0:f.result;d.charCodeAt(0)===65279&&(d=d.slice(1));const o=d.split(/\r?\n/),x=[];o.forEach((h,y)=>{if(!h.trim())return;const j=h.replace(/"/g,"");let k=[];j.includes("	")?k=j.split("	"):j.includes(",")?k=j.split(","):k=j.split(";"),k=k.map(I=>I.trim());let g="",E="";const H=/^[0-9]+[\.]?$/.test(k[0]);k.length>=3&&H?(g=k[1],E=k[2]):k.length>=2&&(g=k[0],E=k[1]);const U=["word","term","english","no","number","ë‹¨ì–´","ìˆœì„œ","ëœ»","ì˜ë¯¸","meaning"].includes(g.toLowerCase());g&&E&&!U&&x.push({id:`word-${Date.now()}-${y}`,term:g,definition:E,isMemorized:!1,status:"new"})}),x.length>0?t(x):alert(`ë‹¨ì–´ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
(ì˜ˆì‹œ: apple, ì‚¬ê³¼  ë˜ëŠ”  1, apple, ì‚¬ê³¼)`)},n.readAsText(r)},[t]);return e.jsx("div",{className:"w-full max-w-md p-8 bg-white rounded-3xl shadow-sm border-2 border-dashed border-blue-200 text-center hover:border-blue-400 transition-colors cursor-pointer group",children:e.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-full mb-4 group-hover:bg-blue-100 transition-colors",children:e.jsx(Pt,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"ë‹¨ì–´ìž¥ íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"CSV, ì—‘ì…€(csvì €ìž¥) íŒŒì¼"}),e.jsx("input",{type:"file",accept:".csv, .txt",onChange:a,className:"hidden"}),e.jsxs("div",{className:"flex flex-col gap-2 text-xs text-slate-400 bg-slate-50 px-4 py-3 rounded-xl text-left w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-slate-500 mb-1",children:[e.jsx(ys,{size:12}),e.jsx("span",{children:"ì§€ì› í˜•ì‹"})]}),e.jsx("div",{children:"1. apple, ì‚¬ê³¼"}),e.jsx("div",{children:"2. 1, apple, ì‚¬ê³¼ (ë²ˆí˜¸ ìžë™ ì œì™¸)"})]})]})})},Cr=({block:t,onStart:a})=>{const s=t.status==="locked",r=t.status==="completed",n=()=>{s||(Ze(),a(t.id))};return e.jsxs("div",{onClick:n,className:`
        relative overflow-hidden rounded-2xl p-6 transition-all duration-300
        ${s?"bg-slate-100 opacity-70 cursor-not-allowed":"bg-white cursor-pointer hover:shadow-lg hover:-translate-y-1"}
        ${t.status==="in-progress"?"ring-2 ring-blue-400":""}
      `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`
          w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold
          ${r?"bg-green-100 text-green-600":"bg-blue-50 text-blue-600"}
        `,children:t.id}),s&&e.jsx(ws,{className:"text-slate-400",size:20}),r&&e.jsx(js,{className:"text-green-500",size:24}),!s&&!r&&e.jsx(ht,{className:"text-blue-400",size:24})]}),e.jsxs("h3",{className:"text-slate-800 font-bold text-lg mb-1",children:["Block ",t.id]}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[t.words.length," Words"]}),t.status==="in-progress"&&e.jsx("div",{className:"mt-4 h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-400 w-1/3"})})]})},Ar=({block:t,onComplete:a,onBack:s})=>{const[r,n]=m.useState(0),[i,c]=m.useState(!1),d=t.words[r],o=(r+1)/t.words.length*100;m.useEffect(()=>{c(!1)},[r]);const x=()=>{kr(),c(!i)},f=y=>{y==null||y.stopPropagation(),Ze(),r<t.words.length-1?n(j=>j+1):a()},h=y=>{y.stopPropagation(),Ze(),Er(d.term)};return e.jsxs("div",{className:"flex flex-col items-center w-full max-w-md mx-auto h-full",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-6 px-4",children:[e.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 p-2",children:e.jsx(vs,{size:24})}),e.jsx("div",{className:"flex-1 mx-4 h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-out",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-slate-500 w-10 text-right",children:[r+1,"/",t.words.length]})]}),e.jsx("div",{className:"w-full px-4 mb-8 perspective-1000 flex-1 flex items-center justify-center",children:e.jsx("div",{onClick:x,className:`
            relative w-full aspect-[4/5] max-h-[500px] cursor-pointer card-flip
            ${i?"flipped":""}
          `,children:e.jsxs("div",{className:"card-inner w-full h-full relative shadow-xl rounded-3xl transition-all duration-500",children:[e.jsxs("div",{className:"card-front absolute w-full h-full bg-white rounded-3xl flex flex-col items-center justify-center p-8 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-bold text-blue-500 uppercase tracking-wider mb-8",children:"English Term"}),e.jsx("h2",{className:`font-bold text-slate-800 text-center mb-8 break-words w-full leading-tight ${d.term.length>12?"text-3xl":"text-4xl"}`,children:d.term}),e.jsx("button",{onClick:h,className:"w-16 h-16 rounded-full bg-blue-50 text-blue-500 hover:bg-blue-100 hover:scale-110 transition-all flex items-center justify-center shadow-sm",children:e.jsx(Ke,{size:32})}),e.jsxs("div",{className:"absolute bottom-8 text-slate-300 text-sm flex items-center gap-2",children:[e.jsx(Ht,{size:14}),e.jsx("span",{children:"Tap to flip"})]})]}),e.jsxs("div",{className:"card-back absolute w-full h-full bg-slate-800 rounded-3xl flex flex-col items-center justify-center p-8 text-white border border-slate-700",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-6",children:"Definition"}),e.jsx("h2",{className:"text-3xl font-bold text-center break-words leading-relaxed",children:d.definition})]})]})})}),e.jsx("div",{className:"w-full px-4 mb-6",children:e.jsxs("button",{onClick:f,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-200 active:scale-95 transition-all flex items-center justify-center gap-2",children:[e.jsx("span",{children:r===t.words.length-1?"Finish Block":"Next Word"}),e.jsx(Ns,{size:20})]})})]})},dt=10,Mr=t=>{const a=[];for(let s=0;s<t.length;s+=dt)a.push({id:Math.floor(s/dt)+1,words:t.slice(s,s+dt),status:s===0?"ready":"locked"});return a},Ir=()=>{const[t,a]=m.useState([]),[s,r]=m.useState([]),[n,i]=m.useState(X.HOME),[c,d]=m.useState(null),o=h=>{a(h);const y=Mr(h);r(y)},x=h=>{r(y=>y.map(j=>j.id===h?{...j,status:"in-progress"}:j)),d(h),i(X.STUDY)},f=()=>{c&&(r(h=>h.map(y=>y.id===c?{...y,status:"completed"}:y.id===c+1?{...y,status:"ready"}:y)),i(X.HOME),d(null))};return e.jsx(Ee,{children:e.jsxs("div",{className:"min-h-screen flex flex-col max-w-md mx-auto bg-[#F0F4F8] relative shadow-2xl",children:[e.jsxs("header",{className:"bg-white/80 backdrop-blur-md sticky top-0 z-10 px-6 py-4 flex justify-between items-center border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Ss,{size:20})}),e.jsx("h1",{className:"font-bold text-lg tracking-tight",children:"TEN BLOCK"})]}),e.jsx("button",{className:"text-slate-400 hover:text-slate-600",children:e.jsx(Ot,{size:20})})]}),e.jsxs("main",{className:"flex-1 p-6 flex flex-col",children:[n===X.HOME&&e.jsx(e.Fragment,{children:t.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"ì‹œìž‘í•´ë³¼ê¹Œìš”?"}),e.jsx("p",{className:"text-slate-500",children:"10ê°œì”© ìª¼ê°œì„œ ì™¸ìš°ë©´ ê¸ˆë°© ì™¸ì›Œìš”!"})]}),e.jsx(Tr,{onWordsLoaded:o})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"ë‚˜ì˜ ë‹¨ì–´ìž¥"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[s.filter(h=>h.status==="completed").length," / ",s.length," Blocks ì™„ë£Œ"]})]}),e.jsx("button",{onClick:()=>a([]),className:"text-xs text-blue-500 underline",children:"íŒŒì¼ ë³€ê²½"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(h=>e.jsx(Cr,{block:h,onStart:x},h.id))})]})}),n===X.STUDY&&c&&e.jsx(Ar,{block:s.find(h=>h.id===c),onComplete:f,onBack:()=>i(X.HOME)})]})]})})},Yt=[{name:"USA",code:"US"},{name:"China",code:"CN"},{name:"India",code:"IN"},{name:"Brazil",code:"BR"},{name:"Russia",code:"RU"},{name:"Japan",code:"JP"},{name:"Germany",code:"DE"},{name:"United Kingdom",code:"GB"},{name:"France",code:"FR"},{name:"South Korea",code:"KR"},{name:"Canada",code:"CA"},{name:"Australia",code:"AU"}],Rr=1440*60*1e3,ft=[{id:"slow",name:"Standard",clicksPerSecond:5,price:"$0.99",intervalMs:200},{id:"fast",name:"Supercharged",clicksPerSecond:10,price:"$1.99",intervalMs:100},{id:"ludicrous",name:"Ludicrous Speed",clicksPerSecond:20,price:"$4.99",intervalMs:50}],Lr=10,Wt=523,Lt={USA:{button:"bg-blue-600 hover:bg-blue-500",text:"text-white"},China:{button:"bg-red-600 hover:bg-red-500",text:"text-yellow-300"},India:{button:"bg-orange-500 hover:bg-orange-400",text:"text-white"},Brazil:{button:"bg-green-600 hover:bg-green-500",text:"text-yellow-300"},Russia:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Japan:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Germany:{button:"bg-yellow-500 hover:bg-yellow-400",text:"text-black"},"United Kingdom":{button:"bg-blue-700 hover:bg-blue-600",text:"text-white"},France:{button:"bg-blue-700 hover:bg-blue-600",text:"text-white"},"South Korea":{button:"bg-blue-500 hover:bg-blue-400",text:"text-red-500"},Canada:{button:"bg-red-600 hover:bg-red-500",text:"text-white"},Australia:{button:"bg-blue-800 hover:bg-blue-700",text:"text-white"},default:{button:"bg-yellow-500 hover:bg-yellow-400",text:"text-gray-900"}},Qe=t=>{const a=t.toUpperCase().split("").map(s=>127397+s.charCodeAt(0));return String.fromCodePoint(...a)},zt=t=>({USA:"US",China:"CN",India:"IN",Brazil:"BR",Russia:"RU",Japan:"JP",Germany:"DE","United Kingdom":"GB",France:"FR","South Korea":"KR",Canada:"CA",Australia:"AU"})[t]||"AQ",_r=({onSelectCountry:t})=>{const[a,s]=m.useState(null),r=()=>{a&&t(a)};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-950 p-6 text-center overflow-hidden",children:[e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 mb-4 tracking-tighter uppercase",children:"Global Click War"}),e.jsx("p",{className:"text-xl text-gray-400 mb-12 max-w-lg mx-auto font-medium",children:"Represent your nation in the ultimate worldwide tapping competition. Choose wisely â€” your allegiance is permanent."})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 w-full max-w-5xl animate-fade-in-delayed",children:Yt.map(n=>e.jsxs("button",{onClick:()=>s(n),className:`flex flex-col items-center justify-center p-6 rounded-2xl transition-all duration-300 transform hover:scale-105 group border-2 ${(a==null?void 0:a.code)===n.code?"bg-yellow-500 border-yellow-400 text-gray-900 shadow-[0_0_30px_rgba(234,179,8,0.3)] ring-4 ring-yellow-400/20":"bg-gray-900/50 border-gray-800 text-white hover:bg-gray-800 hover:border-gray-700"}`,children:[e.jsx("span",{className:"text-6xl mb-3 group-hover:scale-110 transition-transform",children:Qe(n.code)}),e.jsx("span",{className:"font-black text-xs uppercase tracking-widest",children:n.name})]},n.code))}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-gray-900 p-10 rounded-[2.5rem] shadow-2xl border border-gray-800 text-center max-w-md w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-orange-500"}),e.jsx("div",{className:"text-9xl mb-6 drop-shadow-2xl",children:Qe(a.code)}),e.jsxs("h2",{className:"text-3xl font-black mb-4 text-white uppercase tracking-tight",children:["Enlist for ",a.name,"?"]}),e.jsxs("p",{className:"text-gray-400 mb-8 leading-relaxed font-medium",children:["You are about to represent ",e.jsx("span",{className:"text-yellow-400 font-bold",children:a.name})," in the global arena. This decision is final. Are you ready to tap for glory?"]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:r,className:"w-full py-5 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 font-black rounded-2xl hover:from-yellow-300 hover:to-orange-400 transition-all shadow-xl shadow-yellow-500/20 uppercase tracking-[0.2em] text-sm",children:"Enter the War Room"}),e.jsx("button",{onClick:()=>s(null),className:"w-full py-4 bg-gray-800/50 text-gray-400 font-bold rounded-2xl hover:bg-gray-800 hover:text-white transition-colors uppercase tracking-widest text-[10px]",children:"Choose another nation"})]})]})}),e.jsx("style",{children:`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in-up { animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fade-in-delayed { opacity: 0; animation: fade-in-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards; }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
      `})]})},Kt=({leaderboard:t,userCountry:a})=>{const s=Object.entries(t).sort(([,r],[,n])=>n-r);return e.jsxs("div",{className:"w-full max-w-md bg-gray-900/60 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-800 flex flex-col h-full max-h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[e.jsx("h2",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 uppercase tracking-widest",children:"Global Ranks"}),e.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-tighter",children:"Live Updates"})]}),e.jsx("div",{className:"space-y-2 overflow-y-auto pr-2 custom-scrollbar flex-grow",children:s.map(([r,n],i)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl transition-all duration-300 border ${r===a?"bg-yellow-500 border-yellow-400 text-gray-900 font-bold scale-[1.03] shadow-xl shadow-yellow-500/20":"bg-gray-800/40 border-gray-800 hover:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`text-xs font-black w-6 ${r===a?"text-gray-900/50":"text-gray-600"}`,children:["#",i+1]}),e.jsx("span",{className:"text-3xl drop-shadow-sm",children:Qe(zt(r))}),e.jsx("span",{className:"text-sm font-black uppercase tracking-tight truncate max-w-[100px]",children:r})]}),e.jsx("span",{className:"text-lg font-black font-mono tracking-tighter",children:Math.floor(n).toLocaleString()})]},r))}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #374151; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #4b5563; }
      `})]})},Jt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Gr=({onPurchase:t,onClose:a,currentTier:s})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-2xl text-center max-w-lg w-full relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors","aria-label":"Close store",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(Jt,{className:"w-8 h-8 text-yellow-400 mr-2"}),e.jsx("h2",{className:"text-3xl font-bold text-yellow-400",children:"Auto-Click Upgrades"})]}),e.jsx("p",{className:"text-gray-300 mb-8",children:"Purchase an auto-clicker to boost your nation's score automatically!"}),e.jsx("div",{className:"space-y-4",children:ft.map(r=>e.jsxs("div",{className:`p-4 rounded-lg flex flex-col sm:flex-row items-center justify-between transition-all ${s===r.id?"bg-green-600 border-2 border-green-400":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsxs("div",{className:"text-left mb-4 sm:mb-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:r.name}),e.jsxs("p",{className:"text-gray-300",children:[r.clicksPerSecond," clicks / second"]}),s===r.id&&e.jsx("p",{className:"text-sm font-bold text-white mt-1",children:"ACTIVE"})]}),e.jsx("button",{onClick:()=>t(r.id),disabled:s===r.id,className:"w-full sm:w-auto px-6 py-3 bg-yellow-500 text-gray-900 font-bold rounded-md hover:bg-yellow-400 transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed disabled:text-gray-400",children:r.price})]},r.id))})]})}),Or=()=>{const[t,a]=m.useState(!0);return t?e.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-400 via-yellow-500 to-orange-500 p-3 text-center text-gray-900 font-bold relative shadow-lg",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold text-lg",children:"SPECIAL EVENT!"})," Achieve over 100,000 clicks for an exclusive reward!"]}),e.jsx("button",{onClick:()=>a(!1),className:"absolute top-1/2 right-4 -translate-y-1/2 text-gray-800 hover:text-black","aria-label":"Dismiss promotional message",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):null},Dr=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Pr=({x:t,y:a,id:s,value:r})=>e.jsxs("div",{className:"absolute text-yellow-400 font-black text-5xl pointer-events-none z-50 drop-shadow-[0_4px_8px_rgba(0,0,0,0.6)]",style:{left:`${t}px`,top:`${a}px`,transform:"translate(-50%, -50%)",animation:"click-float 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards"},children:["+",r]},s),Ur=({userCountry:t,userClicks:a,leaderboard:s,timeLeft:r,onIncrement:n,autoClickTier:i,onPurchaseTier:c,isGodModeActive:d,onToggleGodMode:o,isAutoClickEnabled:x,onToggleAutoClick:f})=>{const[h,y]=m.useState(!1),[j,k]=m.useState([]),g=m.useRef(null),E=Math.min(Wt,Math.floor(Math.sqrt(a/10))+1);m.useEffect(()=>{if(g.current&&(clearInterval(g.current),g.current=null),x){if(d)g.current=setInterval(()=>{n()},Lr);else if(i){const A=ft.find(R=>R.id===i);A&&(g.current=setInterval(()=>{n()},A.intervalMs))}}return()=>{g.current&&clearInterval(g.current)}},[i,n,d,x]);const H=A=>{n();const R=A.currentTarget.getBoundingClientRect(),O=A.clientX-R.left,P=A.clientY-R.top,N=1+(E-1)*.05,b={x:O,y:P,id:Date.now(),value:N.toFixed(2)};k(C=>[...C,b]),setTimeout(()=>{k(C=>C.filter($=>$.id!==b.id))},800)},U=Object.values(s).reduce((A,R)=>A+R,0),I=s[t]||0,S=i?ft.find(A=>A.id===i):null,p=Lt[t]||Lt.default;return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-950 text-white selection:bg-yellow-500 selection:text-gray-900",children:[e.jsx(Or,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch justify-center flex-grow p-4 lg:p-12 gap-12 max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col items-center w-full lg:w-3/5 space-y-10",children:[e.jsxs("header",{className:"text-center animate-fade-in space-y-4",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 tracking-tighter uppercase leading-none",children:"Global Click War"}),e.jsxs("div",{className:"inline-flex items-center gap-4 bg-gray-900 border border-gray-800 py-3 px-8 rounded-[2rem] shadow-2xl",children:[e.jsx("span",{className:"text-5xl drop-shadow-xl",children:Qe(zt(t))}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.2em] mb-0.5",children:"Your Nation"}),e.jsx("p",{className:"text-2xl font-black uppercase tracking-tight leading-none",children:t})]})]})]}),e.jsxs("div",{className:"w-full max-w-sm bg-gray-900/50 backdrop-blur p-6 rounded-[2rem] border border-gray-800 shadow-inner text-center",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] mb-2",children:"Operation Window Ends In"}),e.jsxs("div",{className:"text-4xl font-mono font-black text-yellow-400 tabular-nums tracking-tight",children:[e.jsxs("span",{children:[String(r.days).padStart(2,"0"),"d "]}),e.jsxs("span",{children:[String(r.hours).padStart(2,"0"),"h "]}),e.jsxs("span",{children:[String(r.minutes).padStart(2,"0"),"m "]}),e.jsxs("span",{children:[String(r.seconds).padStart(2,"0"),"s"]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-10 bg-gradient-to-br from-yellow-500 via-orange-500 to-red-600 rounded-full opacity-20 blur-3xl group-hover:opacity-40 transition-opacity animate-pulse"}),e.jsxs("button",{onClick:H,className:`relative w-72 h-72 md:w-96 md:h-96 rounded-full flex items-center justify-center font-black text-6xl shadow-2xl transform active:scale-90 active:rotate-2 transition-all duration-75 select-none overflow-hidden border-[12px] border-gray-950/80 ${p.button} ${p.text}`,children:["TAP",j.map(A=>e.jsx(Pr,{...A},A.id))]})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 font-black uppercase tracking-widest text-[10px]",children:"Your Contribution"}),e.jsx("div",{className:"px-3 py-1 bg-yellow-500/10 border border-yellow-500/30 rounded-full",children:e.jsxs("span",{className:"text-[10px] text-yellow-500 font-black",children:["RANK LVL ",E]})})]}),e.jsx("p",{className:"text-7xl font-black font-mono tracking-tighter drop-shadow-lg text-white",children:Math.floor(a).toLocaleString()})]}),e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-md",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[e.jsxs("button",{onClick:()=>y(!0),className:"flex flex-col items-center justify-center gap-2 p-6 bg-gray-900 rounded-3xl hover:bg-gray-800 transition-all border border-gray-800 hover:border-yellow-500/50 group",children:[e.jsx(Jt,{className:"w-8 h-8 text-yellow-500 group-hover:scale-125 transition-transform"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Armory Store"})]}),e.jsxs("button",{onClick:o,className:`flex flex-col items-center justify-center gap-2 p-6 rounded-3xl transition-all border ${d?"bg-purple-600/20 border-purple-500 text-purple-400 shadow-[0_0_30px_rgba(147,51,234,0.3)]":"bg-gray-900 border-gray-800 hover:border-purple-500/50"}`,children:[e.jsx(Dr,{className:`w-8 h-8 ${d?"fill-purple-400":"text-gray-600"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"God Mode"})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full px-6 py-4 bg-gray-900 border border-gray-800 rounded-3xl shadow-xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest",children:"Auto-Tapper Status"}),e.jsx("span",{className:`text-[11px] font-black uppercase ${x?"text-green-500":"text-gray-500"}`,children:x?d?"Overdrive (100/s)":`${(S==null?void 0:S.name)||"Standard"} Active`:"Manual Only"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:f,className:"sr-only peer"}),e.jsx("div",{className:"w-16 h-8 bg-gray-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-600 shadow-inner"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center w-full lg:w-2/5 space-y-8",children:[e.jsxs("div",{className:"w-full bg-gray-900/50 border border-gray-800 p-8 rounded-[2.5rem] shadow-2xl space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]",children:[t," National Score"]}),e.jsx("p",{className:"text-5xl font-black font-mono text-white tabular-nums tracking-tighter",children:Math.floor(I).toLocaleString()}),e.jsx("div",{className:"w-full h-3 bg-gray-950 rounded-full overflow-hidden border border-gray-800",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-500 via-orange-500 to-red-600 transition-all duration-1000 shadow-[0_0_15px_rgba(234,179,8,0.5)]",style:{width:`${Math.min(100,I/(U||1)*1e3)}%`}})})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-800 space-y-1",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]",children:"Total Global Impact"}),e.jsx("p",{className:"text-4xl font-black font-mono text-white/30 tabular-nums tracking-tighter",children:Math.floor(U).toLocaleString()})]})]}),e.jsx(Kt,{leaderboard:s,userCountry:t})]}),e.jsx("style",{children:`
          @keyframes click-float {
            0% { transform: translate(-50%, -50%) scale(0.6); opacity: 0; }
            15% { opacity: 1; transform: translate(-50%, -100%) scale(1.3); }
            100% { transform: translate(-50%, -250%) scale(1.6); opacity: 0; }
          }
          @keyframes fade-in {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in { animation: fade-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        `})]}),h&&e.jsx(Gr,{currentTier:i,onPurchase:c,onClose:()=>y(!1)})]})},Hr=({className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),e.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),e.jsx("path",{d:"M4 22h16"}),e.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),e.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),e.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),$r=t=>{const r=({USA:"US",China:"CN",India:"IN",Brazil:"BR",Russia:"RU",Japan:"JP",Germany:"DE","United Kingdom":"GB",France:"FR","South Korea":"KR",Canada:"CA",Australia:"AU"}[t]||"AQ").toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...r)},Br=({leaderboard:t,userCountry:a})=>{const s=Object.entries(t).sort(([,n],[,i])=>i-n),r=s.length>0?s[0]:null;return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 p-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-yellow-400 mb-4",children:"The War is Over!"}),r&&e.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-800 rounded-lg",children:[e.jsx(Hr,{className:"w-24 h-24 text-yellow-400 mb-4"}),e.jsx("h2",{className:"text-3xl text-white",children:"The winner is"}),e.jsxs("p",{className:"text-5xl font-bold text-yellow-400 mt-2",children:[$r(r[0])," ",r[0]]}),e.jsxs("p",{className:"text-2xl text-gray-300 mt-2 font-mono",children:["with ",r[1].toLocaleString()," clicks!"]})]})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:"Final Standings"}),e.jsx(Kt,{leaderboard:t,userCountry:a})]})]})},Fr=()=>{const[t,a]=m.useState(null),[s,r]=m.useState(0),[n,i]=m.useState({}),[c,d]=m.useState(null),[o,x]=m.useState({days:0,hours:0,minutes:0,seconds:0}),[f,h]=m.useState(!1),[y,j]=m.useState(!0),[k,g]=m.useState(null),[E,H]=m.useState(!1),[U,I]=m.useState(!0),S=m.useCallback(N=>{const b=N-new Date().getTime();return b>0?{days:Math.floor(b/(1e3*60*60*24)),hours:Math.floor(b/(1e3*60*60)%24),minutes:Math.floor(b/1e3/60%60),seconds:Math.floor(b/1e3%60)}:null},[]);m.useEffect(()=>{try{const N=localStorage.getItem("popcat_user_country"),b=localStorage.getItem("popcat_user_clicks"),C=localStorage.getItem("popcat_global_leaderboard");let $=localStorage.getItem("popcat_event_end_time");const q=localStorage.getItem("popcat_autoclick_tier"),Q=localStorage.getItem("popcat_god_mode"),de=localStorage.getItem("popcat_autoclick_enabled");N&&a(JSON.parse(N)),b&&r(JSON.parse(b)),q&&g(JSON.parse(q)),Q&&H(JSON.parse(Q)),de&&I(JSON.parse(de));let Ie=C?JSON.parse(C):{};if(Yt.forEach(_=>{Ie[_.name]===void 0&&(Ie[_.name]=0)}),i(Ie),!$){const _=new Date().getTime()+Rr;$=String(_),localStorage.setItem("popcat_event_end_time",$)}const be=parseInt($,10);if(d(be),new Date().getTime()>=be)h(!0);else{const _=S(be);_&&x(_)}}catch(N){console.warn("Storage sync failed, using defaults",N)}finally{setTimeout(()=>j(!1),800)}},[S]),m.useEffect(()=>{if(!c||f)return;const N=setInterval(()=>{const b=S(c);b?x(b):(h(!0),clearInterval(N))},1e3);return()=>clearInterval(N)},[c,f,S]);const p=N=>{a(N.name),localStorage.setItem("popcat_user_country",JSON.stringify(N.name)),i(b=>{const C={...b};return C[N.name]===void 0&&(C[N.name]=0),localStorage.setItem("popcat_global_leaderboard",JSON.stringify(C)),C})},A=m.useCallback(()=>{f||!t||r(N=>{const C=1+(Math.min(Wt,Math.floor(Math.sqrt(N/10))+1)-1)*.05,$=N+C;return i(q=>{const Q={...q,[t]:(q[t]||0)+C};return localStorage.setItem("popcat_global_leaderboard",JSON.stringify(Q)),Q}),localStorage.setItem("popcat_user_clicks",JSON.stringify($)),$})},[t,f]),R=N=>{g(N),localStorage.setItem("popcat_autoclick_tier",JSON.stringify(N))},O=()=>{const N=!E;H(N),localStorage.setItem("popcat_god_mode",JSON.stringify(N))},P=()=>{const N=!U;I(N),localStorage.setItem("popcat_autoclick_enabled",JSON.stringify(N))};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-950 text-white p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-yellow-500/10 border-t-yellow-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})]}),e.jsx("p",{className:"mt-8 text-sm font-black tracking-[0.4em] uppercase text-gray-400 animate-pulse",children:"Syncing Intel..."})]}):f&&t?e.jsx(Br,{leaderboard:n,userCountry:t}):t?e.jsx(Ee,{children:e.jsx(Ur,{userCountry:t,userClicks:s,leaderboard:n,timeLeft:o,onIncrement:A,autoClickTier:k,onPurchaseTier:R,isGodModeActive:E,onToggleGodMode:O,isAutoClickEnabled:U,onToggleAutoClick:P})}):e.jsx(_r,{onSelectCountry:p})},qr=({isOpen:t,onClose:a,onAdd:s})=>{const[r,n]=m.useState(""),[i,c]=m.useState(We.OTHER),[d,o]=m.useState(""),[x,f]=m.useState("");if(!t)return null;const h=y=>{y.preventDefault(),r.trim()&&(s({name:r,relationship:i,birthday:d,notes:x}),n(""),c(We.OTHER),o(""),f(""),a())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl transform transition-all",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ìƒˆ ì¹œêµ¬ ë“±ë¡"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"fas fa-times text-xl"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì´ë¦„ *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"ì¹œêµ¬ ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”",value:r,onChange:y=>n(y.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê´€ê³„"}),e.jsx("select",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:i,onChange:y=>c(y.target.value),children:Object.values(We).map(y=>e.jsx("option",{value:y,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìƒì¼ (ì„ íƒ)"}),e.jsx("input",{type:"date",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:y=>o(y.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"íŠ¹ì§• ë° ë©”ëª¨"}),e.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none",placeholder:"ì¹œêµ¬ì˜ ì„±ê²©ì´ë‚˜ ì¢‹ì•„í•˜ëŠ” ê²ƒ ë“±ì„ ì ì–´ë³´ì„¸ìš”",value:x,onChange:y=>f(y.target.value)})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:"ì €ìž¥í•˜ê¸°"})]})]})})},Vr=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),Yr=async t=>{const s=await Vr.models.generateContent({model:"gemini-3-flash-preview",contents:`ë‚´ ì¹œêµ¬ ${t.name}ì— ëŒ€í•œ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëª‡ ê°€ì§€ë¥¼ ì œì•ˆí•´ì¤˜.
    ê´€ê³„: ${t.relationship}
    ë©”ëª¨: ${t.notes||"ì—†ìŒ"}
    
    1. ì´ ì¹œêµ¬ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ê·€ì—½ê±°ë‚˜ ìž¬ì¹˜ ìžˆëŠ” ë³„ëª… 3ê°œ
    2. ì´ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ë©´ ì¢‹ì„ ë”°ëœ»í•œ ì•ˆë¶€ ì¸ì‚¬ë§ í•œ ë¬¸ìž¥
    
    JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì¤˜.`,config:{responseMimeType:"application/json",responseSchema:{type:W.OBJECT,properties:{nicknames:{type:W.ARRAY,items:{type:W.STRING},description:"3 unique nicknames in Korean"},message:{type:W.STRING,description:"A friendly greeting message in Korean"}},required:["nicknames","message"]}}});return JSON.parse(s.text.trim())},Wr=({friend:t,onDelete:a})=>{const[s,r]=m.useState(!1),[n,i]=m.useState(null),c=async()=>{r(!0);try{const o=await Yr(t);i(o)}catch(o){console.error("AI Insight Error:",o),alert("AI ì¶”ì²œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{r(!1)}},d=o=>o.charAt(0);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 transition-all hover:shadow-md hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xl",children:d(t.name)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:t.name}),e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-semibold bg-indigo-50 text-indigo-600",children:t.relationship})]})]}),e.jsx("button",{onClick:()=>a(t.id),className:"text-gray-300 hover:text-red-500 transition-colors",children:e.jsx("i",{className:"fas fa-trash-alt"})})]}),t.birthday&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[e.jsx("i",{className:"fas fa-birthday-cake mr-2 text-pink-400"}),t.birthday]}),t.notes&&e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg line-clamp-2 mb-4",children:t.notes}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50",children:n?e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:n.nicknames.map((o,x)=>e.jsxs("span",{className:"bg-amber-50 text-amber-700 text-xs px-2 py-1 rounded-full border border-amber-100",children:["âœ¨ ",o]},x))}),e.jsxs("p",{className:"text-xs text-indigo-700 italic bg-indigo-50 p-2 rounded border border-indigo-100",children:['"',n.message,'"']}),e.jsx("button",{onClick:()=>i(null),className:"text-[10px] text-gray-400 hover:underline",children:"ë‹«ê¸°"})]}):e.jsx("button",{onClick:c,disabled:s,className:`flex items-center justify-center w-full py-2 rounded-lg text-sm font-medium transition-all ${s?"bg-gray-100 text-gray-400":"bg-gradient-to-r from-violet-500 to-indigo-500 text-white hover:from-violet-600 hover:to-indigo-600"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"AIê°€ ìƒê°í•˜ëŠ” ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-magic mr-2"}),"AI ë³„ëª… & ë©”ì‹œì§€ ì¶”ì²œ"]})})})]})},zr=()=>{const[t,a]=m.useState([]),[s,r]=m.useState(!1),[n,i]=m.useState(""),[c,d]=m.useState("ALL");m.useEffect(()=>{const h=localStorage.getItem("friendlink_friends");if(h)try{a(JSON.parse(h))}catch{console.error("Failed to load friends")}},[]),m.useEffect(()=>{localStorage.setItem("friendlink_friends",JSON.stringify(t))},[t]);const o=h=>{const y={...h,id:crypto.randomUUID(),createdAt:Date.now()};a(j=>[y,...j])},x=h=>{confirm("ì´ ì¹œêµ¬ë¥¼ ëª©ë¡ì—ì„œ ì‚­ì œí• ê¹Œìš”?")&&a(y=>y.filter(j=>j.id!==h))},f=m.useMemo(()=>t.filter(h=>{const y=h.name.toLowerCase().includes(n.toLowerCase())||(h.notes||"").toLowerCase().includes(n.toLowerCase()),j=c==="ALL"||h.relationship===c;return y&&j}),[t,n,c]);return e.jsx(Ee,{children:e.jsxs("div",{className:"min-h-screen pb-20 bg-slate-50",children:[e.jsx("header",{className:"bg-white border-b sticky top-0 z-40 backdrop-blur-sm bg-white/80",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:e.jsx("i",{className:"fas fa-user-friends text-xl"})}),e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"FriendLink"})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ì¹œêµ¬ ê²€ìƒ‰...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full border-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all outline-none",value:n,onChange:h=>i(h.target.value)})]})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center overflow-x-auto pb-4 gap-2 no-scrollbar",children:[e.jsx("button",{onClick:()=>d("ALL"),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c==="ALL"?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"ì „ì²´"}),Object.values(We).map(h=>e.jsx("button",{onClick:()=>d(h),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c===h?"bg-indigo-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-100"}`,children:h},h))]}),e.jsxs("div",{className:"mb-6 flex justify-between items-center text-sm text-gray-500",children:[e.jsxs("span",{children:["ì´ ",e.jsxs("strong",{children:[f.length,"ëª…"]}),"ì˜ ì¹œêµ¬"]}),n&&e.jsxs("span",{children:["ê²€ìƒ‰ ê²°ê³¼: ",f.length,"ê±´"]})]}),f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(h=>e.jsx(Wr,{friend:h,onDelete:x},h.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center text-gray-300 mb-4",children:e.jsx("i",{className:"fas fa-users-slash text-3xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"ì¹œêµ¬ê°€ ì•„ì§ ì—†ë‚˜ìš”?"}),e.jsx("p",{className:"text-gray-500 max-w-xs mx-auto mt-2",children:"ìš°ì¸¡ í•˜ë‹¨ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì†Œì¤‘í•œ ì¸ì—°ë“¤ì„ ì €ìž¥í•´ ë³´ì„¸ìš”."})]})]}),e.jsxs("button",{onClick:()=>r(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-indigo-600 text-white rounded-full flex items-center justify-center shadow-xl hover:bg-indigo-700 hover:scale-110 active:scale-95 transition-all z-40 group",children:[e.jsx("i",{className:"fas fa-plus text-xl transition-transform group-hover:rotate-90"}),e.jsx("span",{className:"absolute right-full mr-4 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"ìƒˆ ì¹œêµ¬ ì¶”ê°€"})]}),e.jsx(qr,{isOpen:s,onClose:()=>r(!1),onAdd:o})]})})},Kr=({stage:t,difficulty:a,score:s,lives:r})=>e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto flex justify-between items-center glass p-3 rounded-2xl border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ìŠ¤í…Œì´ì§€"}),e.jsx("span",{className:"text-xl font-bold text-cyan-400 text-glow-cyan",children:t})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ë‚œì´ë„"}),e.jsx("span",{className:`text-[11px] font-bold px-3 py-0.5 rounded-full border ${a===_e.EASY?"border-emerald-500/50 text-emerald-400 bg-emerald-500/10":a===_e.MEDIUM?"border-amber-500/50 text-amber-400 bg-amber-500/10":"border-rose-500/50 text-rose-400 bg-rose-500/10"}`,children:a})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ìƒëª…"}),e.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((n,i)=>e.jsx("i",{className:`fas fa-heart text-[10px] ${i<r?"text-rose-500":"text-slate-700"}`},i))})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold",children:"ì ìˆ˜"}),e.jsx("span",{className:"text-xl font-bold text-white",children:s})]})]})]})}),Jr=({puzzle:t,onSelectOption:a,selectedOption:s,isLocked:r,showHint:n,onToggleHint:i})=>e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col gap-6 animate-slide-up",children:[e.jsx("div",{className:"glass p-5 rounded-3xl border-l-4 border-l-cyan-500 shadow-xl",children:e.jsxs("p",{className:"text-cyan-200 text-sm italic leading-relaxed",children:[e.jsx("i",{className:"fas fa-quote-left mr-2 opacity-50"}),t.story]})}),e.jsxs("div",{className:"glass p-8 rounded-3xl shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-cyan-500/10 rounded-full blur-3xl group-hover:bg-cyan-500/20 transition-all duration-700"}),e.jsxs("h3",{className:"text-[10px] uppercase tracking-widest text-slate-400 font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-fingerprint text-cyan-500"}),"íŒ¨í„´ í•´ë…"]}),e.jsx("p",{className:"text-2xl font-bold mb-8 text-white font-mono leading-tight whitespace-pre-line",children:t.question}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.options.map((c,d)=>e.jsx("button",{disabled:r,onClick:()=>a(c),className:`p-4 rounded-2xl font-mono text-xl font-bold transition-all duration-200 border transform active:scale-95 ${s===c?"bg-cyan-500 border-cyan-400 text-white shadow-lg scale-105 glow-cyan":"bg-slate-800/50 border-white/10 text-slate-300 hover:border-cyan-500/50 hover:bg-slate-800"}`,children:c},d))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:i,className:`flex items-center gap-2 text-[11px] font-bold uppercase tracking-wider transition-colors ${n?"text-amber-400":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx("i",{className:"fas fa-lightbulb opacity-75"}),n?"ížŒíŠ¸ í™•ì¸ë¨":"ë‹¨ì„œ ìš”ì²­í•˜ê¸°"]})}),n&&e.jsx("div",{className:"glass p-4 rounded-2xl border border-amber-500/30 bg-amber-500/5 animate-slide-up text-center",children:e.jsxs("p",{className:"text-amber-200 text-xs",children:[e.jsx("span",{className:"font-bold mr-1",children:"HINT:"})," ",t.hint]})})]}),Xr=()=>{const[t,a]=Je.useState("ì•”í˜¸í™” ì½”ì–´ ì´ˆê¸°í™” ì¤‘..."),s=["ë…¼ë¦¬ì  íŒ¨í„´ í™˜ê²½ ìŠ¤ìº” ì¤‘...","ì²´ìž„ë²„ ìž ê¸ˆ ìž¥ì¹˜ ë³´ì•ˆ í™•ì¸ ì¤‘...","ìˆ˜í•™ì  ë‚œì´ë„ ë§¤íŠ¸ë¦­ìŠ¤ ë³´ì • ì¤‘...","í¼ì¦ ì—”ì§„ê³¼ ì‹ ê²½ë§ ì—°ê²° ìˆ˜ë¦½ ì¤‘...","ìˆ˜ì—´ ë‚´ ë¹„ì •ìƒ íŒ¨í„´ ê°ì§€ ì¤‘...","ë³´ì•ˆ í”„ë¡œí† ì½œ ìš°íšŒ ì‹œë„ ì¤‘...","ë‹¤ìŒ êµ¬ì—­ì˜ ì½”ë“œ í•´ë… ì¤‘..."];return Je.useEffect(()=>{const r=setInterval(()=>{a(s[Math.floor(Math.random()*s.length)])},2e3);return()=>clearInterval(r)},[]),e.jsxs("div",{className:"fixed inset-0 z-40 flex flex-col items-center justify-center bg-slate-950/90 backdrop-blur-sm p-6 text-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-cyan-500/20 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-cyan-400 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-indigo-500/20 rounded-full"}),e.jsx("div",{className:"absolute inset-4 border-b-4 border-indigo-400 rounded-full animate-spin-slow"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-brain text-cyan-400 text-2xl animate-pulse"})})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"ë„ì „ ê³¼ì œ ìƒì„± ì¤‘"}),e.jsx("p",{className:"text-slate-400 text-xs font-mono max-w-xs h-10",children:t}),e.jsx("style",{children:`
        .animate-spin-slow {
          animation: spin 3s linear infinite;
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},Zr=({onStart:t,onShowRanking:a})=>{const[s,r]=Je.useState(_e.EASY);return e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center gap-8 animate-slide-up",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-block p-4 rounded-3xl bg-cyan-500/10 border border-cyan-500/30 mb-6 glow-cyan",children:e.jsx("i",{className:"fas fa-brain text-4xl text-cyan-400"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-tighter",children:"MATH PUZZLE"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"ë…¼ë¦¬ì  ì‚¬ê³ ì˜ í•œê³„ì— ë„ì „í•˜ì„¸ìš”."})]}),e.jsxs("div",{className:"w-full glass p-6 rounded-3xl flex flex-col gap-4",children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest text-center",children:"ì‹œìž‘ ë‚œì´ë„ ì„ íƒ"}),e.jsx("div",{className:"flex flex-col gap-2",children:Object.values(_e).map(n=>e.jsx("button",{onClick:()=>r(n),className:`py-4 rounded-2xl font-bold transition-all border ${s===n?"bg-cyan-600 border-cyan-400 text-white glow-cyan":"bg-slate-800/50 border-white/10 text-slate-400 hover:bg-slate-800"}`,children:n},n))})]}),e.jsxs("div",{className:"flex flex-col w-full gap-3",children:[e.jsx("button",{onClick:()=>t(s),className:"w-full py-5 bg-white text-slate-950 rounded-2xl font-bold text-lg hover:bg-cyan-400 transition-all transform active:scale-95 shadow-xl",children:"ê²Œìž„ ì‹œìž‘"}),e.jsxs("button",{onClick:a,className:"w-full py-4 glass text-white rounded-2xl font-bold border-white/20 hover:bg-white/5 transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-trophy text-amber-400"}),"ìˆœìœ„ ë³´ê¸°"]})]})]})},Qr=({rankings:t,onBack:a})=>e.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col gap-6 animate-slide-up",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2 uppercase tracking-tight",children:"TOP AGENTS"}),e.jsx("p",{className:"text-slate-400 text-xs",children:"ì „ì²´ í•´ë… ì „ë¬¸ê°€ ìˆœìœ„"})]}),e.jsx("div",{className:"glass rounded-3xl overflow-hidden border border-white/10 shadow-2xl",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white/5 border-b border-white/10",children:[e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ìˆœìœ„"}),e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ì—ì´ì „íŠ¸"}),e.jsx("th",{className:"p-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-right",children:"ì ìˆ˜"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-10 text-center text-slate-500 italic",children:"ì•„ì§ ê¸°ë¡ëœ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤."})}):t.map((s,r)=>e.jsxs("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"p-4 font-mono font-bold text-cyan-400",children:["#",r+1]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:s.name}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:["ìŠ¤í…Œì´ì§€ ",s.stage]})]})}),e.jsx("td",{className:"p-4 text-right font-mono font-bold text-white",children:s.score.toLocaleString()})]},r))})]})}),e.jsxs("button",{onClick:a,className:"w-full py-4 glass text-slate-400 rounded-2xl font-bold border-white/10 hover:text-white transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left"}),"ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°"]})]}),en=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"}),tn={type:W.OBJECT,properties:{story:{type:W.STRING,description:"íƒˆì¶œ ê²Œìž„ ìŠ¤íƒ€ì¼ì˜ ì§§ì€ ì„œì‚¬ì  ë°°ê²½ (1-2ë¬¸ìž¥, í•œêµ­ì–´ë¡œ ìž‘ì„±)."},question:{type:W.STRING,description:"í•´ê²°í•´ì•¼ í•  ìˆ˜í•™ì  íŒ¨í„´ ë¬¸ì œ (í•œêµ­ì–´ë¡œ ìž‘ì„±)."},options:{type:W.ARRAY,items:{type:W.STRING},description:"ì •í™•ížˆ 4ê°œì˜ ê°ê´€ì‹ ì„ íƒì§€."},correctAnswer:{type:W.STRING,description:"options ë°°ì—´ ì¤‘ ì •í™•í•œ ì •ë‹µ."},hint:{type:W.STRING,description:"ì‚¬ìš©ìžë¥¼ ë•ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ížŒíŠ¸ (í•œêµ­ì–´ë¡œ ìž‘ì„±)."},explanation:{type:W.STRING,description:"íŒ¨í„´ì— ëŒ€í•œ ê°„ëžµí•œ ë…¼ë¦¬ì  ì„¤ëª… (í•œêµ­ì–´ë¡œ ìž‘ì„±)."}},required:["story","question","options","correctAnswer","hint","explanation"]};async function sn(t,a){const s=`
    ë‹¹ì‹ ì€ "ìˆ˜í•™ í¼ì¦ íƒˆì¶œ"ì´ë¼ëŠ” ëª¨ë°”ì¼ ì•±ì˜ AI í¼ì¦ ë””ìžì´ë„ˆìž…ë‹ˆë‹¤.
    ${t} ë‚œì´ë„ì˜ ìˆ˜í•™ íŒ¨í„´ í¼ì¦ì„ ìƒì„±í•˜ì„¸ìš”. ëª¨ë“  í…ìŠ¤íŠ¸ëŠ” í•œêµ­ì–´ë¡œ ìž‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.
    
    í˜„ìž¬ ìŠ¤í…Œì´ì§€: ${a}
    
    ë‚œì´ë„ ê°€ì´ë“œë¼ì¸:
    - ì‰¬ì›€: ë‹¨ìˆœ ìˆ˜ì—´, ë”í•˜ê¸°/ë¹¼ê¸° íŒ¨í„´, ê¸°ë³¸ì ì¸ ì‹œê°ì  ë…¼ë¦¬.
    - ë³´í†µ: ë‹¤ë‹¨ê³„ ê·œì¹™, í˜¼í•© ì—°ì‚° (ì˜ˆ: ê³±í•˜ê¸° í›„ ë”í•˜ê¸°), ì œê³±ìˆ˜, ì†Œìˆ˜ ìˆ˜ì—´.
    - ì–´ë ¤ì›€: ì¶”ìƒì  ë…¼ë¦¬, ìˆ¨ê²¨ì§„ ì œì•½ ì¡°ê±´, ë³µìž¡í•œ ìˆ˜ì—´ (í”¼ë³´ë‚˜ì¹˜ ìœ ì‚¬, ë‹¤ì¸µ ì°¨ì´), ëŒ€ìˆ˜ì  íŒ¨í„´ ì¸ì‹.
    
    ì´ì•¼ê¸° í…Œë§ˆ: íƒˆì¶œ ê²Œìž„, ë¯¸ìŠ¤í„°ë¦¬, ì²¨ë‹¨ ê¸ˆê³ , ê³ ëŒ€ ì‚¬ì› ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.
    ì§ˆë¬¸: ëª…í™•í•˜ì§€ë§Œ ë„ì „ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤.
    
    ë°˜ë“œì‹œ ìˆ˜í•™ì ìœ¼ë¡œ ì •í™•í•´ì•¼ í•˜ë©° ì •ë‹µì€ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
  `;try{const r=await en.models.generateContent({model:"gemini-3-flash-preview",contents:s,config:{responseMimeType:"application/json",responseSchema:tn,temperature:.9}});return JSON.parse(r.text.trim())}catch(r){return console.error("í¼ì¦ ìƒì„± ì‹¤íŒ¨:",r),{story:"ë²½ì— ì•Œ ìˆ˜ ì—†ëŠ” ìˆ«ìžë“¤ì´ ì í˜€ ìžˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ ìˆ«ìžë¥¼ ì•Œì•„ë‚´ì•¼ ë¬¸ì´ ì—´ë¦´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.",question:"ë‹¤ìŒ ìˆ˜ì—´ì„ ì™„ì„±í•˜ì„¸ìš”: 2, 4, 8, 16, ?",options:["24","30","32","64"],correctAnswer:"32",hint:"ê° ìˆ«ìžëŠ” ì´ì „ ìˆ«ìžì˜ ë‘ ë°°ìž…ë‹ˆë‹¤.",explanation:"ê³µë¹„ê°€ 2ì¸ ë“±ë¹„ìˆ˜ì—´ìž…ë‹ˆë‹¤."}}}const _t="math_puzzle_rankings",an=()=>{const[t,a]=m.useState({stage:1,difficulty:_e.EASY,score:0,lives:3,status:"MENU"}),[s,r]=m.useState(null),[n,i]=m.useState(!1),[c,d]=m.useState(null),[o,x]=m.useState(null),[f,h]=m.useState(!1),[y,j]=m.useState([]);m.useEffect(()=>{const I=localStorage.getItem(_t);I&&j(JSON.parse(I))},[]);const k=(I,S)=>{const A={name:prompt("ì¶•í•˜í•©ë‹ˆë‹¤! ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš” (ëž­í‚¹ ë“±ë¡):")||"ìµëª…ì˜ ì—ì´ì „íŠ¸",score:I,stage:S,date:new Date().toISOString()},R=[...y,A].sort((O,P)=>P.score-O.score).slice(0,10);j(R),localStorage.setItem(_t,JSON.stringify(R))},g=m.useCallback(async(I,S)=>{i(!0),h(!1),d(null),x(null);try{const p=await sn(I,S);r(p)}catch(p){console.error(p)}finally{i(!1)}},[]),E=I=>{a({stage:1,difficulty:I,score:0,lives:3,status:"PLAYING"}),g(I,1)},H=I=>{o||!s||(d(I),I===s.correctAnswer?(x({type:"success",message:"ìž ê¸ˆ í•´ì œ ì„±ê³µ. ë‹¤ìŒ êµ¬ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤."}),setTimeout(()=>{const S=t.stage+1;let p=t.difficulty;t.difficulty===_e.EASY&&S>5&&(p=_e.MEDIUM),t.difficulty===_e.MEDIUM&&S>10&&(p=_e.HARD),a(A=>({...A,stage:S,difficulty:p,score:A.score+(t.difficulty===_e.EASY?100:t.difficulty===_e.MEDIUM?250:500)})),g(p,S)},1500)):(x({type:"error",message:"í•´ë… ì˜¤ë¥˜: ë³´ì•ˆ í”„ë¡œí† ì½œì´ ìž‘ë™ë˜ì—ˆìŠµë‹ˆë‹¤."}),a(S=>{const p=S.lives-1;return p<=0?(setTimeout(()=>{k(S.score,S.stage),a(A=>({...A,status:"GAME_OVER"}))},1500),{...S,lives:0}):{...S,lives:p}}),setTimeout(()=>{t.lives>1&&(x(null),d(null))},1500)))},U=()=>{a(I=>({...I,status:"MENU"}))};return t.status==="MENU"?e.jsx(Ee,{children:e.jsx("div",{className:"min-h-screen pt-12 pb-12 px-4 flex flex-col items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:e.jsx(Zr,{onStart:E,onShowRanking:()=>a(I=>({...I,status:"RANKING"}))})})}):t.status==="RANKING"?e.jsx(Ee,{children:e.jsx("div",{className:"min-h-screen pt-12 pb-12 px-4 flex flex-col items-center justify-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:e.jsx(Qr,{rankings:y,onBack:U})})}):t.status==="GAME_OVER"?e.jsx(Ee,{children:e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-950",children:e.jsxs("div",{className:"glass p-10 rounded-3xl border border-rose-500/30 text-center max-w-sm w-full animate-slide-up shadow-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"fas fa-skull-crossbones text-rose-500 text-3xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2 uppercase tracking-tighter",children:"ìž‘ì „ ì‹¤íŒ¨"}),e.jsxs("p",{className:"text-slate-400 mb-8 leading-relaxed",children:["ë³´ì•ˆë§ì„ ëš«ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",e.jsx("br",{}),"ìµœì¢… ìŠ¤í…Œì´ì§€: ",t.stage,e.jsx("br",{}),"ìµœì¢… ì ìˆ˜: ",t.score.toLocaleString()]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>E(t.difficulty),className:"w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-4 rounded-2xl transition-all shadow-lg hover:shadow-rose-600/20 transform active:scale-95",children:"ë‹¤ì‹œ ì‹œë„"}),e.jsx("button",{onClick:U,className:"w-full glass text-slate-400 font-bold py-3 rounded-2xl hover:text-white transition-all",children:"ë©”ë‰´ë¡œ"})]})]})})}):e.jsx(Ee,{children:e.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 flex flex-col items-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black",children:[e.jsx(Kr,{stage:t.stage,difficulty:t.difficulty,score:t.score,lives:t.lives}),n&&e.jsx(Xr,{}),!n&&s&&e.jsx(Jr,{puzzle:s,onSelectOption:H,selectedOption:c,isLocked:!!o,showHint:f,onToggleHint:()=>h(!f)}),o&&e.jsx("div",{className:"fixed bottom-12 left-0 right-0 z-50 px-4 animate-bounce",children:e.jsx("div",{className:`max-w-md mx-auto glass p-4 rounded-2xl text-center border-2 ${o.type==="success"?"border-emerald-500 bg-emerald-500/20":"border-rose-500 bg-rose-500/20"}`,children:e.jsxs("p",{className:`font-bold text-xs tracking-widest flex items-center justify-center gap-2 ${o.type==="success"?"text-emerald-400":"text-rose-400"}`,children:[e.jsx("i",{className:`fas ${o.type==="success"?"fa-check-circle":"fa-exclamation-triangle"}`}),o.message]})})}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full h-1/4 pointer-events-none bg-gradient-to-t from-cyan-500/5 to-transparent z-0 opacity-50"})]})})},Xt=()=>{const t="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4";return new De({apiKey:t})},rn=async(t,a)=>{const s=Xt(),r=`Act as an expert English language tutor. 
  Recommend 6 high-quality English vocabulary words for a student at the ${t} level.
  Their interests include: ${a.join(", ")}.
  Provide the output in a structured JSON format. 
  Each word should include: 
  - word
  - phonetic (IPA)
  - definition (in simple English)
  - koreanTranslation (natural Korean translation)
  - exampleSentence (using the word in a relevant context)
  - synonyms (at least 2)
  - usageTip (a short note on how to use it naturally)`;try{const n=await s.models.generateContent({model:"gemini-3-flash-preview",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:W.OBJECT,properties:{words:{type:W.ARRAY,items:{type:W.OBJECT,properties:{word:{type:W.STRING},phonetic:{type:W.STRING},definition:{type:W.STRING},koreanTranslation:{type:W.STRING},exampleSentence:{type:W.STRING},synonyms:{type:W.ARRAY,items:{type:W.STRING}},usageTip:{type:W.STRING}},required:["word","phonetic","definition","koreanTranslation","exampleSentence","synonyms","usageTip"]}}}}}});return JSON.parse(n.text||'{"words": []}').words}catch(n){throw console.error("Error fetching words:",n),n}},nn=async t=>{var s,r,n,i,c,d;const a=Xt();try{const x=(d=(c=(i=(n=(r=(s=(await a.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:`Say clearly: ${t}`}]}],config:{responseModalities:[Bt.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:s[0])==null?void 0:r.content)==null?void 0:n.parts)==null?void 0:i[0])==null?void 0:c.inlineData)==null?void 0:d.data;if(!x)throw new Error("No audio data received from Gemini TTS. Check your GEMINI_API_KEY and model availability.");const f=atob(x),h=new Uint8Array(f.length);for(let y=0;y<f.length;y++)h[y]=f.charCodeAt(y);return h.buffer}catch(o){throw console.error("Error generating speech:",o),o}},ln=async(t,a,s=24e3,r=1)=>{const n=new Int16Array(t.buffer),i=n.length/r,c=a.createBuffer(r,i,s);for(let d=0;d<r;d++){const o=c.getChannelData(d);for(let x=0;x<i;x++)o[x]=n[x*r+d]/32768}return c},on=({word:t})=>{const[a,s]=m.useState(!1),[r,n]=m.useState(!1),i=async()=>{if(!a){s(!0);try{const c=await nn(t.word),d=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),o=await ln(new Uint8Array(c),d,24e3,1),x=d.createBufferSource();x.buffer=o,x.connect(d.destination),x.start(),x.onended=()=>{s(!1),d.close()}}catch(c){console.error("Audio error:",c),s(!1)}}};return e.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col group",children:[e.jsxs("div",{className:"p-6 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 group-hover:text-indigo-600 transition-colors",children:t.word}),e.jsx("button",{onClick:i,disabled:a,className:`p-2 rounded-full transition-all ${a?"bg-slate-100":"bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white"}`,title:"Listen Pronunciation",children:a?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-indigo-500 border-t-transparent rounded-full"}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),e.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),e.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]})})]}),e.jsxs("p",{className:"text-slate-400 font-mono text-sm mb-3",children:["[",t.phonetic,"]"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-indigo-600 font-bold text-lg mb-1",children:t.koreanTranslation}),e.jsxs("p",{className:"text-slate-600 text-sm leading-relaxed italic",children:['"',t.definition,'"']})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-2",children:"Example"}),e.jsx("p",{className:"text-slate-800 text-sm font-medium",children:t.exampleSentence})]})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsxs("button",{onClick:()=>n(!r),className:"w-full py-2 text-xs font-bold text-slate-400 uppercase tracking-widest hover:text-indigo-500 transition-colors flex items-center justify-center gap-2",children:[r?"Hide Details":"View Synonyms & Tips",e.jsx("span",{className:`transition-transform duration-300 ${r?"rotate-180":""}`,children:"â–¼"})]}),r&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 space-y-4 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-2",children:"Synonyms"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.synonyms.map((c,d)=>e.jsx("span",{className:"bg-white border border-slate-200 text-slate-600 px-2 py-1 rounded-lg text-xs",children:c},d))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:"Usage Tip"}),e.jsx("p",{className:"text-slate-600 text-xs italic leading-snug bg-amber-50 p-2 rounded-lg border border-amber-100",children:t.usageTip})]})]})]})]})},cn=()=>{const[t,a]=m.useState(ut.INTERMEDIATE),[s,r]=m.useState(["Daily Life","Travel"]),[n,i]=m.useState(""),[c,d]=m.useState([]),[o,x]=m.useState(!1),[f,h]=m.useState(null),y=async()=>{x(!0),h(null);try{const g=await rn(t,s);d(g)}catch(g){h(g!=null&&g.message?`Error: ${g.message}`:"Failed to fetch words. Please try again."),console.error(g)}finally{x(!1)}};m.useEffect(()=>{y()},[t]);const j=g=>{g.preventDefault(),n.trim()&&!s.includes(n.trim())&&(r([...s,n.trim()]),i(""))},k=g=>{r(s.filter((E,H)=>H!==g))};return e.jsxs(Ee,{className:"min-h-screen pb-20 px-4 pt-12 md:pt-20 max-w-6xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4 tracking-tight",children:["VocabVantage ",e.jsx("span",{className:"gradient-text",children:"AI"})]}),e.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto",children:"Personalized English vocabulary coaching powered by Gemini. Select your level and interests to get started."})]}),e.jsxs("section",{className:"bg-white rounded-3xl shadow-xl shadow-indigo-100 p-6 md:p-8 mb-10 border border-slate-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4",children:"Your Proficiency Level"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.values(ut).map(g=>e.jsx("button",{onClick:()=>a(g),className:`py-3 px-4 rounded-xl text-sm font-medium transition-all duration-200 border ${t===g?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200":"bg-slate-50 text-slate-600 border-slate-200 hover:border-indigo-300"}`,children:g},g))})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-4",children:"Focus Interests"}),e.jsxs("form",{onSubmit:j,className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value),placeholder:"e.g. Finance, Nature, Coding...",className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"}),e.jsx("button",{type:"submit",className:"bg-indigo-100 text-indigo-700 px-4 py-2 rounded-xl text-sm font-bold hover:bg-indigo-200 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((g,E)=>e.jsxs("span",{className:"bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 group",children:[g,e.jsx("button",{onClick:()=>k(E),className:"hover:text-indigo-800 font-bold opacity-60 hover:opacity-100",children:"Ã—"})]},E))})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("button",{onClick:y,disabled:o,className:"group flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-2xl font-semibold hover:bg-slate-800 transition-all disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Updating Vocabulary..."]}):e.jsxs(e.Fragment,{children:["Generate New Recommendations",e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"â†’"})]})})})]}),f&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl text-center mb-8 border border-red-100",children:f}),o&&!c.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-pulse",children:[1,2,3,4,5,6].map(g=>e.jsx("div",{className:"bg-slate-200 h-64 rounded-3xl"},g))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((g,E)=>e.jsx(on,{word:g},`${g.word}-${E}`))})]})},Re=20,mt=150,dn=60,mn=2,Oe=600,$e={SNAKE_HEAD:"#4ade80",SNAKE_BODY:"#22c55e",FOOD:"#f87171",GRID:"rgba(255, 255, 255, 0.05)"},xn=({score:t,highScore:a,level:s})=>e.jsxs("div",{className:"flex justify-between items-center w-full max-w-[600px] mb-4 px-4 py-3 bg-white/5 backdrop-blur-md rounded-xl border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"text-yellow-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"High Score"}),e.jsx("p",{className:"text-lg font-orbitron text-yellow-400 leading-none",children:a})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"text-blue-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"Level"}),e.jsx("p",{className:"text-lg font-orbitron text-blue-400 leading-none",children:s})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"text-green-400 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-semibold",children:"Score"}),e.jsx("p",{className:"text-xl font-orbitron text-green-400 leading-none",children:t})]})]})]}),hn=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"});async function un(t){try{const a=await hn.models.generateContent({model:"gemini-3-flash-preview",contents:`The player just finished a high-quality Snake game with a score of ${t}. Give them a witty, futuristic, and encouraging 1-sentence commentary in Korean and assign them a rank name (e.g., 'ë°ì´í„° ìˆ˜ì§‘ê°€', 'ë„¤ì˜¨ í¬ì‹ìž', 'ì‚¬ì´ë²„ ì „ì„¤').`,config:{responseMimeType:"application/json",responseSchema:{type:W.OBJECT,properties:{message:{type:W.STRING},rank:{type:W.STRING}},required:["message","rank"]}}});return JSON.parse(a.text)}catch(a){return console.error("Gemini commentary failed",a),{message:`ê²Œìž„ ì¢…ë£Œ! ë‹¹ì‹ ì˜ ì ìˆ˜ëŠ” ${t}ì ìž…ë‹ˆë‹¤.`,rank:t>100?"ì—˜ë¦¬íŠ¸ ìŠ¤ë„¤ì´í¬":"ì´ˆë³´ ì›œ"}}}const fn=({score:t,onRestart:a})=>{const[s,r]=m.useState(null),[n,i]=m.useState(!0);return m.useEffect(()=>{(async()=>{const d=await un(t);r(d),i(!1)})()},[t]),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-xl z-50 p-6 text-center animate-in fade-in duration-500",children:[e.jsx("h2",{className:"text-6xl font-orbitron font-bold text-red-500 mb-2 drop-shadow-[0_0_15px_rgba(239,68,68,0.5)]",children:"SYSTEM FAILURE"}),e.jsx("p",{className:"text-gray-400 mb-8 tracking-[0.2em] uppercase",children:"Snake Core Deinitialized"}),e.jsxs("div",{className:"mb-8 p-6 bg-white/5 rounded-2xl border border-white/10 w-full max-w-md",children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-widest mb-1",children:"Final Analysis"}),e.jsx("p",{className:"text-4xl font-orbitron text-white mb-4",children:t}),n?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-400 italic animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"AI ë¶„ì„ ì¤‘..."]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-block px-3 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-full text-xs font-semibold tracking-tighter",children:["RANK: ",s==null?void 0:s.rank]}),e.jsxs("p",{className:"text-lg text-gray-200 leading-relaxed font-light italic",children:['"',s==null?void 0:s.message,'"']})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{onClick:a,className:"group flex items-center gap-2 px-8 py-3 bg-green-500 hover:bg-green-400 text-black font-bold rounded-full transition-all hover:scale-105 active:scale-95 shadow-[0_0_20px_rgba(74,222,128,0.4)]",children:[e.jsx(Es,{className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"REBOOT SYSTEM"]})})]})},pn=()=>{const t=m.useRef(null),[a,s]=m.useState({snake:[{x:10,y:10},{x:10,y:11},{x:10,y:12}],food:{x:5,y:5},direction:ye.UP,score:0,highScore:Number(localStorage.getItem("snakeHighScore"))||0,status:he.IDLE,speed:mt,level:1}),r=m.useRef(ye.UP),n=m.useCallback(d=>{let o;for(;o={x:Math.floor(Math.random()*(Oe/Re)),y:Math.floor(Math.random()*(Oe/Re))},!!d.some(f=>f.x===o.x&&f.y===o.y););return o},[]),i=()=>{const d=[{x:10,y:10},{x:10,y:11},{x:10,y:12}];r.current=ye.UP,s(o=>({...o,snake:d,food:n(d),direction:ye.UP,score:0,status:he.PLAYING,speed:mt,level:1}))},c=()=>{s(d=>({...d,status:d.status===he.PLAYING?he.PAUSED:he.PLAYING}))};return m.useEffect(()=>{const d=o=>{switch(o.key){case"ArrowUp":case"w":case"W":r.current!==ye.DOWN&&(r.current=ye.UP);break;case"ArrowDown":case"s":case"S":r.current!==ye.UP&&(r.current=ye.DOWN);break;case"ArrowLeft":case"a":case"A":r.current!==ye.RIGHT&&(r.current=ye.LEFT);break;case"ArrowRight":case"d":case"D":r.current!==ye.LEFT&&(r.current=ye.RIGHT);break;case" ":a.status===he.PLAYING||a.status===he.PAUSED?c():a.status===he.IDLE&&i();break}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[a.status]),m.useEffect(()=>{if(a.status!==he.PLAYING)return;const o=setInterval(()=>{s(x=>{const f={...x.snake[0]},h=r.current;switch(h){case ye.UP:f.y-=1;break;case ye.DOWN:f.y+=1;break;case ye.LEFT:f.x-=1;break;case ye.RIGHT:f.x+=1;break}const y=Oe/Re;if(f.x<0||f.x>=y||f.y<0||f.y>=y)return x.score>x.highScore&&localStorage.setItem("snakeHighScore",String(x.score)),{...x,status:he.GAME_OVER,highScore:Math.max(x.score,x.highScore)};if(x.snake.some(k=>k.x===f.x&&k.y===f.y))return x.score>x.highScore&&localStorage.setItem("snakeHighScore",String(x.score)),{...x,status:he.GAME_OVER,highScore:Math.max(x.score,x.highScore)};const j=[f,...x.snake];if(f.x===x.food.x&&f.y===x.food.y){const k=x.score+10,g=Math.floor(k/50)+1,E=Math.max(dn,mt-g*mn*2);return{...x,snake:j,food:n(j),score:k,level:g,speed:E}}return j.pop(),{...x,snake:j,direction:h}})},a.speed);return()=>clearInterval(o)},[a.status,a.speed,n]),m.useEffect(()=>{const d=t.current;if(!d)return;const o=d.getContext("2d");if(!o)return;o.clearRect(0,0,Oe,Oe),o.strokeStyle=$e.GRID,o.lineWidth=.5;for(let h=0;h<=Oe;h+=Re)o.beginPath(),o.moveTo(h,0),o.lineTo(h,Oe),o.stroke(),o.beginPath(),o.moveTo(0,h),o.lineTo(Oe,h),o.stroke();const{food:x,snake:f}=a;o.fillStyle=$e.FOOD,o.shadowBlur=15,o.shadowColor=$e.FOOD,o.beginPath(),o.arc(x.x*Re+Re/2,x.y*Re+Re/2,Re/2.5,0,Math.PI*2),o.fill(),o.shadowBlur=0,f.forEach((h,y)=>{const j=y===0;o.fillStyle=j?$e.SNAKE_HEAD:$e.SNAKE_BODY,j&&(o.shadowBlur=10,o.shadowColor=$e.SNAKE_HEAD);const k=h.x*Re+2,g=h.y*Re+2,E=Re-4,H=4;o.beginPath(),o.moveTo(k+H,g),o.lineTo(k+E-H,g),o.quadraticCurveTo(k+E,g,k+E,g+H),o.lineTo(k+E,g+E-H),o.quadraticCurveTo(k+E,g+E,k+E-H,g+E),o.lineTo(k+H,g+E),o.quadraticCurveTo(k,g+E,k,g+E-H),o.lineTo(k,g+H),o.quadraticCurveTo(k,g,k+H,g),o.closePath(),o.fill(),o.shadowBlur=0})},[a]),e.jsxs(Ee,{className:"min-h-screen bg-[#0a0a0c] flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-blue-500/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-[10%] -right-[10%] w-[40%] h-[40%] bg-green-500/10 blur-[120px] rounded-full"})]}),e.jsxs("header",{className:"mb-8 text-center relative z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-orbitron font-bold tracking-tighter bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"NEON SNAKE"}),e.jsx("p",{className:"text-gray-500 text-xs tracking-[0.3em] uppercase mt-2",children:"Evolution Protocol 2.5"})]}),e.jsx(xn,{score:a.score,highScore:a.highScore,level:a.level}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-lg blur-lg opacity-75 group-hover:opacity-100 transition duration-1000"}),e.jsxs("div",{className:"relative bg-black border border-white/10 rounded-lg overflow-hidden shadow-2xl",children:[e.jsx("canvas",{ref:t,width:Oe,height:Oe,className:"max-w-full h-auto cursor-none"}),a.status===he.IDLE&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-40",children:[e.jsxs("button",{onClick:i,className:"group flex flex-col items-center gap-4 transition-transform hover:scale-105",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(74,222,128,0.5)]",children:e.jsx(ht,{className:"w-10 h-10 text-black fill-current ml-1"})}),e.jsx("span",{className:"text-white font-orbitron text-xl tracking-widest animate-pulse",children:"INITIATE GAME"})]}),e.jsxs("div",{className:"mt-12 flex gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:"Move"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"W"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"A"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"S"}),e.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"D"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-2",children:"Pause"}),e.jsx("kbd",{className:"px-4 py-1 bg-white/10 rounded border border-white/20 text-xs",children:"SPACE"})]})]})]}),a.status===he.PAUSED&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px] flex items-center justify-center z-40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-4xl font-orbitron text-white mb-6",children:"PAUSED"}),e.jsx("button",{onClick:c,className:"px-8 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors",children:"RESUME"})]})}),a.status===he.GAME_OVER&&e.jsx(fn,{score:a.score,onRestart:i})]})]}),e.jsxs("div",{className:"mt-8 flex gap-4 z-10",children:[e.jsx("button",{onClick:c,disabled:a.status!==he.PLAYING&&a.status!==he.PAUSED,className:"p-4 bg-white/5 border border-white/10 rounded-full hover:bg-white/10 transition-colors disabled:opacity-20",children:a.status===he.PAUSED?e.jsx(ht,{className:"w-6 h-6"}):e.jsx(Ts,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>s(d=>({...d,status:he.GAME_OVER})),disabled:a.status!==he.PLAYING&&a.status!==he.PAUSED,className:"p-4 bg-white/5 border border-white/10 rounded-full hover:bg-red-500/20 transition-colors group disabled:opacity-20",children:e.jsx(Cs,{className:"w-6 h-6 group-hover:text-red-500"})})]}),e.jsx("footer",{className:"mt-12 text-gray-600 text-[10px] tracking-[0.2em] uppercase font-semibold",children:"Design by AI Evolution Lab â€¢ v2.5.0"})]})},gn=({onHome:t,onHistory:a,onGuide:s})=>e.jsxs("header",{className:"fixed top-0 left-0 w-full z-50 glass px-6 py-4 flex justify-between items-center border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:t,children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center font-bold text-slate-900 group-hover:scale-110 transition-transform shadow-lg shadow-emerald-500/20",children:"T-M"}),e.jsxs("h1",{className:"text-xl font-bold tracking-tight",children:["í‹€",e.jsx("span",{className:"text-emerald-400",children:"(ë ¸)"}),"ë‹ˆ ë§ž",e.jsx("span",{className:"text-emerald-400",children:"(ì·„)"}),"ë‹ˆ"]})]}),e.jsxs("nav",{className:"flex gap-4 md:gap-8 text-sm font-bold text-slate-400",children:[e.jsx("button",{onClick:t,className:"hover:text-emerald-400 transition-colors",children:"í™ˆ"}),e.jsx("button",{onClick:a,className:"hover:text-emerald-400 transition-colors",children:"ê¸°ë¡"}),e.jsx("button",{onClick:s,className:"hover:text-emerald-400 transition-colors",children:"ê°€ì´ë“œ"})]})]});class bn{constructor(){this.ctx=null,this.ai=new De({apiKey:"AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4"})}init(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))}playClick(){if(this.init(),!this.ctx)return;const a=this.ctx.createOscillator(),s=this.ctx.createGain();a.type="sine",a.frequency.setValueAtTime(440,this.ctx.currentTime),s.gain.setValueAtTime(.1,this.ctx.currentTime),s.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+.1),a.connect(s),s.connect(this.ctx.destination),a.start(),a.stop(this.ctx.currentTime+.1)}playSuccess(){if(this.init(),!this.ctx)return;const a=this.ctx.currentTime,s=this.ctx.createOscillator(),r=this.ctx.createGain();s.type="triangle",s.frequency.setValueAtTime(523.25,a),s.frequency.exponentialRampToValueAtTime(1046.5,a+.2),r.gain.setValueAtTime(.1,a),r.gain.exponentialRampToValueAtTime(.01,a+.3),s.connect(r),r.connect(this.ctx.destination),s.start(),s.stop(a+.3)}async speak(a){var s,r,n,i,c,d;try{if(this.init(),!this.ctx)return;const x=(d=(c=(i=(n=(r=(s=(await this.ai.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:`ì½ì–´ì¤˜: ${a}`}]}],config:{responseModalities:[Bt.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:s[0])==null?void 0:r.content)==null?void 0:n.parts)==null?void 0:i[0])==null?void 0:c.inlineData)==null?void 0:d.data;if(x){const f=this.decodeBase64(x),h=await this.decodeAudioData(f,this.ctx,24e3,1),y=this.ctx.createBufferSource();y.buffer=h,y.connect(this.ctx.destination),y.start()}}catch(o){console.error("TTS failed",o)}}decodeBase64(a){const s=atob(a),r=s.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=s.charCodeAt(i);return n}async decodeAudioData(a,s,r,n){const i=new Int16Array(a.buffer),c=i.length/n,d=s.createBuffer(n,c,r);for(let o=0;o<n;o++){const x=d.getChannelData(o);for(let f=0;f<c;f++)x[f]=i[f*n+o]/32768}return d}}const Le=new bn,Gt="AIzaSyD24laq21PKbAI-8TvBOlvM-FP6kV-NmY4",yn=async(t,a)=>{var j,k,g,E,H,U,I;const s=new De({apiKey:Gt}),r=`${t}. High quality, detailed, clear lighting.`,n=await s.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:r}]},config:{imageConfig:{aspectRatio:"1:1"}}});let i="";for(const S of((g=(k=(j=n.candidates)==null?void 0:j[0])==null?void 0:k.content)==null?void 0:g.parts)||[])S.inlineData&&(i=S.inlineData.data);if(!i)throw new Error("Base image generation failed");const c=a==="easy"?3:a==="medium"?5:8,d=`Look at the attached image. Create a new version of this image that is exactly the same, but with ${c} VERY subtle differences. Changes could be: changing a small object's color, removing a tiny detail, slightly moving an item, or changing the time on a clock. Keep the overall composition identical.`,o=await s.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:i,mimeType:"image/png"}},{text:d}]}});let x="";for(const S of((U=(H=(E=o.candidates)==null?void 0:E[0])==null?void 0:H.content)==null?void 0:U.parts)||[])S.inlineData&&(x=S.inlineData.data);const y=((I=(await new De({apiKey:Gt}).models.generateContent({model:"gemini-3-flash-preview",contents:`List ${c} differences between an original and a modified version of an image based on the prompt "${t}". Each difference should be a short sentence in Korean. Return as a plain list.`})).text)==null?void 0:I.split(`
`).filter(S=>S.trim().length>0))||[];return{originalImage:`data:image/png;base64,${i}`,modifiedImage:`data:image/png;base64,${x}`,differencesDescription:y}},wn=()=>{const[t,a]=m.useState(ee.HOME),[s,r]=m.useState(null),[n,i]=m.useState(!1),[c,d]=m.useState(""),[o,x]=m.useState("medium"),[f,h]=m.useState(null),[y,j]=m.useState([]),[k,g]=m.useState(0),[E,H]=m.useState(0),[U,I]=m.useState(null),[S,p]=m.useState([]),[A,R]=m.useState(0),O=m.useRef(null);m.useEffect(()=>(t===ee.GAME?O.current=window.setInterval(()=>{R(D=>D+1)},1e3):(O.current&&clearInterval(O.current),R(0)),()=>{O.current&&clearInterval(O.current)}),[t]);const P=async D=>{const l=D||c;if(l){i(!0),Le.playClick();try{const u=await yn(l,o);h(u),H(Date.now()),j([]),g(0),a(ee.GAME)}catch(u){console.error(u),alert("ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{i(!1)}}},N=D=>{r(Be.CLASSIC);const l=`Classic Game Level ${D}: Very detailed scene of ${D%2===0?"a busy harbor":"a quiet museum exhibit"}`;x(D>7?"hard":D>3?"medium":"easy"),P(l)},b=D=>{g(M=>M+1);const l=D.currentTarget.getBoundingClientRect(),u=(D.clientX-l.left)/l.width*100,v=(D.clientY-l.top)/l.height*100,w=o==="easy"?3:o==="medium"?5:8;if(y.length<w){const M={x:u,y:v,id:Date.now()};j(L=>[...L,M]),Le.playSuccess(),y.length+1===w&&setTimeout(()=>C(!0,y.length+1,w),1e3)}},C=(D,l,u)=>{const v={mode:s||Be.CLASSIC,startTime:E,endTime:Date.now(),foundCount:l,totalRequired:u,success:D,accuracy:Math.round(l/(k||1)*100)};p(M=>[v,...M]),I(v),a(ee.REPORT);const w=D?`ëª¨ë“  ì°¨ì´ë¥¼ ì°¾ì•„ëƒˆìŠµë‹ˆë‹¤! ${A}ì´ˆê°€ ê±¸ë ¸ë„¤ìš”. ë‹¹ì‹ ì˜ ê´€ì°°ë ¥ì´ í›Œë¥­í•©ë‹ˆë‹¤.`:"ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤. ë‹¤ìŒ í›ˆë ¨ì—ì„œëŠ” ë” ë†’ì€ ì„±ê³¼ë¥¼ ê¸°ëŒ€í• ê²Œìš”.";Le.speak(w)},$=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center px-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsx("div",{className:"inline-block px-4 py-1 bg-emerald-500/10 text-emerald-400 rounded-full text-sm font-bold mb-4 tracking-wider uppercase",children:"Focus Training Engine"}),e.jsx("h2",{className:"text-5xl md:text-7xl font-bold bg-gradient-to-r from-emerald-400 via-cyan-300 to-blue-500 bg-clip-text text-transparent pb-2",children:"í‹€(ë ¸)ë‹ˆ ë§ž(ì·„)ë‹ˆ"}),e.jsxs("p",{className:"text-slate-400 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed",children:["ìˆí¼ì— ì¡°ê°ë‚œ ì§‘ì¤‘ë ¥ì„ íšŒë³µí•˜ëŠ” ì‹œê°„.",e.jsx("br",{}),"AIê°€ ìƒì„±í•œ ë¯¸ì„¸í•œ ì°¨ì´ë¥¼ ë°œê²¬í•˜ë©° ê´€ì°° ê·¼ìœ¡ì„ ë‹¨ë ¨í•˜ì„¸ìš”."]})]}),e.jsxs("button",{onClick:()=>{Le.playClick(),a(ee.MODE_SELECT)},className:"px-10 py-5 bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-bold rounded-2xl text-xl shadow-2xl shadow-emerald-500/40 transition-all transform hover:scale-105 active:scale-95 flex items-center gap-3",children:["í›ˆë ¨ ì‹œìž‘í•˜ê¸° ",e.jsx("span",{children:"â†’"})]}),e.jsx("div",{className:"mt-20 grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-5xl px-4",children:[{icon:"ðŸŽ¯",title:"ëŠ¥ë™ì  ê´€ì°°",desc:"ìˆ˜ë™ì ìœ¼ë¡œ ì‹œì²­í•˜ì§€ ì•Šê³ , ì˜ë„ì ìœ¼ë¡œ ëŒ€ìƒì„ íƒêµ¬í•©ë‹ˆë‹¤."},{icon:"ðŸ§ ",title:"ë‘ë‡Œ ì˜ˆì—´",desc:"ì¤‘ìš”í•œ ìž‘ì—…ì„ ì‹œìž‘í•˜ê¸° ì „, ì „ë‘ì—½ì˜ íšŒë¡œë¥¼ ì •ë ¬í•©ë‹ˆë‹¤."},{icon:"âœ¨",title:"ë§žì¶¤í˜• AI",desc:"ë‹¹ì‹ ì˜ ê´€ì‹¬ì‚¬ë¥¼ ë°˜ì˜í•œ ê³ ìœ í•œ ì´ë¯¸ì§€ë¥¼ ì¦‰ì„ì—ì„œ ìƒì„±í•©ë‹ˆë‹¤."}].map((D,l)=>e.jsxs("div",{className:"glass p-8 rounded-3xl text-left border-b-4 border-emerald-500 hover:translate-y-[-4px] transition-transform",children:[e.jsx("div",{className:"text-4xl mb-4",children:D.icon}),e.jsx("h3",{className:"font-bold text-xl mb-3 text-white",children:D.title}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:D.desc})]},l))})]}),q=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4 animate-in fade-in duration-500",children:[e.jsx("h2",{className:"text-3xl font-bold mb-12",children:"ì–´ë–¤ ì½”ìŠ¤ë¡œ í›ˆë ¨í• ê¹Œìš”?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl",children:[e.jsxs("div",{onClick:()=>{r(Be.CLASSIC),a(ee.CLASSIC_LEVELS),Le.playClick()},className:"glass p-10 rounded-3xl cursor-pointer hover:bg-slate-800/50 hover:border-emerald-500 transition-all group",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 text-emerald-400 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:"ðŸ”ï¸"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"í´ëž˜ì‹ ì½”ìŠ¤"}),e.jsx("p",{className:"text-slate-400 leading-relaxed",children:"ì¤€ë¹„ëœ 10ê°œì˜ ì •êµí•œ ë‹¨ê³„ë¥¼ í†µí•´ ê¸°ì´ˆì ì¸ ê´€ì°° ê·¼ìœ¡ì„ ê¸°ë¦…ë‹ˆë‹¤."})]}),e.jsxs("div",{onClick:()=>{r(Be.AI_CUSTOM),a(ee.AI_CUSTOM_INPUT),Le.playClick()},className:"glass p-10 rounded-3xl cursor-pointer hover:bg-slate-800/50 hover:border-cyan-500 transition-all group",children:[e.jsx("div",{className:"w-16 h-16 bg-cyan-500/20 text-cyan-400 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:"ðŸ¤–"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"AI ë§žì¶¤ ì½”ìŠ¤"}),e.jsx("p",{className:"text-slate-400 leading-relaxed",children:"ê´€ì‹¬ ë¶„ì•¼ì˜ í‚¤ì›Œë“œë¥¼ ìž…ë ¥í•˜ì—¬ ì¦‰ì„ì—ì„œ ìƒì„±ëœ ë§žì¶¤í˜• ë¬¸ì œì— ë„ì „í•©ë‹ˆë‹¤."})]})]}),e.jsx("button",{onClick:()=>a(ee.HOME),className:"mt-12 text-slate-500 hover:text-white transition-colors",children:"â† í™ˆìœ¼ë¡œ ê°€ê¸°"})]}),Q=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4 animate-in zoom-in-95 duration-500",children:[e.jsx("h2",{className:"text-3xl font-bold mb-10",children:"ë‹¨ê³„ë³„ í›ˆë ¨"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-6 w-full max-w-4xl",children:Array.from({length:10}).map((D,l)=>e.jsxs("button",{onClick:()=>N(l+1),className:"glass aspect-square rounded-3xl flex flex-col items-center justify-center gap-3 hover:bg-emerald-500 hover:text-slate-900 transition-all font-bold group shadow-lg",children:[e.jsx("span",{className:"text-xs opacity-60 font-black",children:"LV."}),e.jsx("span",{className:"text-4xl",children:l+1})]},l))}),e.jsx("button",{onClick:()=>a(ee.MODE_SELECT),className:"mt-12 text-slate-500 hover:text-white transition-colors",children:"â† ì½”ìŠ¤ ì„ íƒìœ¼ë¡œ"})]}),de=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4 max-w-2xl mx-auto w-full animate-in fade-in duration-700",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"í›ˆë ¨ í‚¤ì›Œë“œë¥¼ ì •í•˜ì„¸ìš”"}),e.jsxs("p",{className:"text-slate-400 leading-relaxed",children:["ë‹¹ì‹ ì˜ ì „ê³µ, ê´€ì‹¬ì‚¬, í˜¹ì€ ìƒìƒí•˜ëŠ” ìž¥ë©´ì„ ë¬˜ì‚¬í•´ë³´ì„¸ìš”.",e.jsx("br",{}),"AIê°€ ê·¸ ìž¥ë©´ì— ë¯¸ì„¸í•œ ì°¨ì´ë¥¼ ìˆ¨ê²¨ë‘˜ ê²ƒìž…ë‹ˆë‹¤."]})]}),e.jsxs("div",{className:"w-full space-y-8 glass p-8 rounded-[2rem] border border-white/5 shadow-2xl",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-500 ml-2 uppercase tracking-widest",children:"Training Prompt"}),e.jsx("input",{type:"text",value:c,onChange:D=>d(D.target.value),placeholder:"ì˜ˆ: ë³µìž¡í•œ íšŒë¡œ ê¸°íŒ, ê³ í’ìŠ¤ëŸ¬ìš´ ì„œìž¬, ë³µìž¡í•œ ì½”ë“œ í™”ë©´...",className:"w-full bg-slate-900/50 border border-slate-700 rounded-2xl px-6 py-5 text-lg focus:outline-none focus:border-cyan-500 focus:ring-4 focus:ring-cyan-500/10 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-500 ml-2 uppercase tracking-widest",children:"Difficulty"}),e.jsx("div",{className:"flex gap-4",children:["easy","medium","hard"].map(D=>e.jsx("button",{onClick:()=>x(D),className:`flex-1 py-4 rounded-2xl font-bold transition-all border ${o===D?"bg-cyan-500 text-slate-900 border-cyan-400 shadow-xl":"bg-slate-900/50 border-slate-700 text-slate-500 hover:border-slate-500"}`,children:D==="easy"?"ì‰¬ì›€(3)":D==="medium"?"ë³´í†µ(5)":"ì–´ë ¤ì›€(8)"},D))})]}),e.jsx("button",{onClick:()=>P(),disabled:!c||n,className:"w-full py-6 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-black rounded-2xl text-xl disabled:opacity-30 disabled:cursor-not-allowed transform active:scale-95 transition-all shadow-xl shadow-blue-600/30",children:n?"AI ê°€ ì„¸ê³„ë¥¼ ì„¤ê³„ ì¤‘...":"í›ˆë ¨ í™˜ê²½ ìƒì„± ë° ì‹œìž‘"})]}),e.jsx("button",{onClick:()=>a(ee.MODE_SELECT),className:"mt-8 text-slate-500 hover:text-white transition-colors",children:"â† ë’¤ë¡œ ê°€ê¸°"})]}),Ie=()=>{if(!f)return null;const D=o==="easy"?3:o==="medium"?5:8;return e.jsxs("div",{className:"flex flex-col items-center pt-28 pb-12 px-6 w-full max-w-7xl mx-auto animate-in fade-in duration-500",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row justify-between items-center gap-8 mb-10 glass p-6 rounded-3xl border-b-4 border-emerald-500 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"text-center bg-slate-900/80 px-6 py-3 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Duration"}),e.jsxs("div",{className:"text-2xl font-mono font-bold text-white",children:[A,"s"]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("span",{className:"text-xs font-black text-slate-400 uppercase",children:"Progress"}),e.jsxs("span",{className:"text-xl font-bold text-emerald-400",children:[y.length," / ",D]})]}),e.jsx("div",{className:"w-full h-3 bg-slate-900/50 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-600 to-emerald-400 transition-all duration-700 ease-out shadow-[0_0_15px_rgba(16,185,129,0.5)]",style:{width:`${y.length/D*100}%`}})})]})]}),e.jsx("div",{className:"text-slate-400 text-sm font-medium animate-pulse px-6 py-3 bg-slate-900/50 rounded-full border border-white/5",children:"ìš°ì¸¡ ì´ë¯¸ì§€ì˜ ë‹¤ë¥¸ ë¶€ë¶„ì„ ì°¾ì•„ í„°ì¹˜í•˜ì„¸ìš”!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 w-full relative",children:[e.jsxs("div",{className:"relative group rounded-[2.5rem] overflow-hidden border-2 border-white/5 shadow-2xl",children:[e.jsx("img",{src:f.originalImage,className:"w-full h-full object-cover select-none pointer-events-none transition-transform duration-1000 group-hover:scale-105",alt:"Original"}),e.jsx("div",{className:"absolute top-6 left-6 px-4 py-2 bg-black/60 backdrop-blur-md rounded-xl text-[10px] font-black uppercase tracking-widest border border-white/10",children:"Reference View"}),y.map(l=>e.jsx("div",{className:"absolute w-14 h-14 border-4 border-emerald-400/40 rounded-full -translate-x-1/2 -translate-y-1/2 animate-in zoom-in duration-300",style:{left:`${l.x}%`,top:`${l.y}%`}},`orig-${l.id}`))]}),e.jsxs("div",{className:"relative rounded-[2.5rem] overflow-hidden border-4 border-emerald-500/20 shadow-2xl cursor-crosshair group active:scale-[0.99] transition-transform bg-slate-900",onClick:b,children:[e.jsx("img",{src:f.modifiedImage,className:"w-full h-full object-cover select-none pointer-events-none transition-transform duration-1000 group-hover:scale-105",alt:"Target"}),e.jsx("div",{className:"absolute top-6 left-6 px-4 py-2 bg-emerald-500/60 backdrop-blur-md rounded-xl text-[10px] font-black uppercase tracking-widest border border-emerald-400/20 shadow-lg",children:"Target View"}),y.map(l=>e.jsx("div",{className:"absolute w-14 h-14 border-4 border-emerald-400 rounded-full -translate-x-1/2 -translate-y-1/2 flex items-center justify-center animate-in zoom-in duration-300 shadow-[0_0_20px_rgba(52,211,153,0.6)]",style:{left:`${l.x}%`,top:`${l.y}%`},children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-ping"})},`target-${l.id}`)),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"absolute inset-0 border-[30px] border-emerald-500/5"})})]})]}),e.jsx("button",{onClick:()=>C(!1,y.length,D),className:"mt-12 px-10 py-4 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white border border-red-500/20 rounded-2xl font-bold transition-all text-sm uppercase tracking-widest",children:"í›ˆë ¨ ì¤‘ë‹¨í•˜ê¸°"})]})},be=()=>e.jsxs("div",{className:"flex flex-col items-center pt-28 pb-12 px-6 w-full max-w-4xl mx-auto animate-in slide-in-from-bottom-10 duration-700",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-black mb-4",children:"ë‚˜ì˜ í›ˆë ¨ ê¸°ë¡"}),e.jsx("p",{className:"text-slate-400",children:"ë‹¹ì‹ ì˜ ì§‘ì¤‘ë ¥ì´ ì–´ë–»ê²Œ ë³€í•˜ê³  ìžˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”."})]}),S.length===0?e.jsxs("div",{className:"glass p-12 rounded-[2rem] text-center w-full",children:[e.jsx("p",{className:"text-slate-500 text-lg",children:"ì•„ì§ ê¸°ë¡ëœ í›ˆë ¨ì´ ì—†ìŠµë‹ˆë‹¤. ì²« í›ˆë ¨ì„ ì‹œìž‘í•´ë³´ì„¸ìš”!"}),e.jsx("button",{onClick:()=>a(ee.MODE_SELECT),className:"mt-6 px-8 py-3 bg-emerald-500 text-slate-900 font-bold rounded-xl hover:bg-emerald-400 transition-all",children:"í›ˆë ¨í•˜ëŸ¬ ê°€ê¸°"})]}):e.jsx("div",{className:"w-full space-y-4",children:S.map((D,l)=>e.jsxs("div",{className:"glass p-6 rounded-2xl border-l-4 border-emerald-500 flex justify-between items-center group hover:bg-slate-800/50 transition-all",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black text-slate-500 uppercase mb-1",children:D.mode===Be.CLASSIC?"Classic Mode":"AI Custom Mode"}),e.jsx("div",{className:"text-xl font-bold text-white",children:new Date(D.startTime).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"text-right flex items-center gap-6",children:[e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Accuracy"}),e.jsxs("div",{className:"text-lg font-bold text-emerald-400",children:[D.accuracy,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Found"}),e.jsxs("div",{className:"text-lg font-bold text-cyan-400",children:[D.foundCount," / ",D.totalRequired]})]})]})]},l))}),e.jsx("button",{onClick:()=>a(ee.HOME),className:"mt-12 text-slate-500 hover:text-white transition-colors",children:"â† í™ˆìœ¼ë¡œ"})]}),_=()=>e.jsxs("div",{className:"flex flex-col items-center pt-28 pb-12 px-6 w-full max-w-3xl mx-auto animate-in fade-in duration-700",children:[e.jsxs("div",{className:"glass p-12 rounded-[3rem] w-full space-y-10 border-t-8 border-cyan-500 shadow-2xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-black mb-4",children:"í›ˆë ¨ ê°€ì´ë“œ"}),e.jsx("p",{className:"text-slate-400 leading-relaxed italic",children:'"ê´€ì°°ì€ ì²œìž¬ì„±ì˜ ì²« ë²ˆì§¸ ì›ì¹™ì´ë‹¤."'})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 text-emerald-400 flex items-center justify-center font-black",children:"1"}),"ì™œ ì´ í›ˆë ¨ì´ í•„ìš”í•œê°€ìš”?"]}),e.jsx("p",{className:"text-slate-400 leading-relaxed text-sm",children:"ìˆí¼ ì½˜í…ì¸ ëŠ” ë‡Œì˜ 'ìˆ˜ë™ì  ì£¼ì˜ë ¥'ë§Œì„ ìžê·¹í•˜ì—¬ ê¹Šì€ ì‚¬ê³ ì™€ ìž¥ê¸°ì ì¸ ëª°ìž…ì„ ë°©í•´í•©ë‹ˆë‹¤. í‹€ë¦°ê·¸ë¦¼ì°¾ê¸°ëŠ” ë‹¹ì‹ ì˜ ì „ë‘ì—½ì„ ì‚¬ìš©í•˜ì—¬ ì˜ë„ì ìœ¼ë¡œ ëŒ€ìƒì„ íƒìƒ‰í•˜ê²Œ í•¨ìœ¼ë¡œì¨, ë¶€ì„œì§„ ì§‘ì¤‘ë ¥ì„ ë‹¤ì‹œ ê²°í•©í•˜ëŠ” í›Œë¥­í•œ ë‘ë‡Œ ìš´ë™ìž…ë‹ˆë‹¤."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-cyan-500/20 text-cyan-400 flex items-center justify-center font-black",children:"2"}),"ì–´ë–»ê²Œ í›ˆë ¨í•˜ë‚˜ìš”?"]}),e.jsxs("ul",{className:"space-y-3 text-sm text-slate-400",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-500 font-bold",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ì´ë¯¸ì§€ í›‘ê¸°:"})," ì‹œì„ ì„ ì§€ê·¸ìž¬ê·¸ë¡œ ì›€ì§ì´ë©° ì „ì²´ì ì¸ êµ¬ì„±ì„ ë¨¼ì € íŒŒì•…í•˜ì„¸ìš”."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-500 font-bold",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ëŒ€ì¡°í•˜ê¸°:"})," ì™¼ìª½ì˜ ì›ë³¸(Ref)ê³¼ ì˜¤ë¥¸ìª½ì˜ ëª©í‘œ(Target)ë¥¼ ë²ˆê°ˆì•„ ë³´ë©° ì„¸ë¶€ ì‚¬í•­ì„ ëŒ€ì¡°í•©ë‹ˆë‹¤."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-500 font-bold",children:"â€¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"í„°ì¹˜í•˜ê¸°:"})," ìš°ì¸¡ ì´ë¯¸ì§€ì—ì„œ ì°¨ì´ì ì„ ë°œê²¬í•˜ë©´ ì¦‰ì‹œ í„°ì¹˜í•˜ì„¸ìš”."]})]})]})]})]}),e.jsx("button",{onClick:()=>{Le.playClick(),a(ee.MODE_SELECT)},className:"w-full py-5 bg-gradient-to-r from-emerald-500 to-cyan-500 text-slate-900 font-black rounded-2xl text-lg hover:shadow-xl hover:shadow-cyan-500/20 transition-all",children:"ì§€ê¸ˆ ë°”ë¡œ ì‹œìž‘í•˜ê¸°"})]}),e.jsx("button",{onClick:()=>a(ee.HOME),className:"mt-12 text-slate-500 hover:text-white transition-colors",children:"â† í™ˆìœ¼ë¡œ"})]}),z=()=>U?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4 w-full animate-in zoom-in-95 duration-700",children:e.jsxs("div",{className:"glass max-w-xl w-full p-12 rounded-[3rem] text-center space-y-10 border-t-8 border-emerald-500 shadow-2xl",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-emerald-400 font-black text-xs tracking-widest uppercase tracking-widest",children:"Training Summary"}),e.jsx("h2",{className:"text-4xl font-black",children:"í›ˆë ¨ ì„±ê³µ!"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"text-slate-500 text-[10px] mb-1 uppercase font-black",children:"ì§‘ì¤‘ ì‹œê°„"}),e.jsxs("div",{className:"text-3xl font-bold",children:[A,"s"]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-white/5",children:[e.jsx("div",{className:"text-slate-500 text-[10px] mb-1 uppercase font-black",children:"ì •í™•ë„"}),e.jsxs("div",{className:"text-3xl font-bold text-emerald-400",children:[U.accuracy,"%"]})]})]}),e.jsx("div",{className:"text-xl italic font-medium text-emerald-300 leading-relaxed bg-emerald-500/5 p-8 rounded-3xl",children:U.success?"ì™„ë²½í•©ë‹ˆë‹¤! ë‹¹ì‹ ì˜ ë‡Œê°€ ìƒˆë¡œìš´ ëª°ìž…ì˜ ê²½ë¡œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.":"í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”. ê³¼ì • ìžì²´ê°€ ë‡Œì˜ ê°€ì†Œì„±ì„ ë†’ì—¬ì¤ë‹ˆë‹¤."}),f&&e.jsxs("div",{className:"text-left bg-slate-900/50 p-8 rounded-[2rem] border border-white/5 space-y-4",children:[e.jsx("h4",{className:"font-black text-[10px] text-slate-500 uppercase tracking-widest",children:"AIê°€ ìˆ¨ê²¨ë‘” ì •ë‹µ ë¶„ì„"}),e.jsx("ul",{className:"space-y-3 text-sm text-slate-300",children:f.differencesDescription.map((D,l)=>e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsxs("span",{className:"text-emerald-500 font-bold",children:[l+1,"."]}),e.jsx("span",{className:"leading-tight",children:D})]},l))})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("button",{onClick:()=>{Le.playClick(),a(ee.MODE_SELECT)},className:"w-full py-5 bg-emerald-500 text-slate-900 font-black rounded-2xl hover:bg-emerald-400 transition-all shadow-xl shadow-emerald-500/30",children:"ë‹¤ë¥¸ ì½”ìŠ¤ ë„ì „í•˜ê¸°"}),e.jsx("button",{onClick:()=>{Le.playClick(),a(ee.HOME)},className:"w-full py-5 bg-slate-900 text-slate-400 font-black rounded-2xl hover:text-white transition-all border border-white/5",children:"ë©”ì¸ í™”ë©´ìœ¼ë¡œ"})]})]})}):null,F=()=>{switch(t){case ee.HOME:return $();case ee.MODE_SELECT:return q();case ee.CLASSIC_LEVELS:return Q();case ee.AI_CUSTOM_INPUT:return de();case ee.GAME:return Ie();case ee.REPORT:return z();case ee.HISTORY:return be();case ee.GUIDE:return _();default:return $()}};return e.jsxs("div",{className:"min-h-screen pb-12 overflow-x-hidden selection:bg-emerald-500 selection:text-slate-900",children:[e.jsx(gn,{onHome:()=>{Le.playClick(),a(ee.HOME)},onHistory:()=>{Le.playClick(),a(ee.HISTORY)},onGuide:()=>{Le.playClick(),a(ee.GUIDE)}}),e.jsx("main",{className:"container mx-auto",children:F()}),n&&e.jsxs("div",{className:"fixed inset-0 z-[100] glass flex flex-col items-center justify-center gap-10 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 border-4 border-emerald-500/20 rounded-full"}),e.jsx("div",{className:"w-24 h-24 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin absolute top-0 left-0 shadow-[0_0_30px_rgba(16,185,129,0.3)]"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("h3",{className:"text-3xl font-black text-white",children:"AIê°€ ì •ë°€í•œ ì„¸ìƒì„ ìƒì„± ì¤‘ìž…ë‹ˆë‹¤"}),e.jsx("p",{className:"text-slate-400 animate-pulse-soft italic max-w-sm px-6",children:'"ì•Œê³ ë¦¬ì¦˜ì´ ì§€ë°°í•˜ëŠ” ë‡Œë¥¼ ë‹¹ì‹ ì˜ ì˜ì§€ë¡œ íƒˆí™˜í•˜ëŠ” ê³¼ì •ìž…ë‹ˆë‹¤. ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”."'})]})]})]})};function jn(){return e.jsx(As,{basename:"/test_myReactProject",children:e.jsxs(Ms,{children:[e.jsxs(ke,{path:"/",element:e.jsx(_s,{}),children:[e.jsx(ke,{index:!0,element:e.jsx($s,{})}),e.jsx(ke,{path:"DilemmaSimulator",element:e.jsx(Vs,{})}),e.jsx(ke,{path:"myCard",element:e.jsx(Ks,{})}),e.jsx(ke,{path:"gacha",element:e.jsx(Ua,{})}),e.jsx(ke,{path:"Last_night",element:e.jsx(xr,{})}),e.jsx(ke,{path:"mordern",element:e.jsx(gr,{})}),e.jsx(ke,{path:"word",element:e.jsx(Sr,{})}),e.jsx(ke,{path:"word2",element:e.jsx(Ir,{})}),e.jsx(ke,{path:"click_war",element:e.jsx(Fr,{})}),e.jsx(ke,{path:"friend",element:e.jsx(zr,{})}),e.jsx(ke,{path:"math",element:e.jsx(an,{})}),e.jsx(ke,{path:"AI_voca",element:e.jsx(cn,{})}),e.jsx(ke,{path:"snake_game",element:e.jsx(pn,{})})]}),e.jsx(ke,{path:"Dlab",element:e.jsx(wn,{})})]})})}const Zt=document.getElementById("root");if(!Zt)throw new Error("Could not find root element to mount to");const vn=Is.createRoot(Zt);vn.render(e.jsx(Je.StrictMode,{children:e.jsx(jn,{})}));
